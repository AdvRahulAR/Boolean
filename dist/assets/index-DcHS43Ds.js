var fD=Object.defineProperty;var KC=o=>{throw TypeError(o)};var pD=(o,e,t)=>e in o?fD(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var he=(o,e,t)=>pD(o,typeof e!="symbol"?e+"":e,t),I0=(o,e,t)=>e.has(o)||KC("Cannot "+t);var p=(o,e,t)=>(I0(o,e,"read from private field"),t?t.call(o):e.get(o)),M=(o,e,t)=>e.has(o)?KC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),w=(o,e,t,n)=>(I0(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t),R=(o,e,t)=>(I0(o,e,"access private method"),t);var Dn=(o,e,t,n)=>({set _(i){w(o,e,i,t)},get _(){return p(o,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var xh={};xh.d=(o,e)=>{for(var t in e)xh.o(e,t)&&!xh.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})};xh.o=(o,e)=>Object.prototype.hasOwnProperty.call(o,e);var ke=globalThis.pdfjsLib={};xh.d(ke,{AbortException:()=>Jr,AnnotationEditorLayer:()=>tb,AnnotationEditorParamsType:()=>Ke,AnnotationEditorType:()=>Oe,AnnotationEditorUIManager:()=>Pl,AnnotationLayer:()=>cN,AnnotationMode:()=>Ar,ColorPicker:()=>Sm,DOMSVGFactory:()=>Pb,DrawLayer:()=>sb,FeatureTest:()=>Fn,GlobalWorkerOptions:()=>Ba,ImageKind:()=>Fg,InvalidPDFException:()=>X0,MissingPDFException:()=>Nh,OPS:()=>ji,OutputScale:()=>Z0,PDFDataRangeTransport:()=>r1,PDFDateString:()=>Db,PDFWorker:()=>zc,PasswordResponses:()=>vD,PermissionFlag:()=>yD,PixelsPerInch:()=>jr,RenderingCancelledException:()=>Rb,TextLayer:()=>Lh,TouchManager:()=>bm,UnexpectedResponseException:()=>ym,Util:()=>Te,VerbosityLevel:()=>iy,XfaLayer:()=>l1,build:()=>Gk,createValidAbsoluteUrl:()=>SD,fetchData:()=>oy,getDocument:()=>Lk,getFilenameFromUrl:()=>DD,getPdfFilenameFromUrl:()=>kD,getXfaPageViewport:()=>ND,isDataScheme:()=>ly,isPdfFile:()=>Ib,noContextMenu:()=>ps,normalizeUnicode:()=>MD,setLayerDimensions:()=>Ll,shadow:()=>Ye,stopEvent:()=>Ci,version:()=>zk});const Rn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ax=[1,0,0,1,0,0],W0=[.001,0,0,.001,0,0],gD=1e7,D0=1.35,_i={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ar={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},mD="pdfjs_internal_editor_",Oe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},yD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Fg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Wt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},jd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},iy={ERRORS:0,WARNINGS:1,INFOS:5},ji={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},vD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let sy=iy.WARNINGS;function AD(o){Number.isInteger(o)&&(sy=o)}function bD(){return sy}function ay(o){sy>=iy.INFOS&&console.log(`Info: ${o}`)}function Fe(o){sy>=iy.WARNINGS&&console.log(`Warning: ${o}`)}function yt(o){throw new Error(o)}function Gt(o,e){o||yt(e)}function _D(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function SD(o,e=null,t=null){if(!o)return null;try{if(t&&typeof o=="string"){if(t.addDefaultProtocol&&o.startsWith("www.")){const i=o.match(/\./g);(i==null?void 0:i.length)>=2&&(o=`http://${o}`)}if(t.tryConvertEncoding)try{o=xD(o)}catch{}}const n=e?new URL(o,e):new URL(o);if(_D(n))return n}catch{}return null}function Ye(o,e,t,n=!1){return Object.defineProperty(o,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const no=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class ZC extends no{constructor(e,t){super(e,"PasswordException"),this.code=t}}class k0 extends no{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class X0 extends no{constructor(e){super(e,"InvalidPDFException")}}class Nh extends no{constructor(e){super(e,"MissingPDFException")}}class ym extends no{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class TD extends no{constructor(e){super(e,"FormatError")}}class Jr extends no{constructor(e){super(e,"AbortException")}}function rx(o){(typeof o!="object"||(o==null?void 0:o.length)===void 0)&&yt("Invalid argument for bytesToString");const e=o.length,t=8192;if(e<t)return String.fromCharCode.apply(null,o);const n=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),l=o.subarray(i,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function ry(o){typeof o!="string"&&yt("Invalid argument for stringToBytes");const e=o.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=o.charCodeAt(n)&255;return t}function CD(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function xb(o){const e=Object.create(null);for(const[t,n]of o)e[t]=n;return e}function wD(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function ED(){try{return new Function(""),!0}catch{return!1}}class Fn{static get isLittleEndian(){return Ye(this,"isLittleEndian",wD())}static get isEvalSupported(){return Ye(this,"isEvalSupported",ED())}static get isOffscreenCanvasSupported(){return Ye(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ye(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ye(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ye(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Ye(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const N0=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));var Va,Ug,K0;class Te{static makeHexColor(e,t,n){return`#${N0[e]}${N0[t]}${N0[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[n,i]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[i,a]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),l=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],a[0],l[0]),Math.min(n[1],i[1],a[1],l[1]),Math.max(n[0],i[0],a[0],l[0]),Math.max(n[1],i[1],a[1],l[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],u=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-a*i))/2,f=u+d||1,y=u-d||1;return[Math.sqrt(f),Math.sqrt(y)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>l?null:[n,a,i,l]}static bezierBoundingBox(e,t,n,i,a,l,u,d,f){return f?(f[0]=Math.min(f[0],e,u),f[1]=Math.min(f[1],t,d),f[2]=Math.max(f[2],e,u),f[3]=Math.max(f[3],t,d)):f=[Math.min(e,u),Math.min(t,d),Math.max(e,u),Math.max(t,d)],R(this,Va,K0).call(this,e,n,a,u,t,i,l,d,3*(-e+3*(n-a)+u),6*(e-2*n+a),3*(n-e),f),R(this,Va,K0).call(this,e,n,a,u,t,i,l,d,3*(-t+3*(i-l)+d),6*(t-2*i+l),3*(i-t),f),f}}Va=new WeakSet,Ug=function(e,t,n,i,a,l,u,d,f,y){if(f<=0||f>=1)return;const A=1-f,_=f*f,S=_*f,T=A*(A*(A*e+3*f*t)+3*_*n)+S*i,C=A*(A*(A*a+3*f*l)+3*_*u)+S*d;y[0]=Math.min(y[0],T),y[1]=Math.min(y[1],C),y[2]=Math.max(y[2],T),y[3]=Math.max(y[3],C)},K0=function(e,t,n,i,a,l,u,d,f,y,A,_){if(Math.abs(f)<1e-12){Math.abs(y)>=1e-12&&R(this,Va,Ug).call(this,e,t,n,i,a,l,u,d,-A/y,_);return}const S=y**2-4*A*f;if(S<0)return;const T=Math.sqrt(S),C=2*f;R(this,Va,Ug).call(this,e,t,n,i,a,l,u,d,(-y+T)/C,_),R(this,Va,Ug).call(this,e,t,n,i,a,l,u,d,(-y-T)/C,_)},M(Te,Va);function xD(o){return decodeURIComponent(escape(o))}let L0=null,QC=null;function MD(o){return L0||(L0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,QC=new Map([["ﬅ","ſt"]])),o.replaceAll(L0,(e,t,n)=>t?t.normalize("NFKC"):QC.get(n))}function RD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const o=new Uint8Array(32);return crypto.getRandomValues(o),rx(o)}const Mb="pdfjs_internal_id_";function ID(o){return Uint8Array.prototype.toBase64?o.toBase64():btoa(rx(o))}typeof Promise.try!="function"&&(Promise.try=function(o,...e){return new Promise(t=>{t(o(...e))})});const ua="http://www.w3.org/2000/svg",Mo=class Mo{};he(Mo,"CSS",96),he(Mo,"PDF",72),he(Mo,"PDF_TO_CSS_UNITS",Mo.CSS/Mo.PDF);let jr=Mo;async function oy(o,e="text"){if(ch(o,document.baseURI)){const t=await fetch(o);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class cp{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:a=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=l,n*=t;const d=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let y,A,_,S;switch(i%=360,i<0&&(i+=360),i){case 180:y=-1,A=0,_=0,S=1;break;case 90:y=0,A=1,_=1,S=0;break;case 270:y=0,A=-1,_=-1,S=0;break;case 0:y=1,A=0,_=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(_=-_,S=-S);let T,C,x,D;y===0?(T=Math.abs(f-e[1])*n+a,C=Math.abs(d-e[0])*n+l,x=(e[3]-e[1])*n,D=(e[2]-e[0])*n):(T=Math.abs(d-e[0])*n+a,C=Math.abs(f-e[1])*n+l,x=(e[2]-e[0])*n,D=(e[3]-e[1])*n),this.transform=[y*n,A*n,_*n,S*n,T-y*n*d-_*n*f,C-A*n*d-S*n*f],this.width=x,this.height=D}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(i=>i*e);return Ye(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new cp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){return Te.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Te.applyTransform([e[0],e[1]],this.transform),n=Te.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Te.applyInverseTransform([e,t],this.transform)}}class Rb extends no{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ly(o){const e=o.length;let t=0;for(;t<e&&o[t].trim()==="";)t++;return o.substring(t,t+5).toLowerCase()==="data:"}function Ib(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function DD(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function kD(o,e="document.pdf"){if(typeof o!="string")return e;if(ly(o))return Fe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(o);let a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||e}class JC{constructor(){he(this,"started",Object.create(null));he(this,"times",[])}time(e){e in this.started&&Fe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Fe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-i}ms
`);return e.join("")}}function ch(o,e){try{const{protocol:t}=e?new URL(o,e):new URL(o);return t==="http:"||t==="https:"}catch{return!1}}function ps(o){o.preventDefault()}function Ci(o){o.preventDefault(),o.stopPropagation()}var Fh;class Db{static toDateObject(e){if(!e||typeof e!="string")return null;p(this,Fh)||w(this,Fh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=p(this,Fh).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const f=t[7]||"Z";let y=parseInt(t[8],10);y=y>=0&&y<=23?y:0;let A=parseInt(t[9],10)||0;return A=A>=0&&A<=59?A:0,f==="-"?(l+=y,u+=A):f==="+"&&(l-=y,u-=A),new Date(Date.UTC(n,i,a,l,u,d))}}Fh=new WeakMap,M(Db,Fh);function ND(o,{scale:e=1,rotation:t=0}){const{width:n,height:i}=o.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new cp({viewBox:a,userUnit:1,scale:e,rotation:t})}function kb(o){if(o.startsWith("#")){const e=parseInt(o.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(e=>parseInt(e)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Fe(`Not a valid color format: "${o}"`),[0,0,0])}function LD(o){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of o.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;o.set(t,kb(n))}e.remove()}function Ct(o){const{a:e,b:t,c:n,d:i,e:a,f:l}=o.getTransform();return[e,t,n,i,a,l]}function Ss(o){const{a:e,b:t,c:n,d:i,e:a,f:l}=o.getTransform().invertSelf();return[e,t,n,i,a,l]}function Ll(o,e,t=!1,n=!0){if(e instanceof cp){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:l}=o,u=Fn.isCSSRoundSupported,d=`var(--scale-factor) * ${i}px`,f=`var(--scale-factor) * ${a}px`,y=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,A=u?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!t||e.rotation%180===0?(l.width=y,l.height=A):(l.width=A,l.height=y)}n&&o.setAttribute("data-main-rotation",e.rotation)}class Z0{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var br,Io,es,Do,Uh,Hh,Um,ox,Un,lx,cx,Hg,ux,J0;const fa=class fa{constructor(e){M(this,Un);M(this,br,null);M(this,Io,null);M(this,es);M(this,Do,null);M(this,Uh,null);w(this,es,e),p(fa,Hh)||w(fa,Hh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=w(this,br,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=p(this,es)._uiManager._signal;e.addEventListener("contextmenu",ps,{signal:t}),e.addEventListener("pointerdown",R(fa,Um,ox),{signal:t});const n=w(this,Do,document.createElement("div"));n.className="buttons",e.append(n);const i=p(this,es).toolbarPosition;if(i){const{style:a}=e,l=p(this,es)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return R(this,Un,ux).call(this),e}get div(){return p(this,br)}hide(){var e;p(this,br).classList.add("hidden"),(e=p(this,Io))==null||e.hideDropdown()}show(){var e;p(this,br).classList.remove("hidden"),(e=p(this,Uh))==null||e.shown()}async addAltText(e){const t=await e.render();R(this,Un,Hg).call(this,t),p(this,Do).prepend(t,p(this,Un,J0)),w(this,Uh,e)}addColorPicker(e){w(this,Io,e);const t=e.renderButton();R(this,Un,Hg).call(this,t),p(this,Do).prepend(t,p(this,Un,J0))}remove(){var e;p(this,br).remove(),(e=p(this,Io))==null||e.destroy(),w(this,Io,null)}};br=new WeakMap,Io=new WeakMap,es=new WeakMap,Do=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,Um=new WeakSet,ox=function(e){e.stopPropagation()},Un=new WeakSet,lx=function(e){p(this,es)._focusEventsAllowed=!1,Ci(e)},cx=function(e){p(this,es)._focusEventsAllowed=!0,Ci(e)},Hg=function(e){const t=p(this,es)._uiManager._signal;e.addEventListener("focusin",R(this,Un,lx).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",R(this,Un,cx).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ps,{signal:t})},ux=function(){const{editorType:e,_uiManager:t}=p(this,es),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",p(fa,Hh)[e]),R(this,Un,Hg).call(this,n),n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),p(this,Do).append(n)},J0=function(){const e=document.createElement("div");return e.className="divider",e},M(fa,Um),M(fa,Hh,null);let Q0=fa;var Bh,ko,No,to,dx,hx,fx;class PD{constructor(e){M(this,to);M(this,Bh,null);M(this,ko,null);M(this,No);w(this,No,e)}show(e,t,n){const[i,a]=R(this,to,hx).call(this,t,n),{style:l}=p(this,ko)||w(this,ko,R(this,to,dx).call(this));e.append(p(this,ko)),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,ko).remove()}}Bh=new WeakMap,ko=new WeakMap,No=new WeakMap,to=new WeakSet,dx=function(){const e=w(this,ko,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ps,{signal:p(this,No)._signal});const t=w(this,Bh,document.createElement("div"));return t.className="buttons",e.append(t),R(this,to,fx).call(this),e},hx=function(e,t){let n=0,i=0;for(const a of e){const l=a.y+a.height;if(l<n)continue;const u=a.x+(t?a.width:0);if(l>n){i=u,n=l;continue}t?u>i&&(i=u):u<i&&(i=u)}return[t?1-i:i,n]},fx=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=p(this,No)._signal;e.addEventListener("contextmenu",ps,{signal:n}),e.addEventListener("click",()=>{p(this,No).highlightSelection("floating_button")},{signal:n}),p(this,Bh).append(e)};function vm(o,e,t){for(const n of t)e.addEventListener(n,o[n].bind(o))}var Hm;class OD{constructor(){M(this,Hm,0)}get id(){return`${mD}${Dn(this,Hm)._++}`}}Hm=new WeakMap;var Gc,Vh,Cn,qc,Bg;const Qb=class Qb{constructor(){M(this,qc);M(this,Gc,RD());M(this,Vh,0);M(this,Cn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ye(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return R(this,qc,Bg).call(this,`${t}_${n}_${i}_${a}`,e)}async getFromUrl(e){return R(this,qc,Bg).call(this,e,e)}async getFromBlob(e,t){const n=await t;return R(this,qc,Bg).call(this,e,n)}async getFromId(e){p(this,Cn)||w(this,Cn,new Map);const t=p(this,Cn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){p(this,Cn)||w(this,Cn,new Map);let n=p(this,Cn).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${p(this,Gc)}_${Dn(this,Vh)._++}`,refCounter:1,isSvg:!1},p(this,Cn).set(e,n),p(this,Cn).set(n.id,n),n}getSvgUrl(e){const t=p(this,Cn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;p(this,Cn)||w(this,Cn,new Map);const t=p(this,Cn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${p(this,Gc)}_`)}};Gc=new WeakMap,Vh=new WeakMap,Cn=new WeakMap,qc=new WeakSet,Bg=async function(e,t){p(this,Cn)||w(this,Cn,new Map);let n=p(this,Cn).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${p(this,Gc)}_${Dn(this,Vh)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await oy(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=Qb._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,y)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const A=n.svgUrl=l.result;u.src=await a?`${A}#svgView(preserveAspectRatio(none))`:A},u.onerror=l.onerror=y});l.readAsDataURL(i),await d}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Fe(i),n=null}return p(this,Cn).set(e,n),n&&p(this,Cn).set(n.id,n),n};let j0=Qb;var Ot,_r,zh,xt;class FD{constructor(e=128){M(this,Ot,[]);M(this,_r,!1);M(this,zh);M(this,xt,-1);w(this,zh,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(i&&e(),p(this,_r))return;const d={cmd:e,undo:t,post:n,type:a};if(p(this,xt)===-1){p(this,Ot).length>0&&(p(this,Ot).length=0),w(this,xt,0),p(this,Ot).push(d);return}if(l&&p(this,Ot)[p(this,xt)].type===a){u&&(d.undo=p(this,Ot)[p(this,xt)].undo),p(this,Ot)[p(this,xt)]=d;return}const f=p(this,xt)+1;f===p(this,zh)?p(this,Ot).splice(0,1):(w(this,xt,f),f<p(this,Ot).length&&p(this,Ot).splice(f)),p(this,Ot).push(d)}undo(){if(p(this,xt)===-1)return;w(this,_r,!0);const{undo:e,post:t}=p(this,Ot)[p(this,xt)];e(),t==null||t(),w(this,_r,!1),w(this,xt,p(this,xt)-1)}redo(){if(p(this,xt)<p(this,Ot).length-1){w(this,xt,p(this,xt)+1),w(this,_r,!0);const{cmd:e,post:t}=p(this,Ot)[p(this,xt)];e(),t==null||t(),w(this,_r,!1)}}hasSomethingToUndo(){return p(this,xt)!==-1}hasSomethingToRedo(){return p(this,xt)<p(this,Ot).length-1}cleanType(e){if(p(this,xt)!==-1){for(let t=p(this,xt);t>=0;t--)if(p(this,Ot)[t].type!==e){p(this,Ot).splice(t+1,p(this,xt)-t),w(this,xt,t);return}p(this,Ot).length=0,w(this,xt,-1)}}destroy(){w(this,Ot,null)}}Ot=new WeakMap,_r=new WeakMap,zh=new WeakMap,xt=new WeakMap;var Bm,px;class up{constructor(e){M(this,Bm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Fn.platform;for(const[n,i,a={}]of e)for(const l of n){const u=l.startsWith("mac+");t&&u?(this.callbacks.set(l.slice(4),{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1))):!t&&!u&&(this.callbacks.set(l,{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(R(this,Bm,px).call(this,t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:l=[],checker:u=null}}=n;u&&!u(e,t)||(i.bind(e,...l,t)(),a||Ci(t))}}Bm=new WeakSet,px=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Vm=class Vm{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return LD(e),Ye(this,"_colors",e)}convert(e){const t=kb(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((a,l)=>a===t[l]))return Vm._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Te.makeHexColor(...t):e}};he(Vm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let eA=Vm;var $c,ci,Kt,hn,Yc,ga,Wc,Oi,Sr,Lo,Xc,Po,ws,ts,Oo,Gh,qh,Kc,$h,Es,Tr,Zc,Cr,xs,zm,wr,Yh,Er,Fo,Wh,Xh,nn,lt,ma,Uo,Kh,Zh,xr,Ms,ya,Qh,Fi,de,Vg,tA,gx,mx,zg,yx,vx,Ax,nA,bx,iA,sA,_x,kn,da,Sx,Tx,aA,Cx,uh,rA;const Hc=class Hc{constructor(e,t,n,i,a,l,u,d,f,y,A,_,S){M(this,de);M(this,$c,new AbortController);M(this,ci,null);M(this,Kt,new Map);M(this,hn,new Map);M(this,Yc,null);M(this,ga,null);M(this,Wc,null);M(this,Oi,new FD);M(this,Sr,null);M(this,Lo,null);M(this,Xc,0);M(this,Po,new Set);M(this,ws,null);M(this,ts,null);M(this,Oo,new Set);he(this,"_editorUndoBar",null);M(this,Gh,!1);M(this,qh,!1);M(this,Kc,!1);M(this,$h,null);M(this,Es,null);M(this,Tr,null);M(this,Zc,null);M(this,Cr,!1);M(this,xs,null);M(this,zm,new OD);M(this,wr,!1);M(this,Yh,!1);M(this,Er,null);M(this,Fo,null);M(this,Wh,null);M(this,Xh,null);M(this,nn,Oe.NONE);M(this,lt,new Set);M(this,ma,null);M(this,Uo,null);M(this,Kh,null);M(this,Zh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,xr,[0,0]);M(this,Ms,null);M(this,ya,null);M(this,Qh,null);M(this,Fi,null);const T=this._signal=p(this,$c).signal;w(this,ya,e),w(this,Qh,t),w(this,Yc,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:T}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),i._on("setpreference",this.onSetPreference.bind(this),{signal:T}),i._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:T}),R(this,de,yx).call(this),R(this,de,_x).call(this),R(this,de,nA).call(this),w(this,ga,a.annotationStorage),w(this,$h,a.filterFactory),w(this,Uo,l),w(this,Zc,u||null),w(this,Gh,d),w(this,qh,f),w(this,Kc,y),w(this,Xh,A||null),this.viewParameters={realScale:jr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=S!==!1}static get _keyboardManager(){const e=Hc.prototype,t=l=>p(l,ya).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Ye(this,"_keyboardManager",new up([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&p(l,ya).contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&p(l,ya).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,n,i,a;(e=p(this,Fi))==null||e.resolve(),w(this,Fi,null),(t=p(this,$c))==null||t.abort(),w(this,$c,null),this._signal=null;for(const l of p(this,hn).values())l.destroy();p(this,hn).clear(),p(this,Kt).clear(),p(this,Oo).clear(),w(this,ci,null),p(this,lt).clear(),p(this,Oi).destroy(),(n=p(this,Yc))==null||n.destroy(),(i=p(this,xs))==null||i.hide(),w(this,xs,null),p(this,Es)&&(clearTimeout(p(this,Es)),w(this,Es,null)),p(this,Ms)&&(clearTimeout(p(this,Ms)),w(this,Ms,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return p(this,Xh)}get useNewAltTextFlow(){return p(this,qh)}get useNewAltTextWhenAddingImage(){return p(this,Kc)}get hcmFilter(){return Ye(this,"hcmFilter",p(this,Uo)?p(this,$h).addHCMFilter(p(this,Uo).foreground,p(this,Uo).background):"none")}get direction(){return Ye(this,"direction",getComputedStyle(p(this,ya)).direction)}get highlightColors(){return Ye(this,"highlightColors",p(this,Zc)?new Map(p(this,Zc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Ye(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),w(this,Lo,e)}setMainHighlightColorPicker(e){w(this,Wh,e)}editAltText(e,t=!1){var n;(n=p(this,Yc))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":w(this,Kc,t);break}}onPageChanging({pageNumber:e}){w(this,Xc,e-1)}focusMainContainer(){p(this,ya).focus()}findParent(e,t){for(const n of p(this,hn).values()){const{x:i,y:a,width:l,height:u}=n.div.getBoundingClientRect();if(e>=i&&e<=i+l&&t>=a&&t<=a+u)return n}return null}disableUserSelect(e=!1){p(this,Qh).classList.toggle("noUserSelect",e)}addShouldRescale(e){p(this,Oo).add(e)}removeShouldRescale(e){p(this,Oo).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*jr.PDF_TO_CSS_UNITS;for(const n of p(this,Oo))n.onScaleChanging();(t=p(this,Lo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:l}=t,u=t.toString(),f=R(this,de,Vg).call(this,t).closest(".textLayer"),y=this.getSelectionBoxes(f);if(!y)return;t.empty();const A=R(this,de,tA).call(this,f),_=p(this,nn)===Oe.NONE,S=()=>{A==null||A.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:y,anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:l,text:u}),_&&this.showAllEditors("highlight",!0,!0)};if(_){this.switchToMode(Oe.HIGHLIGHT,S);return}S()}addToAnnotationStorage(e){!e.isEmpty()&&p(this,ga)&&!p(this,ga).has(e.id)&&p(this,ga).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,p(this,Cr)&&(w(this,Cr,!1),R(this,de,zg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of p(this,lt))if(t.div.contains(e)){w(this,Fo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!p(this,Fo))return;const[e,t]=p(this,Fo);w(this,Fo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){R(this,de,nA).call(this),R(this,de,iA).call(this)}removeEditListeners(){R(this,de,bx).call(this),R(this,de,sA).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of p(this,ts))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of p(this,ts))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=p(this,ci))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of p(this,lt)){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const l of p(this,ts))if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Fe(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const d of n){const f=await i.deserialize(d);if(!f)return;a.push(f)}const l=()=>{for(const d of a)R(this,de,aA).call(this,d);R(this,de,rA).call(this,a)},u=()=>{for(const d of a)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(a){Fe(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,nn)!==Oe.NONE&&!this.isEditorHandlingKeyboard&&Hc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,Cr)&&(w(this,Cr,!1),R(this,de,zg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(R(this,de,vx).call(this),R(this,de,iA).call(this),R(this,de,kn).call(this,{isEditing:p(this,nn)!==Oe.NONE,isEmpty:R(this,de,uh).call(this),hasSomethingToUndo:p(this,Oi).hasSomethingToUndo(),hasSomethingToRedo:p(this,Oi).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,de,Ax).call(this),R(this,de,sA).call(this),R(this,de,kn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!p(this,ts)){w(this,ts,e);for(const t of p(this,ts))R(this,de,da).call(this,t.defaultPropertiesToUpdate)}}getId(){return p(this,zm).id}get currentLayer(){return p(this,hn).get(p(this,Xc))}getLayer(e){return p(this,hn).get(e)}get currentPageIndex(){return p(this,Xc)}addLayer(e){p(this,hn).set(e.pageIndex,e),p(this,wr)?e.enable():e.disable()}removeLayer(e){p(this,hn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var i;if(p(this,nn)!==e&&!(p(this,Fi)&&(await p(this,Fi).promise,!p(this,Fi)))){if(w(this,Fi,Promise.withResolvers()),w(this,nn,e),e===Oe.NONE){this.setEditingState(!1),R(this,de,Tx).call(this),(i=this._editorUndoBar)==null||i.hide(),p(this,Fi).resolve();return}this.setEditingState(!0),await R(this,de,Sx).call(this),this.unselectAll();for(const a of p(this,hn).values())a.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),p(this,Fi).resolve();return}for(const a of p(this,Kt).values())a.annotationElementId===t?(this.setSelected(a),a.enterInEditMode()):a.unselect();p(this,Fi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==p(this,nn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(p(this,ts)){switch(e){case Ke.CREATE:this.currentLayer.addNewEditor();return;case Ke.HIGHLIGHT_DEFAULT_COLOR:(n=p(this,Wh))==null||n.updateColor(t);break;case Ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,Kh)||w(this,Kh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of p(this,lt))i.updateParams(e,t);for(const i of p(this,ts))i.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var a;for(const l of p(this,Kt).values())l.editorType===e&&l.show(t);(((a=p(this,Kh))==null?void 0:a.get(Ke.HIGHLIGHT_SHOW_ALL))??!0)!==t&&R(this,de,da).call(this,[[Ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(p(this,Yh)!==e){w(this,Yh,e);for(const t of p(this,hn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of p(this,Kt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return p(this,Kt).get(e)}addEditor(e){p(this,Kt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(p(this,Es)&&clearTimeout(p(this,Es)),w(this,Es,setTimeout(()=>{this.focusMainContainer(),w(this,Es,null)},0))),p(this,Kt).delete(e.id),this.unselect(e),(!e.annotationElementId||!p(this,Po).has(e.annotationElementId))&&((t=p(this,ga))==null||t.remove(e.id))}addDeletedAnnotationElement(e){p(this,Po).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return p(this,Po).has(e)}removeDeletedAnnotationElement(e){p(this,Po).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){p(this,ci)!==e&&(w(this,ci,e),e&&R(this,de,da).call(this,e.propertiesToUpdate))}updateUI(e){p(this,de,Cx)===e&&R(this,de,da).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){R(this,de,da).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(p(this,lt).has(e)){p(this,lt).delete(e),e.unselect(),R(this,de,kn).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,lt).add(e),e.select(),R(this,de,da).call(this,e.propertiesToUpdate),R(this,de,kn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=p(this,Lo))==null||t.commitOrRemove();for(const n of p(this,lt))n!==e&&n.unselect();p(this,lt).clear(),p(this,lt).add(e),e.select(),R(this,de,da).call(this,e.propertiesToUpdate),R(this,de,kn).call(this,{hasSelectedEditor:!0})}isSelected(e){return p(this,lt).has(e)}get firstSelectedEditor(){return p(this,lt).values().next().value}unselect(e){e.unselect(),p(this,lt).delete(e),R(this,de,kn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,lt).size!==0}get isEnterHandled(){return p(this,lt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;p(this,Oi).undo(),R(this,de,kn).call(this,{hasSomethingToUndo:p(this,Oi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,de,uh).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){p(this,Oi).redo(),R(this,de,kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,Oi).hasSomethingToRedo(),isEmpty:R(this,de,uh).call(this)})}addCommands(e){p(this,Oi).add(e),R(this,de,kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,de,uh).call(this)})}cleanUndoStack(e){p(this,Oi).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...p(this,lt)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(i,t.length===1?t[0].editorType:t.length);for(const u of t)u.remove()},i=()=>{for(const l of t)R(this,de,aA).call(this,l)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=p(this,ci))==null||e.commitOrRemove()}hasSomethingToControl(){return p(this,ci)||this.hasSelection}selectAll(){for(const e of p(this,lt))e.commit();R(this,de,rA).call(this,p(this,Kt).values())}unselectAll(){var e;if(!(p(this,ci)&&(p(this,ci).commitOrRemove(),p(this,nn)!==Oe.NONE))&&!((e=p(this,Lo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of p(this,lt))t.unselect();p(this,lt).clear(),R(this,de,kn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;p(this,xr)[0]+=e,p(this,xr)[1]+=t;const[i,a]=p(this,xr),l=[...p(this,lt)],u=1e3;p(this,Ms)&&clearTimeout(p(this,Ms)),w(this,Ms,setTimeout(()=>{w(this,Ms,null),p(this,xr)[0]=p(this,xr)[1]=0,this.addCommands({cmd:()=>{for(const d of l)p(this,Kt).has(d.id)&&d.translateInPage(i,a)},undo:()=>{for(const d of l)p(this,Kt).has(d.id)&&d.translateInPage(-i,-a)},mustExec:!1})},u));for(const d of l)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,ws,new Map);for(const e of p(this,lt))p(this,ws).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,ws))return!1;this.disableUserSelect(!1);const e=p(this,ws);w(this,ws,null);let t=!1;for(const[{x:i,y:a,pageIndex:l},u]of e)u.newX=i,u.newY=a,u.newPageIndex=l,t||(t=i!==u.savedX||a!==u.savedY||l!==u.savedPageIndex);if(!t)return!1;const n=(i,a,l,u)=>{if(p(this,Kt).has(i.id)){const d=p(this,hn).get(u);d?i._setParentAndPosition(d,a,l):(i.pageIndex=u,i.x=a,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:l,newPageIndex:u}]of e)n(i,a,l,u)},undo:()=>{for(const[i,{savedX:a,savedY:l,savedPageIndex:u}]of e)n(i,a,l,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(p(this,ws))for(const n of p(this,ws).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||p(this,lt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return p(this,ci)===e}getActive(){return p(this,ci)}getMode(){return p(this,nn)}get imageManager(){return Ye(this,"imageManager",new j0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,y=t.rangeCount;f<y;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:l}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(f,y,A,_)=>({x:(y-i)/l,y:1-(f+A-n)/a,width:_/l,height:A/a});break;case"180":u=(f,y,A,_)=>({x:1-(f+A-n)/a,y:1-(y+_-i)/l,width:A/a,height:_/l});break;case"270":u=(f,y,A,_)=>({x:1-(y+_-i)/l,y:(f-n)/a,width:_/l,height:A/a});break;default:u=(f,y,A,_)=>({x:(f-n)/a,y:(y-i)/l,width:A/a,height:_/l});break}const d=[];for(let f=0,y=t.rangeCount;f<y;f++){const A=t.getRangeAt(f);if(!A.collapsed)for(const{x:_,y:S,width:T,height:C}of A.getClientRects())T===0||C===0||d.push(u(_,S,T,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(p(this,Wc)||w(this,Wc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=p(this,Wc))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=p(this,Wc))==null?void 0:i.get(e.data.id);if(!t)return;const n=p(this,ga).getRawValue(t);n&&(p(this,nn)===Oe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};$c=new WeakMap,ci=new WeakMap,Kt=new WeakMap,hn=new WeakMap,Yc=new WeakMap,ga=new WeakMap,Wc=new WeakMap,Oi=new WeakMap,Sr=new WeakMap,Lo=new WeakMap,Xc=new WeakMap,Po=new WeakMap,ws=new WeakMap,ts=new WeakMap,Oo=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Kc=new WeakMap,$h=new WeakMap,Es=new WeakMap,Tr=new WeakMap,Zc=new WeakMap,Cr=new WeakMap,xs=new WeakMap,zm=new WeakMap,wr=new WeakMap,Yh=new WeakMap,Er=new WeakMap,Fo=new WeakMap,Wh=new WeakMap,Xh=new WeakMap,nn=new WeakMap,lt=new WeakMap,ma=new WeakMap,Uo=new WeakMap,Kh=new WeakMap,Zh=new WeakMap,xr=new WeakMap,Ms=new WeakMap,ya=new WeakMap,Qh=new WeakMap,Fi=new WeakMap,de=new WeakSet,Vg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},tA=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of p(this,hn).values())if(n.hasTextLayer(e))return n;return null},gx=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=R(this,de,Vg).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(p(this,xs)||w(this,xs,new PD(this)),p(this,xs).show(n,i,this.direction==="ltr"))},mx=function(){var a,l,u;const e=document.getSelection();if(!e||e.isCollapsed){p(this,ma)&&((a=p(this,xs))==null||a.hide(),w(this,ma,null),R(this,de,kn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===p(this,ma))return;const i=R(this,de,Vg).call(this,e).closest(".textLayer");if(!i){p(this,ma)&&((l=p(this,xs))==null||l.hide(),w(this,ma,null),R(this,de,kn).call(this,{hasSelectedText:!1}));return}if((u=p(this,xs))==null||u.hide(),w(this,ma,t),R(this,de,kn).call(this,{hasSelectedText:!0}),!(p(this,nn)!==Oe.HIGHLIGHT&&p(this,nn)!==Oe.NONE)&&(p(this,nn)===Oe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,Cr,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=p(this,nn)===Oe.HIGHLIGHT?R(this,de,tA).call(this,i):null;d==null||d.toggleDrawing();const f=new AbortController,y=this.combinedSignal(f),A=_=>{_.type==="pointerup"&&_.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),_.type==="pointerup"&&R(this,de,zg).call(this,"main_toolbar"))};window.addEventListener("pointerup",A,{signal:y}),window.addEventListener("blur",A,{signal:y})}},zg=function(e=""){p(this,nn)===Oe.HIGHLIGHT?this.highlightSelection(e):p(this,Gh)&&R(this,de,gx).call(this)},yx=function(){document.addEventListener("selectionchange",R(this,de,mx).bind(this),{signal:this._signal})},vx=function(){if(p(this,Tr))return;w(this,Tr,new AbortController);const e=this.combinedSignal(p(this,Tr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Ax=function(){var e;(e=p(this,Tr))==null||e.abort(),w(this,Tr,null)},nA=function(){if(p(this,Er))return;w(this,Er,new AbortController);const e=this.combinedSignal(p(this,Er));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},bx=function(){var e;(e=p(this,Er))==null||e.abort(),w(this,Er,null)},iA=function(){if(p(this,Sr))return;w(this,Sr,new AbortController);const e=this.combinedSignal(p(this,Sr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},sA=function(){var e;(e=p(this,Sr))==null||e.abort(),w(this,Sr,null)},_x=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},kn=function(e){Object.entries(e).some(([n,i])=>p(this,Zh)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,Zh),e)}),p(this,nn)===Oe.HIGHLIGHT&&e.hasSelectedEditor===!1&&R(this,de,da).call(this,[[Ke.HIGHLIGHT_FREE,!0]]))},da=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Sx=async function(){if(!p(this,wr)){w(this,wr,!0);const e=[];for(const t of p(this,hn).values())e.push(t.enable());await Promise.all(e);for(const t of p(this,Kt).values())t.enable()}},Tx=function(){if(this.unselectAll(),p(this,wr)){w(this,wr,!1);for(const e of p(this,hn).values())e.disable();for(const e of p(this,Kt).values())e.disable()}},aA=function(e){const t=p(this,hn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Cx=function(){let e=null;for(e of p(this,lt));return e},uh=function(){if(p(this,Kt).size===0)return!0;if(p(this,Kt).size===1)for(const e of p(this,Kt).values())return e.isEmpty();return!1},rA=function(e){for(const t of p(this,lt))t.unselect();p(this,lt).clear();for(const t of e)t.isEmpty()||(p(this,lt).add(t),t.select());R(this,de,kn).call(this,{hasSelectedEditor:this.hasSelection})},he(Hc,"TRANSLATE_SMALL",1),he(Hc,"TRANSLATE_BIG",10);let Pl=Hc;var sn,Rs,ns,Qc,Is,ui,Jc,Ds,Kn,va,Ho,ks,Mr,hs,dh,Gg;const Nn=class Nn{constructor(e){M(this,hs);M(this,sn,null);M(this,Rs,!1);M(this,ns,null);M(this,Qc,null);M(this,Is,null);M(this,ui,null);M(this,Jc,!1);M(this,Ds,null);M(this,Kn,null);M(this,va,null);M(this,Ho,null);M(this,ks,!1);w(this,Kn,e),w(this,ks,e._uiManager.useNewAltTextFlow),p(Nn,Mr)||w(Nn,Mr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Nn._l10n??(Nn._l10n=e)}async render(){const e=w(this,ns,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=w(this,Qc,document.createElement("span"));e.append(t),p(this,ks)?(e.classList.add("new"),e.setAttribute("data-l10n-id",p(Nn,Mr).missing),t.setAttribute("data-l10n-id",p(Nn,Mr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=p(this,Kn)._uiManager._signal;e.addEventListener("contextmenu",ps,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),p(this,Kn)._uiManager.editAltText(p(this,Kn)),p(this,ks)&&p(this,Kn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:p(this,hs,dh)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(w(this,Jc,!0),i(a))},{signal:n}),await R(this,hs,Gg).call(this),e}finish(){p(this,ns)&&(p(this,ns).focus({focusVisible:p(this,Jc)}),w(this,Jc,!1))}isEmpty(){return p(this,ks)?p(this,sn)===null:!p(this,sn)&&!p(this,Rs)}hasData(){return p(this,ks)?p(this,sn)!==null||!!p(this,va):this.isEmpty()}get guessedText(){return p(this,va)}async setGuessedText(e){p(this,sn)===null&&(w(this,va,e),w(this,Ho,await Nn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),R(this,hs,Gg).call(this))}toggleAltTextBadge(e=!1){var t;if(!p(this,ks)||p(this,sn)){(t=p(this,Ds))==null||t.remove(),w(this,Ds,null);return}if(!p(this,Ds)){const n=w(this,Ds,document.createElement("div"));n.className="noAltTextBadge",p(this,Kn).div.append(n)}p(this,Ds).classList.toggle("hidden",!e)}serialize(e){let t=p(this,sn);return!e&&p(this,va)===t&&(t=p(this,Ho)),{altText:t,decorative:p(this,Rs),guessedText:p(this,va),textWithDisclaimer:p(this,Ho)}}get data(){return{altText:p(this,sn),decorative:p(this,Rs)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(w(this,va,n),w(this,Ho,i)),!(p(this,sn)===e&&p(this,Rs)===t)&&(a||(w(this,sn,e),w(this,Rs,t)),R(this,hs,Gg).call(this))}toggle(e=!1){p(this,ns)&&(!e&&p(this,ui)&&(clearTimeout(p(this,ui)),w(this,ui,null)),p(this,ns).disabled=!e)}shown(){p(this,Kn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:p(this,hs,dh)}})}destroy(){var e,t;(e=p(this,ns))==null||e.remove(),w(this,ns,null),w(this,Qc,null),w(this,Is,null),(t=p(this,Ds))==null||t.remove(),w(this,Ds,null)}};sn=new WeakMap,Rs=new WeakMap,ns=new WeakMap,Qc=new WeakMap,Is=new WeakMap,ui=new WeakMap,Jc=new WeakMap,Ds=new WeakMap,Kn=new WeakMap,va=new WeakMap,Ho=new WeakMap,ks=new WeakMap,Mr=new WeakMap,hs=new WeakSet,dh=function(){return p(this,sn)&&"added"||p(this,sn)===null&&this.guessedText&&"review"||"missing"},Gg=async function(){var i,a,l;const e=p(this,ns);if(!e)return;if(p(this,ks)){if(e.classList.toggle("done",!!p(this,sn)),e.setAttribute("data-l10n-id",p(Nn,Mr)[p(this,hs,dh)]),(i=p(this,Qc))==null||i.setAttribute("data-l10n-id",p(Nn,Mr)[`${p(this,hs,dh)}-label`]),!p(this,sn)){(a=p(this,Is))==null||a.remove();return}}else{if(!p(this,sn)&&!p(this,Rs)){e.classList.remove("done"),(l=p(this,Is))==null||l.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=p(this,Is);if(!t){w(this,Is,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${p(this,Kn).id}`;const u=100,d=p(this,Kn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(p(this,ui)),w(this,ui,null)},{once:!0}),e.addEventListener("mouseenter",()=>{w(this,ui,setTimeout(()=>{w(this,ui,null),p(this,Is).classList.add("show"),p(this,Kn)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var f;p(this,ui)&&(clearTimeout(p(this,ui)),w(this,ui,null)),(f=p(this,Is))==null||f.classList.remove("show")},{signal:d})}p(this,Rs)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=p(this,sn)),t.parentNode||e.append(t);const n=p(this,Kn).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},M(Nn,Mr,null),he(Nn,"_l10n",null);let Am=Nn;var Jh,Bo,jh,ef,tf,nf,sf,jc,Aa,Vo,Rr,qa,wx,Ex,oA;const Jb=class Jb{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:l=null,signal:u}){M(this,qa);M(this,Jh);M(this,Bo,!1);M(this,jh,null);M(this,ef);M(this,tf);M(this,nf);M(this,sf);M(this,jc);M(this,Aa,null);M(this,Vo);M(this,Rr,null);w(this,Jh,e),w(this,jh,n),w(this,ef,t),w(this,tf,i),w(this,nf,a),w(this,sf,l),w(this,Vo,new AbortController),w(this,jc,AbortSignal.any([u,p(this,Vo).signal])),e.addEventListener("touchstart",R(this,qa,wx).bind(this),{passive:!1,signal:p(this,jc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ye(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=p(this,Vo))==null||e.abort(),w(this,Vo,null)}};Jh=new WeakMap,Bo=new WeakMap,jh=new WeakMap,ef=new WeakMap,tf=new WeakMap,nf=new WeakMap,sf=new WeakMap,jc=new WeakMap,Aa=new WeakMap,Vo=new WeakMap,Rr=new WeakMap,qa=new WeakSet,wx=function(e){var i,a,l;if((i=p(this,ef))!=null&&i.call(this)||e.touches.length<2)return;if(!p(this,Rr)){w(this,Rr,new AbortController);const u=AbortSignal.any([p(this,jc),p(this,Rr).signal]),d=p(this,Jh),f={signal:u,passive:!1};d.addEventListener("touchmove",R(this,qa,Ex).bind(this),f),d.addEventListener("touchend",R(this,qa,oA).bind(this),f),d.addEventListener("touchcancel",R(this,qa,oA).bind(this),f),(a=p(this,tf))==null||a.call(this)}if(Ci(e),e.touches.length!==2||(l=p(this,jh))!=null&&l.call(this)){w(this,Aa,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),w(this,Aa,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},Ex=function(e){var U;if(!p(this,Aa)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:a}=t,{screenX:l,screenY:u}=n,d=p(this,Aa),{touch0X:f,touch0Y:y,touch1X:A,touch1Y:_}=d,S=A-f,T=_-y,C=l-i,x=u-a,D=Math.hypot(C,x)||1,k=Math.hypot(S,T)||1;if(!p(this,Bo)&&Math.abs(k-D)<=Jb.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=a,d.touch1X=l,d.touch1Y=u,e.preventDefault(),!p(this,Bo)){w(this,Bo,!0);return}const L=[(i+l)/2,(a+u)/2];(U=p(this,nf))==null||U.call(this,L,k,D)},oA=function(e){var t;p(this,Rr).abort(),w(this,Rr,null),(t=p(this,sf))==null||t.call(this),p(this,Aa)&&(e.preventDefault(),w(this,Aa,null),w(this,Bo,!1))};let bm=Jb;var zo,is,bt,eu,Ir,af,Go,fn,qo,ba,Dr,rf,$o,di,of,Yo,_a,Ns,tu,nu,Ui,Wo,lf,Gm,xe,lA,cf,cA,qg,xx,Mx,uA,$g,dA,Rx,Ix,Dx,hA,kx,fA,Nx,Lx,Px,pA,hh;const Ue=class Ue{constructor(e){M(this,xe);M(this,zo,null);M(this,is,null);M(this,bt,null);M(this,eu,!1);M(this,Ir,null);M(this,af,"");M(this,Go,!1);M(this,fn,null);M(this,qo,null);M(this,ba,null);M(this,Dr,null);M(this,rf,"");M(this,$o,!1);M(this,di,null);M(this,of,!1);M(this,Yo,!1);M(this,_a,!1);M(this,Ns,null);M(this,tu,0);M(this,nu,0);M(this,Ui,null);M(this,Wo,null);he(this,"_editToolbar",null);he(this,"_initialOptions",Object.create(null));he(this,"_initialData",null);he(this,"_isVisible",!0);he(this,"_uiManager",null);he(this,"_focusEventsAllowed",!0);M(this,lf,!1);M(this,Gm,Ue._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,l];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ue.prototype._resizeWithKeyboard,t=Pl.TRANSLATE_SMALL,n=Pl.TRANSLATE_BIG;return Ye(this,"_resizerKeyboardManager",new up([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ye(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new UD({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ue._l10n??(Ue._l10n=e),Ue._l10nResizer||(Ue._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ue._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ue._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,lf)}set _isDraggable(e){var t;w(this,lf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,Gm)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):R(this,xe,hh).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(p(this,$o)?w(this,$o,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/l,this.fixAndSetPosition()}translate(e,t){R(this,xe,lA).call(this,this.parentDimensions,e,t)}translateInPage(e,t){p(this,di)||w(this,di,[this.x,this.y,this.width,this.height]),R(this,xe,lA).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){p(this,di)||w(this,di,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:A,y:_}=this.div.getBoundingClientRect();this.parent.findNewParent(this,A,_)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:y}=n;y.left=`${(100*l).toFixed(2)}%`,y.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!p(this,di)&&(p(this,di)[0]!==this.x||p(this,di)[1]!==this.y)}get _hasBeenResized(){return!!p(this,di)&&(p(this,di)[2]!==this.width||p(this,di)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Ue,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:l,width:u,height:d}=this;if(u*=n,d*=i,a*=n,l*=i,this._mustFixPosition)switch(e){case 0:a=Math.max(0,Math.min(n-u,a)),l=Math.max(0,Math.min(i-d,l));break;case 90:a=Math.max(0,Math.min(n-d,a)),l=Math.min(i,Math.max(u,l));break;case 180:a=Math.min(n,Math.max(u,a)),l=Math.min(i,Math.max(d,l));break;case 270:a=Math.min(n,Math.max(d,a)),l=Math.max(0,Math.min(i-u,l));break}this.x=a/=n,this.y=l/=i;const[f,y]=this.getBaseTranslation();a+=f,l+=y,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return R(n=Ue,cf,cA).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return R(n=Ue,cf,cA).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/n).toFixed(2)}%`,p(this,Go)||(a.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),a=!p(this,Go)&&t.endsWith("%");if(i&&a)return;const[l,u]=this.parentDimensions;i||(e.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!p(this,Go)&&!a&&(e.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=p(this,bt))==null||e.finish()}async addEditToolbar(){return this._editToolbar||p(this,Yo)?this._editToolbar:(this._editToolbar=new Q0(this),this.div.append(this._editToolbar.render()),p(this,bt)&&await this._editToolbar.addAltText(p(this,bt)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=p(this,bt))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){p(this,bt)||(Am.initialize(Ue._l10n),w(this,bt,new Am(this)),p(this,zo)&&(p(this,bt).data=p(this,zo),w(this,zo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=p(this,bt))==null?void 0:e.data}set altTextData(e){p(this,bt)&&(p(this,bt).data=e)}get guessedAltText(){var e;return(e=p(this,bt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=p(this,bt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=p(this,bt))==null?void 0:t.serialize(e)}hasAltText(){return!!p(this,bt)&&!p(this,bt).isEmpty()}hasAltTextData(){var e;return((e=p(this,bt))==null?void 0:e.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=p(this,eu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),R(this,xe,fA).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),vm(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(p(this,Wo)||w(this,Wo,new bm({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:R(this,xe,Rx).bind(this),onPinching:R(this,xe,Ix).bind(this),onPinchEnd:R(this,xe,Dx).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(e){const{isMac:t}=Fn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(w(this,$o,!0),this._isDraggable){R(this,xe,kx).call(this,e);return}R(this,xe,hA).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){p(this,Ns)&&clearTimeout(p(this,Ns)),w(this,Ns,setTimeout(()=>{var e;w(this,Ns,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[a,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=e/i,y=t/i,A=this.x*a,_=this.y*l,S=this.width*a,T=this.height*l;switch(n){case 0:return[A+f+u,l-_-y-T+d,A+f+S+u,l-_-y+d];case 90:return[A+y+u,l-_+f+d,A+y+T+u,l-_+f+S+d];case 180:return[A-f-S+u,l-_+y+d,A-f+u,l-_+y+T+d];case 270:return[A-y-T+u,l-_-f-S+d,A-y+u,l-_-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,l]=e,u=a-n,d=l-i;switch(this.rotation){case 0:return[n,t-l,u,d];case 90:return[n,t-i,d,u];case 180:return[a,t-i,u,d];case 270:return[a,t-l,d,u];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){w(this,Yo,!0)}disableEditMode(){w(this,Yo,!1)}isInEditMode(){return p(this,Yo)}shouldGetKeyboardEvents(){return p(this,_a)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return t<l&&i>0&&e<a&&n>0}rebuild(){R(this,xe,fA).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){yt("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,w(i,zo,e.accessibilityData);const[a,l]=i.pageDimensions,[u,d,f,y]=i.getRectInCurrentCoords(e.rect,l);return i.x=u/a,i.y=d/l,i.width=f/a,i.height=y/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=p(this,Dr))==null||e.abort(),w(this,Dr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),p(this,Ns)&&(clearTimeout(p(this,Ns)),w(this,Ns,null)),R(this,xe,hh).call(this),this.removeEditToolbar(),p(this,Ui)){for(const n of p(this,Ui).values())clearTimeout(n);w(this,Ui,null)}this.parent=null,(t=p(this,Wo))==null||t.destroy(),w(this,Wo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,xe,xx).call(this),p(this,fn).classList.remove("hidden"),vm(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),w(this,ba,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=p(this,fn).children;if(!p(this,is)){w(this,is,Array.from(t));const l=R(this,xe,Nx).bind(this),u=R(this,xe,Lx).bind(this),d=this._uiManager._signal;for(const f of p(this,is)){const y=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",R(this,xe,Px).bind(this,y),{signal:d}),f.setAttribute("data-l10n-id",Ue._l10nResizer[y])}}const n=p(this,is)[0];let i=0;for(const l of t){if(l===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(p(this,is).length/4);if(a!==i){if(a<i)for(let u=0;u<i-a;u++)p(this,fn).append(p(this,fn).firstChild);else if(a>i)for(let u=0;u<a-i;u++)p(this,fn).firstChild.before(p(this,fn).lastChild);let l=0;for(const u of t){const f=p(this,is)[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Ue._l10nResizer[f])}}R(this,xe,pA).call(this,0),w(this,_a,!0),p(this,fn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){p(this,_a)&&R(this,xe,dA).call(this,p(this,rf),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){R(this,xe,hh).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(n=p(this,bt))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,i,a;(e=p(this,fn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=p(this,bt))==null||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return p(this,of)}set isEditing(e){w(this,of,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){w(this,Go,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){p(this,Ui)||w(this,Ui,new Map);const{action:n}=e;let i=p(this,Ui).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),p(this,Ui).delete(n),p(this,Ui).size===0&&w(this,Ui,null)},Ue._telemetryTimeout),p(this,Ui).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),w(this,eu,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,eu,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};zo=new WeakMap,is=new WeakMap,bt=new WeakMap,eu=new WeakMap,Ir=new WeakMap,af=new WeakMap,Go=new WeakMap,fn=new WeakMap,qo=new WeakMap,ba=new WeakMap,Dr=new WeakMap,rf=new WeakMap,$o=new WeakMap,di=new WeakMap,of=new WeakMap,Yo=new WeakMap,_a=new WeakMap,Ns=new WeakMap,tu=new WeakMap,nu=new WeakMap,Ui=new WeakMap,Wo=new WeakMap,lf=new WeakMap,Gm=new WeakMap,xe=new WeakSet,lA=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},cf=new WeakSet,cA=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},qg=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},xx=function(){if(p(this,fn))return;w(this,fn,document.createElement("div")),p(this,fn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");p(this,fn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",R(this,xe,Mx).bind(this,n),{signal:t}),i.addEventListener("contextmenu",ps,{signal:t}),i.tabIndex=-1}this.div.prepend(p(this,fn))},Mx=function(e,t){var y;t.preventDefault();const{isMac:n}=Fn.platform;if(t.button!==0||t.ctrlKey&&n)return;(y=p(this,bt))==null||y.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,w(this,qo,[t.screenX,t.screenY]);const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,xe,dA).bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ci,{passive:!1,signal:l}),window.addEventListener("contextmenu",ps,{signal:l}),w(this,ba,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var A;a.abort(),this.parent.togglePointerEvents(!0),(A=p(this,bt))==null||A.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=d,R(this,xe,$g).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},uA=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[a,l]=this.parentDimensions;this.setDims(a*n,l*i),this.fixAndSetPosition(),this._onResized()},$g=function(){if(!p(this,ba))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=p(this,ba);w(this,ba,null);const a=this.x,l=this.y,u=this.width,d=this.height;a===e&&l===t&&u===n&&d===i||this.addCommands({cmd:R(this,xe,uA).bind(this,a,l,u,d),undo:R(this,xe,uA).bind(this,e,t,n,i),mustExec:!0})},dA=function(e,t){const[n,i]=this.parentDimensions,a=this.x,l=this.y,u=this.width,d=this.height,f=Ue.MIN_SIZE/n,y=Ue.MIN_SIZE/i,A=R(this,xe,qg).call(this,this.rotation),_=(O,z)=>[A[0]*O+A[2]*z,A[1]*O+A[3]*z],S=R(this,xe,qg).call(this,360-this.rotation),T=(O,z)=>[S[0]*O+S[2]*z,S[1]*O+S[3]*z];let C,x,D=!1,k=!1;switch(e){case"topLeft":D=!0,C=(O,z)=>[0,0],x=(O,z)=>[O,z];break;case"topMiddle":C=(O,z)=>[O/2,0],x=(O,z)=>[O/2,z];break;case"topRight":D=!0,C=(O,z)=>[O,0],x=(O,z)=>[0,z];break;case"middleRight":k=!0,C=(O,z)=>[O,z/2],x=(O,z)=>[0,z/2];break;case"bottomRight":D=!0,C=(O,z)=>[O,z],x=(O,z)=>[0,0];break;case"bottomMiddle":C=(O,z)=>[O/2,z],x=(O,z)=>[O/2,0];break;case"bottomLeft":D=!0,C=(O,z)=>[0,z],x=(O,z)=>[O,0];break;case"middleLeft":k=!0,C=(O,z)=>[0,z/2],x=(O,z)=>[O,z/2];break}const L=C(u,d),U=x(u,d);let F=_(...U);const W=Ue._round(a+F[0]),K=Ue._round(l+F[1]);let Q=1,J=1,se,ce;if(t.fromKeyboard)({deltaX:se,deltaY:ce}=t);else{const{screenX:O,screenY:z}=t,[le,we]=p(this,qo);[se,ce]=this.screenToPageTranslation(O-le,z-we),p(this,qo)[0]=O,p(this,qo)[1]=z}if([se,ce]=T(se/n,ce/i),D){const O=Math.hypot(u,d);Q=J=Math.max(Math.min(Math.hypot(U[0]-L[0]-se,U[1]-L[1]-ce)/O,1/u,1/d),f/u,y/d)}else k?Q=Math.max(f,Math.min(1,Math.abs(U[0]-L[0]-se)))/u:J=Math.max(y,Math.min(1,Math.abs(U[1]-L[1]-ce)))/d;const B=Ue._round(u*Q),ie=Ue._round(d*J);F=_(...x(B,ie));const ne=W-F[0],ue=K-F[1];p(this,di)||w(this,di,[this.x,this.y,this.width,this.height]),this.width=B,this.height=ie,this.x=ne,this.y=ue,this.setDims(n*B,i*ie),this.fixAndSetPosition(),this._onResizing()},Rx=function(){var e;w(this,ba,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=p(this,bt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Ix=function(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const l=R(this,xe,qg).call(this,this.rotation),u=(W,K)=>[l[0]*W+l[2]*K,l[1]*W+l[3]*K],[d,f]=this.parentDimensions,y=this.x,A=this.y,_=this.width,S=this.height,T=Ue.MIN_SIZE/d,C=Ue.MIN_SIZE/f;a=Math.max(Math.min(a,1/_,1/S),T/_,C/S);const x=Ue._round(_*a),D=Ue._round(S*a);if(x===_&&D===S)return;p(this,di)||w(this,di,[y,A,_,S]);const k=u(_/2,S/2),L=Ue._round(y+k[0]),U=Ue._round(A+k[1]),F=u(x/2,D/2);this.x=L-F[0],this.y=U-F[1],this.width=x,this.height=D,this.setDims(d*x,f*D),this.fixAndSetPosition(),this._onResizing()},Dx=function(){var e;(e=p(this,bt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),R(this,xe,$g).call(this)},hA=function(e){const{isMac:t}=Fn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},kx=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:a},u=f=>{i.abort(),w(this,Ir,null),w(this,$o,!1),this._uiManager.endDragSession()||R(this,xe,hA).call(this,f),n&&this._onStopDragging()};t&&(w(this,tu,e.clientX),w(this,nu,e.clientY),w(this,Ir,e.pointerId),w(this,af,e.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:y,clientY:A,pointerId:_}=f;if(_!==p(this,Ir)){Ci(f);return}const[S,T]=this.screenToPageTranslation(y-p(this,tu),A-p(this,nu));w(this,tu,y),w(this,nu,A),this._uiManager.dragSelectedEditors(S,T)},l),window.addEventListener("touchmove",Ci,l),window.addEventListener("pointerdown",f=>{f.pointerType===p(this,af)&&(p(this,Wo)||f.isPrimary)&&u(f),Ci(f)},l));const d=f=>{if(!p(this,Ir)||p(this,Ir)===f.pointerId){u(f);return}Ci(f)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},fA=function(){if(p(this,Dr)||!this.div)return;w(this,Dr,new AbortController);const e=this._uiManager.combinedSignal(p(this,Dr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Nx=function(e){Ue._resizerKeyboardManager.exec(this,e)},Lx=function(e){var t;p(this,_a)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==p(this,fn)&&R(this,xe,hh).call(this)},Px=function(e){w(this,rf,p(this,_a)?e:"")},pA=function(e){if(p(this,is))for(const t of p(this,is))t.tabIndex=e},hh=function(){w(this,_a,!1),R(this,xe,pA).call(this,-1),R(this,xe,$g).call(this)},M(Ue,cf),he(Ue,"_l10n",null),he(Ue,"_l10nResizer",null),he(Ue,"_borderLineWidth",-1),he(Ue,"_colorManager",new eA),he(Ue,"_zIndex",1),he(Ue,"_telemetryTimeout",1e3);let It=Ue;class UD extends It{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const jC=3285377520,Pi=4294901760,Ts=65535;class Ox{constructor(e){this.h1=e?e&4294967295:jC,this.h2=e?e&4294967295:jC}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,x=e.length;C<x;C++){const D=e.charCodeAt(C);D<=255?t[n++]=D:(t[n++]=D>>>8,t[n++]=D&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,l=new Uint32Array(t.buffer,0,i);let u=0,d=0,f=this.h1,y=this.h2;const A=3432918353,_=461845907,S=A&Ts,T=_&Ts;for(let C=0;C<i;C++)C&1?(u=l[C],u=u*A&Pi|u*S&Ts,u=u<<15|u>>>17,u=u*_&Pi|u*T&Ts,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[C],d=d*A&Pi|d*S&Ts,d=d<<15|d>>>17,d=d*_&Pi|d*T&Ts,y^=d,y=y<<13|y>>>19,y=y*5+3864292196);switch(u=0,a){case 3:u^=t[i*4+2]<<16;case 2:u^=t[i*4+1]<<8;case 1:u^=t[i*4],u=u*A&Pi|u*S&Ts,u=u<<15|u>>>17,u=u*_&Pi|u*T&Ts,i&1?f^=u:y^=u}this.h1=f,this.h2=y}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Pi|e*36045&Ts,t=t*4283543511&Pi|((t<<16|e>>>16)*2950163797&Pi)>>>16,e^=t>>>1,e=e*444984403&Pi|e*60499&Ts,t=t*3301882366&Pi|((t<<16|e>>>16)*3120437893&Pi)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const gA=Object.freeze({map:null,hash:"",transfer:void 0});var Xo,Ko,an,qm,Fx;class Nb{constructor(){M(this,qm);M(this,Xo,!1);M(this,Ko,null);M(this,an,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=p(this,an).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return p(this,an).get(e)}remove(e){if(p(this,an).delete(e),p(this,an).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of p(this,an).values())if(t instanceof It)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=p(this,an).get(e);let i=!1;if(n!==void 0)for(const[a,l]of Object.entries(t))n[a]!==l&&(i=!0,n[a]=l);else i=!0,p(this,an).set(e,t);i&&R(this,qm,Fx).call(this),t instanceof It&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return p(this,an).has(e)}getAll(){return p(this,an).size>0?xb(p(this,an)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return p(this,an).size}resetModified(){p(this,Xo)&&(w(this,Xo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ux(this)}get serializable(){if(p(this,an).size===0)return gA;const e=new Map,t=new Ox,n=[],i=Object.create(null);let a=!1;for(const[l,u]of p(this,an)){const d=u instanceof It?u.serialize(!1,i):u;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:gA}get editorStats(){let e=null;const t=new Map;for(const n of p(this,an).values()){if(!(n instanceof It))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:a}=i;t.has(a)||t.set(a,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const l=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(i)){if(u==="type")continue;let f=l.get(u);f||(f=new Map,l.set(u,f));const y=f.get(d)??0;f.set(d,y+1)}}for(const[n,i]of t)e[n]=i.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){w(this,Ko,null)}get modifiedIds(){if(p(this,Ko))return p(this,Ko);const e=[];for(const t of p(this,an).values())!(t instanceof It)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return w(this,Ko,{ids:new Set(e),hash:e.join(",")})}}Xo=new WeakMap,Ko=new WeakMap,an=new WeakMap,qm=new WeakSet,Fx=function(){p(this,Xo)||(w(this,Xo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var uf;class Ux extends Nb{constructor(t){super();M(this,uf);const{map:n,hash:i,transfer:a}=t.serializable,l=structuredClone(n,a?{transfer:a}:null);w(this,uf,{map:l,hash:i,transfer:a})}get print(){yt("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,uf)}get modifiedIds(){return Ye(this,"modifiedIds",{ids:new Set,hash:""})}}uf=new WeakMap;var iu;class HD{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){M(this,iu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),p(this,iu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||p(this,iu).has(e.loadedName))){if(Gt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:a}=e,l=new FontFace(n,i,a);this.addNativeFontFace(l);try{await l.load(),p(this,iu).add(n),t==null||t(e)}catch{Fe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Fe(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ye(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Rn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ye(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Gt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ye(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(U,F){return U.charCodeAt(F)<<24|U.charCodeAt(F+1)<<16|U.charCodeAt(F+2)<<8|U.charCodeAt(F+3)&255}function i(U,F,W,K){const Q=U.substring(0,F),J=U.substring(F+W);return Q+K+J}let a,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function y(U,F){if(++f>30){Fe("Load test font never loaded."),F();return}if(d.font="30px "+U,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(y.bind(null,U,F))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let _=this._loadTestFont;_=i(_,976,A.length,A);const T=16,C=1482184792;let x=n(_,T);for(a=0,l=A.length-3;a<l;a+=4)x=x-C+n(A,a)|0;a<A.length&&(x=x-C+n(A+"XXX",a)|0),_=i(_,T,4,CD(x));const D=`url(data:font/opentype;base64,${btoa(_)});`,k=`@font-face {font-family:"${A}";src:${D}}`;this.insertRule(k);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const U of[e.loadedName,A]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=U,L.append(F)}this._document.body.append(L),y(A,()=>{L.remove(),t.complete()})}}iu=new WeakMap;class BD{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const a in e)this[a]=e[a];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${ID(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(l){Fe(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}}const Ig={DATA:1,ERROR:2},Vt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ew(){}function Wn(o){if(o instanceof Jr||o instanceof X0||o instanceof Nh||o instanceof ZC||o instanceof ym||o instanceof k0)return o;switch(o instanceof Error||typeof o=="object"&&o!==null||yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Jr(o.message);case"InvalidPDFException":return new X0(o.message);case"MissingPDFException":return new Nh(o.message);case"PasswordException":return new ZC(o.message,o.code);case"UnexpectedResponseException":return new ym(o.message,o.status);case"UnknownErrorException":return new k0(o.message,o.details)}return new k0(o.message,o.toString())}var su,Yi,Hx,Bx,Vx,Yg;class fh{constructor(e,t,n){M(this,Yi);M(this,su,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",R(this,Yi,Hx).bind(this),{signal:p(this,su).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const y=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:e,streamId:a,data:t,desiredSize:f.desiredSize},i),y.promise},pull:f=>{const y=Promise.withResolvers();return this.streamControllers[a].pullCall=y,d.postMessage({sourceName:l,targetName:u,stream:Vt.PULL,streamId:a,desiredSize:f.desiredSize}),y.promise},cancel:f=>{Gt(f instanceof Error,"cancel must have a valid reason");const y=Promise.withResolvers();return this.streamControllers[a].cancelCall=y,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:Vt.CANCEL,streamId:a,reason:Wn(f)}),y.promise}},n)}destroy(){var e;(e=p(this,su))==null||e.abort(),w(this,su,null)}}su=new WeakMap,Yi=new WeakSet,Hx=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){R(this,Yi,Vx).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Ig.DATA)i.resolve(e.data);else if(e.callback===Ig.ERROR)i.reject(Wn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(l){a.postMessage({sourceName:n,targetName:i,callback:Ig.DATA,callbackId:e.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:i,callback:Ig.ERROR,callbackId:e.callbackId,reason:Wn(l)})});return}if(e.streamId){R(this,Yi,Bx).call(this,e);return}t(e.data)},Bx=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,l=this,u=this.actionHandler[e.action],d={enqueue(f,y=1,A){if(this.isCancelled)return;const _=this.desiredSize;this.desiredSize-=y,_>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Vt.ENQUEUE,streamId:t,chunk:f},A)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Vt.CLOSE,streamId:t}),delete l.streamSinks[t])},error(f){Gt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Vt.ERROR,streamId:t,reason:Wn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(u,e.data,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Vt.START_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Vt.START_COMPLETE,streamId:t,reason:Wn(f)})})},Vx=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,l=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Vt.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(Wn(e.reason));break;case Vt.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(Wn(e.reason));break;case Vt.PULL:if(!u){a.postMessage({sourceName:n,targetName:i,stream:Vt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||ew).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Vt.PULL_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Vt.PULL_COMPLETE,streamId:t,reason:Wn(f)})});break;case Vt.ENQUEUE:if(Gt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Vt.CLOSE:if(Gt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),R(this,Yi,Yg).call(this,l,t);break;case Vt.ERROR:Gt(l,"error should have stream controller"),l.controller.error(Wn(e.reason)),R(this,Yi,Yg).call(this,l,t);break;case Vt.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(Wn(e.reason)),R(this,Yi,Yg).call(this,l,t);break;case Vt.CANCEL:if(!u)break;const d=Wn(e.reason);Promise.try(u.onCancel||ew,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Vt.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Vt.CANCEL_COMPLETE,streamId:t,reason:Wn(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Yg=async function(e,t){var n,i,a;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var df;class zx{constructor({enableHWA:e=!1}){M(this,df,!1);w(this,df,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!p(this,df)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){yt("Abstract method `_createCanvas` called.")}}df=new WeakMap;class VD extends zx{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class Gx{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){yt("Abstract method `_fetch` called.")}}class qx extends Gx{async _fetch(e){const t=await oy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ry(t)}}class $x{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(e=!1){}}var Zo,au,Sa,Ta,wn,Qo,Jo,pe,Sn,ph,Ic,Wg,Dc,Yx,mA,kc,gh,mh,yA,yh;class zD extends $x{constructor({docId:t,ownerDocument:n=globalThis.document}){super();M(this,pe);M(this,Zo);M(this,au);M(this,Sa);M(this,Ta);M(this,wn);M(this,Qo);M(this,Jo,0);w(this,Ta,t),w(this,wn,n)}addFilter(t){if(!t)return"none";let n=p(this,pe,Sn).get(t);if(n)return n;const[i,a,l]=R(this,pe,Wg).call(this,t),u=t.length===1?i:`${i}${a}${l}`;if(n=p(this,pe,Sn).get(u),n)return p(this,pe,Sn).set(t,n),n;const d=`g_${p(this,Ta)}_transfer_map_${Dn(this,Jo)._++}`,f=R(this,pe,Dc).call(this,d);p(this,pe,Sn).set(t,f),p(this,pe,Sn).set(u,f);const y=R(this,pe,kc).call(this,d);return R(this,pe,mh).call(this,i,a,l,y),f}addHCMFilter(t,n){var T;const i=`${t}-${n}`,a="base";let l=p(this,pe,ph).get(a);if((l==null?void 0:l.key)===i||(l?((T=l.filter)==null||T.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},p(this,pe,ph).set(a,l)),!t||!n))return l.url;const u=R(this,pe,yh).call(this,t);t=Te.makeHexColor(...u);const d=R(this,pe,yh).call(this,n);if(n=Te.makeHexColor(...d),p(this,pe,Ic).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return l.url;const f=new Array(256);for(let C=0;C<=255;C++){const x=C/255;f[C]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const y=f.join(","),A=`g_${p(this,Ta)}_hcm_filter`,_=l.filter=R(this,pe,kc).call(this,A);R(this,pe,mh).call(this,y,y,y,_),R(this,pe,mA).call(this,_);const S=(C,x)=>{const D=u[C]/255,k=d[C]/255,L=new Array(x+1);for(let U=0;U<=x;U++)L[U]=D+U/x*(k-D);return L.join(",")};return R(this,pe,mh).call(this,S(0,5),S(1,5),S(2,5),_),l.url=R(this,pe,Dc).call(this,A),l.url}addAlphaFilter(t){let n=p(this,pe,Sn).get(t);if(n)return n;const[i]=R(this,pe,Wg).call(this,[t]),a=`alpha_${i}`;if(n=p(this,pe,Sn).get(a),n)return p(this,pe,Sn).set(t,n),n;const l=`g_${p(this,Ta)}_alpha_map_${Dn(this,Jo)._++}`,u=R(this,pe,Dc).call(this,l);p(this,pe,Sn).set(t,u),p(this,pe,Sn).set(a,u);const d=R(this,pe,kc).call(this,l);return R(this,pe,yA).call(this,i,d),u}addLuminosityFilter(t){let n=p(this,pe,Sn).get(t||"luminosity");if(n)return n;let i,a;if(t?([i]=R(this,pe,Wg).call(this,[t]),a=`luminosity_${i}`):a="luminosity",n=p(this,pe,Sn).get(a),n)return p(this,pe,Sn).set(t,n),n;const l=`g_${p(this,Ta)}_luminosity_map_${Dn(this,Jo)._++}`,u=R(this,pe,Dc).call(this,l);p(this,pe,Sn).set(t,u),p(this,pe,Sn).set(a,u);const d=R(this,pe,kc).call(this,l);return R(this,pe,Yx).call(this,d),t&&R(this,pe,yA).call(this,i,d),u}addHighlightHCMFilter(t,n,i,a,l){var k;const u=`${n}-${i}-${a}-${l}`;let d=p(this,pe,ph).get(t);if((d==null?void 0:d.key)===u||(d?((k=d.filter)==null||k.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},p(this,pe,ph).set(t,d)),!n||!i))return d.url;const[f,y]=[n,i].map(R(this,pe,yh).bind(this));let A=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),_=Math.round(.2126*y[0]+.7152*y[1]+.0722*y[2]),[S,T]=[a,l].map(R(this,pe,yh).bind(this));_<A&&([A,_,S,T]=[_,A,T,S]),p(this,pe,Ic).style.color="";const C=(L,U,F)=>{const W=new Array(256),K=(_-A)/F,Q=L/255,J=(U-L)/(255*F);let se=0;for(let ce=0;ce<=F;ce++){const B=Math.round(A+ce*K),ie=Q+ce*J;for(let ne=se;ne<=B;ne++)W[ne]=ie;se=B+1}for(let ce=se;ce<256;ce++)W[ce]=W[se-1];return W.join(",")},x=`g_${p(this,Ta)}_hcm_${t}_filter`,D=d.filter=R(this,pe,kc).call(this,x);return R(this,pe,mA).call(this,D),R(this,pe,mh).call(this,C(S[0],T[0],5),C(S[1],T[1],5),C(S[2],T[2],5),D),d.url=R(this,pe,Dc).call(this,x),d.url}destroy(t=!1){var n,i,a,l;t&&((n=p(this,Qo))!=null&&n.size)||((i=p(this,Sa))==null||i.parentNode.parentNode.remove(),w(this,Sa,null),(a=p(this,au))==null||a.clear(),w(this,au,null),(l=p(this,Qo))==null||l.clear(),w(this,Qo,null),w(this,Jo,0))}}Zo=new WeakMap,au=new WeakMap,Sa=new WeakMap,Ta=new WeakMap,wn=new WeakMap,Qo=new WeakMap,Jo=new WeakMap,pe=new WeakSet,Sn=function(){return p(this,au)||w(this,au,new Map)},ph=function(){return p(this,Qo)||w(this,Qo,new Map)},Ic=function(){if(!p(this,Sa)){const t=p(this,wn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=p(this,wn).createElementNS(ua,"svg");i.setAttribute("width",0),i.setAttribute("height",0),w(this,Sa,p(this,wn).createElementNS(ua,"defs")),t.append(i),i.append(p(this,Sa)),p(this,wn).body.append(t)}return p(this,Sa)},Wg=function(t){if(t.length===1){const f=t[0],y=new Array(256);for(let _=0;_<256;_++)y[_]=f[_]/255;const A=y.join(",");return[A,A,A]}const[n,i,a]=t,l=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,u[f]=i[f]/255,d[f]=a[f]/255;return[l.join(","),u.join(","),d.join(",")]},Dc=function(t){if(p(this,Zo)===void 0){w(this,Zo,"");const n=p(this,wn).URL;n!==p(this,wn).baseURI&&(ly(n)?Fe('#createUrl: ignore "data:"-URL for performance reasons.'):w(this,Zo,n.split("#",1)[0]))}return`url(${p(this,Zo)}#${t})`},Yx=function(t){const n=p(this,wn).createElementNS(ua,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},mA=function(t){const n=p(this,wn).createElementNS(ua,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},kc=function(t){const n=p(this,wn).createElementNS(ua,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),p(this,pe,Ic).append(n),n},gh=function(t,n,i){const a=p(this,wn).createElementNS(ua,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)},mh=function(t,n,i,a){const l=p(this,wn).createElementNS(ua,"feComponentTransfer");a.append(l),R(this,pe,gh).call(this,l,"feFuncR",t),R(this,pe,gh).call(this,l,"feFuncG",n),R(this,pe,gh).call(this,l,"feFuncB",i)},yA=function(t,n){const i=p(this,wn).createElementNS(ua,"feComponentTransfer");n.append(i),R(this,pe,gh).call(this,i,"feFuncA",t)},yh=function(t){return p(this,pe,Ic).style.color=t,kb(getComputedStyle(p(this,pe,Ic)).getPropertyValue("color"))};class Wx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){yt("Abstract method `_fetch` called.")}}class Xx extends Wx{async _fetch(e){const t=await oy(e,"arraybuffer");return new Uint8Array(t)}}Rn&&Fe("Please use the `legacy` build in Node.js environments.");async function Kx(o){const t=await process.getBuiltinModule("fs").promises.readFile(o);return new Uint8Array(t)}class GD extends $x{}class qD extends zx{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class $D extends Gx{async _fetch(e){return Kx(e)}}class YD extends Wx{async _fetch(e){return Kx(e)}}const Mn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function vA(o,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),o.clip(i)}class Lb{getPattern(){yt("Abstract method `getPattern` called.")}}class WD extends Lb{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===Mn.STROKE||i===Mn.FILL){const l=t.current.getClippedPathBoundingBox(i,Ct(e))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=t.cachedCanvases.getCanvas("pattern",u,d),y=f.context;y.clearRect(0,0,y.canvas.width,y.canvas.height),y.beginPath(),y.rect(0,0,y.canvas.width,y.canvas.height),y.translate(-l[0],-l[1]),n=Te.transform(n,[1,0,0,1,l[0],l[1]]),y.transform(...t.baseTransform),this.matrix&&y.transform(...this.matrix),vA(y,this._bbox),y.fillStyle=this._createGradient(y),y.fill(),a=e.createPattern(f.canvas,"no-repeat");const A=new DOMMatrix(n);a.setTransform(A)}else vA(e,this._bbox),a=this._createGradient(e);return a}}function P0(o,e,t,n,i,a,l,u){const d=e.coords,f=e.colors,y=o.data,A=o.width*4;let _;d[t+1]>d[n+1]&&(_=t,t=n,n=_,_=a,a=l,l=_),d[n+1]>d[i+1]&&(_=n,n=i,i=_,_=l,l=u,u=_),d[t+1]>d[n+1]&&(_=t,t=n,n=_,_=a,a=l,l=_);const S=(d[t]+e.offsetX)*e.scaleX,T=(d[t+1]+e.offsetY)*e.scaleY,C=(d[n]+e.offsetX)*e.scaleX,x=(d[n+1]+e.offsetY)*e.scaleY,D=(d[i]+e.offsetX)*e.scaleX,k=(d[i+1]+e.offsetY)*e.scaleY;if(T>=k)return;const L=f[a],U=f[a+1],F=f[a+2],W=f[l],K=f[l+1],Q=f[l+2],J=f[u],se=f[u+1],ce=f[u+2],B=Math.round(T),ie=Math.round(k);let ne,ue,O,z,le,we,P,Z;for(let oe=B;oe<=ie;oe++){if(oe<x){const Ge=oe<T?0:(T-oe)/(T-x);ne=S-(S-C)*Ge,ue=L-(L-W)*Ge,O=U-(U-K)*Ge,z=F-(F-Q)*Ge}else{let Ge;oe>k?Ge=1:x===k?Ge=0:Ge=(x-oe)/(x-k),ne=C-(C-D)*Ge,ue=W-(W-J)*Ge,O=K-(K-se)*Ge,z=Q-(Q-ce)*Ge}let ae;oe<T?ae=0:oe>k?ae=1:ae=(T-oe)/(T-k),le=S-(S-D)*ae,we=L-(L-J)*ae,P=U-(U-se)*ae,Z=F-(F-ce)*ae;const Se=Math.round(Math.min(ne,le)),ze=Math.round(Math.max(ne,le));let be=A*oe+Se*4;for(let Ge=Se;Ge<=ze;Ge++)ae=(ne-Ge)/(ne-le),ae<0?ae=0:ae>1&&(ae=1),y[be++]=ue-(ue-we)*ae|0,y[be++]=O-(O-P)*ae|0,y[be++]=z-(z-Z)*ae|0,y[be++]=255}}function XD(o,e,t){const n=e.coords,i=e.colors;let a,l;switch(e.type){case"lattice":const u=e.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(a=0;a<d;a++){let y=a*u;for(let A=0;A<f;A++,y++)P0(o,t,n[y],n[y+1],n[y+u],i[y],i[y+1],i[y+u]),P0(o,t,n[y+u+1],n[y+1],n[y+u],i[y+u+1],i[y+1],i[y+u])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)P0(o,t,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class KD extends Lb{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,y=Math.ceil(this._bounds[3])-d,A=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),_=Math.min(Math.ceil(Math.abs(y*e[1]*1.1)),3e3),S=f/A,T=y/_,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/S,scaleY:1/T},x=A+2*2,D=_+2*2,k=n.getCanvas("mesh",x,D),L=k.context,U=L.createImageData(A,_);if(t){const W=U.data;for(let K=0,Q=W.length;K<Q;K+=4)W[K]=t[0],W[K+1]=t[1],W[K+2]=t[2],W[K+3]=255}for(const W of this._figures)XD(U,W,C);return L.putImageData(U,2,2),{canvas:k.canvas,offsetX:u-2*S,offsetY:d-2*T,scaleX:S,scaleY:T}}getPattern(e,t,n,i){vA(e,this._bbox);let a;if(i===Mn.SHADING)a=Te.singularValueDecompose2dScale(Ct(e));else if(a=Te.singularValueDecompose2dScale(t.baseTransform),this.matrix){const u=Te.singularValueDecompose2dScale(this.matrix);a=[a[0]*u[0],a[1]*u[1]]}const l=this._createMeshCanvas(a,i===Mn.SHADING?null:this._background,t.cachedCanvases);return i!==Mn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class ZD extends Lb{getPattern(){return"hotpink"}}function QD(o){switch(o[0]){case"RadialAxial":return new WD(o);case"Mesh":return new KD(o);case"Dummy":return new ZD}throw new Error(`Unknown IR type: ${o[0]}`)}const tw={COLORED:1,UNCOLORED:2},$m=class $m{constructor(e,t,n,i,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:a,color:l,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),ay("TilingType: "+a);const y=t[0],A=t[1],_=t[2],S=t[3],T=_-y,C=S-A,x=Te.singularValueDecompose2dScale(this.matrix),D=Te.singularValueDecompose2dScale(this.baseTransform),k=x[0]*D[0],L=x[1]*D[1];let U=T,F=C,W=!1,K=!1;const Q=Math.ceil(d*k),J=Math.ceil(f*L),se=Math.ceil(T*k),ce=Math.ceil(C*L);Q>=se?U=d:W=!0,J>=ce?F=f:K=!0;const B=this.getSizeAndScale(U,this.ctx.canvas.width,k),ie=this.getSizeAndScale(F,this.ctx.canvas.height,L),ne=e.cachedCanvases.getCanvas("pattern",B.size,ie.size),ue=ne.context,O=u.createCanvasGraphics(ue);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,i,l),ue.translate(-B.scale*y,-ie.scale*A),O.transform(B.scale,0,0,ie.scale,0,0),ue.save(),this.clipBbox(O,y,A,_,S),O.baseTransform=Ct(O.ctx),O.executeOperatorList(n),O.endDrawing(),ue.restore(),W||K){const z=ne.canvas;W&&(U=d),K&&(F=f);const le=this.getSizeAndScale(U,this.ctx.canvas.width,k),we=this.getSizeAndScale(F,this.ctx.canvas.height,L),P=le.size,Z=we.size,oe=e.cachedCanvases.getCanvas("pattern-workaround",P,Z),ae=oe.context,Se=W?Math.floor(T/d):0,ze=K?Math.floor(C/f):0;for(let be=0;be<=Se;be++)for(let Ge=0;Ge<=ze;Ge++)ae.drawImage(z,P*be,Z*Ge,P,Z,0,0,P,Z);return{canvas:oe.canvas,scaleX:le.scale,scaleY:we.scale,offsetX:y,offsetY:A}}return{canvas:ne.canvas,scaleX:B.scale,scaleY:ie.scale,offsetX:y,offsetY:A}}getSizeAndScale(e,t,n){const i=Math.max($m.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const l=i-t,u=a-n;e.ctx.rect(t,n,l,u),e.current.updateRectMinMax(Ct(e.ctx),[t,n,i,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case tw.COLORED:const l=this.ctx;i.fillStyle=l.fillStyle,i.strokeStyle=l.strokeStyle,a.fillColor=l.fillStyle,a.strokeColor=l.strokeStyle;break;case tw.UNCOLORED:const u=Te.makeHexColor(n[0],n[1],n[2]);i.fillStyle=u,i.strokeStyle=u,a.fillColor=u,a.strokeColor=u;break;default:throw new TD(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,i){let a=n;i!==Mn.SHADING&&(a=Te.transform(a,t.baseTransform),this.matrix&&(a=Te.transform(a,this.matrix)));const l=this.createPatternCanvas(t);let u=new DOMMatrix(a);u=u.translate(l.offsetX,l.offsetY),u=u.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(u),d}};he($m,"MAX_PATTERN_SIZE",3e3);let AA=$m;function JD({src:o,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const u=Fn.isLittleEndian?4278190080:255,[d,f]=l?[a,u]:[u,a],y=n>>3,A=n&7,_=o.length;t=new Uint32Array(t.buffer);let S=0;for(let T=0;T<i;T++){for(const x=e+y;e<x;e++){const D=e<_?o[e]:255;t[S++]=D&128?f:d,t[S++]=D&64?f:d,t[S++]=D&32?f:d,t[S++]=D&16?f:d,t[S++]=D&8?f:d,t[S++]=D&4?f:d,t[S++]=D&2?f:d,t[S++]=D&1?f:d}if(A===0)continue;const C=e<_?o[e++]:255;for(let x=0;x<A;x++)t[S++]=C&1<<7-x?f:d}return{srcPos:e,destPos:S}}const nw=16,iw=100,jD=15,sw=10,aw=1e3,Jn=16;function ek(o,e){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){e.save(),this.__originalSave()},o.restore=function(){e.restore(),this.__originalRestore()},o.translate=function(n,i){e.translate(n,i),this.__originalTranslate(n,i)},o.scale=function(n,i){e.scale(n,i),this.__originalScale(n,i)},o.transform=function(n,i,a,l,u,d){e.transform(n,i,a,l,u,d),this.__originalTransform(n,i,a,l,u,d)},o.setTransform=function(n,i,a,l,u,d){e.setTransform(n,i,a,l,u,d),this.__originalSetTransform(n,i,a,l,u,d)},o.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},o.rotate=function(n){e.rotate(n),this.__originalRotate(n)},o.clip=function(n){e.clip(n),this.__originalClip(n)},o.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},o.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},o.bezierCurveTo=function(t,n,i,a,l,u){e.bezierCurveTo(t,n,i,a,l,u),this.__originalBezierCurveTo(t,n,i,a,l,u)},o.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},o.closePath=function(){e.closePath(),this.__originalClosePath()},o.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class tk{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Dg(o,e,t,n,i,a,l,u,d,f){const[y,A,_,S,T,C]=Ct(o);if(A===0&&_===0){const k=l*y+T,L=Math.round(k),U=u*S+C,F=Math.round(U),W=(l+d)*y+T,K=Math.abs(Math.round(W)-L)||1,Q=(u+f)*S+C,J=Math.abs(Math.round(Q)-F)||1;return o.setTransform(Math.sign(y),0,0,Math.sign(S),L,F),o.drawImage(e,t,n,i,a,0,0,K,J),o.setTransform(y,A,_,S,T,C),[K,J]}if(y===0&&S===0){const k=u*_+T,L=Math.round(k),U=l*A+C,F=Math.round(U),W=(u+f)*_+T,K=Math.abs(Math.round(W)-L)||1,Q=(l+d)*A+C,J=Math.abs(Math.round(Q)-F)||1;return o.setTransform(0,Math.sign(A),Math.sign(_),0,L,F),o.drawImage(e,t,n,i,a,0,0,J,K),o.setTransform(y,A,_,S,T,C),[J,K]}o.drawImage(e,t,n,i,a,l,u,d,f);const x=Math.hypot(y,A),D=Math.hypot(_,S);return[x*d,D*f]}function nk(o){const{width:e,height:t}=o;if(e>aw||t>aw)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1;let l=new Uint8Array(a*(t+1)),u,d,f;const y=e+7&-8;let A=new Uint8Array(y*t),_=0;for(const D of o.data){let k=128;for(;k>0;)A[_++]=D&k?0:255,k>>=1}let S=0;for(_=0,A[_]!==0&&(l[0]=1,++S),d=1;d<e;d++)A[_]!==A[_+1]&&(l[d]=A[_]?2:1,++S),_++;for(A[_]!==0&&(l[d]=2,++S),u=1;u<t;u++){_=u*y,f=u*a,A[_-y]!==A[_]&&(l[f]=A[_]?1:8,++S);let D=(A[_]?4:0)+(A[_-y]?8:0);for(d=1;d<e;d++)D=(D>>2)+(A[_+1]?4:0)+(A[_-y+1]?8:0),i[D]&&(l[f+d]=i[D],++S),_++;if(A[_-y]!==A[_]&&(l[f+d]=A[_]?2:4,++S),S>n)return null}for(_=y*(t-1),f=u*a,A[_]!==0&&(l[f]=8,++S),d=1;d<e;d++)A[_]!==A[_+1]&&(l[f+d]=A[_]?4:8,++S),_++;if(A[_]!==0&&(l[f+d]=4,++S),S>n)return null;const T=new Int32Array([0,a,-1,0,-a,0,0,0,1]),C=new Path2D;for(u=0;S&&u<=t;u++){let D=u*a;const k=D+e;for(;D<k&&!l[D];)D++;if(D===k)continue;C.moveTo(D%a,u);const L=D;let U=l[D];do{const F=T[U];do D+=F;while(!l[D]);const W=l[D];W!==5&&W!==10?(U=W,l[D]=0):(U=W&51*U>>4,l[D]&=U>>2|U<<2),C.lineTo(D%a,D/a|0),l[D]||--S}while(L!==D);--u}return A=null,l=null,function(D){D.save(),D.scale(1/e,-1/t),D.translate(0,-t),D.fill(C),D.beginPath(),D.restore()}}class rw{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=ax,this.textMatrixScale=1,this.fontMatrix=W0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_n.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Te.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Te.applyTransform(t,e),i=Te.applyTransform(t.slice(2),e),a=Te.applyTransform([t[0],t[3]],e),l=Te.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],i[0],a[0],l[0]),this.minY=Math.min(this.minY,n[1],i[1],a[1],l[1]),this.maxX=Math.max(this.maxX,n[0],i[0],a[0],l[0]),this.maxY=Math.max(this.maxY,n[1],i[1],a[1],l[1])}updateScalingPathMinMax(e,t){Te.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,a,l,u,d,f,y){const A=Te.bezierBoundingBox(t,n,i,a,l,u,d,f,y);y||this.updateRectMinMax(e,A)}getPathBoundingBox(e=Mn.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Mn.STROKE){t||yt("Stroke bounding box must include transform.");const i=Te.singularValueDecompose2dScale(t),a=i[0]*this.lineWidth/2,l=i[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const e=Te.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Mn.FILL,t=null){return Te.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ow(o,e){if(e instanceof ImageData){o.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%Jn,a=(t-i)/Jn,l=i===0?a:a+1,u=o.createImageData(n,Jn);let d=0,f;const y=e.data,A=u.data;let _,S,T,C;if(e.kind===Fg.GRAYSCALE_1BPP){const x=y.byteLength,D=new Uint32Array(A.buffer,0,A.byteLength>>2),k=D.length,L=n+7>>3,U=4294967295,F=Fn.isLittleEndian?4278190080:255;for(_=0;_<l;_++){for(T=_<a?Jn:i,f=0,S=0;S<T;S++){const W=x-d;let K=0;const Q=W>L?n:W*8-7,J=Q&-8;let se=0,ce=0;for(;K<J;K+=8)ce=y[d++],D[f++]=ce&128?U:F,D[f++]=ce&64?U:F,D[f++]=ce&32?U:F,D[f++]=ce&16?U:F,D[f++]=ce&8?U:F,D[f++]=ce&4?U:F,D[f++]=ce&2?U:F,D[f++]=ce&1?U:F;for(;K<Q;K++)se===0&&(ce=y[d++],se=128),D[f++]=ce&se?U:F,se>>=1}for(;f<k;)D[f++]=0;o.putImageData(u,0,_*Jn)}}else if(e.kind===Fg.RGBA_32BPP){for(S=0,C=n*Jn*4,_=0;_<a;_++)A.set(y.subarray(d,d+C)),d+=C,o.putImageData(u,0,S),S+=Jn;_<l&&(C=n*i*4,A.set(y.subarray(d,d+C)),o.putImageData(u,0,S))}else if(e.kind===Fg.RGB_24BPP)for(T=Jn,C=n*T,_=0;_<l;_++){for(_>=a&&(T=i,C=n*T),f=0,S=C;S--;)A[f++]=y[d++],A[f++]=y[d++],A[f++]=y[d++],A[f++]=255;o.putImageData(u,0,_*Jn)}else throw new Error(`bad image kind: ${e.kind}`)}function lw(o,e){if(e.bitmap){o.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%Jn,a=(t-i)/Jn,l=i===0?a:a+1,u=o.createImageData(n,Jn);let d=0;const f=e.data,y=u.data;for(let A=0;A<l;A++){const _=A<a?Jn:i;({srcPos:d}=JD({src:f,srcPos:d,dest:y,width:n,height:_,nonBlackColor:0})),o.putImageData(u,0,A*Jn)}}function eh(o,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)o[n]!==void 0&&(e[n]=o[n]);o.setLineDash!==void 0&&(e.setLineDash(o.getLineDash()),e.lineDashOffset=o.lineDashOffset)}function kg(o){if(o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0),!Rn){const{filter:e}=o;e!=="none"&&e!==""&&(o.filter="none")}}function cw(o,e){if(e)return!0;const t=Te.singularValueDecompose2dScale(o);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*jr.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const ik=["butt","round","square"],sk=["miter","round","bevel"],ak={},uw={};var gs,bA,_A,SA;const jb=class jb{constructor(e,t,n,i,a,{optionalContentConfig:l,markedContentStack:u=null},d,f){M(this,gs);this.ctx=e,this.current=new rw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new tk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Ct(this.compositeCtx))}this.ctx.save(),kg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ct(this.ctx)}executeOperatorList(e,t,n,i){const a=e.argsArray,l=e.fnArray;let u=t||0;const d=a.length;if(d===u)return u;const f=d-u>sw&&typeof n=="function",y=f?Date.now()+jD:0;let A=0;const _=this.commonObjs,S=this.objs;let T;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,n),u;if(T=l[u],T!==ji.dependency)this[T].apply(this,a[u]);else for(const C of a[u]){const x=C.startsWith("g_")?_:S;if(!x.has(C))return x.get(C,n),u}if(u++,u===d)return u;if(f&&++A>sw){if(Date.now()>y)return n(),u;A=0}}}endDrawing(){R(this,gs,bA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),R(this,gs,_A).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),u=n,d=i,f="prescale1",y,A;for(;a>2&&u>1||l>2&&d>1;){let _=u,S=d;a>2&&u>1&&(_=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/_),l>2&&d>1&&(S=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/S),y=this.cachedCanvases.getCanvas(f,_,S),A=y.context,A.clearRect(0,0,_,S),A.drawImage(e,0,0,u,d,0,0,_,S),e=y.canvas,u=_,d=S,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,a=this.current.fillColor,l=this.current.patternFill,u=Ct(t);let d,f,y,A;if((e.bitmap||e.data)&&e.count>1){const Q=e.bitmap||e.data.buffer;f=JSON.stringify(l?u:[u.slice(0,4),a]),d=this._cachedBitmapsMap.get(Q),d||(d=new Map,this._cachedBitmapsMap.set(Q,d));const J=d.get(f);if(J&&!l){const se=Math.round(Math.min(u[0],u[2])+u[4]),ce=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:J,offsetX:se,offsetY:ce}}y=J}y||(A=this.cachedCanvases.getCanvas("maskCanvas",n,i),lw(A.context,e));let _=Te.transform(u,[1/n,0,0,-1/i,0,0]);_=Te.transform(_,[1,0,0,1,0,-i]);const[S,T,C,x]=Te.getAxialAlignedBoundingBox([0,0,n,i],_),D=Math.round(C-S)||1,k=Math.round(x-T)||1,L=this.cachedCanvases.getCanvas("fillCanvas",D,k),U=L.context,F=S,W=T;U.translate(-F,-W),U.transform(..._),y||(y=this._scaleImage(A.canvas,Ss(U)),y=y.img,d&&l&&d.set(f,y)),U.imageSmoothingEnabled=cw(Ct(U),e.interpolate),Dg(U,y,0,0,y.width,y.height,0,0,n,i),U.globalCompositeOperation="source-in";const K=Te.transform(Ss(U),[1,0,0,1,-F,-W]);return U.fillStyle=l?a.getPattern(t,this,K,Mn.FILL):a,U.fillRect(0,0,n,i),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,L.canvas)),{canvas:L.canvas,offsetX:Math.round(F),offsetY:Math.round(W)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=ik[e]}setLineJoin(e){this.ctx.lineJoin=sk[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const a=this.ctx;a.setTransform(...Ct(this.suspendedCtx)),eh(this.suspendedCtx,a),ek(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),eh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],l=i[1],u=i[2]-a,d=i[3]-l;u===0||d===0||(this.genericComposeSMask(t.context,n,u,d,t.subtype,t.backdrop,t.transferMap,a,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,l,u,d,f,y,A){let _=e.canvas,S=d-y,T=f-A;if(l){const x=Te.makeHexColor(...l);if(S<0||T<0||S+n>_.width||T+i>_.height){const D=this.cachedCanvases.getCanvas("maskExtension",n,i),k=D.context;k.drawImage(_,-S,-T),k.globalCompositeOperation="destination-atop",k.fillStyle=x,k.fillRect(0,0,n,i),k.globalCompositeOperation="source-over",_=D.canvas,S=T=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const D=new Path2D;D.rect(S,T,n,i),e.clip(D),e.globalCompositeOperation="destination-atop",e.fillStyle=x,e.fillRect(S,T,n,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(d,f,n,i),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(_,S,T,n,i,d,f,n,i),t.restore()}save(){this.inSMaskMode?(eh(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),eh(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,i,a,l){this.ctx.transform(e,t,n,i,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const i=this.ctx,a=this.current;let l=a.x,u=a.y,d,f;const y=Ct(i),A=y[0]===0&&y[3]===0||y[1]===0&&y[2]===0,_=A?n.slice(0):null;for(let S=0,T=0,C=e.length;S<C;S++)switch(e[S]|0){case ji.rectangle:l=t[T++],u=t[T++];const x=t[T++],D=t[T++],k=l+x,L=u+D;i.moveTo(l,u),x===0||D===0?i.lineTo(k,L):(i.lineTo(k,u),i.lineTo(k,L),i.lineTo(l,L)),A||a.updateRectMinMax(y,[l,u,k,L]),i.closePath();break;case ji.moveTo:l=t[T++],u=t[T++],i.moveTo(l,u),A||a.updatePathMinMax(y,l,u);break;case ji.lineTo:l=t[T++],u=t[T++],i.lineTo(l,u),A||a.updatePathMinMax(y,l,u);break;case ji.curveTo:d=l,f=u,l=t[T+4],u=t[T+5],i.bezierCurveTo(t[T],t[T+1],t[T+2],t[T+3],l,u),a.updateCurvePathMinMax(y,d,f,t[T],t[T+1],t[T+2],t[T+3],l,u,_),T+=6;break;case ji.curveTo2:d=l,f=u,i.bezierCurveTo(l,u,t[T],t[T+1],t[T+2],t[T+3]),a.updateCurvePathMinMax(y,d,f,l,u,t[T],t[T+1],t[T+2],t[T+3],_),l=t[T+2],u=t[T+3],T+=4;break;case ji.curveTo3:d=l,f=u,l=t[T+2],u=t[T+3],i.bezierCurveTo(t[T],t[T+1],l,u,l,u),a.updateCurvePathMinMax(y,d,f,t[T],t[T+1],l,u,l,u,_),T+=4;break;case ji.closePath:i.closePath();break}A&&a.updateScalingPathMinMax(y,_),a.setCurrentPoint(l,u)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Ss(t),Mn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let a=!1;i&&(t.save(),t.fillStyle=n.getPattern(t,this,Ss(t),Mn.FILL),a=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ak}eoClip(){this.pendingClip=uw}beginText(){this.current.textMatrix=ax,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:a,x:l,y:u,fontSize:d,path:f}of e)n.addPath(f,new DOMMatrix(a).preMultiplySelf(i).translate(l,u).scale(d,-d));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var y;const n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=n.fontMatrix||W0,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Fe("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=((y=n.systemFontInfo)==null?void 0:y.css)||`"${a}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let f=t;t<nw?f=nw:t>iw&&(f=iw),this.current.fontSizeScale=t/f,this.ctx.font=`${d} ${u} ${f}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,i,a,l){this.current.textMatrix=[e,t,n,i,a,l],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i,a){const l=this.ctx,u=this.current,d=u.font,f=u.textRenderingMode,y=u.fontSize/u.fontSizeScale,A=f&_n.FILL_STROKE_MASK,_=!!(f&_n.ADD_TO_PATH_FLAG),S=u.patternFill&&!d.missingFile,T=u.patternStroke&&!d.missingFile;let C;if((d.disableFontFace||_||S||T)&&(C=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||S||T){if(l.save(),l.translate(t,n),l.scale(y,-y),A===_n.FILL||A===_n.FILL_STROKE)if(i){const x=l.getTransform();l.setTransform(...i),l.fill(R(this,gs,SA).call(this,C,x,i))}else l.fill(C);if(A===_n.STROKE||A===_n.FILL_STROKE)if(a){const x=l.getTransform();l.setTransform(...a),l.stroke(R(this,gs,SA).call(this,C,x,a))}else l.lineWidth/=y,l.stroke(C);l.restore()}else(A===_n.FILL||A===_n.FILL_STROKE)&&l.fillText(e,t,n),(A===_n.STROKE||A===_n.FILL_STROKE)&&l.strokeText(e,t,n);_&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ct(l),x:t,y:n,fontSize:y,path:C})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Ye(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const a=this.ctx,l=t.fontSizeScale,u=t.charSpacing,d=t.wordSpacing,f=t.fontDirection,y=t.textHScale*f,A=e.length,_=n.vertical,S=_?1:-1,T=n.defaultVMetrics,C=i*t.fontMatrix[0],x=t.textRenderingMode===_n.FILL&&!n.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),f>0?a.scale(y,-1):a.scale(y,1);let D,k;if(t.patternFill){a.save();const K=t.fillColor.getPattern(a,this,Ss(a),Mn.FILL);D=Ct(a),a.restore(),a.fillStyle=K}if(t.patternStroke){a.save();const K=t.strokeColor.getPattern(a,this,Ss(a),Mn.STROKE);k=Ct(a),a.restore(),a.strokeStyle=K}let L=t.lineWidth;const U=t.textMatrixScale;if(U===0||L===0){const K=t.textRenderingMode&_n.FILL_STROKE_MASK;(K===_n.STROKE||K===_n.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=U;if(l!==1&&(a.scale(l,l),L/=l),a.lineWidth=L,n.isInvalidPDFjsFont){const K=[];let Q=0;for(const J of e)K.push(J.unicode),Q+=J.width;a.fillText(K.join(""),0,0),t.x+=Q*C*y,a.restore(),this.compose();return}let F=0,W;for(W=0;W<A;++W){const K=e[W];if(typeof K=="number"){F+=S*K*i/1e3;continue}let Q=!1;const J=(K.isSpace?d:0)+u,se=K.fontChar,ce=K.accent;let B,ie,ne=K.width;if(_){const O=K.vmetric||T,z=-(K.vmetric?O[1]:ne*.5)*C,le=O[2]*C;ne=O?-O[0]:ne,B=z/l,ie=(F+le)/l}else B=F/l,ie=0;if(n.remeasure&&ne>0){const O=a.measureText(se).width*1e3/i*l;if(ne<O&&this.isFontSubpixelAAEnabled){const z=ne/O;Q=!0,a.save(),a.scale(z,1),B/=z}else ne!==O&&(B+=(ne-O)/2e3*i/l)}if(this.contentVisible&&(K.isInFont||n.missingFile)){if(x&&!ce)a.fillText(se,B,ie);else if(this.paintChar(se,B,ie,D,k),ce){const O=B+i*ce.offset.x/l,z=ie-i*ce.offset.y/l;this.paintChar(ce.fontChar,O,z,D,k)}}const ue=_?ne*C-J*f:ne*C+J*f;F+=ue,Q&&a.restore()}_?t.y-=F:t.x+=F*y,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,a=n.fontSize,l=n.fontDirection,u=i.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,y=n.textHScale*l,A=n.fontMatrix||W0,_=e.length,S=n.textRenderingMode===_n.INVISIBLE;let T,C,x,D;if(!(S||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(y,l),T=0;T<_;++T){if(C=e[T],typeof C=="number"){D=u*C*a/1e3,this.ctx.translate(D,0),n.x+=D*y;continue}const k=(C.isSpace?f:0)+d,L=i.charProcOperatorList[C.operatorListId];if(!L){Fe(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),t.scale(a,a),t.transform(...A),this.executeOperatorList(L),this.restore()),x=Te.applyTransform([C.width,0],A)[0]*a+k,t.translate(x,0),n.x+=x*y}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,a,l){this.ctx.rect(n,i,a-n,l-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],i=this.baseTransform||Ct(this.ctx),a={createCanvasGraphics:l=>new jb(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new AA(e,n,this.ctx,a,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=Te.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=Te.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=QD(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Ss(t),Mn.SHADING);const i=Ss(t);if(i){const{width:a,height:l}=t.canvas,[u,d,f,y]=Te.getAxialAlignedBoundingBox([0,0,a,l],i);this.ctx.fillRect(u,d,f-u,y-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){yt("Should not call beginInlineImage")}beginImageData(){yt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ct(this.ctx),t)){const n=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],n,i),this.current.updateRectMinMax(Ct(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||ay("TODO: Support non-isolated groups."),e.knockout&&Fe("Knockout groups not supported.");const n=Ct(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Te.getAxialAlignedBoundingBox(e.bbox,Ct(t));const a=[0,0,t.canvas.width,t.canvas.height];i=Te.intersect(i,a)||[0,0,0,0];const l=Math.floor(i[0]),u=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-l,1),f=Math.max(Math.ceil(i[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const A=this.cachedCanvases.getCanvas(y,d,f),_=A.context;_.translate(-l,-u),_.transform(...n),e.smask?this.smaskStack.push({canvas:A.canvas,context:_,offsetX:l,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,u),t.save()),eh(t,_),this.ctx=_,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Ct(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=Te.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,n,i,a){if(R(this,gs,bA).call(this),kg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const l=t[2]-t[0],u=t[3]-t[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=l,t[3]=u;const[d,f]=Te.singularValueDecompose2dScale(Ct(this.ctx)),{viewportScale:y}=this,A=Math.ceil(l*this.outputScaleX*y),_=Math.ceil(u*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(A,_);const{canvas:S,context:T}=this.annotationCanvas;this.annotationCanvasMap.set(e,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=T,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,u*f),kg(this.ctx)}else kg(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],l,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new rw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,gs,_A).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=nk(e)),i.compiled)){i.compiled(n);return}const a=this._createMaskCanvas(e),l=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,i=0,a,l){if(!this.contentVisible)return;e=this.getObject(e.data,e);const u=this.ctx;u.save();const d=Ct(u);u.transform(t,n,i,a,0,0);const f=this._createMaskCanvas(e);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let y=0,A=l.length;y<A;y+=2){const _=Te.transform(d,[t,n,i,a,l[y],l[y+1]]),[S,T]=Te.applyTransform([0,0],_);u.drawImage(f.canvas,S,T)}u.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const a of e){const{data:l,width:u,height:d,transform:f}=a,y=this.cachedCanvases.getCanvas("maskCanvas",u,d),A=y.context;A.save();const _=this.getObject(l,a);lw(A,_),A.globalCompositeOperation="source-in",A.fillStyle=i?n.getPattern(A,this,Ss(t),Mn.FILL):n,A.fillRect(0,0,u,d),A.restore(),t.save(),t.transform(...f),t.scale(1,-1),Dg(t,y.canvas,0,0,u,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Fe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Fe("Dependent image isn't ready yet");return}const l=a.width,u=a.height,d=[];for(let f=0,y=i.length;f<y;f+=2)d.push({transform:[t,0,0,n,i[f],i[f+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;if(this.save(),!Rn){const{filter:u}=i;u!=="none"&&u!==""&&(i.filter="none")}i.scale(1/t,-1/n);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ow(d,e),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,Ss(i));i.imageSmoothingEnabled=cw(Ct(i),e.interpolate),Dg(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const a=e.width,l=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l).context;ow(d,e),i=this.applyTransferMapsToCanvas(d)}for(const a of t)n.save(),n.transform(...a.transform),n.scale(1,-1),Dg(n,i,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===uw?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ct(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let l,u;if(n===0&&i===0){const d=Math.abs(t),f=Math.abs(a);if(d===f)if(e===0)l=u=1/d;else{const y=d*e;l=u=y<1?1/y:1}else if(e===0)l=1/d,u=1/f;else{const y=d*e,A=f*e;l=y<1?1/y:1,u=A<1?1/A:1}}else{const d=Math.abs(t*a-n*i),f=Math.hypot(t,n),y=Math.hypot(i,a);if(e===0)l=y/d,u=f/d;else{const A=e*d;l=y>A?y/A:1,u=f>A?f/A:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[i,a]=this.getScaleForStroking();if(t.lineWidth=n||1,i===1&&a===1){t.stroke();return}const l=t.getLineDash();if(e&&t.save(),t.scale(i,a),l.length>0){const u=Math.max(i,a);t.setLineDash(l.map(d=>d/u)),t.lineDashOffset/=u}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};gs=new WeakSet,bA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},_A=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},SA=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Vc=jb;for(const o in ji)Vc.prototype[o]!==void 0&&(Vc.prototype[ji[o]]=Vc.prototype[o]);var hf,ff;class Ba{static get workerPort(){return p(this,hf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");w(this,hf,e)}static get workerSrc(){return p(this,ff)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");w(this,ff,e)}}hf=new WeakMap,ff=new WeakMap,M(Ba,hf,null),M(Ba,ff,"");var jo,pf;class rk{constructor({parsedData:e,rawData:t}){M(this,jo);M(this,pf);w(this,jo,e),w(this,pf,t)}getRaw(){return p(this,pf)}get(e){return p(this,jo).get(e)??null}getAll(){return xb(p(this,jo))}has(e){return p(this,jo).has(e)}}jo=new WeakMap,pf=new WeakMap;const Nc=Symbol("INTERNAL");var gf,mf,yf,ru;class ok{constructor(e,{name:t,intent:n,usage:i,rbGroups:a}){M(this,gf,!1);M(this,mf,!1);M(this,yf,!1);M(this,ru,!0);w(this,gf,!!(e&_i.DISPLAY)),w(this,mf,!!(e&_i.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(p(this,yf))return p(this,ru);if(!p(this,ru))return!1;const{print:e,view:t}=this.usage;return p(this,gf)?(t==null?void 0:t.viewState)!=="OFF":p(this,mf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Nc&&yt("Internal method `_setVisible` called."),w(this,yf,n),w(this,ru,t)}}gf=new WeakMap,mf=new WeakMap,yf=new WeakMap,ru=new WeakMap;var kr,ct,ou,lu,vf,TA;class lk{constructor(e,t=_i.DISPLAY){M(this,vf);M(this,kr,null);M(this,ct,new Map);M(this,ou,null);M(this,lu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,w(this,lu,e.order);for(const n of e.groups)p(this,ct).set(n.id,new ok(t,n));if(e.baseState==="OFF")for(const n of p(this,ct).values())n._setVisible(Nc,!1);for(const n of e.on)p(this,ct).get(n)._setVisible(Nc,!0);for(const n of e.off)p(this,ct).get(n)._setVisible(Nc,!1);w(this,ou,this.getHash())}}isVisible(e){if(p(this,ct).size===0)return!0;if(!e)return ay("Optional content group not defined."),!0;if(e.type==="OCG")return p(this,ct).has(e.id)?p(this,ct).get(e.id).visible:(Fe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return R(this,vf,TA).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!p(this,ct).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(p(this,ct).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!p(this,ct).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(!p(this,ct).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!p(this,ct).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(!p(this,ct).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!p(this,ct).has(t))return Fe(`Optional content group not found: ${t}`),!0;if(p(this,ct).get(t).visible)return!1}return!0}return Fe(`Unknown optional content policy ${e.policy}.`),!0}return Fe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var a;const i=p(this,ct).get(e);if(!i){Fe(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const l of i.rbGroups)for(const u of l)u!==e&&((a=p(this,ct).get(u))==null||a._setVisible(Nc,!1,!0));i._setVisible(Nc,!!t,!0),w(this,kr,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=p(this,ct).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}w(this,kr,null)}get hasInitialVisibility(){return p(this,ou)===null||this.getHash()===p(this,ou)}getOrder(){return p(this,ct).size?p(this,lu)?p(this,lu).slice():[...p(this,ct).keys()]:null}getGroups(){return p(this,ct).size>0?xb(p(this,ct)):null}getGroup(e){return p(this,ct).get(e)||null}getHash(){if(p(this,kr)!==null)return p(this,kr);const e=new Ox;for(const[t,n]of p(this,ct))e.update(`${t}:${n.visible}`);return w(this,kr,e.hexdigest())}}kr=new WeakMap,ct=new WeakMap,ou=new WeakMap,lu=new WeakMap,vf=new WeakSet,TA=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const a=e[i];let l;if(Array.isArray(a))l=R(this,vf,TA).call(this,a);else if(p(this,ct).has(a))l=p(this,ct).get(a).visible;else return Fe(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class ck{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Gt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:l,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),e.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Gt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,a;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Gt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new uk(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new dk(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class uk{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=Ib(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dk{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function hk(o){let e=!0,t=n("filename\\*","i").exec(o);if(t){t=t[1];let y=u(t);return y=unescape(y),y=d(y),y=f(y),a(y)}if(t=l(o),t){const y=f(t);return a(y)}if(t=n("filename","i").exec(o),t){t=t[1];let y=u(t);return y=f(y),a(y)}function n(y,A){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function i(y,A){if(y){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const _=new TextDecoder(y,{fatal:!0}),S=ry(A);A=_.decode(S),e=!1}catch{}}return A}function a(y){return e&&/[\x80-\xff]/.test(y)&&(y=i("utf-8",y),e&&(y=i("iso-8859-1",y))),y}function l(y){const A=[];let _;const S=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=S.exec(y))!==null;){let[,C,x,D]=_;if(C=parseInt(C,10),C in A){if(C===0)break;continue}A[C]=[x,D]}const T=[];for(let C=0;C<A.length&&C in A;++C){let[x,D]=A[C];D=u(D),x&&(D=unescape(D),C===0&&(D=d(D))),T.push(D)}return T.join("")}function u(y){if(y.startsWith('"')){const A=y.slice(1).split('\\"');for(let _=0;_<A.length;++_){const S=A[_].indexOf('"');S!==-1&&(A[_]=A[_].slice(0,S),A.length=_+1),A[_]=A[_].replaceAll(/\\(.)/g,"$1")}y=A.join('"')}return y}function d(y){const A=y.indexOf("'");if(A===-1)return y;const _=y.slice(0,A),T=y.slice(A+1).replace(/^[^']*'/,"");return i(_,T)}function f(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,_,S,T){if(S==="q"||S==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,x){return String.fromCharCode(parseInt(x,16))}),i(_,T);try{T=atob(T)}catch{}return i(_,T)})}return""}function Zx(o,e){const t=new Headers;if(!o||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function cy(o){try{return new URL(o).origin}catch{}return null}function Qx({responseHeaders:o,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(o.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||n||!e||o.get("Accept-Ranges")!=="bytes"||(o.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Jx(o){const e=o.get("Content-Disposition");if(e){let t=hk(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ib(t))return t}return null}function uy(o,e){return o===404||o===0&&e.startsWith("file:")?new Nh('Missing PDF "'+e+'".'):new ym(`Unexpected server response (${o}) while retrieving PDF "${e}".`,o)}function jx(o){return o===200||o===206}function e1(o,e,t){return{method:"GET",headers:o,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function t1(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(Fe(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class dw{constructor(e){he(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Zx(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new fk(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new pk(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class fk{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,e1(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=cy(a.url),!jx(a.status))throw uy(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:u,suggestedLength:d}=Qx({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=Jx(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Jr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:t1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class pk{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const l=i.url;fetch(l,e1(a,this._withCredentials,this._abortController)).then(u=>{const d=cy(u.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!jx(u.status))throw uy(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:t1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const O0=200,F0=206;function gk(o){const e=o.response;return typeof e!="string"?e:ry(e).buffer}class mk{constructor({url:e,httpHeaders:t,withCredentials:n}){he(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Zx(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,l]of this.headers)t.setRequestHeader(a,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=F0):i.expectedStatus=O0,t.responseType="arraybuffer",Gt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||O0;if(!(a===O0&&n.expectedStatus===F0)&&a!==n.expectedStatus){n.onError(i.status);return}const u=gk(i);if(a===F0){const d=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(Fe('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class yk{constructor(e){this._source=e,this._manager=new mk(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Gt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vk(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Ak(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class vk{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=cy(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=Qx({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Jx(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=uy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ak{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=cy((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=uy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bk=/^[a-z][a-z0-9\-+.]+:/i;function _k(o){if(bk.test(o))return new URL(o);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(o))}class Sk{constructor(e){this.source=e,this.url=_k(e.url),Gt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Tk(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Ck(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Tk{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Nh(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Jr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ck{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wk=1e5,Yn=30,Ek=.8;var sx,Nr,Zn,Af,bf,el,Ca,_f,Sf,tl,cu,uu,Lr,du,Tf,hu,nl,Cf,wf,il,sl,Ef,Pr,fu,$a,n1,i1,CA,wi,Xg,wA,s1,a1;const Xt=class Xt{constructor({textContentSource:e,container:t,viewport:n}){M(this,$a);M(this,Nr,Promise.withResolvers());M(this,Zn,null);M(this,Af,!1);M(this,bf,!!((sx=globalThis.FontInspector)!=null&&sx.enabled));M(this,el,null);M(this,Ca,null);M(this,_f,0);M(this,Sf,0);M(this,tl,null);M(this,cu,null);M(this,uu,0);M(this,Lr,0);M(this,du,Object.create(null));M(this,Tf,[]);M(this,hu,null);M(this,nl,[]);M(this,Cf,new WeakMap);M(this,wf,null);var d;if(e instanceof ReadableStream)w(this,hu,e);else if(typeof e=="object")w(this,hu,new ReadableStream({start(f){f.enqueue(e),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,Zn,w(this,cu,t)),w(this,Lr,n.scale*(globalThis.devicePixelRatio||1)),w(this,uu,n.rotation),w(this,Ca,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:l,pageY:u}=n.rawDims;w(this,wf,[1,0,0,-1,-l,u+a]),w(this,Sf,i),w(this,_f,a),R(d=Xt,wi,s1).call(d),Ll(t,n),p(this,Nr).promise.finally(()=>{p(Xt,fu).delete(this),w(this,Ca,null),w(this,du,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Fn.platform;return Ye(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{p(this,tl).read().then(({value:t,done:n})=>{if(n){p(this,Nr).resolve();return}p(this,el)??w(this,el,t.lang),Object.assign(p(this,du),t.styles),R(this,$a,n1).call(this,t.items),e()},p(this,Nr).reject)};return w(this,tl,p(this,hu).getReader()),p(Xt,fu).add(this),e(),p(this,Nr).promise}update({viewport:e,onBefore:t=null}){var a;const n=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==p(this,uu)&&(t==null||t(),w(this,uu,i),Ll(p(this,cu),{rotation:i})),n!==p(this,Lr)){t==null||t(),w(this,Lr,n);const l={div:null,properties:null,ctx:R(a=Xt,wi,Xg).call(a,p(this,el))};for(const u of p(this,nl))l.properties=p(this,Cf).get(u),l.div=u,R(this,$a,CA).call(this,l)}}cancel(){var t;const e=new Jr("TextLayer task cancelled.");(t=p(this,tl))==null||t.cancel(e).catch(()=>{}),w(this,tl,null),p(this,Nr).reject(e)}get textDivs(){return p(this,nl)}get textContentItemsStr(){return p(this,Tf)}static cleanup(){if(!(p(this,fu).size>0)){p(this,il).clear();for(const{canvas:e}of p(this,sl).values())e.remove();p(this,sl).clear()}}};Nr=new WeakMap,Zn=new WeakMap,Af=new WeakMap,bf=new WeakMap,el=new WeakMap,Ca=new WeakMap,_f=new WeakMap,Sf=new WeakMap,tl=new WeakMap,cu=new WeakMap,uu=new WeakMap,Lr=new WeakMap,du=new WeakMap,Tf=new WeakMap,hu=new WeakMap,nl=new WeakMap,Cf=new WeakMap,wf=new WeakMap,il=new WeakMap,sl=new WeakMap,Ef=new WeakMap,Pr=new WeakMap,fu=new WeakMap,$a=new WeakSet,n1=function(e){var i,a;if(p(this,Af))return;(a=p(this,Ca)).ctx??(a.ctx=R(i=Xt,wi,Xg).call(i,p(this,el)));const t=p(this,nl),n=p(this,Tf);for(const l of e){if(t.length>wk){Fe("Ignoring additional textDivs for performance reasons."),w(this,Af,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const u=p(this,Zn);w(this,Zn,document.createElement("span")),p(this,Zn).classList.add("markedContent"),l.id!==null&&p(this,Zn).setAttribute("id",`${l.id}`),u.append(p(this,Zn))}else l.type==="endMarkedContent"&&w(this,Zn,p(this,Zn).parentNode);continue}n.push(l.str),R(this,$a,i1).call(this,l)}},i1=function(e){var C;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};p(this,nl).push(t);const i=Te.transform(p(this,wf),e.transform);let a=Math.atan2(i[1],i[0]);const l=p(this,du)[e.fontName];l.vertical&&(a+=Math.PI/2);let u=p(this,bf)&&l.fontSubstitution||l.fontFamily;u=Xt.fontFamilyMap.get(u)||u;const d=Math.hypot(i[2],i[3]),f=d*R(C=Xt,wi,a1).call(C,u,p(this,el));let y,A;a===0?(y=i[4],A=i[5]-f):(y=i[4]+f*Math.sin(a),A=i[5]-f*Math.cos(a));const _="calc(var(--scale-factor)*",S=t.style;p(this,Zn)===p(this,cu)?(S.left=`${(100*y/p(this,Sf)).toFixed(2)}%`,S.top=`${(100*A/p(this,_f)).toFixed(2)}%`):(S.left=`${_}${y.toFixed(2)}px)`,S.top=`${_}${A.toFixed(2)}px)`),S.fontSize=`${_}${(p(Xt,Pr)*d).toFixed(2)}px)`,S.fontFamily=u,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,p(this,bf)&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let T=!1;if(e.str.length>1)T=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),D=Math.abs(e.transform[3]);x!==D&&Math.max(x,D)/Math.min(x,D)>1.5&&(T=!0)}if(T&&(n.canvasWidth=l.vertical?e.height:e.width),p(this,Cf).set(t,n),p(this,Ca).div=t,p(this,Ca).properties=n,R(this,$a,CA).call(this,p(this,Ca)),n.hasText&&p(this,Zn).append(t),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),p(this,Zn).append(x)}},CA=function(e){var u;const{div:t,properties:n,ctx:i}=e,{style:a}=t;let l="";if(p(Xt,Pr)>1&&(l=`scale(${1/p(Xt,Pr)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=a,{canvasWidth:f,fontSize:y}=n;R(u=Xt,wi,wA).call(u,i,y*p(this,Lr),d);const{width:A}=i.measureText(t.textContent);A>0&&(l=`scaleX(${f*p(this,Lr)/A}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)},wi=new WeakSet,Xg=function(e=null){let t=p(this,sl).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),p(this,sl).set(e,t),p(this,Ef).set(t,{size:0,family:""})}return t},wA=function(e,t,n){const i=p(this,Ef).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},s1=function(){if(p(this,Pr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),w(this,Pr,e.getBoundingClientRect().height),e.remove()},a1=function(e,t){const n=p(this,il).get(e);if(n)return n;const i=R(this,wi,Xg).call(this,t);i.canvas.width=i.canvas.height=Yn,R(this,wi,wA).call(this,i,Yn,e);const a=i.measureText("");let l=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);if(l){const y=l/(l+u);return p(this,il).set(e,y),i.canvas.width=i.canvas.height=0,y}i.strokeStyle="red",i.clearRect(0,0,Yn,Yn),i.strokeText("g",0,0);let d=i.getImageData(0,0,Yn,Yn).data;u=0;for(let y=d.length-1-3;y>=0;y-=4)if(d[y]>0){u=Math.ceil(y/4/Yn);break}i.clearRect(0,0,Yn,Yn),i.strokeText("A",0,Yn),d=i.getImageData(0,0,Yn,Yn).data,l=0;for(let y=0,A=d.length;y<A;y+=4)if(d[y]>0){l=Yn-Math.floor(y/4/Yn);break}i.canvas.width=i.canvas.height=0;const f=l?l/(l+u):Ek;return p(this,il).set(e,f),f},M(Xt,wi),M(Xt,il,new Map),M(Xt,sl,new Map),M(Xt,Ef,new WeakMap),M(Xt,Pr,null),M(Xt,fu,new Set);let Lh=Xt;class Ph{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(a){var d;if(!a)return;let l=null;const u=a.name;if(u==="#text")l=a.value;else if(Ph.shouldBuildText(u))(d=a==null?void 0:a.attributes)!=null&&d.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&t.push({str:l}),!!a.children)for(const f of a.children)i(f)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const xk=65536,Mk=100,Rk=5e3,Ik=Rn?qD:VD,Dk=Rn?$D:qx,kk=Rn?GD:zD,Nk=Rn?YD:Xx;function Lk(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const e=new EA,{docId:t}=e,n=o.url?Pk(o.url):null,i=o.data?Ok(o.data):null,a=o.httpHeaders||null,l=o.withCredentials===!0,u=o.password??null,d=o.range instanceof r1?o.range:null,f=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:xk;let y=o.worker instanceof zc?o.worker:null;const A=o.verbosity,_=typeof o.docBaseUrl=="string"&&!ly(o.docBaseUrl)?o.docBaseUrl:null,S=typeof o.cMapUrl=="string"?o.cMapUrl:null,T=o.cMapPacked!==!1,C=o.CMapReaderFactory||Dk,x=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,D=o.StandardFontDataFactory||Nk,k=o.stopAtErrors!==!0,L=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,U=o.isEvalSupported!==!1,F=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!Rn,W=typeof o.isImageDecoderSupported=="boolean"?o.isImageDecoderSupported:!Rn&&(Fn.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,Q=typeof o.disableFontFace=="boolean"?o.disableFontFace:Rn,J=o.fontExtraProperties===!0,se=o.enableXfa===!0,ce=o.ownerDocument||globalThis.document,B=o.disableRange===!0,ie=o.disableStream===!0,ne=o.disableAutoFetch===!0,ue=o.pdfBug===!0,O=o.CanvasFactory||Ik,z=o.FilterFactory||kk,le=o.enableHWA===!0,we=d?d.length:o.length??NaN,P=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!Rn&&!Q,Z=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:C===qx&&D===Xx&&S&&x&&ch(S,document.baseURI)&&ch(x,document.baseURI),oe=null;AD(A);const ae={canvasFactory:new O({ownerDocument:ce,enableHWA:le}),filterFactory:new z({docId:t,ownerDocument:ce}),cMapReaderFactory:Z?null:new C({baseUrl:S,isCompressed:T}),standardFontDataFactory:Z?null:new D({baseUrl:x})};if(!y){const be={verbosity:A,port:Ba.workerPort};y=be.port?zc.fromPort(be):new zc(be),e._worker=y}const Se={docId:t,apiVersion:"4.10.38",data:i,password:u,disableAutoFetch:ne,rangeChunkSize:f,length:we,docBaseUrl:_,enableXfa:se,evaluatorOptions:{maxImageSize:L,disableFontFace:Q,ignoreErrors:k,isEvalSupported:U,isOffscreenCanvasSupported:F,isImageDecoderSupported:W,canvasMaxAreaInBytes:K,fontExtraProperties:J,useSystemFonts:P,cMapUrl:Z?S:null,standardFontDataUrl:Z?x:null}},ze={disableFontFace:Q,fontExtraProperties:J,ownerDocument:ce,pdfBug:ue,styleElement:oe,loadingParams:{disableAutoFetch:ne,enableXfa:se}};return y.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const be=y.messageHandler.sendWithPromise("GetDocRequest",Se,i?[i.buffer]:null);let Ge;if(d)Ge=new ck(d,{disableRange:B,disableStream:ie});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let it;if(Rn)if(ch(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");it=dw}else it=Sk;else it=ch(n)?dw:yk;Ge=new it({url:n,length:we,httpHeaders:a,withCredentials:l,rangeChunkSize:f,disableRange:B,disableStream:ie})}return be.then(it=>{if(e.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const Xi=new fh(t,it,y.port),td=new Bk(Xi,e,Ge,ze,ae);e._transport=td,Xi.send("Ready",null)})}).catch(e._capability.reject),e}function Pk(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(Rn&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Ok(o){if(Rn&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return ry(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function hw(o){return typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0}var Ym;const Wm=class Wm{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Dn(Wm,Ym)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};Ym=new WeakMap,M(Wm,Ym,0);let EA=Wm;class r1{constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Fk{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ye(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Or,wa,qi,Lc,Kg;class Uk{constructor(e,t,n,i=!1){M(this,qi);M(this,Or,null);M(this,wa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new JC:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new o1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new cp({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ye(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:i=Ar.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:y=null,isEditing:A=!1}){var U,F;(U=this._stats)==null||U.time("Overall");const _=this._transport.getRenderingIntent(n,i,y,A),{renderingIntent:S,cacheKey:T}=_;w(this,wa,!1),R(this,qi,Kg).call(this),u||(u=this._transport.getOptionalContentConfig(S));let C=this._intentStates.get(T);C||(C=Object.create(null),this._intentStates.set(T,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const x=!!(S&_i.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(F=this._stats)==null||F.time("Page Request"),this._pumpOperatorList(_));const D=W=>{var K;C.renderTasks.delete(k),(this._maybeCleanupAfterRender||x)&&w(this,wa,!0),R(this,qi,Lc).call(this,!x),W?(k.capability.reject(W),this._abortOperatorList({intentState:C,reason:W instanceof Error?W:new Error(W)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(K=globalThis.Stats)!=null&&K.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new MA({callback:D,params:{canvasContext:e,viewport:t,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:f});(C.renderTasks||(C.renderTasks=new Set)).add(k);const L=k.task;return Promise.all([C.displayReadyCapability.promise,u]).then(([W,K])=>{var Q;if(this.destroyed){D();return}if((Q=this._stats)==null||Q.time("Rendering"),!(K.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:W,optionalContentConfig:K}),k.operatorListChanged()}).catch(D),L}getOperatorList({intent:e="display",annotationMode:t=Ar.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var f;function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,n,i,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ph.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function a(){l.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),a()},i)}const l=t.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),w(this,wa,!1),R(this,qi,Kg).call(this),Promise.all(e)}cleanup(e=!1){w(this,wa,!0);const t=R(this,qi,Lc).call(this,!1);return e&&t&&this._stats&&(this._stats=new JC),t}_startRenderPage(e,t){var i,a;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&R(this,qi,Lc).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},l).getReader(),f=this._intentStates.get(t);f.streamReader=d;const y=()=>{d.read().then(({value:A,done:_})=>{if(_){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(A,f),y())},A=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const _ of f.renderTasks)_.operatorListChanged();R(this,qi,Lc).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(A);else if(f.opListReadCapability)f.opListReadCapability.reject(A);else throw A}})};y()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Rb){let i=Mk;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Jr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Or=new WeakMap,wa=new WeakMap,qi=new WeakSet,Lc=function(e=!1){if(R(this,qi,Kg).call(this),!p(this,wa)||this.destroyed)return!1;if(e)return w(this,Or,setTimeout(()=>{w(this,Or,null),R(this,qi,Lc).call(this,!1)},Rk)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,wa,!1),!0},Kg=function(){p(this,Or)&&(clearTimeout(p(this,Or)),w(this,Or,null))};var Ea,Xm;class Hk{constructor(){M(this,Ea,new Map);M(this,Xm,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};p(this,Xm).then(()=>{for(const[i]of p(this,Ea))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Fe("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}p(this,Ea).set(t,i)}removeEventListener(e,t){const n=p(this,Ea).get(t);n==null||n(),p(this,Ea).delete(t)}terminate(){for(const[,e]of p(this,Ea))e==null||e();p(this,Ea).clear()}}Ea=new WeakMap,Xm=new WeakMap;var Km,al,rl,pu,Zg,gu,Qg;const Tt=class Tt{constructor({name:e=null,port:t=null,verbosity:n=bD()}={}){M(this,pu);var i;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=p(Tt,rl))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(p(Tt,rl)||w(Tt,rl,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new fh("main","worker",e),this._messageHandler.on("ready",function(){}),R(this,pu,Zg).call(this)}_initialize(){if(p(Tt,al)||p(Tt,gu,Qg)){this._setupFakeWorker();return}let{workerSrc:e}=Tt;try{Tt._isSameOrigin(window.location.href,e)||(e=Tt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new fh("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:a.signal}),n.on("test",u=>{if(a.abort(),this.destroyed||!u){i();return}this._messageHandler=n,this._port=t,this._webWorker=t,R(this,pu,Zg).call(this)}),n.on("ready",u=>{if(a.abort(),this.destroyed){i();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{ay("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){p(Tt,al)||(Fe("Setting up fake worker."),w(Tt,al,!0)),Tt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Hk;this._port=t;const n=`fake${Dn(Tt,Km)._++}`,i=new fh(n+"_worker",n,t);e.setup(i,t),this._messageHandler=new fh(n,n+"_worker",t),R(this,pu,Zg).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=p(Tt,rl))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=p(this,rl))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Tt(e)}static get workerSrc(){if(Ba.workerSrc)return Ba.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ye(this,"_setupFakeWorkerGlobal",(async()=>p(this,gu,Qg)?p(this,gu,Qg):(await import(this.workerSrc)).WorkerMessageHandler)())}};Km=new WeakMap,al=new WeakMap,rl=new WeakMap,pu=new WeakSet,Zg=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},gu=new WeakSet,Qg=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},M(Tt,gu),M(Tt,Km,0),M(Tt,al,!1),M(Tt,rl),Rn&&(w(Tt,al,!0),Ba.workerSrc||(Ba.workerSrc="./pdf.worker.mjs")),Tt._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(t,n);return n.origin===i.origin},Tt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let zc=Tt;var xa,Ls,mu,yu,Ma,ol,vh;class Bk{constructor(e,t,n,i,a){M(this,ol);M(this,xa,new Map);M(this,Ls,new Map);M(this,mu,new Map);M(this,yu,new Map);M(this,Ma,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new o1,this.fontLoader=new HD({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ye(this,"annotationStorage",new Nb)}getRenderingIntent(e,t=Ar.ENABLE,n=null,i=!1,a=!1){let l=_i.DISPLAY,u=gA;switch(e){case"any":l=_i.ANY;break;case"display":break;case"print":l=_i.PRINT;break;default:Fe(`getRenderingIntent - invalid intent: ${e}`)}const d=l&_i.PRINT&&n instanceof Ux?n:this.annotationStorage;switch(t){case Ar.DISABLE:l+=_i.ANNOTATIONS_DISABLE;break;case Ar.ENABLE:break;case Ar.ENABLE_FORMS:l+=_i.ANNOTATIONS_FORMS;break;case Ar.ENABLE_STORAGE:l+=_i.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Fe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(l+=_i.IS_EDITING),a&&(l+=_i.OPLIST);const{ids:f,hash:y}=d.modifiedIds,A=[l,u.hash,y];return{renderingIntent:l,cacheKey:A.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=p(this,Ma))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of p(this,Ls).values())e.push(i._destroy());p(this,Ls).clear(),p(this,mu).clear(),p(this,yu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),p(this,xa).clear(),this.filterFactory.destroy(),Lh.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Jr("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Gt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){i.close();return}Gt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:l}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((u=t.onProgress)==null||u.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:l}}),e.on("GetRangeReader",(n,i)=>{Gt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:l,done:u}){if(u){i.close();return}Gt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{a.cancel(l),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Fk(n,this))}),e.on("DocException",n=>{t._capability.reject(Wn(n))}),e.on("PasswordRequest",n=>{w(this,Ma,Promise.withResolvers());try{if(!t.onPassword)throw Wn(n);const i=a=>{a instanceof Error?p(this,Ma).reject(a):p(this,Ma).resolve({password:a})};t.onPassword(i,n.code)}catch(i){p(this,Ma).reject(i)}return p(this,Ma).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;p(this,Ls).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in a){const S=a.error;Fe(`Error during font loading: ${S}`),this.commonObjs.resolve(n,S);break}const y=f&&((l=globalThis.FontInspector)!=null&&l.enabled)?(S,T)=>globalThis.FontInspector.fontAdded(S,T):null,A=new BD(a,{disableFontFace:u,fontExtraProperties:d,inspectFont:y});this.fontLoader.bind(A).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&A.data&&(A.data=null),this.commonObjs.resolve(n,A)});break;case"CopyLocalImage":const{imageRef:_}=a;Gt(_,"The imageRef must be defined.");for(const S of p(this,Ls).values())for(const[,T]of S.objs)if((T==null?void 0:T.ref)===_)return T.dataLen?(this.commonObjs.resolve(n,structuredClone(T)),T.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,l])=>{var d;if(this.destroyed)return;const u=p(this,Ls).get(i);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(a){case"Image":u.objs.resolve(n,l),(l==null?void 0:l.dataLen)>gD&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Fe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=p(this,mu).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&p(this,yu).set(a.refStr,e);const l=new Uk(t,a,this,this._params.pdfBug);return p(this,Ls).set(t,l),l});return p(this,mu).set(t,i),i}getPageIndex(e){return hw(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return R(this,ol,vh).call(this,"GetFieldObjects")}hasJSActions(){return R(this,ol,vh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,ol,vh).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return R(this,ol,vh).call(this,"GetOptionalContentConfig").then(t=>new lk(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=p(this,xa).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,l;return{info:i[0],metadata:i[1]?new rk(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return p(this,xa).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of p(this,Ls).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),p(this,xa).clear(),this.filterFactory.destroy(!0),Lh.cleanup()}}cachedPageNumber(e){if(!hw(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return p(this,yu).get(t)??null}}xa=new WeakMap,Ls=new WeakMap,mu=new WeakMap,yu=new WeakMap,Ma=new WeakMap,ol=new WeakSet,vh=function(e,t=null){const n=p(this,xa).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return p(this,xa).set(e,i),i};const th=Symbol("INITIAL_DATA");var hi,xf,xA;class o1{constructor(){M(this,xf);M(this,hi,Object.create(null))}get(e,t=null){if(t){const i=R(this,xf,xA).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=p(this,hi)[e];if(!n||n.data===th)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=p(this,hi)[e];return!!t&&t.data!==th}delete(e){const t=p(this,hi)[e];return!t||t.data===th?!1:(delete p(this,hi)[e],!0)}resolve(e,t=null){const n=R(this,xf,xA).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in p(this,hi)){const{data:n}=p(this,hi)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}w(this,hi,Object.create(null))}*[Symbol.iterator](){for(const e in p(this,hi)){const{data:t}=p(this,hi)[e];t!==th&&(yield[e,t])}}}hi=new WeakMap,xf=new WeakSet,xA=function(e){var t;return(t=p(this,hi))[e]||(t[e]={...Promise.withResolvers(),data:th})};var Fr;class Vk{constructor(e){M(this,Fr,null);w(this,Fr,e),this.onContinue=null}get promise(){return p(this,Fr).capability.promise}cancel(e=0){p(this,Fr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=p(this,Fr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=p(this,Fr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Fr=new WeakMap;var Ur,ll;const Ro=class Ro{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:y=!1,pdfBug:A=!1,pageColors:_=null}){M(this,Ur,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=A,this.pageColors=_,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=y===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Vk(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,d;if(this.cancelled)return;if(this._canvas){if(p(Ro,ll).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(Ro,ll).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:a,background:l}=this.params;this.gfx=new Vc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),p(this,Ur)&&(window.cancelAnimationFrame(p(this,Ur)),w(this,Ur,null)),p(Ro,ll).delete(this._canvas),this.callback(e||new Rb(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,Ur,window.requestAnimationFrame(()=>{w(this,Ur,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(Ro,ll).delete(this._canvas),this.callback())))}};Ur=new WeakMap,ll=new WeakMap,M(Ro,ll,new WeakSet);let MA=Ro;const zk="4.10.38",Gk="f9bea397f";function fw(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function nh(o){return Math.max(0,Math.min(255,255*o))}class pw{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=nh(e),[e,e,e]}static G_HTML([e]){const t=fw(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(nh)}static RGB_HTML(e){return`#${e.map(fw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[nh(1-Math.min(1,e+i)),nh(1-Math.min(1,n+i)),nh(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,a=1-t,l=1-n,u=Math.min(i,a,l);return["CMYK",i,a,l,u]}}class qk{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){yt("Abstract method `_createSVG` called.")}}class Pb extends qk{_createSVG(e){return document.createElementNS(ua,e)}}class l1{static setupStorage(e,t,n,i,a){const l=i.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),a==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",u=>{i.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),a==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:a}){const{attributes:l}=t,u=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,f)}u&&a.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){var A,_;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:a,linkService:n});const u=a!=="richText",d=e.div;if(d.append(l),e.viewport){const S=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=S}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const S=document.createTextNode(i.value);l.append(S),u&&Ph.shouldBuildText(i.name)&&f.push(S)}return{textDivs:f}}const y=[[i,-1,l]];for(;y.length>0;){const[S,T,C]=y.at(-1);if(T+1===S.children.length){y.pop();continue}const x=S.children[++y.at(-1)[1]];if(x===null)continue;const{name:D}=x;if(D==="#text"){const L=document.createTextNode(x.value);f.push(L),C.append(L);continue}const k=(A=x==null?void 0:x.attributes)!=null&&A.xmlns?document.createElementNS(x.attributes.xmlns,D):document.createElement(D);if(C.append(k),x.attributes&&this.setAttributes({html:k,element:x,storage:t,intent:a,linkService:n}),((_=x.children)==null?void 0:_.length)>0)y.push([x,-1,k]);else if(x.value){const L=document.createTextNode(x.value);u&&Ph.shouldBuildText(D)&&f.push(L),k.append(L)}}for(const S of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dp=1e3,$k=9,Ol=new WeakSet;function Zr(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class Yk{static create(e){switch(e.data.annotationType){case Wt.LINK:return new c1(e);case Wt.TEXT:return new Wk(e);case Wt.WIDGET:switch(e.data.fieldType){case"Tx":return new Xk(e);case"Btn":return e.data.radioButton?new h1(e):e.data.checkBox?new Zk(e):new Qk(e);case"Ch":return new Jk(e);case"Sig":return new Kk(e)}return new zl(e);case Wt.POPUP:return new IA(e);case Wt.FREETEXT:return new y1(e);case Wt.LINE:return new eN(e);case Wt.SQUARE:return new tN(e);case Wt.CIRCLE:return new nN(e);case Wt.POLYLINE:return new v1(e);case Wt.CARET:return new sN(e);case Wt.INK:return new Ob(e);case Wt.POLYGON:return new iN(e);case Wt.HIGHLIGHT:return new A1(e);case Wt.UNDERLINE:return new aN(e);case Wt.SQUIGGLY:return new rN(e);case Wt.STRIKEOUT:return new oN(e);case Wt.STAMP:return new b1(e);case Wt.FILEATTACHMENT:return new lN(e);default:return new Ut(e)}}}var cl,vu,Au,Mf,RA;const e_=class e_{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){M(this,Mf);M(this,cl,null);M(this,vu,!1);M(this,Au,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return e_._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;p(this,cl)||w(this,cl,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&R(this,Mf,RA).call(this,t),(n=p(this,Au))==null||n.popup.updateEdited(e)}resetEdited(){var e;p(this,cl)&&(R(this,Mf,RA).call(this,p(this,cl).rect),(e=p(this,Au))==null||e.popup.resetEdited(),w(this,cl,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof zl||(a.tabIndex=dp);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof IA){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:u,height:d}=Zr(t.rect);if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(C>0||x>0){const k=`calc(${C}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;l.borderRadius=k}else if(this instanceof h1){const k=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=k}switch(t.borderStyle.style){case jd.SOLID:l.borderStyle="solid";break;case jd.DASHED:l.borderStyle="dashed";break;case jd.BEVELED:Fe("Unimplemented border style: beveled");break;case jd.INSET:Fe("Unimplemented border style: inset");break;case jd.UNDERLINE:l.borderBottomStyle="solid";break}const D=t.borderColor||null;D?(w(this,vu,!0),l.borderColor=Te.makeHexColor(D[0]|0,D[1]|0,D[2]|0)):l.borderWidth=0}const f=Te.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:y,pageHeight:A,pageX:_,pageY:S}=i.rawDims;l.left=`${100*(f[0]-_)/y}%`,l.top=`${100*(f[1]-S)/A}%`;const{rotation:T}=t;return t.hasOwnCanvas||T===0?(l.width=`${100*u/y}%`,l.height=`${100*d/A}%`):this.setRotation(T,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:a,height:l}=Zr(this.data.rect);let u,d;e%180===0?(u=100*a/n,d=100*l/i):(u=100*l/n,d=100*a/i),t.style.width=`${u}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const a=i.detail[t],l=a[0],u=a.slice(1);i.target.style[n]=pw[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:pw[`${l}_rgb`](u)})};return Ye(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const a=e[i]||n[i];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const l=n[i];if(l){const u={detail:{[i]:a},target:e};l(u),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,x,D,k]=e.subarray(2,6);if(i===C&&a===x&&t===D&&n===k)return}const{style:l}=this.container;let u;if(p(this,vu)){const{borderColor:C,borderWidth:x}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=i-t,f=a-n,{svgFactory:y}=this,A=y.createElement("svg");A.classList.add("quadrilateralsContainer"),A.setAttribute("width",0),A.setAttribute("height",0);const _=y.createElement("defs");A.append(_);const S=y.createElement("clipPath"),T=`clippath_${this.data.id}`;S.setAttribute("id",T),S.setAttribute("clipPathUnits","objectBoundingBox"),_.append(S);for(let C=2,x=e.length;C<x;C+=8){const D=e[C],k=e[C+1],L=e[C+2],U=e[C+3],F=y.createElement("rect"),W=(L-t)/d,K=(a-k)/f,Q=(D-L)/d,J=(k-U)/f;F.setAttribute("x",W),F.setAttribute("y",K),F.setAttribute("width",Q),F.setAttribute("height",J),S.append(F),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${K}" width="${Q}" height="${J}"/>`)}p(this,vu)&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(A),this.container.style.clipPath=`url(#${T})`}_createPopup(){const{data:e}=this,t=w(this,Au,new IA({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:l,exportValues:u}of i){if(a===-1||l===t)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Ol.has(f)){Fe(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,l=i.getAttribute("data-element-id");l!==t&&Ol.has(i)&&n.push({id:l,exportValue:a,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};cl=new WeakMap,vu=new WeakMap,Au=new WeakMap,Mf=new WeakSet,RA=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...e);const{width:f,height:y}=Zr(e);t.left=`${100*(e[0]-u)/a}%`,t.top=`${100*(l-e[3]+d)/l}%`,i===0?(t.width=`${100*f/a}%`,t.height=`${100*y/l}%`):this.setRotation(i)};let Ut=e_;var Ti,wo,u1,d1;class c1 extends Ut{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});M(this,Ti);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action),a=!0):t.attachment?(R(this,Ti,u1).call(this,i,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(R(this,Ti,d1).call(this,i,t.setOCGState),a=!0):t.dest?(this._bindLink(i,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&R(this,Ti,wo).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),R(this,Ti,wo).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const l=i.get(a);l&&(t[l]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}t.onclick||(t.onclick=()=>!1),R(this,Ti,wo).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),R(this,Ti,wo).call(this),!this._fieldObjects){Fe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var A;i==null||i();const{fields:a,refs:l,include:u}=n,d=[];if(a.length!==0||l.length!==0){const _=new Set(l);for(const S of a){const T=this._fieldObjects[S]||[];for(const{id:C}of T)_.add(C)}for(const S of Object.values(this._fieldObjects))for(const T of S)_.has(T.id)===u&&d.push(T)}else for(const _ of Object.values(this._fieldObjects))d.push(..._);const f=this.annotationStorage,y=[];for(const _ of d){const{id:S}=_;switch(y.push(S),_.type){case"text":{const C=_.defaultValue||"";f.setValue(S,{value:C});break}case"checkbox":case"radiobutton":{const C=_.defaultValue===_.exportValues;f.setValue(S,{value:C});break}case"combobox":case"listbox":{const C=_.defaultValue||"";f.setValue(S,{value:C});break}default:continue}const T=document.querySelector(`[data-element-id="${S}"]`);if(T){if(!Ol.has(T)){Fe(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;T.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:y,name:"ResetForm"}})),!1}}}Ti=new WeakSet,wo=function(){this.container.setAttribute("data-internal-link","")},u1=function(t,n,i=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,i),!1},R(this,Ti,wo).call(this)},d1=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),R(this,Ti,wo).call(this)};class Wk extends Ut{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class zl extends Ut{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Fn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,l=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{var u;if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l)}}))})}_setEventListeners(e,t,n,i){var a,l,u;for(const[d,f]of n)(f==="Action"||(a=this.data.actions)!=null&&a[f])&&((f==="Focus"||f==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,f,i),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(e,t,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Te.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||$k,a=e.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),y=Math.round(f/(D0*i))||1,A=f/y;l=Math.min(i,d(A/D0))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(i,d(f/D0))}a.fontSize=`calc(${l}px * var(--scale-factor))`,a.color=Te.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Xk extends zl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),a.setValue(l.id,{[i]:n})}render(){var i,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=e.getValue(t,{value:this.data.fieldValue});let u=l.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let f=l.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const y={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ol.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=dp,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",_=>{e.setValue(t,{value:_.target.value}),this.setPropertyOnSiblings(n,"value",_.target.value,"value"),y.formattedValue=null}),n.addEventListener("resetform",_=>{const S=this.data.defaultFieldValue??"";n.value=y.userValue=S,y.formattedValue=null});let A=_=>{const{formattedValue:S}=y;S!=null&&(_.target.value=S),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{var C;if(y.focused)return;const{target:T}=S;y.userValue&&(T.value=y.userValue),y.lastCommittedValue=T.value,y.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(y.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const T={value(C){y.userValue=C.detail.value??"",e.setValue(t,{value:y.userValue.toString()}),C.target.value=y.userValue},formattedValue(C){const{formattedValue:x}=C.detail;y.formattedValue=x,x!=null&&C.target!==document.activeElement&&(C.target.value=x),e.setValue(t,{formattedValue:x})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var L;const{charLimit:x}=C.detail,{target:D}=C;if(x===0){D.removeAttribute("maxLength");return}D.setAttribute("maxLength",x);let k=y.userValue;!k||k.length<=x||(k=k.slice(0,x),D.value=y.userValue=k,e.setValue(t,{value:k}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:D.selectionStart,selEnd:D.selectionEnd}}))}};this._dispatchEventFromSandbox(T,S)}),n.addEventListener("keydown",S=>{var x;y.commitKey=1;let T=-1;if(S.key==="Escape"?T=0:S.key==="Enter"&&!this.data.multiLine?T=2:S.key==="Tab"&&(y.commitKey=3),T===-1)return;const{value:C}=S.target;y.lastCommittedValue!==C&&(y.lastCommittedValue=C,y.userValue=C,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:T,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const _=A;A=null,n.addEventListener("blur",S=>{var C,x;if(!y.focused||!S.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(y.focused=!1);const{value:T}=S.target;y.userValue=T,y.lastCommittedValue!==T&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:y.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),_(S)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",S=>{var F;y.lastCommittedValue=null;const{data:T,target:C}=S,{value:x,selectionStart:D,selectionEnd:k}=C;let L=D,U=k;switch(S.inputType){case"deleteWordBackward":{const W=x.substring(0,D).match(/\w*[^\w]*$/);W&&(L-=W[0].length);break}case"deleteWordForward":{const W=x.substring(D).match(/^[^\w]*\w*/);W&&(U+=W[0].length);break}case"deleteContentBackward":D===k&&(L-=1);break;case"deleteContentForward":D===k&&(U+=1);break}S.preventDefault(),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:T||"",willCommit:!1,selStart:L,selEnd:U}})}),this._setEventListeners(n,y,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&n.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Kk extends zl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Zk extends zl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Ol.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=dp,a.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n)){const y=d&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=y),e.setValue(f.id,{value:y})}e.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const u=t.defaultFieldValue||"Off";l.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class h1 extends zl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const a=document.createElement("input");if(Ol.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=dp,a.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n))e.setValue(f.id,{value:!1});e.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const u=t.defaultFieldValue;l.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;a.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const y=l===f.detail.value;for(const A of this._getElementsByName(f.target.name)){const _=y&&A.id===n;A.domElement&&(A.domElement.checked=_),e.setValue(A.id,{value:_})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Qk extends c1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Jk extends zl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Ol.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=dp;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",y=>{const A=this.data.defaultFieldValue;for(const _ of i.options)_.selected=_.value===A});for(const y of this.data.options){const A=document.createElement("option");A.textContent=y.displayValue,A.value=y.exportValue,n.value.includes(y.exportValue)&&(A.setAttribute("selected",!0),a=!1),i.append(A)}let l=null;if(a){const y=document.createElement("option");y.value=" ",y.setAttribute("hidden",!0),y.setAttribute("selected",!0),i.prepend(y),l=()=>{y.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const u=y=>{const A=y?"value":"textContent",{options:_,multiple:S}=i;return S?Array.prototype.filter.call(_,T=>T.selected).map(T=>T[A]):_.selectedIndex===-1?null:_[_.selectedIndex][A]};let d=u(!1);const f=y=>{const A=y.target.options;return Array.prototype.map.call(A,_=>({displayValue:_.textContent,exportValue:_.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",y=>{const A={value(_){l==null||l();const S=_.detail.value,T=new Set(Array.isArray(S)?S:[S]);for(const C of i.options)C.selected=T.has(C.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(_){i.multiple=!0},remove(_){const S=i.options,T=_.detail.remove;S[T].selected=!1,i.remove(T),S.length>0&&Array.prototype.findIndex.call(S,x=>x.selected)===-1&&(S[0].selected=!0),e.setValue(t,{value:u(!0),items:f(_)}),d=u(!1)},clear(_){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(_){const{index:S,displayValue:T,exportValue:C}=_.detail.insert,x=i.children[S],D=document.createElement("option");D.textContent=T,D.value=C,x?x.before(D):i.append(D),e.setValue(t,{value:u(!0),items:f(_)}),d=u(!1)},items(_){const{items:S}=_.detail;for(;i.length!==0;)i.remove(0);for(const T of S){const{displayValue:C,exportValue:x}=T,D=document.createElement("option");D.textContent=C,D.value=x,i.append(D)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:u(!0),items:f(_)}),d=u(!1)},indices(_){const S=new Set(_.detail.indices);for(const T of _.target.options)T.selected=S.has(T.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(_){_.target.disabled=!_.detail.editable}};this._dispatchEventFromSandbox(A,y)}),i.addEventListener("input",y=>{var S;const A=u(!0),_=u(!1);e.setValue(t,{value:A}),y.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:_,changeEx:A,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],y=>y.target.value)):i.addEventListener("input",function(y){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class IA extends Ut{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Ut._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new jk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Mb}${n}`).join(",")),this.container}}var bu,Zm,Qm,_u,ul,Nt,Ra,Su,Rf,If,Tu,Ia,ss,Da,Df,ka,kf,dl,hl,pt,Jg,DA,f1,p1,g1,m1,jg,em,kA;class jk{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:a,contentsObj:l,richText:u,parent:d,rect:f,parentRect:y,open:A}){M(this,pt);M(this,bu,R(this,pt,g1).bind(this));M(this,Zm,R(this,pt,kA).bind(this));M(this,Qm,R(this,pt,em).bind(this));M(this,_u,R(this,pt,jg).bind(this));M(this,ul,null);M(this,Nt,null);M(this,Ra,null);M(this,Su,null);M(this,Rf,null);M(this,If,null);M(this,Tu,null);M(this,Ia,!1);M(this,ss,null);M(this,Da,null);M(this,Df,null);M(this,ka,null);M(this,kf,null);M(this,dl,null);M(this,hl,!1);var _;w(this,Nt,e),w(this,kf,i),w(this,Ra,l),w(this,ka,u),w(this,If,d),w(this,ul,t),w(this,Df,f),w(this,Tu,y),w(this,Rf,n),w(this,Su,Db.toDateObject(a)),this.trigger=n.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",p(this,_u)),S.addEventListener("mouseenter",p(this,Qm)),S.addEventListener("mouseleave",p(this,Zm)),S.classList.add("popupTriggerArea");for(const S of n)(_=S.container)==null||_.addEventListener("keydown",p(this,bu));p(this,Nt).hidden=!0,A&&R(this,pt,jg).call(this)}render(){if(p(this,ss))return;const e=w(this,ss,document.createElement("div"));if(e.className="popup",p(this,ul)){const a=e.style.outlineColor=Te.makeHexColor(...p(this,ul));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:e.style.backgroundColor=Te.makeHexColor(...p(this,ul).map(u=>Math.floor(.7*(255-u)+u)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=p(this,kf),e.append(t),p(this,Su)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:p(this,Su).valueOf()})),t.append(a)}const i=p(this,pt,Jg);if(i)l1.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(p(this,Ra));e.append(a)}p(this,Nt).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,l=i.length;a<l;++a){const u=i[a];n.append(document.createTextNode(u)),a<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;p(this,dl)||w(this,dl,{contentsObj:p(this,Ra),richText:p(this,ka)}),e&&w(this,Da,null),t&&(w(this,ka,R(this,pt,p1).call(this,t)),w(this,Ra,null)),(n=p(this,ss))==null||n.remove(),w(this,ss,null)}resetEdited(){var e;p(this,dl)&&({contentsObj:Dn(this,Ra)._,richText:Dn(this,ka)._}=p(this,dl),w(this,dl,null),(e=p(this,ss))==null||e.remove(),w(this,ss,null),w(this,Da,null))}forceHide(){w(this,hl,this.isVisible),p(this,hl)&&(p(this,Nt).hidden=!0)}maybeShow(){p(this,hl)&&(p(this,ss)||R(this,pt,em).call(this),w(this,hl,!1),p(this,Nt).hidden=!1)}get isVisible(){return p(this,Nt).hidden===!1}}bu=new WeakMap,Zm=new WeakMap,Qm=new WeakMap,_u=new WeakMap,ul=new WeakMap,Nt=new WeakMap,Ra=new WeakMap,Su=new WeakMap,Rf=new WeakMap,If=new WeakMap,Tu=new WeakMap,Ia=new WeakMap,ss=new WeakMap,Da=new WeakMap,Df=new WeakMap,ka=new WeakMap,kf=new WeakMap,dl=new WeakMap,hl=new WeakMap,pt=new WeakSet,Jg=function(){const e=p(this,ka),t=p(this,Ra);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&p(this,ka).html||null},DA=function(){var e,t,n;return((n=(t=(e=p(this,pt,Jg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},f1=function(){var e,t,n;return((n=(t=(e=p(this,pt,Jg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},p1=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:p(this,pt,f1),fontSize:p(this,pt,DA)?`calc(${p(this,pt,DA)}px * var(--scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return n},g1=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&p(this,Ia))&&R(this,pt,jg).call(this)},m1=function(){if(p(this,Da)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=p(this,If);let l=!!p(this,Tu),u=l?p(this,Tu):p(this,Df);for(const T of p(this,Rf))if(!u||Te.intersect(T.data.rect,u)!==null){u=T.data.rect,l=!0;break}const d=Te.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),y=l?u[2]-u[0]+5:0,A=d[0]+y,_=d[1];w(this,Da,[100*(A-i)/t,100*(_-a)/n]);const{style:S}=p(this,Nt);S.left=`${p(this,Da)[0]}%`,S.top=`${p(this,Da)[1]}%`},jg=function(){w(this,Ia,!p(this,Ia)),p(this,Ia)?(R(this,pt,em).call(this),p(this,Nt).addEventListener("click",p(this,_u)),p(this,Nt).addEventListener("keydown",p(this,bu))):(R(this,pt,kA).call(this),p(this,Nt).removeEventListener("click",p(this,_u)),p(this,Nt).removeEventListener("keydown",p(this,bu)))},em=function(){p(this,ss)||this.render(),this.isVisible?p(this,Ia)&&p(this,Nt).classList.add("focused"):(R(this,pt,m1).call(this),p(this,Nt).hidden=!1,p(this,Nt).style.zIndex=parseInt(p(this,Nt).style.zIndex)+1e3)},kA=function(){p(this,Nt).classList.remove("focused"),!(p(this,Ia)||!this.isVisible)&&(p(this,Nt).hidden=!0,p(this,Nt).style.zIndex=parseInt(p(this,Nt).style.zIndex)-1e3)};class y1 extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Oe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Nf;class eN extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Nf,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:i}=Zr(t.rect),a=this.svgFactory.create(n,i,!0),l=w(this,Nf,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Nf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nf=new WeakMap;var Lf;class tN extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Lf,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:i}=Zr(t.rect),a=this.svgFactory.create(n,i,!0),l=t.borderStyle.width,u=w(this,Lf,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",i-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Lf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lf=new WeakMap;var Pf;class nN extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Pf,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:i}=Zr(t.rect),a=this.svgFactory.create(n,i,!0),l=t.borderStyle.width,u=w(this,Pf,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",i/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",i/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Pf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pf=new WeakMap;var Of;class v1 extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Of,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:a}}=this;if(!n)return this.container;const{width:l,height:u}=Zr(t),d=this.svgFactory.create(l,u,!0);let f=[];for(let A=0,_=n.length;A<_;A+=2){const S=n[A]-t[0],T=t[3]-n[A+1];f.push(`${S},${T}`)}f=f.join(" ");const y=w(this,Of,this.svgFactory.createElement(this.svgElementName));return y.setAttribute("points",f),y.setAttribute("stroke-width",i.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),d.append(y),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Of)}addHighlightArea(){this.container.classList.add("highlightArea")}}Of=new WeakMap;class iN extends v1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sN extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ff,fl,Uf,NA;class Ob extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Uf);M(this,Ff,null);M(this,fl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Oe.HIGHLIGHT:Oe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:u,width:d,height:f}=R(this,Uf,NA).call(this,n,t),y=this.svgFactory.create(d,f,!0),A=w(this,Ff,this.svgFactory.createElement("svg:g"));y.append(A),A.setAttribute("stroke-width",a.width||1),A.setAttribute("stroke-linecap","round"),A.setAttribute("stroke-linejoin","round"),A.setAttribute("stroke-miterlimit",10),A.setAttribute("stroke","transparent"),A.setAttribute("fill","transparent"),A.setAttribute("transform",u);for(let _=0,S=i.length;_<S;_++){const T=this.svgFactory.createElement(this.svgElementName);p(this,fl).push(T),T.setAttribute("points",i[_].join(",")),A.append(T)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(y),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:a}=t,l=p(this,Ff);if(n>=0&&l.setAttribute("stroke-width",n||1),i)for(let u=0,d=p(this,fl).length;u<d;u++)p(this,fl)[u].setAttribute("points",i[u].join(","));if(a){const{transform:u,width:d,height:f}=R(this,Uf,NA).call(this,this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return p(this,fl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ff=new WeakMap,fl=new WeakMap,Uf=new WeakSet,NA=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class A1 extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Oe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class aN extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class rN extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class oN extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class b1 extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Oe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Hf,Bf,LA;class lN extends Ut{constructor(t){var i;super(t,{isRenderable:!0});M(this,Bf);M(this,Hf,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",R(this,Bf,LA).bind(this)),w(this,Hf,i);const{isMac:a}=Fn.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&R(this,Bf,LA).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return p(this,Hf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hf=new WeakMap,Bf=new WeakSet,LA=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Vf,pl,gl,zf,Vl,_1,PA;class cN{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:l,structTreeLayer:u}){M(this,Vl);M(this,Vf,null);M(this,pl,null);M(this,gl,new Map);M(this,zf,null);this.div=e,w(this,Vf,t),w(this,pl,n),w(this,zf,u||null),this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return p(this,gl).size>0}async render(e){var l;const{annotations:t}=e,n=this.div;Ll(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Pb,annotationStorage:e.annotationStorage||new Nb,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===Wt.POPUP;if(d){const A=i.get(u.id);if(!A)continue;a.elements=A}else{const{width:A,height:_}=Zr(u.rect);if(A<=0||_<=0)continue}a.data=u;const f=Yk.create(a);if(!f.isRenderable)continue;if(!d&&u.popupRef){const A=i.get(u.popupRef);A?A.push(f):i.set(u.popupRef,[f])}const y=f.render();u.hidden&&(y.style.visibility="hidden"),await R(this,Vl,_1).call(this,y,u.id),f._isEditable&&(p(this,gl).set(f.data.id,f),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(f))}R(this,Vl,PA).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Ll(t,{rotation:e.rotation}),R(this,Vl,PA).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(p(this,gl).values())}getEditableAnnotation(e){return p(this,gl).get(e)}}Vf=new WeakMap,pl=new WeakMap,gl=new WeakMap,zf=new WeakMap,Vl=new WeakSet,_1=async function(e,t){var l,u;const n=e.firstChild||e,i=n.id=`${Mb}${t}`,a=await((l=p(this,zf))==null?void 0:l.getAriaAttributes(i));if(a)for(const[d,f]of a)n.setAttribute(d,f);this.div.append(e),(u=p(this,Vf))==null||u.moveElementInDOM(this.div,e,n,!1)},PA=function(){if(!p(this,pl))return;const e=this.div;for(const[t,n]of p(this,pl)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n)}p(this,pl).clear()};const Ng=/\r\n?|\n/g;var as,fi,Gf,ml,pi,qt,S1,T1,C1,tm,za,nm,im,w1,FA,E1;const At=class At extends It{constructor(t){super({...t,name:"freeTextEditor"});M(this,qt);M(this,as);M(this,fi,"");M(this,Gf,`${this.id}-editor`);M(this,ml,null);M(this,pi);w(this,as,t.color||At._defaultColor||It._defaultLineColor),w(this,pi,t.fontSize||At._defaultFontSize)}static get _keyboardManager(){const t=At.prototype,n=l=>l.isEmpty(),i=Pl.TRANSLATE_SMALL,a=Pl.TRANSLATE_BIG;return Ye(this,"_keyboardManager",new up([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(t,n){It.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ke.FREETEXT_SIZE:At._defaultFontSize=n;break;case Ke.FREETEXT_COLOR:At._defaultColor=n;break}}updateParams(t,n){switch(t){case Ke.FREETEXT_SIZE:R(this,qt,S1).call(this,n);break;case Ke.FREETEXT_COLOR:R(this,qt,T1).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.FREETEXT_SIZE,At._defaultFontSize],[Ke.FREETEXT_COLOR,At._defaultColor||It._defaultLineColor]]}get propertiesToUpdate(){return[[Ke.FREETEXT_SIZE,p(this,pi)],[Ke.FREETEXT_COLOR,p(this,as)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-At._internalPadding*t,-(At._internalPadding+p(this,pi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Oe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),w(this,ml,new AbortController);const t=this._uiManager.combinedSignal(p(this,ml));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,Gf)),this._isDraggable=!0,(t=p(this,ml))==null||t.abort(),w(this,ml,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=p(this,fi),n=w(this,fi,R(this,qt,C1).call(this).trimEnd());if(t===n)return;const i=a=>{if(w(this,fi,a),!a){this.remove();return}R(this,qt,im).call(this),this._uiManager.rebuild(this),R(this,qt,tm).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),R(this,qt,tm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){At._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,Gf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${p(this,pi)}px * var(--scale-factor))`,i.color=p(this,as),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),vm(this,this.div,["dblclick","keydown"]),this.width){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[y,A]=this.pageDimensions,[_,S]=this.pageTranslation;let T,C;switch(this.rotation){case 0:T=t+(u[0]-_)/y,C=n+this.height-(u[1]-S)/A;break;case 90:T=t+(u[0]-_)/y,C=n-(u[1]-S)/A,[d,f]=[f,-d];break;case 180:T=t-this.width+(u[0]-_)/y,C=n-(u[1]-S)/A,[d,f]=[-d,-f];break;case 270:T=t+(u[0]-_-this.height*A)/y,C=n+(u[1]-S-this.width*y)/A,[d,f]=[-f,d];break}this.setAt(T*a,C*l,d,f)}else this.setAt(t*a,n*l,this.width*a,this.height*l);R(this,qt,im).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var T,C,x;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=R(T=At,za,FA).call(T,n.getData("text")||"").replaceAll(Ng,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!a.includes(`
`)){u.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:f}=u,y=[],A=[];if(d.nodeType===Node.TEXT_NODE){const D=d.parentElement;if(A.push(d.nodeValue.slice(f).replaceAll(Ng,"")),D!==this.editorDiv){let k=y;for(const L of this.editorDiv.childNodes){if(L===D){k=A;continue}k.push(R(C=At,za,nm).call(C,L))}}y.push(d.nodeValue.slice(0,f).replaceAll(Ng,""))}else if(d===this.editorDiv){let D=y,k=0;for(const L of this.editorDiv.childNodes)k++===f&&(D=A),D.push(R(x=At,za,nm).call(x,L))}w(this,fi,`${y.join(`
`)}${a}${A.join(`
`)}`),R(this,qt,im).call(this);const _=new Range;let S=y.reduce((D,k)=>D+k.length,0);for(const{firstChild:D}of this.editorDiv.childNodes)if(D.nodeType===Node.TEXT_NODE){const k=D.nodeValue.length;if(S<=k){_.setStart(D,S),_.setEnd(D,S);break}S-=k}l.removeAllRanges(),l.addRange(_)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,i){var u;let a=null;if(t instanceof y1){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:y,rotation:A,id:_,popupRef:S},textContent:T,textPosition:C,parent:{page:{pageNumber:x}}}=t;if(!T||T.length===0)return null;a=t={annotationType:Oe.FREETEXT,color:Array.from(f),fontSize:d,value:T.join(`
`),position:C,pageIndex:x-1,rect:y.slice(0),rotation:A,id:_,deleted:!1,popupRef:S}}const l=await super.deserialize(t,n,i);return w(l,pi,t.fontSize),w(l,as,Te.makeHexColor(...t.color)),w(l,fi,R(u=At,za,FA).call(u,t.value)),l.annotationElementId=t.id||null,l._initialData=a,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=At._internalPadding*this.parentScale,i=this.getRect(n,n),a=It._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:p(this,as)),l={annotationType:Oe.FREETEXT,color:a,fontSize:p(this,pi),value:R(this,qt,w1).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!R(this,qt,E1).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${p(this,pi)}px * var(--scale-factor))`,i.color=p(this,as),n.replaceChildren();for(const l of p(this,fi).split(`
`)){const u=document.createElement("div");u.append(l?document.createTextNode(l):document.createElement("br")),n.append(u)}const a=At._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:p(this,fi)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};as=new WeakMap,fi=new WeakMap,Gf=new WeakMap,ml=new WeakMap,pi=new WeakMap,qt=new WeakSet,S1=function(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-p(this,pi))*this.parentScale),w(this,pi,a),R(this,qt,tm).call(this)},i=p(this,pi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},T1=function(t){const n=a=>{w(this,as,this.editorDiv.style.color=a)},i=p(this,as);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},C1=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(R(i=At,za,nm).call(i,a)),n=a);return t.join(`
`)},tm=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,u=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},za=new WeakSet,nm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ng,"")},im=function(){if(this.editorDiv.replaceChildren(),!!p(this,fi))for(const t of p(this,fi).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},w1=function(){return p(this,fi).replaceAll(" "," ")},FA=function(t){return t.replaceAll(" "," ")},E1=function(t){const{value:n,fontSize:i,color:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((u,d)=>u!==a[d])||t.pageIndex!==l},M(At,za),he(At,"_freeTextDefaultContent",""),he(At,"_internalPadding",0),he(At,"_defaultColor",null),he(At,"_defaultFontSize",10),he(At,"_type","freetext"),he(At,"_editorType",Oe.FREETEXT);let OA=At;class ge{toSVGPath(){yt("Abstract method `toSVGPath` must be implemented.")}get box(){yt("Abstract getter `box` must be implemented.")}serialize(e,t){yt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,l){l||(l=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)l[u]=t+e[u]*i,l[u+1]=n+e[u+1]*a;return l}static _rescaleAndSwap(e,t,n,i,a,l){l||(l=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)l[u]=t+e[u+1]*i,l[u+1]=n+e[u]*a;return l}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,l){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+l)/6,(n+a)/2,(i+l)/2]}}he(ge,"PRECISION",1e-4);var gi,rs,Cu,wu,Ps,$e,yl,vl,qf,$f,Eu,xu,Hr,Yf,Jm,jm,Qt,Ah,x1,M1,R1,I1,D1,k1;const pa=class pa{constructor({x:e,y:t},n,i,a,l,u=0){M(this,Qt);M(this,gi);M(this,rs,[]);M(this,Cu);M(this,wu);M(this,Ps,[]);M(this,$e,new Float32Array(18));M(this,yl);M(this,vl);M(this,qf);M(this,$f);M(this,Eu);M(this,xu);M(this,Hr,[]);w(this,gi,n),w(this,xu,a*i),w(this,wu,l),p(this,$e).set([NaN,NaN,NaN,NaN,e,t],6),w(this,Cu,u),w(this,$f,p(pa,Yf)*i),w(this,qf,p(pa,jm)*i),w(this,Eu,i),p(this,Hr).push(e,t)}isEmpty(){return isNaN(p(this,$e)[8])}add({x:e,y:t}){var J;w(this,yl,e),w(this,vl,t);const[n,i,a,l]=p(this,gi);let[u,d,f,y]=p(this,$e).subarray(8,12);const A=e-f,_=t-y,S=Math.hypot(A,_);if(S<p(this,qf))return!1;const T=S-p(this,$f),C=T/S,x=C*A,D=C*_;let k=u,L=d;u=f,d=y,f+=x,y+=D,(J=p(this,Hr))==null||J.push(e,t);const U=-D/T,F=x/T,W=U*p(this,xu),K=F*p(this,xu);return p(this,$e).set(p(this,$e).subarray(2,8),0),p(this,$e).set([f+W,y+K],4),p(this,$e).set(p(this,$e).subarray(14,18),12),p(this,$e).set([f-W,y-K],16),isNaN(p(this,$e)[6])?(p(this,Ps).length===0&&(p(this,$e).set([u+W,d+K],2),p(this,Ps).push(NaN,NaN,NaN,NaN,(u+W-n)/a,(d+K-i)/l),p(this,$e).set([u-W,d-K],14),p(this,rs).push(NaN,NaN,NaN,NaN,(u-W-n)/a,(d-K-i)/l)),p(this,$e).set([k,L,u,d,f,y],6),!this.isEmpty()):(p(this,$e).set([k,L,u,d,f,y],6),Math.abs(Math.atan2(L-d,k-u)-Math.atan2(D,x))<Math.PI/2?([u,d,f,y]=p(this,$e).subarray(2,6),p(this,Ps).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/a,((d+y)/2-i)/l),[u,d,k,L]=p(this,$e).subarray(14,18),p(this,rs).push(NaN,NaN,NaN,NaN,((k+u)/2-n)/a,((L+d)/2-i)/l),!0):([k,L,u,d,f,y]=p(this,$e).subarray(0,6),p(this,Ps).push(((k+5*u)/6-n)/a,((L+5*d)/6-i)/l,((5*u+f)/6-n)/a,((5*d+y)/6-i)/l,((u+f)/2-n)/a,((d+y)/2-i)/l),[f,y,u,d,k,L]=p(this,$e).subarray(12,18),p(this,rs).push(((k+5*u)/6-n)/a,((L+5*d)/6-i)/l,((5*u+f)/6-n)/a,((5*d+y)/6-i)/l,((u+f)/2-n)/a,((d+y)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=p(this,Ps),t=p(this,rs);if(isNaN(p(this,$e)[6])&&!this.isEmpty())return R(this,Qt,x1).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);R(this,Qt,R1).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return R(this,Qt,M1).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,a,l){return new N1(e,t,n,i,a,l)}getOutlines(){var A;const e=p(this,Ps),t=p(this,rs),n=p(this,$e),[i,a,l,u]=p(this,gi),d=new Float32Array((((A=p(this,Hr))==null?void 0:A.length)??0)+2);for(let _=0,S=d.length-2;_<S;_+=2)d[_]=(p(this,Hr)[_]-i)/l,d[_+1]=(p(this,Hr)[_+1]-a)/u;if(d[d.length-2]=(p(this,yl)-i)/l,d[d.length-1]=(p(this,vl)-a)/u,isNaN(n[6])&&!this.isEmpty())return R(this,Qt,I1).call(this,d);const f=new Float32Array(p(this,Ps).length+24+p(this,rs).length);let y=e.length;for(let _=0;_<y;_+=2){if(isNaN(e[_])){f[_]=f[_+1]=NaN;continue}f[_]=e[_],f[_+1]=e[_+1]}y=R(this,Qt,k1).call(this,f,y);for(let _=t.length-6;_>=6;_-=6)for(let S=0;S<6;S+=2){if(isNaN(t[_+S])){f[y]=f[y+1]=NaN,y+=2;continue}f[y]=t[_+S],f[y+1]=t[_+S+1],y+=2}return R(this,Qt,D1).call(this,f,y),this.newFreeDrawOutline(f,d,p(this,gi),p(this,Eu),p(this,Cu),p(this,wu))}};gi=new WeakMap,rs=new WeakMap,Cu=new WeakMap,wu=new WeakMap,Ps=new WeakMap,$e=new WeakMap,yl=new WeakMap,vl=new WeakMap,qf=new WeakMap,$f=new WeakMap,Eu=new WeakMap,xu=new WeakMap,Hr=new WeakMap,Yf=new WeakMap,Jm=new WeakMap,jm=new WeakMap,Qt=new WeakSet,Ah=function(){const e=p(this,$e).subarray(4,6),t=p(this,$e).subarray(16,18),[n,i,a,l]=p(this,gi);return[(p(this,yl)+(e[0]-t[0])/2-n)/a,(p(this,vl)+(e[1]-t[1])/2-i)/l,(p(this,yl)+(t[0]-e[0])/2-n)/a,(p(this,vl)+(t[1]-e[1])/2-i)/l]},x1=function(){const[e,t,n,i]=p(this,gi),[a,l,u,d]=R(this,Qt,Ah).call(this);return`M${(p(this,$e)[2]-e)/n} ${(p(this,$e)[3]-t)/i} L${(p(this,$e)[4]-e)/n} ${(p(this,$e)[5]-t)/i} L${a} ${l} L${u} ${d} L${(p(this,$e)[16]-e)/n} ${(p(this,$e)[17]-t)/i} L${(p(this,$e)[14]-e)/n} ${(p(this,$e)[15]-t)/i} Z`},M1=function(e){const t=p(this,rs);e.push(`L${t[4]} ${t[5]} Z`)},R1=function(e){const[t,n,i,a]=p(this,gi),l=p(this,$e).subarray(4,6),u=p(this,$e).subarray(16,18),[d,f,y,A]=R(this,Qt,Ah).call(this);e.push(`L${(l[0]-t)/i} ${(l[1]-n)/a} L${d} ${f} L${y} ${A} L${(u[0]-t)/i} ${(u[1]-n)/a}`)},I1=function(e){const t=p(this,$e),[n,i,a,l]=p(this,gi),[u,d,f,y]=R(this,Qt,Ah).call(this),A=new Float32Array(36);return A.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/l,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,y,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/l,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/l],0),this.newFreeDrawOutline(A,e,p(this,gi),p(this,Eu),p(this,Cu),p(this,wu))},D1=function(e,t){const n=p(this,rs);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},k1=function(e,t){const n=p(this,$e).subarray(4,6),i=p(this,$e).subarray(16,18),[a,l,u,d]=p(this,gi),[f,y,A,_]=R(this,Qt,Ah).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/u,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,y,NaN,NaN,NaN,NaN,A,_,NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-l)/d],t),t+=24},M(pa,Yf,8),M(pa,Jm,2),M(pa,jm,p(pa,Yf)+p(pa,Jm));let _m=pa;var Mu,Al,Na,Wf,mi,Xf,Ft,ey,L1;class N1 extends ge{constructor(t,n,i,a,l,u){super();M(this,ey);M(this,Mu);M(this,Al,new Float32Array(4));M(this,Na);M(this,Wf);M(this,mi);M(this,Xf);M(this,Ft);w(this,Ft,t),w(this,mi,n),w(this,Mu,i),w(this,Xf,a),w(this,Na,l),w(this,Wf,u),this.lastPoint=[NaN,NaN],R(this,ey,L1).call(this,u);const[d,f,y,A]=p(this,Al);for(let _=0,S=t.length;_<S;_+=2)t[_]=(t[_]-d)/y,t[_+1]=(t[_+1]-f)/A;for(let _=0,S=n.length;_<S;_+=2)n[_]=(n[_]-d)/y,n[_+1]=(n[_+1]-f)/A}toSVGPath(){const t=[`M${p(this,Ft)[4]} ${p(this,Ft)[5]}`];for(let n=6,i=p(this,Ft).length;n<i;n+=6){if(isNaN(p(this,Ft)[n])){t.push(`L${p(this,Ft)[n+4]} ${p(this,Ft)[n+5]}`);continue}t.push(`C${p(this,Ft)[n]} ${p(this,Ft)[n+1]} ${p(this,Ft)[n+2]} ${p(this,Ft)[n+3]} ${p(this,Ft)[n+4]} ${p(this,Ft)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,a],l){const u=i-t,d=a-n;let f,y;switch(l){case 0:f=ge._rescale(p(this,Ft),t,a,u,-d),y=ge._rescale(p(this,mi),t,a,u,-d);break;case 90:f=ge._rescaleAndSwap(p(this,Ft),t,n,u,d),y=ge._rescaleAndSwap(p(this,mi),t,n,u,d);break;case 180:f=ge._rescale(p(this,Ft),i,n,-u,d),y=ge._rescale(p(this,mi),i,n,-u,d);break;case 270:f=ge._rescaleAndSwap(p(this,Ft),i,a,-u,-d),y=ge._rescaleAndSwap(p(this,mi),i,a,-u,-d);break}return{outline:Array.from(f),points:[Array.from(y)]}}get box(){return p(this,Al)}newOutliner(t,n,i,a,l,u=0){return new _m(t,n,i,a,l,u)}getNewOutline(t,n){const[i,a,l,u]=p(this,Al),[d,f,y,A]=p(this,Mu),_=l*y,S=u*A,T=i*y+d,C=a*A+f,x=this.newOutliner({x:p(this,mi)[0]*_+T,y:p(this,mi)[1]*S+C},p(this,Mu),p(this,Xf),t,p(this,Wf),n??p(this,Na));for(let D=2;D<p(this,mi).length;D+=2)x.add({x:p(this,mi)[D]*_+T,y:p(this,mi)[D+1]*S+C});return x.getOutlines()}}Mu=new WeakMap,Al=new WeakMap,Na=new WeakMap,Wf=new WeakMap,mi=new WeakMap,Xf=new WeakMap,Ft=new WeakMap,ey=new WeakSet,L1=function(t){const n=p(this,Ft);let i=n[4],a=n[5],l=i,u=a,d=i,f=a,y=i,A=a;const _=t?Math.max:Math.min;for(let T=6,C=n.length;T<C;T+=6){if(isNaN(n[T]))l=Math.min(l,n[T+4]),u=Math.min(u,n[T+5]),d=Math.max(d,n[T+4]),f=Math.max(f,n[T+5]),A<n[T+5]?(y=n[T+4],A=n[T+5]):A===n[T+5]&&(y=_(y,n[T+4]));else{const x=Te.bezierBoundingBox(i,a,...n.slice(T,T+6));l=Math.min(l,x[0]),u=Math.min(u,x[1]),d=Math.max(d,x[2]),f=Math.max(f,x[3]),A<x[3]?(y=x[2],A=x[3]):A===x[3]&&(y=_(y,x[2]))}i=n[T+4],a=n[T+5]}const S=p(this,Al);S[0]=l-p(this,Na),S[1]=u-p(this,Na),S[2]=d-l+2*p(this,Na),S[3]=f-u+2*p(this,Na),this.lastPoint=[y,A]};var Kf,Zf,Br,os,Hn,P1,sm,O1,F1,HA;class UA{constructor(e,t=0,n=0,i=!0){M(this,Hn);M(this,Kf);M(this,Zf);M(this,Br,[]);M(this,os,[]);let a=1/0,l=-1/0,u=1/0,d=-1/0;const f=10**-4;for(const{x,y:D,width:k,height:L}of e){const U=Math.floor((x-t)/f)*f,F=Math.ceil((x+k+t)/f)*f,W=Math.floor((D-t)/f)*f,K=Math.ceil((D+L+t)/f)*f,Q=[U,W,K,!0],J=[F,W,K,!1];p(this,Br).push(Q,J),a=Math.min(a,U),l=Math.max(l,F),u=Math.min(u,W),d=Math.max(d,K)}const y=l-a+2*n,A=d-u+2*n,_=a-n,S=u-n,T=p(this,Br).at(i?-1:-2),C=[T[0],T[2]];for(const x of p(this,Br)){const[D,k,L]=x;x[0]=(D-_)/y,x[1]=(k-S)/A,x[2]=(L-S)/A}w(this,Kf,new Float32Array([_,S,y,A])),w(this,Zf,C)}getOutlines(){p(this,Br).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of p(this,Br))t[3]?(e.push(...R(this,Hn,HA).call(this,t)),R(this,Hn,O1).call(this,t)):(R(this,Hn,F1).call(this,t),e.push(...R(this,Hn,HA).call(this,t)));return R(this,Hn,P1).call(this,e)}}Kf=new WeakMap,Zf=new WeakMap,Br=new WeakMap,os=new WeakMap,Hn=new WeakSet,P1=function(e){const t=[],n=new Set;for(const l of e){const[u,d,f]=l;t.push([u,d,l],[u,f,l])}t.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=t.length;l<u;l+=2){const d=t[l][2],f=t[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const i=[];let a;for(;n.size>0;){const l=n.values().next().value;let[u,d,f,y,A]=l;n.delete(l);let _=u,S=d;for(a=[u,f],i.push(a);;){let T;if(n.has(y))T=y;else if(n.has(A))T=A;else break;n.delete(T),[u,d,f,y,A]=T,_!==u&&(a.push(_,S,u,S===d?d:f),_=u),S=S===d?f:d}a.push(_,S)}return new uN(i,p(this,Kf),p(this,Zf))},sm=function(e){const t=p(this,os);let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,l=t[a][0];if(l===e)return a;l<e?n=a+1:i=a-1}return i+1},O1=function([,e,t]){const n=R(this,Hn,sm).call(this,e);p(this,os).splice(n,0,[e,t])},F1=function([,e,t]){const n=R(this,Hn,sm).call(this,e);for(let i=n;i<p(this,os).length;i++){const[a,l]=p(this,os)[i];if(a!==e)break;if(a===e&&l===t){p(this,os).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,l]=p(this,os)[i];if(a!==e)break;if(a===e&&l===t){p(this,os).splice(i,1);return}}},HA=function(e){const[t,n,i]=e,a=[[t,n,i]],l=R(this,Hn,sm).call(this,i);for(let u=0;u<l;u++){const[d,f]=p(this,os)[u];for(let y=0,A=a.length;y<A;y++){const[,_,S]=a[y];if(!(f<=_||S<=d)){if(_>=d){if(S>f)a[y][1]=f;else{if(A===1)return[];a.splice(y,1),y--,A--}continue}a[y][2]=d,S>f&&a.push([t,f,S])}}}return a};var Qf,Ru;class uN extends ge{constructor(t,n,i){super();M(this,Qf);M(this,Ru);w(this,Ru,t),w(this,Qf,n),this.lastPoint=i}toSVGPath(){const t=[];for(const n of p(this,Ru)){let[i,a]=n;t.push(`M${i} ${a}`);for(let l=2;l<n.length;l+=2){const u=n[l],d=n[l+1];u===i?(t.push(`V${d}`),a=d):d===a&&(t.push(`H${u}`),i=u)}t.push("Z")}return t.join(" ")}serialize([t,n,i,a],l){const u=[],d=i-t,f=a-n;for(const y of p(this,Ru)){const A=new Array(y.length);for(let _=0;_<y.length;_+=2)A[_]=t+y[_]*d,A[_+1]=a-y[_+1]*f;u.push(A)}return u}get box(){return p(this,Qf)}get classNamesForOutlining(){return["highlightOutline"]}}Qf=new WeakMap,Ru=new WeakMap;class BA extends _m{newFreeDrawOutline(e,t,n,i,a,l){return new dN(e,t,n,i,a,l)}}class dN extends N1{newOutliner(e,t,n,i,a,l=0){return new BA(e,t,n,i,a,l)}}var ls,bl,Iu,Zt,Jf,Du,jf,ep,Vr,cs,ku,tp,ft,VA,zA,GA,Eo,U1,yr;const Xn=class Xn{constructor({editor:e=null,uiManager:t=null}){M(this,ft);M(this,ls,null);M(this,bl,null);M(this,Iu);M(this,Zt,null);M(this,Jf,!1);M(this,Du,!1);M(this,jf,null);M(this,ep);M(this,Vr,null);M(this,cs,null);M(this,ku);var n;e?(w(this,Du,!1),w(this,ku,Ke.HIGHLIGHT_COLOR),w(this,jf,e)):(w(this,Du,!0),w(this,ku,Ke.HIGHLIGHT_DEFAULT_COLOR)),w(this,cs,(e==null?void 0:e._uiManager)||t),w(this,ep,p(this,cs)._eventBus),w(this,Iu,(e==null?void 0:e.color)||((n=p(this,cs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),p(Xn,tp)||w(Xn,tp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ye(this,"_keyboardManager",new up([[["Escape","mac+Escape"],Xn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Xn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Xn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Xn.prototype._moveToPrevious],[["Home","mac+Home"],Xn.prototype._moveToBeginning],[["End","mac+End"],Xn.prototype._moveToEnd]]))}renderButton(){const e=w(this,ls,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=p(this,cs)._signal;e.addEventListener("click",R(this,ft,Eo).bind(this),{signal:t}),e.addEventListener("keydown",R(this,ft,GA).bind(this),{signal:t});const n=w(this,bl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=p(this,Iu),e.append(n),e}renderMainDropdown(){const e=w(this,Zt,R(this,ft,VA).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===p(this,ls)){R(this,ft,Eo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&R(this,ft,zA).call(this,t,e)}_moveToNext(e){var t,n;if(!p(this,ft,yr)){R(this,ft,Eo).call(this,e);return}if(e.target===p(this,ls)){(t=p(this,Zt).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=p(this,Zt))==null?void 0:t.firstChild)||e.target===p(this,ls)){p(this,ft,yr)&&this._hideDropdownFromKeyboard();return}p(this,ft,yr)||R(this,ft,Eo).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!p(this,ft,yr)){R(this,ft,Eo).call(this,e);return}(t=p(this,Zt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!p(this,ft,yr)){R(this,ft,Eo).call(this,e);return}(t=p(this,Zt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=p(this,Zt))==null||e.classList.add("hidden"),(t=p(this,Vr))==null||t.abort(),w(this,Vr,null)}_hideDropdownFromKeyboard(){var e;if(!p(this,Du)){if(!p(this,ft,yr)){(e=p(this,jf))==null||e.unselect();return}this.hideDropdown(),p(this,ls).focus({preventScroll:!0,focusVisible:p(this,Jf)})}}updateColor(e){if(p(this,bl)&&(p(this,bl).style.backgroundColor=e),!p(this,Zt))return;const t=p(this,cs).highlightColors.values();for(const n of p(this,Zt).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=p(this,ls))==null||e.remove(),w(this,ls,null),w(this,bl,null),(t=p(this,Zt))==null||t.remove(),w(this,Zt,null)}};ls=new WeakMap,bl=new WeakMap,Iu=new WeakMap,Zt=new WeakMap,Jf=new WeakMap,Du=new WeakMap,jf=new WeakMap,ep=new WeakMap,Vr=new WeakMap,cs=new WeakMap,ku=new WeakMap,tp=new WeakMap,ft=new WeakSet,VA=function(){const e=document.createElement("div"),t=p(this,cs)._signal;e.addEventListener("contextmenu",ps,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of p(this,cs).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",p(Xn,tp)[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=i,a.setAttribute("aria-selected",i===p(this,Iu)),a.addEventListener("click",R(this,ft,zA).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",R(this,ft,GA).bind(this),{signal:t}),e},zA=function(e,t){t.stopPropagation(),p(this,ep).dispatch("switchannotationeditorparams",{source:this,type:p(this,ku),value:e})},GA=function(e){Xn._keyboardManager.exec(this,e)},Eo=function(e){if(p(this,ft,yr)){this.hideDropdown();return}if(w(this,Jf,e.detail===0),p(this,Vr)||(w(this,Vr,new AbortController),window.addEventListener("pointerdown",R(this,ft,U1).bind(this),{signal:p(this,cs).combinedSignal(p(this,Vr))})),p(this,Zt)){p(this,Zt).classList.remove("hidden");return}const t=w(this,Zt,R(this,ft,VA).call(this));p(this,ls).append(t)},U1=function(e){var t;(t=p(this,Zt))!=null&&t.contains(e.target)||this.hideDropdown()},yr=function(){return p(this,Zt)&&!p(this,Zt).classList.contains("hidden")},M(Xn,tp,null);let Sm=Xn;var Nu,np,La,_l,Lu,Qn,ip,sp,Sl,Hi,yi,pn,Pu,Pa,En,Ou,Bi,ap,Le,qA,am,H1,B1,V1,$A,xo,$i,Pc,z1,rm,bh,G1,q1,$1,Y1,W1;const at=class at extends It{constructor(t){super({...t,name:"highlightEditor"});M(this,Le);M(this,Nu,null);M(this,np,0);M(this,La);M(this,_l,null);M(this,Lu,null);M(this,Qn,null);M(this,ip,null);M(this,sp,0);M(this,Sl,null);M(this,Hi,null);M(this,yi,null);M(this,pn,!1);M(this,Pu,null);M(this,Pa);M(this,En,null);M(this,Ou,"");M(this,Bi);M(this,ap,"");this.color=t.color||at._defaultColor,w(this,Bi,t.thickness||at._defaultThickness),w(this,Pa,t.opacity||at._defaultOpacity),w(this,La,t.boxes||null),w(this,ap,t.methodOfCreation||""),w(this,Ou,t.text||""),this._isDraggable=!1,t.highlightId>-1?(w(this,pn,!0),R(this,Le,am).call(this,t),R(this,Le,xo).call(this)):p(this,La)&&(w(this,Nu,t.anchorNode),w(this,np,t.anchorOffset),w(this,ip,t.focusNode),w(this,sp,t.focusOffset),R(this,Le,qA).call(this),R(this,Le,xo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=at.prototype;return Ye(this,"_keyboardManager",new up([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,pn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:p(this,Bi),methodOfCreation:p(this,ap)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;It.initialize(t,n),at._defaultColor||(at._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ke.HIGHLIGHT_DEFAULT_COLOR:at._defaultColor=n;break;case Ke.HIGHLIGHT_THICKNESS:at._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return p(this,Pu)}updateParams(t,n){switch(t){case Ke.HIGHLIGHT_COLOR:R(this,Le,H1).call(this,n);break;case Ke.HIGHLIGHT_THICKNESS:R(this,Le,B1).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.HIGHLIGHT_DEFAULT_COLOR,at._defaultColor],[Ke.HIGHLIGHT_THICKNESS,at._defaultThickness]]}get propertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,this.color||at._defaultColor],[Ke.HIGHLIGHT_THICKNESS,p(this,Bi)||at._defaultThickness],[Ke.HIGHLIGHT_FREE,p(this,pn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(w(this,Lu,new Sm({editor:this})),t.addColorPicker(p(this,Lu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,Le,bh).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,R(this,Le,bh).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){R(this,Le,$A).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Le,xo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?R(this,Le,$A).call(this):t&&(R(this,Le,xo).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var a,l,u;const{drawLayer:n}=this.parent;let i;p(this,pn)?(t=(t-this.rotation+360)%360,i=R(a=at,$i,Pc).call(a,p(this,Hi).box,t)):i=R(l=at,$i,Pc).call(l,[this.x,this.y,this.width,this.height],t),n.updateProperties(p(this,yi),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(p(this,En),{bbox:R(u=at,$i,Pc).call(u,p(this,Qn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();p(this,Ou)&&(t.setAttribute("aria-label",p(this,Ou)),t.setAttribute("role","mark")),p(this,pn)?t.classList.add("free"):this.div.addEventListener("keydown",R(this,Le,z1).bind(this),{signal:this._uiManager._signal});const n=w(this,Sl,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=p(this,_l);const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),vm(this,p(this,Sl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(p(this,En),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(p(this,En),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:R(this,Le,rm).call(this,!0);break;case 1:case 3:R(this,Le,rm).call(this,!1);break}}select(){var t;super.select(),p(this,En)&&((t=this.parent)==null||t.drawLayer.updateProperties(p(this,En),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),p(this,En)&&((t=this.parent)==null||t.drawLayer.updateProperties(p(this,En),{rootClass:{selected:!1}}),p(this,pn)||R(this,Le,rm).call(this,!1))}get _mustFixPosition(){return!p(this,pn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(p(this,yi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(p(this,En),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:a,y:l}){const{x:u,y:d,width:f,height:y}=i.getBoundingClientRect(),A=new AbortController,_=t.combinedSignal(A),S=T=>{A.abort(),R(this,$i,Y1).call(this,t,T)};window.addEventListener("blur",S,{signal:_}),window.addEventListener("pointerup",S,{signal:_}),window.addEventListener("pointerdown",Ci,{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",ps,{signal:_}),i.addEventListener("pointermove",R(this,$i,$1).bind(this,t),{signal:_}),this._freeHighlight=new BA({x:a,y:l},[u,d,f,y],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var C,x,D,k;let a=null;if(t instanceof A1){const{data:{quadPoints:L,rect:U,rotation:F,id:W,color:K,opacity:Q,popupRef:J},parent:{page:{pageNumber:se}}}=t;a=t={annotationType:Oe.HIGHLIGHT,color:Array.from(K),opacity:Q,quadPoints:L,boxes:null,pageIndex:se-1,rect:U.slice(0),rotation:F,id:W,deleted:!1,popupRef:J}}else if(t instanceof Ob){const{data:{inkLists:L,rect:U,rotation:F,id:W,color:K,borderStyle:{rawWidth:Q},popupRef:J},parent:{page:{pageNumber:se}}}=t;a=t={annotationType:Oe.HIGHLIGHT,color:Array.from(K),thickness:Q,inkLists:L,boxes:null,pageIndex:se-1,rect:U.slice(0),rotation:F,id:W,deleted:!1,popupRef:J}}const{color:l,quadPoints:u,inkLists:d,opacity:f}=t,y=await super.deserialize(t,n,i);y.color=Te.makeHexColor(...l),w(y,Pa,f||1),d&&w(y,Bi,t.thickness),y.annotationElementId=t.id||null,y._initialData=a;const[A,_]=y.pageDimensions,[S,T]=y.pageTranslation;if(u){const L=w(y,La,[]);for(let U=0;U<u.length;U+=8)L.push({x:(u[U]-S)/A,y:1-(u[U+1]-T)/_,width:(u[U+2]-u[U])/A,height:(u[U+1]-u[U+5])/_});R(C=y,Le,qA).call(C),R(x=y,Le,xo).call(x),y.rotate(y.rotation)}else if(d){w(y,pn,!0);const L=d[0],U={x:L[0]-S,y:_-(L[1]-T)},F=new BA(U,[0,0,A,_],1,p(y,Bi)/2,!0,.001);for(let Q=0,J=L.length;Q<J;Q+=2)U.x=L[Q]-S,U.y=_-(L[Q+1]-T),F.add(U);const{id:W,clipPathId:K}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:y.color,"fill-opacity":y._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:F.toSVGPath()}},!0,!0);R(D=y,Le,am).call(D,{highlightOutlines:F.getOutlines(),highlightId:W,clipPathId:K}),R(k=y,Le,xo).call(k)}return y}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=It._colorManager.convert(this.color),a={annotationType:Oe.HIGHLIGHT,color:i,opacity:p(this,Pa),thickness:p(this,Bi),quadPoints:R(this,Le,G1).call(this),outlines:R(this,Le,q1).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:R(this,Le,bh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!R(this,Le,W1).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Nu=new WeakMap,np=new WeakMap,La=new WeakMap,_l=new WeakMap,Lu=new WeakMap,Qn=new WeakMap,ip=new WeakMap,sp=new WeakMap,Sl=new WeakMap,Hi=new WeakMap,yi=new WeakMap,pn=new WeakMap,Pu=new WeakMap,Pa=new WeakMap,En=new WeakMap,Ou=new WeakMap,Bi=new WeakMap,ap=new WeakMap,Le=new WeakSet,qA=function(){const t=new UA(p(this,La),.001);w(this,Hi,t.getOutlines()),[this.x,this.y,this.width,this.height]=p(this,Hi).box;const n=new UA(p(this,La),.0025,.001,this._uiManager.direction==="ltr");w(this,Qn,n.getOutlines());const{lastPoint:i}=p(this,Qn);w(this,Pu,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},am=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var A,_;if(w(this,Hi,t),w(this,Qn,t.getNewOutline(p(this,Bi)/2+1.5,.0025)),n>=0)w(this,yi,n),w(this,_l,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),w(this,En,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:p(this,Qn).box,path:{d:p(this,Qn).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(p(this,yi),{bbox:R(A=at,$i,Pc).call(A,p(this,Hi).box,(S-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(p(this,En),{bbox:R(_=at,$i,Pc).call(_,p(this,Qn).box,S),path:{d:p(this,Qn).toSVGPath()}})}const[l,u,d,f]=t.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=d,this.height=f;break;case 90:{const[S,T]=this.parentDimensions;this.x=u,this.y=1-l,this.width=d*T/S,this.height=f*S/T;break}case 180:this.x=1-l,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[S,T]=this.parentDimensions;this.x=1-u,this.y=l,this.width=d*T/S,this.height=f*S/T;break}}const{lastPoint:y}=p(this,Qn);w(this,Pu,[(y[0]-l)/d,(y[1]-u)/f])},H1=function(t){const n=(l,u)=>{var d,f;this.color=l,w(this,Pa,u),(d=this.parent)==null||d.drawLayer.updateProperties(p(this,yi),{root:{fill:l,"fill-opacity":u}}),(f=p(this,Lu))==null||f.updateColor(l)},i=this.color,a=p(this,Pa);this.addCommands({cmd:n.bind(this,t,at._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},B1=function(t){const n=p(this,Bi),i=a=>{w(this,Bi,a),R(this,Le,V1).call(this,a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},V1=function(t){if(!p(this,pn))return;R(this,Le,am).call(this,{highlightOutlines:p(this,Hi).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},$A=function(){p(this,yi)===null||!this.parent||(this.parent.drawLayer.remove(p(this,yi)),w(this,yi,null),this.parent.drawLayer.remove(p(this,En)),w(this,En,null))},xo=function(t=this.parent){p(this,yi)===null&&({id:Dn(this,yi)._,clipPathId:Dn(this,_l)._}=t.drawLayer.draw({bbox:p(this,Hi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":p(this,Pa)},rootClass:{highlight:!0,free:p(this,pn)},path:{d:p(this,Hi).toSVGPath()}},!1,!0),w(this,En,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:p(this,pn)},bbox:p(this,Qn).box,path:{d:p(this,Qn).toSVGPath()}},p(this,pn))),p(this,Sl)&&(p(this,Sl).style.clipPath=p(this,_l)))},$i=new WeakSet,Pc=function([t,n,i,a],l){switch(l){case 90:return[1-n-a,t,a,i];case 180:return[1-t-i,1-n-a,i,a];case 270:return[n,1-t-i,a,i]}return[t,n,i,a]},z1=function(t){at._keyboardManager.exec(this,t)},rm=function(t){if(!p(this,Nu))return;const n=window.getSelection();t?n.setPosition(p(this,Nu),p(this,np)):n.setPosition(p(this,ip),p(this,sp))},bh=function(){return p(this,pn)?this.rotation:0},G1=function(){if(p(this,pn))return null;const[t,n]=this.pageDimensions,[i,a]=this.pageTranslation,l=p(this,La),u=new Float32Array(l.length*8);let d=0;for(const{x:f,y,width:A,height:_}of l){const S=f*t+i,T=(1-y)*n+a;u[d]=u[d+4]=S,u[d+1]=u[d+3]=T,u[d+2]=u[d+6]=S+A*t,u[d+5]=u[d+7]=T-_*n,d+=8}return u},q1=function(t){return p(this,Hi).serialize(t,R(this,Le,bh).call(this))},$1=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Y1=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},W1=function(t){const{color:n}=this._initialData;return t.color.some((i,a)=>i!==n[a])},M(at,$i),he(at,"_defaultColor",null),he(at,"_defaultOpacity",1),he(at,"_defaultThickness",12),he(at,"_type","highlight"),he(at,"_editorType",Oe.HIGHLIGHT),he(at,"_freeHighlightId",-1),he(at,"_freeHighlight",null),he(at,"_freeHighlightClipId","");let Tm=at;var Tl;class hN{constructor(){M(this,Tl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){p(this,Tl)[e]=t}toSVGProperties(){const e=p(this,Tl);return w(this,Tl,Object.create(null)),{root:e}}reset(){w(this,Tl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){yt("Not implemented")}}Tl=new WeakMap;var vi,Fu,rn,Cl,wl,zr,Gr,qr,El,Je,WA,XA,KA,_h,X1,om,Sh,Oc;const me=class me extends It{constructor(t){super(t);M(this,Je);M(this,vi,null);M(this,Fu);he(this,"_drawId",null);w(this,Fu,t.mustBeCommitted||!1),t.drawOutlines&&(R(this,Je,WA).call(this,t),R(this,Je,_h).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[a,l]of Object.entries(n))i.has(a)?Object.assign(t[a],l):t[a]=l;return t}static getDefaultDrawingOptions(t){yt("Not implemented")}static get typesMap(){yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(p(me,rn).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,n[a]]);return t}_updateProperty(t,n,i){const a=this._drawingOptions,l=a[n],u=d=>{var y;a.updateProperty(n,d);const f=p(this,vi).updateProperty(n,d);f&&R(this,Je,Sh).call(this,f),(y=this.parent)==null||y.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:u.bind(this,i),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(p(this,vi).getPathResizingSVGProperties(R(this,Je,om).call(this)),{bbox:R(this,Je,Oc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(p(this,vi).getPathResizedSVGProperties(R(this,Je,om).call(this)),{bbox:R(this,Je,Oc).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:R(this,Je,Oc).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(p(this,vi).getPathTranslatedSVGProperties(R(this,Je,om).call(this),this.parentDimensions),{bbox:R(this,Je,Oc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,p(this,Fu)&&(w(this,Fu,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){R(this,Je,KA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Je,_h).call(this),R(this,Je,Sh).call(this,p(this,vi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),R(this,Je,KA).call(this)):t&&(this._uiManager.addShouldRescale(this),R(this,Je,_h).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties({bbox:R(this,Je,Oc).call(this)},p(this,vi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&R(this,Je,Sh).call(this,p(this,vi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,i,a,l){yt("Not implemented")}static startDrawing(t,n,i,a){var x;const{target:l,offsetX:u,offsetY:d,pointerId:f,pointerType:y}=a;if(p(me,Gr)&&p(me,Gr)!==y)return;const{viewport:{rotation:A}}=t,{width:_,height:S}=l.getBoundingClientRect(),T=w(me,Cl,new AbortController),C=t.combinedSignal(T);if(p(me,zr)||w(me,zr,f),p(me,Gr)??w(me,Gr,y),window.addEventListener("pointerup",D=>{var k;p(me,zr)===D.pointerId?this._endDraw(D):(k=p(me,qr))==null||k.delete(D.pointerId)},{signal:C}),window.addEventListener("pointercancel",D=>{var k;p(me,zr)===D.pointerId?this._currentParent.endDrawingSession():(k=p(me,qr))==null||k.delete(D.pointerId)},{signal:C}),window.addEventListener("pointerdown",D=>{p(me,Gr)===D.pointerType&&((p(me,qr)||w(me,qr,new Set)).add(D.pointerId),p(me,rn).isCancellable()&&(p(me,rn).removeLastElement(),p(me,rn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",ps,{signal:C}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),l.addEventListener("touchmove",D=>{D.timeStamp===p(me,El)&&Ci(D)},{signal:C}),t.toggleDrawing(),(x=n._editorUndoBar)==null||x.hide(),p(me,rn)){t.drawLayer.updateProperties(this._currentDrawId,p(me,rn).startNew(u,d,_,S,A));return}n.updateUIForDefaultProperties(this),w(me,rn,this.createDrawerInstance(u,d,_,S,A)),w(me,wl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(p(me,wl).toSVGProperties(),p(me,rn).defaultSVGProperties),!0,!1)}static _drawMove(t){var l;if(w(me,El,-1),!p(me,rn))return;const{offsetX:n,offsetY:i,pointerId:a}=t;if(p(me,zr)===a){if(((l=p(me,qr))==null?void 0:l.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,p(me,rn).add(n,i)),w(me,El,t.timeStamp),Ci(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,w(me,rn,null),w(me,wl,null),w(me,Gr,null),w(me,El,NaN)),p(me,Cl)&&(p(me,Cl).abort(),w(me,Cl,null),w(me,zr,NaN),w(me,qr,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,p(me,rn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=p(me,rn),a=this._currentDrawId,l=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ke.DRAW_STEP),!p(me,rn).isEmpty()){const{pageDimensions:[i,a],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:p(me,rn).getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:p(me,wl),mustBeCommitted:!t});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,a,l,u){yt("Not implemented")}static async deserialize(t,n,i){var A,_;const{rawDims:{pageWidth:a,pageHeight:l,pageX:u,pageY:d}}=n.viewport,f=this.deserializeDraw(u,d,a,l,this._INNER_MARGIN,t),y=await super.deserialize(t,n,i);return y.createDrawingOptions(t),R(A=y,Je,WA).call(A,{drawOutlines:f}),R(_=y,Je,_h).call(_),y.onScaleChanging(),y.rotate(),y}serializeDraw(t){const[n,i]=this.pageTranslation,[a,l]=this.pageDimensions;return p(this,vi).serialize([n,i,a,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};vi=new WeakMap,Fu=new WeakMap,rn=new WeakMap,Cl=new WeakMap,wl=new WeakMap,zr=new WeakMap,Gr=new WeakMap,qr=new WeakMap,El=new WeakMap,Je=new WeakSet,WA=function({drawOutlines:t,drawId:n,drawingOptions:i}){w(this,vi,t),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=R(this,Je,XA).call(this,t,this.parent),R(this,Je,Sh).call(this,t.box)},XA=function(t,n){const{id:i}=n.drawLayer.draw(me._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},KA=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},_h=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=R(this,Je,XA).call(this,p(this,vi),t)}},X1=function([t,n,i,a]){const{parentDimensions:[l,u],rotation:d}=this;switch(d){case 90:return[n,1-t,i*(u/l),a*(l/u)];case 180:return[1-t,1-n,i,a];case 270:return[1-n,t,i*(u/l),a*(l/u)];default:return[t,n,i,a]}},om=function(){const{x:t,y:n,width:i,height:a,parentDimensions:[l,u],rotation:d}=this;switch(d){case 90:return[1-n,t,i*(l/u),a*(u/l)];case 180:return[1-t,1-n,i,a];case 270:return[n,1-t,i*(l/u),a*(u/l)];default:return[t,n,i,a]}},Sh=function(t){if([this.x,this.y,this.width,this.height]=R(this,Je,X1).call(this,t),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Oc=function(){const{x:t,y:n,width:i,height:a,rotation:l,parentRotation:u,parentDimensions:[d,f]}=this;switch((l*4+u)/90){case 1:return[1-n-a,t,a,i];case 2:return[1-t-i,1-n-a,i,a];case 3:return[n,1-t-i,a,i];case 4:return[t,n-i*(d/f),a*(f/d),i*(d/f)];case 5:return[1-n,t,i*(d/f),a*(f/d)];case 6:return[1-t-a*(f/d),1-n,a*(f/d),i*(d/f)];case 7:return[n-i*(d/f),1-t-a*(f/d),i*(d/f),a*(f/d)];case 8:return[t-i,n-a,i,a];case 9:return[1-n,t-i,a,i];case 10:return[1-t,1-n,i,a];case 11:return[n-a,1-t,a,i];case 12:return[t-a*(f/d),n,a*(f/d),i*(d/f)];case 13:return[1-n-i*(d/f),t-a*(f/d),i*(d/f),a*(f/d)];case 14:return[1-t,1-n-i*(d/f),a*(f/d),i*(d/f)];case 15:return[n,1-t,i*(d/f),a*(f/d)];default:return[t,n,i,a]}},he(me,"_currentDrawId",-1),he(me,"_currentParent",null),M(me,rn,null),M(me,Cl,null),M(me,wl,null),M(me,zr,NaN),M(me,Gr,null),M(me,qr,null),M(me,El,NaN),he(me,"_INNER_MARGIN",3);let YA=me;var Os,on,ln,xl,Uu,Ln,gn,Vi,Ml,Rl,Il,Hu,lm;class fN{constructor(e,t,n,i,a,l){M(this,Hu);M(this,Os,new Float64Array(6));M(this,on);M(this,ln);M(this,xl);M(this,Uu);M(this,Ln);M(this,gn,"");M(this,Vi,0);M(this,Ml,new Cm);M(this,Rl);M(this,Il);w(this,Rl,n),w(this,Il,i),w(this,xl,a),w(this,Uu,l),[e,t]=R(this,Hu,lm).call(this,e,t);const u=w(this,on,[NaN,NaN,NaN,NaN,e,t]);w(this,Ln,[e,t]),w(this,ln,[{line:u,points:p(this,Ln)}]),p(this,Os).set(u,0)}updateProperty(e,t){e==="stroke-width"&&w(this,Uu,t)}isEmpty(){return!p(this,ln)||p(this,ln).length===0}isCancellable(){return p(this,Ln).length<=10}add(e,t){[e,t]=R(this,Hu,lm).call(this,e,t);const[n,i,a,l]=p(this,Os).subarray(2,6),u=e-a,d=t-l;return Math.hypot(p(this,Rl)*u,p(this,Il)*d)<=2?null:(p(this,Ln).push(e,t),isNaN(n)?(p(this,Os).set([a,l,e,t],2),p(this,on).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(p(this,Os)[0])&&p(this,on).splice(6,6),p(this,Os).set([n,i,a,l,e,t],0),p(this,on).push(...ge.createBezierPoints(n,i,a,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(p(this,Ln).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){w(this,Rl,n),w(this,Il,i),w(this,xl,a),[e,t]=R(this,Hu,lm).call(this,e,t);const l=w(this,on,[NaN,NaN,NaN,NaN,e,t]);w(this,Ln,[e,t]);const u=p(this,ln).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),p(this,ln).push({line:l,points:p(this,Ln)}),p(this,Os).set(l,0),w(this,Vi,0),this.toSVGPath(),null}getLastElement(){return p(this,ln).at(-1)}setLastElement(e){return p(this,ln)?(p(this,ln).push(e),w(this,on,e.line),w(this,Ln,e.points),w(this,Vi,0),{path:{d:this.toSVGPath()}}):p(this,Ml).setLastElement(e)}removeLastElement(){if(!p(this,ln))return p(this,Ml).removeLastElement();p(this,ln).pop(),w(this,gn,"");for(let e=0,t=p(this,ln).length;e<t;e++){const{line:n,points:i}=p(this,ln)[e];w(this,on,n),w(this,Ln,i),w(this,Vi,0),this.toSVGPath()}return{path:{d:p(this,gn)}}}toSVGPath(){const e=ge.svgRound(p(this,on)[4]),t=ge.svgRound(p(this,on)[5]);if(p(this,Ln).length===2)return w(this,gn,`${p(this,gn)} M ${e} ${t} Z`),p(this,gn);if(p(this,Ln).length<=6){const i=p(this,gn).lastIndexOf("M");w(this,gn,`${p(this,gn).slice(0,i)} M ${e} ${t}`),w(this,Vi,6)}if(p(this,Ln).length===4){const i=ge.svgRound(p(this,on)[10]),a=ge.svgRound(p(this,on)[11]);return w(this,gn,`${p(this,gn)} L ${i} ${a}`),w(this,Vi,12),p(this,gn)}const n=[];p(this,Vi)===0&&(n.push(`M ${e} ${t}`),w(this,Vi,6));for(let i=p(this,Vi),a=p(this,on).length;i<a;i+=6){const[l,u,d,f,y,A]=p(this,on).slice(i,i+6).map(ge.svgRound);n.push(`C${l} ${u} ${d} ${f} ${y} ${A}`)}return w(this,gn,p(this,gn)+n.join(" ")),w(this,Vi,p(this,on).length),p(this,gn)}getOutlines(e,t,n,i){const a=p(this,ln).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),p(this,Ml).build(p(this,ln),e,t,n,p(this,xl),p(this,Uu),i),w(this,Os,null),w(this,on,null),w(this,ln,null),w(this,gn,null),p(this,Ml)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Os=new WeakMap,on=new WeakMap,ln=new WeakMap,xl=new WeakMap,Uu=new WeakMap,Ln=new WeakMap,gn=new WeakMap,Vi=new WeakMap,Ml=new WeakMap,Rl=new WeakMap,Il=new WeakMap,Hu=new WeakSet,lm=function(e,t){return ge._normalizePoint(e,t,p(this,Rl),p(this,Il),p(this,xl))};var Pn,rp,op,Ai,Fs,Us,Bu,Vu,zu,yn,ha,K1,Z1,Q1;const t_=class t_ extends ge{constructor(){super(...arguments);M(this,yn);M(this,Pn);M(this,rp,0);M(this,op);M(this,Ai);M(this,Fs);M(this,Us);M(this,Bu);M(this,Vu);M(this,zu)}build(t,n,i,a,l,u,d){w(this,Fs,n),w(this,Us,i),w(this,Bu,a),w(this,Vu,l),w(this,zu,u),w(this,op,d??0),w(this,Ai,t),R(this,yn,Z1).call(this)}setLastElement(t){return p(this,Ai).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return p(this,Ai).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of p(this,Ai)){if(t.push(`M${ge.svgRound(n[4])} ${ge.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${ge.svgRound(n[10])} ${ge.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[l,u,d,f,y,A]=n.subarray(i,i+6).map(ge.svgRound);t.push(`C${l} ${u} ${d} ${f} ${y} ${A}`)}}return t.join("")}serialize([t,n,i,a],l){const u=[],d=[],[f,y,A,_]=R(this,yn,K1).call(this);let S,T,C,x,D,k,L,U,F;switch(p(this,Vu)){case 0:F=ge._rescale,S=t,T=n+a,C=i,x=-a,D=t+f*i,k=n+(1-y-_)*a,L=t+(f+A)*i,U=n+(1-y)*a;break;case 90:F=ge._rescaleAndSwap,S=t,T=n,C=i,x=a,D=t+y*i,k=n+f*a,L=t+(y+_)*i,U=n+(f+A)*a;break;case 180:F=ge._rescale,S=t+i,T=n,C=-i,x=a,D=t+(1-f-A)*i,k=n+y*a,L=t+(1-f)*i,U=n+(y+_)*a;break;case 270:F=ge._rescaleAndSwap,S=t+i,T=n+a,C=-i,x=-a,D=t+(1-y-_)*i,k=n+(1-f-A)*a,L=t+(1-y)*i,U=n+(1-f)*a;break}for(const{line:W,points:K}of p(this,Ai))u.push(F(W,S,T,C,x,l?new Array(W.length):null)),d.push(F(K,S,T,C,x,l?new Array(K.length):null));return{lines:u,points:d,rect:[D,k,L,U]}}static deserialize(t,n,i,a,l,{paths:{lines:u,points:d},rotation:f,thickness:y}){const A=[];let _,S,T,C,x;switch(f){case 0:x=ge._rescale,_=-t/i,S=n/a+1,T=1/i,C=-1/a;break;case 90:x=ge._rescaleAndSwap,_=-n/a,S=-t/i,T=1/a,C=1/i;break;case 180:x=ge._rescale,_=t/i+1,S=-n/a,T=-1/i,C=1/a;break;case 270:x=ge._rescaleAndSwap,_=n/a+1,S=t/i+1,T=-1/a,C=-1/i;break}if(!u){u=[];for(const k of d){const L=k.length;if(L===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1]]));continue}if(L===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1],NaN,NaN,NaN,NaN,k[2],k[3]]));continue}const U=new Float32Array(3*(L-2));u.push(U);let[F,W,K,Q]=k.subarray(0,4);U.set([NaN,NaN,NaN,NaN,F,W],0);for(let J=4;J<L;J+=2){const se=k[J],ce=k[J+1];U.set(ge.createBezierPoints(F,W,K,Q,se,ce),(J-2)*3),[F,W,K,Q]=[K,Q,se,ce]}}}for(let k=0,L=u.length;k<L;k++)A.push({line:x(u[k].map(U=>U??NaN),_,S,T,C),points:x(d[k].map(U=>U??NaN),_,S,T,C)});const D=new t_;return D.build(A,i,a,1,f,y,l),D}get box(){return p(this,Pn)}updateProperty(t,n){return t==="stroke-width"?R(this,yn,Q1).call(this,n):null}updateParentDimensions([t,n],i){const[a,l]=R(this,yn,ha).call(this);w(this,Fs,t),w(this,Us,n),w(this,Bu,i);const[u,d]=R(this,yn,ha).call(this),f=u-a,y=d-l,A=p(this,Pn);return A[0]-=f,A[1]-=y,A[2]+=2*f,A[3]+=2*y,A}updateRotation(t){return w(this,rp,t),{path:{transform:this.rotationTransform}}}get viewBox(){return p(this,Pn).map(ge.svgRound).join(" ")}get defaultProperties(){const[t,n]=p(this,Pn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ge.svgRound(t)} ${ge.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=p(this,Pn);let i=0,a=0,l=0,u=0,d=0,f=0;switch(p(this,rp)){case 90:a=n/t,l=-t/n,d=t;break;case 180:i=-1,u=-1,d=t,f=n;break;case 270:a=-n/t,l=t/n,f=n;break;default:return""}return`matrix(${i} ${a} ${l} ${u} ${ge.svgRound(d)} ${ge.svgRound(f)})`}getPathResizingSVGProperties([t,n,i,a]){const[l,u]=R(this,yn,ha).call(this),[d,f,y,A]=p(this,Pn);if(Math.abs(y-l)<=ge.PRECISION||Math.abs(A-u)<=ge.PRECISION){const x=t+i/2-(d+y/2),D=n+a/2-(f+A/2);return{path:{"transform-origin":`${ge.svgRound(t)} ${ge.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${D})`}}}const _=(i-2*l)/(y-2*l),S=(a-2*u)/(A-2*u),T=y/i,C=A/a;return{path:{"transform-origin":`${ge.svgRound(d)} ${ge.svgRound(f)}`,transform:`${this.rotationTransform} scale(${T} ${C}) translate(${ge.svgRound(l)} ${ge.svgRound(u)}) scale(${_} ${S}) translate(${ge.svgRound(-l)} ${ge.svgRound(-u)})`}}}getPathResizedSVGProperties([t,n,i,a]){const[l,u]=R(this,yn,ha).call(this),d=p(this,Pn),[f,y,A,_]=d;if(d[0]=t,d[1]=n,d[2]=i,d[3]=a,Math.abs(A-l)<=ge.PRECISION||Math.abs(_-u)<=ge.PRECISION){const D=t+i/2-(f+A/2),k=n+a/2-(y+_/2);for(const{line:L,points:U}of p(this,Ai))ge._translate(L,D,k,L),ge._translate(U,D,k,U);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ge.svgRound(t)} ${ge.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(i-2*l)/(A-2*l),T=(a-2*u)/(_-2*u),C=-S*(f+l)+t+l,x=-T*(y+u)+n+u;if(S!==1||T!==1||C!==0||x!==0)for(const{line:D,points:k}of p(this,Ai))ge._rescale(D,C,x,S,T,D),ge._rescale(k,C,x,S,T,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ge.svgRound(t)} ${ge.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[a,l]=i,u=p(this,Pn),d=t-u[0],f=n-u[1];if(p(this,Fs)===a&&p(this,Us)===l)for(const{line:y,points:A}of p(this,Ai))ge._translate(y,d,f,y),ge._translate(A,d,f,A);else{const y=p(this,Fs)/a,A=p(this,Us)/l;w(this,Fs,a),w(this,Us,l);for(const{line:_,points:S}of p(this,Ai))ge._rescale(_,d,f,y,A,_),ge._rescale(S,d,f,y,A,S);u[2]*=y,u[3]*=A}return u[0]=t,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ge.svgRound(t)} ${ge.svgRound(n)}`}}}get defaultSVGProperties(){const t=p(this,Pn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ge.svgRound(t[0])} ${ge.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Pn=new WeakMap,rp=new WeakMap,op=new WeakMap,Ai=new WeakMap,Fs=new WeakMap,Us=new WeakMap,Bu=new WeakMap,Vu=new WeakMap,zu=new WeakMap,yn=new WeakSet,ha=function(t=p(this,zu)){const n=p(this,op)+t/2*p(this,Bu);return p(this,Vu)%180===0?[n/p(this,Fs),n/p(this,Us)]:[n/p(this,Us),n/p(this,Fs)]},K1=function(){const[t,n,i,a]=p(this,Pn),[l,u]=R(this,yn,ha).call(this,0);return[t+l,n+u,i-2*l,a-2*u]},Z1=function(){const t=w(this,Pn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of p(this,Ai)){if(a.length<=12){for(let d=4,f=a.length;d<f;d+=6){const[y,A]=a.subarray(d,d+2);t[0]=Math.min(t[0],y),t[1]=Math.min(t[1],A),t[2]=Math.max(t[2],y),t[3]=Math.max(t[3],A)}continue}let l=a[4],u=a[5];for(let d=6,f=a.length;d<f;d+=6){const[y,A,_,S,T,C]=a.subarray(d,d+6);Te.bezierBoundingBox(l,u,y,A,_,S,T,C,t),l=T,u=C}}const[n,i]=R(this,yn,ha).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},Q1=function(t){const[n,i]=R(this,yn,ha).call(this);w(this,zu,t);const[a,l]=R(this,yn,ha).call(this),[u,d]=[a-n,l-i],f=p(this,Pn);return f[0]-=u,f[1]-=d,f[2]+=2*u,f[3]+=2*d,f};let Cm=t_;var Gu;const n_=class n_ extends hN{constructor(t){super();M(this,Gu);w(this,Gu,t),super.updateProperties({fill:"none",stroke:It._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=p(this,Gu).realScale),super.updateSVGProperty(t,n)}clone(){const t=new n_(p(this,Gu));return t.updateAll(this),t}};Gu=new WeakMap;let ZA=n_;var ty,J1;const Bc=class Bc extends YA{constructor(t){super({...t,name:"inkEditor"});M(this,ty);this._willKeepAspectRatio=!0}static initialize(t,n){It.initialize(t,n),this._defaultDrawingOptions=new ZA(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ye(this,"typesMap",new Map([[Ke.INK_THICKNESS,"stroke-width"],[Ke.INK_COLOR,"stroke"],[Ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,a,l){return new fN(t,n,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,a,l,u){return Cm.deserialize(t,n,i,a,l,u)}static async deserialize(t,n,i){let a=null;if(t instanceof Ob){const{data:{inkLists:u,rect:d,rotation:f,id:y,color:A,opacity:_,borderStyle:{rawWidth:S},popupRef:T},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:Oe.INK,color:Array.from(A),thickness:S,opacity:_,paths:{points:u},boxes:null,pageIndex:C-1,rect:d.slice(0),rotation:f,id:y,deleted:!1,popupRef:T}}const l=await super.deserialize(t,n,i);return l.annotationElementId=t.id||null,l._initialData=a,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Bc.getDefaultDrawingOptions({stroke:Te.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:l,"stroke-opacity":u,"stroke-width":d}}=this,f={annotationType:Oe.INK,color:It._colorManager.convert(l),opacity:u,thickness:d,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?f:this.annotationElementId&&!R(this,ty,J1).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(t){const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};ty=new WeakSet,J1=function(t){const{color:n,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((u,d)=>u!==n[d])||t.thickness!==i||t.opacity!==a||t.pageIndex!==l},he(Bc,"_type","ink"),he(Bc,"_editorType",Oe.INK),he(Bc,"_defaultDrawingOptions",null);let QA=Bc;var Mt,mn,$r,Oa,Yr,qu,Hs,Bs,bi,$u,nt,Th,Ch,cm,jA,um,eb,dm,j1;const kh=class kh extends It{constructor(t){super({...t,name:"stampEditor"});M(this,nt);M(this,Mt,null);M(this,mn,null);M(this,$r,null);M(this,Oa,null);M(this,Yr,null);M(this,qu,"");M(this,Hs,null);M(this,Bs,null);M(this,bi,!1);M(this,$u,!1);w(this,Oa,t.bitmapUrl),w(this,Yr,t.bitmapFile)}static initialize(t,n){It.initialize(t,n)}static get supportedTypes(){return Ye(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Ye(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Oe.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await i.guess({name:"altText",request:{data:a,width:l,height:u,channels:a.length/(l*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var t;p(this,mn)&&(w(this,Mt,null),this._uiManager.imageManager.deleteId(p(this,mn)),(t=p(this,Hs))==null||t.remove(),w(this,Hs,null),p(this,Bs)&&(clearTimeout(p(this,Bs)),w(this,Bs,null))),super.remove()}rebuild(){if(!this.parent){p(this,mn)&&R(this,nt,cm).call(this);return}super.rebuild(),this.div!==null&&(p(this,mn)&&p(this,Hs)===null&&R(this,nt,cm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(p(this,$r)||p(this,Mt)||p(this,Oa)||p(this,Yr)||p(this,mn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),p(this,Mt)?R(this,nt,jA).call(this):R(this,nt,cm).call(this),this.width&&!this.annotationElementId){const[i,a]=this.parentDimensions;this.setAt(t*i,n*a,this.width*i,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;p(this,Bs)!==null&&clearTimeout(p(this,Bs)),w(this,Bs,setTimeout(()=>{w(this,Bs,null),R(this,nt,eb).call(this)},200))}copyCanvas(t,n,i=!1){var S;t||(t=224);const{width:a,height:l}=p(this,Mt),u=new Z0;let d=p(this,Mt),f=a,y=l,A=null;if(n){if(a>n||l>n){const Q=Math.min(n/a,n/l);f=Math.floor(a*Q),y=Math.floor(l*Q)}A=document.createElement("canvas");const T=A.width=Math.ceil(f*u.sx),C=A.height=Math.ceil(y*u.sy);p(this,bi)||(d=R(this,nt,um).call(this,T,C));const x=A.getContext("2d");x.filter=this._uiManager.hcmFilter;let D="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(D="#8f8f9d",k="#42414d");const L=15,U=L*u.sx,F=L*u.sy,W=new OffscreenCanvas(U*2,F*2),K=W.getContext("2d");K.fillStyle=D,K.fillRect(0,0,U*2,F*2),K.fillStyle=k,K.fillRect(0,0,U,F),K.fillRect(U,F,U,F),x.fillStyle=x.createPattern(W,"repeat"),x.fillRect(0,0,T,C),x.drawImage(d,0,0,d.width,d.height,0,0,T,C)}let _=null;if(i){let T,C;if(u.symmetric&&d.width<t&&d.height<t)T=d.width,C=d.height;else if(d=p(this,Mt),a>t||l>t){const k=Math.min(t/a,t/l);T=Math.floor(a*k),C=Math.floor(l*k),p(this,bi)||(d=R(this,nt,um).call(this,T,C))}const D=new OffscreenCanvas(T,C).getContext("2d",{willReadFrequently:!0});D.drawImage(d,0,0,d.width,d.height,0,0,T,C),_={width:T,height:C,data:D.getImageData(0,0,T,C).data}}return{canvas:A,width:f,height:y,imageData:_}}getImageForAltText(){return p(this,Hs)}static async deserialize(t,n,i){var C;let a=null;if(t instanceof b1){const{data:{rect:x,rotation:D,id:k,structParent:L,popupRef:U},container:F,parent:{page:{pageNumber:W}}}=t,K=F.querySelector("canvas"),Q=i.imageManager.getFromCanvas(F.id,K);K.remove();const J=((C=await n._structTree.getAriaAttributes(`${Mb}${k}`))==null?void 0:C.get("aria-label"))||"";a=t={annotationType:Oe.STAMP,bitmapId:Q.id,bitmap:Q.bitmap,pageIndex:W-1,rect:x.slice(0),rotation:D,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:J},isSvg:!1,structParent:L,popupRef:U}}const l=await super.deserialize(t,n,i),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:y,isSvg:A,accessibilityData:_}=t;y&&i.imageManager.isValidId(y)?(w(l,mn,y),d&&w(l,Mt,d)):w(l,Oa,f),w(l,bi,A);const[S,T]=l.pageDimensions;return l.width=(u[2]-u[0])/S,l.height=(u[3]-u[1])/T,l.annotationElementId=t.id||null,_&&(l.altTextData=_),l._initialData=a,w(l,$u,!!a),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Oe.STAMP,bitmapId:p(this,mn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:p(this,bi),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=R(this,nt,dm).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=R(this,nt,j1).call(this,i);if(d.isSame)return null;d.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const u=p(this,bi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(p(this,mn)))n.stamps.set(p(this,mn),{area:u,serialized:i}),i.bitmap=R(this,nt,dm).call(this,!1);else if(p(this,bi)){const d=n.stamps.get(p(this,mn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=R(this,nt,dm).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Mt=new WeakMap,mn=new WeakMap,$r=new WeakMap,Oa=new WeakMap,Yr=new WeakMap,qu=new WeakMap,Hs=new WeakMap,Bs=new WeakMap,bi=new WeakMap,$u=new WeakMap,nt=new WeakSet,Th=function(t,n=!1){if(!t){this.remove();return}w(this,Mt,t.bitmap),n||(w(this,mn,t.id),w(this,bi,t.isSvg)),t.file&&w(this,qu,t.file.name),R(this,nt,jA).call(this)},Ch=function(){if(w(this,$r,null),this._uiManager.enableWaiting(!1),!!p(this,Hs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,Mt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,Mt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},cm=function(){if(p(this,mn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,mn)).then(i=>R(this,nt,Th).call(this,i,!0)).finally(()=>R(this,nt,Ch).call(this));return}if(p(this,Oa)){const i=p(this,Oa);w(this,Oa,null),this._uiManager.enableWaiting(!0),w(this,$r,this._uiManager.imageManager.getFromUrl(i).then(a=>R(this,nt,Th).call(this,a)).finally(()=>R(this,nt,Ch).call(this)));return}if(p(this,Yr)){const i=p(this,Yr);w(this,Yr,null),this._uiManager.enableWaiting(!0),w(this,$r,this._uiManager.imageManager.getFromFile(i).then(a=>R(this,nt,Th).call(this,a)).finally(()=>R(this,nt,Ch).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=kh.supportedTypesStr;const n=this._uiManager._signal;w(this,$r,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,nt,Th).call(this,a)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>R(this,nt,Ch).call(this))),t.click()},jA=function(){var A;const{div:t}=this;let{width:n,height:i}=p(this,Mt);const[a,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*a,i=this.height*l;else if(n>u*a||i>u*l){const _=Math.min(u*a/n,u*l/i);n*=_,i*=_}const[d,f]=this.parentDimensions;this.setDims(n*d/a,i*f/l),this._uiManager.enableWaiting(!1);const y=w(this,Hs,document.createElement("canvas"));y.setAttribute("role","img"),this.addContainer(y),this.width=n/a,this.height=i/l,(A=this._initialOptions)!=null&&A.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),R(this,nt,eb).call(this),p(this,$u)||(this.parent.addUndoableEditor(this),w(this,$u,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,qu)&&y.setAttribute("aria-label",p(this,qu))},um=function(t,n){const{width:i,height:a}=p(this,Mt);let l=i,u=a,d=p(this,Mt);for(;l>2*t||u>2*n;){const f=l,y=u;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const A=new OffscreenCanvas(l,u);A.getContext("2d").drawImage(d,0,0,f,y,0,0,l,u),d=A.transferToImageBitmap()}return d},eb=function(){const[t,n]=this.parentDimensions,{width:i,height:a}=this,l=new Z0,u=Math.ceil(i*t*l.sx),d=Math.ceil(a*n*l.sy),f=p(this,Hs);if(!f||f.width===u&&f.height===d)return;f.width=u,f.height=d;const y=p(this,bi)?p(this,Mt):R(this,nt,um).call(this,u,d),A=f.getContext("2d");A.filter=this._uiManager.hcmFilter,A.drawImage(y,0,0,y.width,y.height,0,0,u,d)},dm=function(t){if(t){if(p(this,bi)){const a=this._uiManager.imageManager.getSvgUrl(p(this,mn));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=p(this,Mt),n.getContext("2d").drawImage(p(this,Mt),0,0),n.toDataURL()}if(p(this,bi)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*jr.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*jr.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(a,l);return u.getContext("2d").drawImage(p(this,Mt),0,0,p(this,Mt).width,p(this,Mt).height,0,0,a,l),u.transferToImageBitmap()}return structuredClone(p(this,Mt))},j1=function(t){var u;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===n,l=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}},he(kh,"_type","stamp"),he(kh,"_editorType",Oe.STAMP);let JA=kh;var Dl,Yu,Vs,Wr,Fa,zi,Xr,Wu,kl,us,Ua,xn,Ha,_e,Kr,wt,eM,Cs,nb,ib,hm;const Ji=class Ji{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:y}){M(this,wt);M(this,Dl);M(this,Yu,!1);M(this,Vs,null);M(this,Wr,null);M(this,Fa,null);M(this,zi,new Map);M(this,Xr,!1);M(this,Wu,!1);M(this,kl,!1);M(this,us,null);M(this,Ua,null);M(this,xn,null);M(this,Ha,null);M(this,_e);const A=[...p(Ji,Kr).values()];if(!Ji._initialized){Ji._initialized=!0;for(const _ of A)_.initialize(y,e)}e.registerEditorTypes(A),w(this,_e,e),this.pageIndex=t,this.div=n,w(this,Dl,a),w(this,Vs,l),this.viewport=f,w(this,xn,d),this.drawLayer=u,this._structTree=i,p(this,_e).addLayer(this)}get isEmpty(){return p(this,zi).size===0}get isInvisible(){return this.isEmpty&&p(this,_e).getMode()===Oe.NONE}updateToolbar(e){p(this,_e).updateToolbar(e)}updateMode(e=p(this,_e).getMode()){switch(R(this,wt,hm).call(this),e){case Oe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Oe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Oe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of p(Ji,Kr).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=p(this,xn))==null?void 0:t.div)}setEditingState(e){p(this,_e).setEditingState(e)}addCommands(e){p(this,_e).addCommands(e)}cleanUndoStack(e){p(this,_e).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=p(this,Vs))==null||t.div.classList.toggle("disabled",!e)}async enable(){w(this,kl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of p(this,zi).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(p(this,_e).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!p(this,Vs)){w(this,kl,!1);return}const t=p(this,Vs).getEditableAnnotations();for(const n of t){if(n.hide(),p(this,_e).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}w(this,kl,!1)}disable(){var i;w(this,Wu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of p(this,zi).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(p(this,Vs)){const a=p(this,Vs).getEditableAnnotations();for(const l of a){const{id:u}=l.data;if(p(this,_e).isDeletedAnnotationElement(u))continue;let d=t.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=e.get(u),d&&(p(this,_e).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}R(this,wt,hm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of p(Ji,Kr).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,Wu,!1)}getEditableAnnotation(e){var t;return((t=p(this,Vs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){p(this,_e).getActive()!==e&&p(this,_e).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=p(this,xn))!=null&&e.div&&!p(this,Ha)){w(this,Ha,new AbortController);const t=p(this,_e).combinedSignal(p(this,Ha));p(this,xn).div.addEventListener("pointerdown",R(this,wt,eM).bind(this),{signal:t}),p(this,xn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=p(this,xn))!=null&&e.div&&p(this,Ha)&&(p(this,Ha).abort(),w(this,Ha,null),p(this,xn).div.classList.remove("highlighting"))}enableClick(){if(p(this,Wr))return;w(this,Wr,new AbortController);const e=p(this,_e).combinedSignal(p(this,Wr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=p(this,Wr))==null||e.abort(),w(this,Wr,null)}attach(e){p(this,zi).set(e.id,e);const{annotationElementId:t}=e;t&&p(this,_e).isDeletedAnnotationElement(t)&&p(this,_e).removeDeletedAnnotationElement(e)}detach(e){var t;p(this,zi).delete(e.id),(t=p(this,Dl))==null||t.removePointerInTextLayer(e.contentDiv),!p(this,Wu)&&e.annotationElementId&&p(this,_e).addDeletedAnnotationElement(e)}remove(e){this.detach(e),p(this,_e).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(p(this,_e).addDeletedAnnotationElement(e.annotationElementId),It.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),p(this,_e).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!p(this,kl)),p(this,_e).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!p(this,Fa)&&(e._focusEventsAllowed=!1,w(this,Fa,setTimeout(()=>{w(this,Fa,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:p(this,_e)._signal}),t.focus())},0))),e._structTreeParentId=(n=p(this,Dl))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return p(this,_e).getId()}combinedSignal(e){return p(this,_e).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=p(this,wt,Cs))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){p(this,_e).updateToolbar(e),p(this,_e).updateMode(e);const{offsetX:n,offsetY:i}=R(this,wt,ib).call(this),a=this.getNextId(),l=R(this,wt,nb).call(this,{parent:this,id:a,x:n,y:i,uiManager:p(this,_e),isCentered:!0,...t});l&&this.add(l)}async deserialize(e){var t;return await((t=p(Ji,Kr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,p(this,_e)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),a=R(this,wt,nb).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:p(this,_e),isCentered:t,...n});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(R(this,wt,ib).call(this),!0)}setSelected(e){p(this,_e).setSelected(e)}toggleSelected(e){p(this,_e).toggleSelected(e)}unselect(e){p(this,_e).unselect(e)}pointerup(e){var n;const{isMac:t}=Fn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&p(this,Xr)&&(w(this,Xr,!1),!((n=p(this,wt,Cs))!=null&&n.isDrawer&&p(this,wt,Cs).supportMultipleDrawings))){if(!p(this,Yu)){w(this,Yu,!0);return}if(p(this,_e).getMode()===Oe.STAMP){p(this,_e).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(p(this,_e).getMode()===Oe.HIGHLIGHT&&this.enableTextSelection(),p(this,Xr)){w(this,Xr,!1);return}const{isMac:t}=Fn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(w(this,Xr,!0),(i=p(this,wt,Cs))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=p(this,_e).getActive();w(this,Yu,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),p(this,us)){p(this,wt,Cs).startDrawing(this,p(this,_e),!1,e);return}p(this,_e).setCurrentDrawingSession(this),w(this,us,new AbortController);const t=p(this,_e).combinedSignal(p(this,us));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(w(this,Ua,null),this.commitOrRemove())},{signal:t}),p(this,wt,Cs).startDrawing(this,p(this,_e),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&w(this,Ua,t);return}p(this,Ua)&&setTimeout(()=>{var t;(t=p(this,Ua))==null||t.focus(),w(this,Ua,null)},0)}endDrawingSession(e=!1){return p(this,us)?(p(this,_e).setCurrentDrawingSession(null),p(this,us).abort(),w(this,us,null),w(this,Ua,null),p(this,wt,Cs).endDrawing(e)):null}findNewParent(e,t,n){const i=p(this,_e).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return p(this,us)?(this.endDrawingSession(),!0):!1}onScaleChanging(){p(this,us)&&p(this,wt,Cs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=p(this,_e).getActive())==null?void 0:e.parent)===this&&(p(this,_e).commitOrRemove(),p(this,_e).setActiveEditor(null)),p(this,Fa)&&(clearTimeout(p(this,Fa)),w(this,Fa,null));for(const n of p(this,zi).values())(t=p(this,Dl))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,p(this,zi).clear(),p(this,_e).removeLayer(this)}render({viewport:e}){this.viewport=e,Ll(this.div,e);for(const t of p(this,_e).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){p(this,_e).commitOrRemove(),R(this,wt,hm).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ll(this.div,{rotation:n}),t!==n)for(const i of p(this,zi).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return p(this,_e).viewParameters.realScale}};Dl=new WeakMap,Yu=new WeakMap,Vs=new WeakMap,Wr=new WeakMap,Fa=new WeakMap,zi=new WeakMap,Xr=new WeakMap,Wu=new WeakMap,kl=new WeakMap,us=new WeakMap,Ua=new WeakMap,xn=new WeakMap,Ha=new WeakMap,_e=new WeakMap,Kr=new WeakMap,wt=new WeakSet,eM=function(e){p(this,_e).unselectAll();const{target:t}=e;if(t===p(this,xn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&p(this,xn).div.contains(t)){const{isMac:n}=Fn.platform;if(e.button!==0||e.ctrlKey&&n)return;p(this,_e).showAllEditors("highlight",!0,!0),p(this,xn).div.classList.add("free"),this.toggleDrawing(),Tm.startHighlighting(this,p(this,_e).direction==="ltr",{target:p(this,xn).div,x:e.x,y:e.y}),p(this,xn).div.addEventListener("pointerup",()=>{p(this,xn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:p(this,_e)._signal}),e.preventDefault()}},Cs=function(){return p(Ji,Kr).get(p(this,_e).getMode())},nb=function(e){const t=p(this,wt,Cs);return t?new t.prototype.constructor(e):null},ib=function(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),l=Math.max(0,t),u=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+i),f=(a+u)/2-e,y=(l+d)/2-t,[A,_]=this.viewport.rotation%180===0?[f,y]:[y,f];return{offsetX:A,offsetY:_}},hm=function(){for(const e of p(this,zi).values())e.isEmpty()&&e.remove()},he(Ji,"_initialized",!1),M(Ji,Kr,new Map([OA,QA,JA,Tm].map(e=>[e._editorType,e])));let tb=Ji;var ds,lp,On,Nl,ny,tM,Xs,ab,nM,rb;const Tn=class Tn{constructor({pageIndex:e}){M(this,Xs);M(this,ds,null);M(this,lp,0);M(this,On,new Map);M(this,Nl,new Map);this.pageIndex=e}setParent(e){if(!p(this,ds)){w(this,ds,e);return}if(p(this,ds)!==e){if(p(this,On).size>0)for(const t of p(this,On).values())t.remove(),e.append(t);w(this,ds,e)}}static get _svgFactory(){return Ye(this,"_svgFactory",new Pb)}draw(e,t=!1,n=!1){const i=Dn(this,lp)._++,a=R(this,Xs,ab).call(this),l=Tn._svgFactory.createElement("defs");a.append(l);const u=Tn._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),t&&p(this,Nl).set(i,u);const f=n?R(this,Xs,nM).call(this,l,d):null,y=Tn._svgFactory.createElement("use");return a.append(y),y.setAttribute("href",`#${d}`),this.updateProperties(a,e),p(this,On).set(i,a),{id:i,clipPathId:`url(#${f})`}}drawOutline(e,t){const n=Dn(this,lp)._++,i=R(this,Xs,ab).call(this),a=Tn._svgFactory.createElement("defs");i.append(a);const l=Tn._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const A=Tn._svgFactory.createElement("mask");a.append(A),d=`mask_p${this.pageIndex}_${n}`,A.setAttribute("id",d),A.setAttribute("maskUnits","objectBoundingBox");const _=Tn._svgFactory.createElement("rect");A.append(_),_.setAttribute("width","1"),_.setAttribute("height","1"),_.setAttribute("fill","white");const S=Tn._svgFactory.createElement("use");A.append(S),S.setAttribute("href",`#${u}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const f=Tn._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const y=f.cloneNode();return i.append(y),f.classList.add("mainOutline"),y.classList.add("secondaryOutline"),this.updateProperties(i,e),p(this,On).set(n,i),n}finalizeDraw(e,t){p(this,Nl).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:i,rootClass:a,path:l}=t,u=typeof e=="number"?p(this,On).get(e):e;if(u){if(n&&R(this,Xs,rb).call(this,u,n),i&&R(d=Tn,ny,tM).call(d,u,i),a){const{classList:f}=u;for(const[y,A]of Object.entries(a))f.toggle(y,A)}if(l){const y=u.firstChild.firstChild;R(this,Xs,rb).call(this,y,l)}}}updateParent(e,t){if(t===this)return;const n=p(this,On).get(e);n&&(p(t,ds).append(n),p(this,On).delete(e),p(t,On).set(e,n))}remove(e){p(this,Nl).delete(e),p(this,ds)!==null&&(p(this,On).get(e).remove(),p(this,On).delete(e))}destroy(){w(this,ds,null);for(const e of p(this,On).values())e.remove();p(this,On).clear(),p(this,Nl).clear()}};ds=new WeakMap,lp=new WeakMap,On=new WeakMap,Nl=new WeakMap,ny=new WeakSet,tM=function(e,[t,n,i,a]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*i}%`,l.height=`${100*a}%`},Xs=new WeakSet,ab=function(){const e=Tn._svgFactory.create(1,1,!0);return p(this,ds).append(e),e.setAttribute("aria-hidden",!0),e},nM=function(e,t){const n=Tn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Tn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i},rb=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},M(Tn,ny);let sb=Tn;globalThis.pdfjsTestingUtils={HighlightOutliner:UA};ke.AbortException;ke.AnnotationEditorLayer;ke.AnnotationEditorParamsType;ke.AnnotationEditorType;ke.AnnotationEditorUIManager;ke.AnnotationLayer;ke.AnnotationMode;ke.ColorPicker;ke.DOMSVGFactory;ke.DrawLayer;ke.FeatureTest;var gw=ke.GlobalWorkerOptions;ke.ImageKind;ke.InvalidPDFException;ke.MissingPDFException;ke.OPS;ke.OutputScale;ke.PDFDataRangeTransport;ke.PDFDateString;ke.PDFWorker;ke.PasswordResponses;ke.PermissionFlag;ke.PixelsPerInch;ke.RenderingCancelledException;ke.TextLayer;ke.TouchManager;ke.UnexpectedResponseException;ke.Util;ke.VerbosityLevel;ke.XfaLayer;ke.build;ke.createValidAbsoluteUrl;ke.fetchData;var pN=ke.getDocument;ke.getFilenameFromUrl;ke.getPdfFilenameFromUrl;ke.getXfaPageViewport;ke.isDataScheme;ke.isPdfFile;ke.noContextMenu;ke.normalizeUnicode;ke.setLayerDimensions;ke.shadow;ke.stopEvent;ke.version;typeof window<"u"&&"Worker"in window?(gw.workerSrc="pdfjs-dist/build/pdf.worker.js",console.log("PDF.js workerSrc configured to use import map alias for classic worker:",gw.workerSrc)):console.warn("Web Workers are not supported in this environment. PDF processing might be affected or fail.");function iM(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var U0={exports:{}},ih={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function gN(){if(mw)return ih;mw=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:o,type:n,key:l,ref:i!==void 0?i:null,props:a}}return ih.Fragment=e,ih.jsx=t,ih.jsxs=t,ih}var yw;function mN(){return yw||(yw=1,U0.exports=gN()),U0.exports}var q=mN(),H0={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function yN(){if(vw)return Pe;vw=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),A=Symbol.iterator;function _(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function x(P,Z,oe){this.props=P,this.context=Z,this.refs=C,this.updater=oe||S}x.prototype.isReactComponent={},x.prototype.setState=function(P,Z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Z,"setState")},x.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function D(){}D.prototype=x.prototype;function k(P,Z,oe){this.props=P,this.context=Z,this.refs=C,this.updater=oe||S}var L=k.prototype=new D;L.constructor=k,T(L,x.prototype),L.isPureReactComponent=!0;var U=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function K(P,Z,oe,ae,Se,ze){return oe=ze.ref,{$$typeof:o,type:P,key:Z,ref:oe!==void 0?oe:null,props:ze}}function Q(P,Z){return K(P.type,Z,void 0,void 0,void 0,P.props)}function J(P){return typeof P=="object"&&P!==null&&P.$$typeof===o}function se(P){var Z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(oe){return Z[oe]})}var ce=/\/+/g;function B(P,Z){return typeof P=="object"&&P!==null&&P.key!=null?se(""+P.key):Z.toString(36)}function ie(){}function ne(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ie,ie):(P.status="pending",P.then(function(Z){P.status==="pending"&&(P.status="fulfilled",P.value=Z)},function(Z){P.status==="pending"&&(P.status="rejected",P.reason=Z)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ue(P,Z,oe,ae,Se){var ze=typeof P;(ze==="undefined"||ze==="boolean")&&(P=null);var be=!1;if(P===null)be=!0;else switch(ze){case"bigint":case"string":case"number":be=!0;break;case"object":switch(P.$$typeof){case o:case e:be=!0;break;case y:return be=P._init,ue(be(P._payload),Z,oe,ae,Se)}}if(be)return Se=Se(P),be=ae===""?"."+B(P,0):ae,U(Se)?(oe="",be!=null&&(oe=be.replace(ce,"$&/")+"/"),ue(Se,Z,oe,"",function(Xi){return Xi})):Se!=null&&(J(Se)&&(Se=Q(Se,oe+(Se.key==null||P&&P.key===Se.key?"":(""+Se.key).replace(ce,"$&/")+"/")+be)),Z.push(Se)),1;be=0;var Ge=ae===""?".":ae+":";if(U(P))for(var it=0;it<P.length;it++)ae=P[it],ze=Ge+B(ae,it),be+=ue(ae,Z,oe,ze,Se);else if(it=_(P),typeof it=="function")for(P=it.call(P),it=0;!(ae=P.next()).done;)ae=ae.value,ze=Ge+B(ae,it++),be+=ue(ae,Z,oe,ze,Se);else if(ze==="object"){if(typeof P.then=="function")return ue(ne(P),Z,oe,ae,Se);throw Z=String(P),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return be}function O(P,Z,oe){if(P==null)return P;var ae=[],Se=0;return ue(P,ae,"","",function(ze){return Z.call(oe,ze,Se++)}),ae}function z(P){if(P._status===-1){var Z=P._result;Z=Z(),Z.then(function(oe){(P._status===0||P._status===-1)&&(P._status=1,P._result=oe)},function(oe){(P._status===0||P._status===-1)&&(P._status=2,P._result=oe)}),P._status===-1&&(P._status=0,P._result=Z)}if(P._status===1)return P._result.default;throw P._result}var le=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function we(){}return Pe.Children={map:O,forEach:function(P,Z,oe){O(P,function(){Z.apply(this,arguments)},oe)},count:function(P){var Z=0;return O(P,function(){Z++}),Z},toArray:function(P){return O(P,function(Z){return Z})||[]},only:function(P){if(!J(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Pe.Component=x,Pe.Fragment=t,Pe.Profiler=i,Pe.PureComponent=k,Pe.StrictMode=n,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return F.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cloneElement=function(P,Z,oe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ae=T({},P.props),Se=P.key,ze=void 0;if(Z!=null)for(be in Z.ref!==void 0&&(ze=void 0),Z.key!==void 0&&(Se=""+Z.key),Z)!W.call(Z,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Z.ref===void 0||(ae[be]=Z[be]);var be=arguments.length-2;if(be===1)ae.children=oe;else if(1<be){for(var Ge=Array(be),it=0;it<be;it++)Ge[it]=arguments[it+2];ae.children=Ge}return K(P.type,Se,void 0,void 0,ze,ae)},Pe.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},Pe.createElement=function(P,Z,oe){var ae,Se={},ze=null;if(Z!=null)for(ae in Z.key!==void 0&&(ze=""+Z.key),Z)W.call(Z,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Se[ae]=Z[ae]);var be=arguments.length-2;if(be===1)Se.children=oe;else if(1<be){for(var Ge=Array(be),it=0;it<be;it++)Ge[it]=arguments[it+2];Se.children=Ge}if(P&&P.defaultProps)for(ae in be=P.defaultProps,be)Se[ae]===void 0&&(Se[ae]=be[ae]);return K(P,ze,void 0,void 0,null,Se)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:u,render:P}},Pe.isValidElement=J,Pe.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:z}},Pe.memo=function(P,Z){return{$$typeof:f,type:P,compare:Z===void 0?null:Z}},Pe.startTransition=function(P){var Z=F.T,oe={};F.T=oe;try{var ae=P(),Se=F.S;Se!==null&&Se(oe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(we,le)}catch(ze){le(ze)}finally{F.T=Z}},Pe.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Pe.use=function(P){return F.H.use(P)},Pe.useActionState=function(P,Z,oe){return F.H.useActionState(P,Z,oe)},Pe.useCallback=function(P,Z){return F.H.useCallback(P,Z)},Pe.useContext=function(P){return F.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,Z){return F.H.useDeferredValue(P,Z)},Pe.useEffect=function(P,Z,oe){var ae=F.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(P,Z)},Pe.useId=function(){return F.H.useId()},Pe.useImperativeHandle=function(P,Z,oe){return F.H.useImperativeHandle(P,Z,oe)},Pe.useInsertionEffect=function(P,Z){return F.H.useInsertionEffect(P,Z)},Pe.useLayoutEffect=function(P,Z){return F.H.useLayoutEffect(P,Z)},Pe.useMemo=function(P,Z){return F.H.useMemo(P,Z)},Pe.useOptimistic=function(P,Z){return F.H.useOptimistic(P,Z)},Pe.useReducer=function(P,Z,oe){return F.H.useReducer(P,Z,oe)},Pe.useRef=function(P){return F.H.useRef(P)},Pe.useState=function(P){return F.H.useState(P)},Pe.useSyncExternalStore=function(P,Z,oe){return F.H.useSyncExternalStore(P,Z,oe)},Pe.useTransition=function(){return F.H.useTransition()},Pe.version="19.1.0",Pe}var Aw;function Fb(){return Aw||(Aw=1,H0.exports=yN()),H0.exports}var Ve=Fb();const vN=iM(Ve);var B0={exports:{}},sh={},V0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw;function AN(){return bw||(bw=1,function(o){function e(O,z){var le=O.length;O.push(z);e:for(;0<le;){var we=le-1>>>1,P=O[we];if(0<i(P,z))O[we]=z,O[le]=P,le=we;else break e}}function t(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var z=O[0],le=O.pop();if(le!==z){O[0]=le;e:for(var we=0,P=O.length,Z=P>>>1;we<Z;){var oe=2*(we+1)-1,ae=O[oe],Se=oe+1,ze=O[Se];if(0>i(ae,le))Se<P&&0>i(ze,ae)?(O[we]=ze,O[Se]=le,we=Se):(O[we]=ae,O[oe]=le,we=oe);else if(Se<P&&0>i(ze,le))O[we]=ze,O[Se]=le,we=Se;else break e}}return z}function i(O,z){var le=O.sortIndex-z.sortIndex;return le!==0?le:O.id-z.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();o.unstable_now=function(){return l.now()-u}}var d=[],f=[],y=1,A=null,_=3,S=!1,T=!1,C=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function U(O){for(var z=t(f);z!==null;){if(z.callback===null)n(f);else if(z.startTime<=O)n(f),z.sortIndex=z.expirationTime,e(d,z);else break;z=t(f)}}function F(O){if(C=!1,U(O),!T)if(t(d)!==null)T=!0,W||(W=!0,B());else{var z=t(f);z!==null&&ue(F,z.startTime-O)}}var W=!1,K=-1,Q=5,J=-1;function se(){return x?!0:!(o.unstable_now()-J<Q)}function ce(){if(x=!1,W){var O=o.unstable_now();J=O;var z=!0;try{e:{T=!1,C&&(C=!1,k(K),K=-1),S=!0;var le=_;try{t:{for(U(O),A=t(d);A!==null&&!(A.expirationTime>O&&se());){var we=A.callback;if(typeof we=="function"){A.callback=null,_=A.priorityLevel;var P=we(A.expirationTime<=O);if(O=o.unstable_now(),typeof P=="function"){A.callback=P,U(O),z=!0;break t}A===t(d)&&n(d),U(O)}else n(d);A=t(d)}if(A!==null)z=!0;else{var Z=t(f);Z!==null&&ue(F,Z.startTime-O),z=!1}}break e}finally{A=null,_=le,S=!1}z=void 0}}finally{z?B():W=!1}}}var B;if(typeof L=="function")B=function(){L(ce)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ne=ie.port2;ie.port1.onmessage=ce,B=function(){ne.postMessage(null)}}else B=function(){D(ce,0)};function ue(O,z){K=D(function(){O(o.unstable_now())},z)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(O){O.callback=null},o.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<O?Math.floor(1e3/O):5},o.unstable_getCurrentPriorityLevel=function(){return _},o.unstable_next=function(O){switch(_){case 1:case 2:case 3:var z=3;break;default:z=_}var le=_;_=z;try{return O()}finally{_=le}},o.unstable_requestPaint=function(){x=!0},o.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var le=_;_=O;try{return z()}finally{_=le}},o.unstable_scheduleCallback=function(O,z,le){var we=o.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?we+le:we):le=we,O){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=le+P,O={id:y++,callback:z,priorityLevel:O,startTime:le,expirationTime:P,sortIndex:-1},le>we?(O.sortIndex=le,e(f,O),t(d)===null&&O===t(f)&&(C?(k(K),K=-1):C=!0,ue(F,le-we))):(O.sortIndex=P,e(d,O),T||S||(T=!0,W||(W=!0,B()))),O},o.unstable_shouldYield=se,o.unstable_wrapCallback=function(O){var z=_;return function(){var le=_;_=z;try{return O.apply(this,arguments)}finally{_=le}}}}(z0)),z0}var _w;function bN(){return _w||(_w=1,V0.exports=AN()),V0.exports}var G0={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function _N(){if(Sw)return bn;Sw=1;var o=Fb();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,f,y){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:A==null?null:""+A,children:d,containerInfo:f,implementation:y}}var l=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,bn.createPortal=function(d,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,y)},bn.flushSync=function(d){var f=l.T,y=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=f,n.p=y,n.d.f()}},bn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},bn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},bn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var y=f.as,A=u(y,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:A,integrity:_,fetchPriority:S}):y==="script"&&n.d.X(d,{crossOrigin:A,integrity:_,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},bn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},bn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,A=u(y,f.crossOrigin);n.d.L(d,y,{crossOrigin:A,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},bn.preloadModule=function(d,f){if(typeof d=="string")if(f){var y=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},bn.requestFormReset=function(d){n.d.r(d)},bn.unstable_batchedUpdates=function(d,f){return d(f)},bn.useFormState=function(d,f,y){return l.H.useFormState(d,f,y)},bn.useFormStatus=function(){return l.H.useHostTransitionStatus()},bn.version="19.1.0",bn}var Tw;function SN(){if(Tw)return G0.exports;Tw=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),G0.exports=_N(),G0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function TN(){if(Cw)return sh;Cw=1;var o=bN(),e=Fb(),t=SN();function n(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,c=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(c=r.return),s=r.return;while(s)}return r.tag===3?c:null}function l(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(n(188))}function d(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(n(188));return r!==s?null:s}for(var c=s,h=r;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return u(v),s;if(b===h)return u(v),r;b=b.sibling}throw Error(n(188))}if(c.return!==h.return)c=v,h=b;else{for(var E=!1,I=v.child;I;){if(I===c){E=!0,c=v,h=b;break}if(I===h){E=!0,h=v,c=b;break}I=I.sibling}if(!E){for(I=b.child;I;){if(I===c){E=!0,c=b,h=v;break}if(I===h){E=!0,h=b,c=v;break}I=I.sibling}if(!E)throw Error(n(189))}}if(c.alternate!==h)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:r}function f(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=f(s),r!==null)return r;s=s.sibling}return null}var y=Object.assign,A=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=ce&&s[ce]||s["@@iterator"],typeof s=="function"?s:null)}var ie=Symbol.for("react.client.reference");function ne(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ie?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case x:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case W:return"SuspenseList";case J:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case L:return(s.displayName||"Context")+".Provider";case k:return(s._context.displayName||"Context")+".Consumer";case U:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case K:return r=s.displayName||null,r!==null?r:ne(s.type)||"Memo";case Q:r=s._payload,s=s._init;try{return ne(s(r))}catch{}}return null}var ue=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},we=[],P=-1;function Z(s){return{current:s}}function oe(s){0>P||(s.current=we[P],we[P]=null,P--)}function ae(s,r){P++,we[P]=s.current,s.current=r}var Se=Z(null),ze=Z(null),be=Z(null),Ge=Z(null);function it(s,r){switch(ae(be,r),ae(ze,s),ae(Se,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?TC(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=TC(r),s=CC(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(Se),ae(Se,s)}function Xi(){oe(Se),oe(ze),oe(be)}function td(s){s.memoizedState!==null&&ae(Ge,s);var r=Se.current,c=CC(r,s.type);r!==c&&(ae(ze,s),ae(Se,c))}function gp(s){ze.current===s&&(oe(Se),oe(ze)),Ge.current===s&&(oe(Ge),Xd._currentValue=le)}var my=Object.prototype.hasOwnProperty,yy=o.unstable_scheduleCallback,vy=o.unstable_cancelCallback,$M=o.unstable_shouldYield,YM=o.unstable_requestPaint,ms=o.unstable_now,WM=o.unstable_getCurrentPriorityLevel,i_=o.unstable_ImmediatePriority,s_=o.unstable_UserBlockingPriority,mp=o.unstable_NormalPriority,XM=o.unstable_LowPriority,a_=o.unstable_IdlePriority,KM=o.log,ZM=o.unstable_setDisableYieldValue,nd=null,ei=null;function Wa(s){if(typeof KM=="function"&&ZM(s),ei&&typeof ei.setStrictMode=="function")try{ei.setStrictMode(nd,s)}catch{}}var ti=Math.clz32?Math.clz32:jM,QM=Math.log,JM=Math.LN2;function jM(s){return s>>>=0,s===0?32:31-(QM(s)/JM|0)|0}var yp=256,vp=4194304;function ao(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ap(s,r,c){var h=s.pendingLanes;if(h===0)return 0;var v=0,b=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var I=h&134217727;return I!==0?(h=I&~b,h!==0?v=ao(h):(E&=I,E!==0?v=ao(E):c||(c=I&~s,c!==0&&(v=ao(c))))):(I=h&~b,I!==0?v=ao(I):E!==0?v=ao(E):c||(c=h&~s,c!==0&&(v=ao(c)))),v===0?0:r!==0&&r!==v&&(r&b)===0&&(b=v&-v,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:v}function id(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function eR(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r_(){var s=yp;return yp<<=1,(yp&4194048)===0&&(yp=256),s}function o_(){var s=vp;return vp<<=1,(vp&62914560)===0&&(vp=4194304),s}function Ay(s){for(var r=[],c=0;31>c;c++)r.push(s);return r}function sd(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tR(s,r,c,h,v,b){var E=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var I=s.entanglements,N=s.expirationTimes,$=s.hiddenUpdates;for(c=E&~c;0<c;){var j=31-ti(c),te=1<<j;I[j]=0,N[j]=-1;var Y=$[j];if(Y!==null)for($[j]=null,j=0;j<Y.length;j++){var X=Y[j];X!==null&&(X.lane&=-536870913)}c&=~te}h!==0&&l_(s,h,0),b!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=b&~(E&~r))}function l_(s,r,c){s.pendingLanes|=r,s.suspendedLanes&=~r;var h=31-ti(r);s.entangledLanes|=r,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194090}function c_(s,r){var c=s.entangledLanes|=r;for(s=s.entanglements;c;){var h=31-ti(c),v=1<<h;v&r|s[h]&r&&(s[h]|=r),c&=~v}}function by(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function _y(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function u_(){var s=z.p;return s!==0?s:(s=window.event,s===void 0?32:GC(s.type))}function nR(s,r){var c=z.p;try{return z.p=s,r()}finally{z.p=c}}var Xa=Math.random().toString(36).slice(2),vn="__reactFiber$"+Xa,Vn="__reactProps$"+Xa,ql="__reactContainer$"+Xa,Sy="__reactEvents$"+Xa,iR="__reactListeners$"+Xa,sR="__reactHandles$"+Xa,d_="__reactResources$"+Xa,ad="__reactMarker$"+Xa;function Ty(s){delete s[vn],delete s[Vn],delete s[Sy],delete s[iR],delete s[sR]}function $l(s){var r=s[vn];if(r)return r;for(var c=s.parentNode;c;){if(r=c[ql]||c[vn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(s=MC(s);s!==null;){if(c=s[vn])return c;s=MC(s)}return r}s=c,c=s.parentNode}return null}function Yl(s){if(s=s[vn]||s[ql]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function rd(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(n(33))}function Wl(s){var r=s[d_];return r||(r=s[d_]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Jt(s){s[ad]=!0}var h_=new Set,f_={};function ro(s,r){Xl(s,r),Xl(s+"Capture",r)}function Xl(s,r){for(f_[s]=r,s=0;s<r.length;s++)h_.add(r[s])}var aR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),p_={},g_={};function rR(s){return my.call(g_,s)?!0:my.call(p_,s)?!1:aR.test(s)?g_[s]=!0:(p_[s]=!0,!1)}function bp(s,r,c){if(rR(r))if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+c)}}function _p(s,r,c){if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+c)}}function Ks(s,r,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(r,c,""+h)}}var Cy,m_;function Kl(s){if(Cy===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Cy=r&&r[1]||"",m_=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cy+s+m_}var wy=!1;function Ey(s,r){if(!s||wy)return"";wy=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(X){var Y=X}Reflect.construct(s,[],te)}else{try{te.call()}catch(X){Y=X}s.call(te.prototype)}}else{try{throw Error()}catch(X){Y=X}(te=s())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),E=b[0],I=b[1];if(E&&I){var N=E.split(`
`),$=I.split(`
`);for(v=h=0;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;for(;v<$.length&&!$[v].includes("DetermineComponentFrameRoot");)v++;if(h===N.length||v===$.length)for(h=N.length-1,v=$.length-1;1<=h&&0<=v&&N[h]!==$[v];)v--;for(;1<=h&&0<=v;h--,v--)if(N[h]!==$[v]){if(h!==1||v!==1)do if(h--,v--,0>v||N[h]!==$[v]){var j=`
`+N[h].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=h&&0<=v);break}}}finally{wy=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Kl(c):""}function oR(s){switch(s.tag){case 26:case 27:case 5:return Kl(s.type);case 16:return Kl("Lazy");case 13:return Kl("Suspense");case 19:return Kl("SuspenseList");case 0:case 15:return Ey(s.type,!1);case 11:return Ey(s.type.render,!1);case 1:return Ey(s.type,!0);case 31:return Kl("Activity");default:return""}}function y_(s){try{var r="";do r+=oR(s),s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Ei(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function v_(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lR(s){var r=v_(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),h=""+s[r];if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,b=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return v.call(this)},set:function(E){h=""+E,b.call(this,E)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Sp(s){s._valueTracker||(s._valueTracker=lR(s))}function A_(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var c=r.getValue(),h="";return s&&(h=v_(s)?s.checked?"true":"false":s.value),s=h,s!==c?(r.setValue(s),!0):!1}function Tp(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var cR=/[\n"\\]/g;function xi(s){return s.replace(cR,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function xy(s,r,c,h,v,b,E,I){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Ei(r)):s.value!==""+Ei(r)&&(s.value=""+Ei(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?My(s,E,Ei(r)):c!=null?My(s,E,Ei(c)):h!=null&&s.removeAttribute("value"),v==null&&b!=null&&(s.defaultChecked=!!b),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Ei(I):s.removeAttribute("name")}function b_(s,r,c,h,v,b,E,I){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null))return;c=c!=null?""+Ei(c):"",r=r!=null?""+Ei(r):c,I||r===s.value||(s.value=r),s.defaultValue=r}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=I?s.checked:!!h,s.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function My(s,r,c){r==="number"&&Tp(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Zl(s,r,c,h){if(s=s.options,r){r={};for(var v=0;v<c.length;v++)r["$"+c[v]]=!0;for(c=0;c<s.length;c++)v=r.hasOwnProperty("$"+s[c].value),s[c].selected!==v&&(s[c].selected=v),v&&h&&(s[c].defaultSelected=!0)}else{for(c=""+Ei(c),r=null,v=0;v<s.length;v++){if(s[v].value===c){s[v].selected=!0,h&&(s[v].defaultSelected=!0);return}r!==null||s[v].disabled||(r=s[v])}r!==null&&(r.selected=!0)}}function __(s,r,c){if(r!=null&&(r=""+Ei(r),r!==s.value&&(s.value=r),c==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=c!=null?""+Ei(c):""}function S_(s,r,c,h){if(r==null){if(h!=null){if(c!=null)throw Error(n(92));if(ue(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),r=c}c=Ei(r),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function Ql(s,r){if(r){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=r;return}}s.textContent=r}var uR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function T_(s,r,c){var h=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":h?s.setProperty(r,c):typeof c!="number"||c===0||uR.has(r)?r==="float"?s.cssFloat=c:s[r]=(""+c).trim():s[r]=c+"px"}function C_(s,r,c){if(r!=null&&typeof r!="object")throw Error(n(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var v in r)h=r[v],r.hasOwnProperty(v)&&c[v]!==h&&T_(s,v,h)}else for(var b in r)r.hasOwnProperty(b)&&T_(s,b,r[b])}function Ry(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cp(s){return hR.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Iy=null;function Dy(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Jl=null,jl=null;function w_(s){var r=Yl(s);if(r&&(s=r.stateNode)){var c=s[Vn]||null;e:switch(s=r.stateNode,r.type){case"input":if(xy(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+xi(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var h=c[r];if(h!==s&&h.form===s.form){var v=h[Vn]||null;if(!v)throw Error(n(90));xy(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<c.length;r++)h=c[r],h.form===s.form&&A_(h)}break e;case"textarea":__(s,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Zl(s,!!c.multiple,r,!1)}}}var ky=!1;function E_(s,r,c){if(ky)return s(r,c);ky=!0;try{var h=s(r);return h}finally{if(ky=!1,(Jl!==null||jl!==null)&&(cg(),Jl&&(r=Jl,s=jl,jl=Jl=null,w_(r),s)))for(r=0;r<s.length;r++)w_(s[r])}}function od(s,r){var c=s.stateNode;if(c===null)return null;var h=c[Vn]||null;if(h===null)return null;c=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,r,typeof c));return c}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ny=!1;if(Zs)try{var ld={};Object.defineProperty(ld,"passive",{get:function(){Ny=!0}}),window.addEventListener("test",ld,ld),window.removeEventListener("test",ld,ld)}catch{Ny=!1}var Ka=null,Ly=null,wp=null;function x_(){if(wp)return wp;var s,r=Ly,c=r.length,h,v="value"in Ka?Ka.value:Ka.textContent,b=v.length;for(s=0;s<c&&r[s]===v[s];s++);var E=c-s;for(h=1;h<=E&&r[c-h]===v[b-h];h++);return wp=v.slice(s,1<h?1-h:void 0)}function Ep(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function xp(){return!0}function M_(){return!1}function zn(s){function r(c,h,v,b,E){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(c=s[I],this[I]=c?c(b):b[I]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?xp:M_,this.isPropagationStopped=M_,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=xp)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=xp)},persist:function(){},isPersistent:xp}),r}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mp=zn(oo),cd=y({},oo,{view:0,detail:0}),fR=zn(cd),Py,Oy,ud,Rp=y({},cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uy,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ud&&(ud&&s.type==="mousemove"?(Py=s.screenX-ud.screenX,Oy=s.screenY-ud.screenY):Oy=Py=0,ud=s),Py)},movementY:function(s){return"movementY"in s?s.movementY:Oy}}),R_=zn(Rp),pR=y({},Rp,{dataTransfer:0}),gR=zn(pR),mR=y({},cd,{relatedTarget:0}),Fy=zn(mR),yR=y({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),vR=zn(yR),AR=y({},oo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),bR=zn(AR),_R=y({},oo,{data:0}),I_=zn(_R),SR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wR(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=CR[s])?!!r[s]:!1}function Uy(){return wR}var ER=y({},cd,{key:function(s){if(s.key){var r=SR[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ep(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?TR[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uy,charCode:function(s){return s.type==="keypress"?Ep(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ep(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),xR=zn(ER),MR=y({},Rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D_=zn(MR),RR=y({},cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uy}),IR=zn(RR),DR=y({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kR=zn(DR),NR=y({},Rp,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),LR=zn(NR),PR=y({},oo,{newState:0,oldState:0}),OR=zn(PR),FR=[9,13,27,32],Hy=Zs&&"CompositionEvent"in window,dd=null;Zs&&"documentMode"in document&&(dd=document.documentMode);var UR=Zs&&"TextEvent"in window&&!dd,k_=Zs&&(!Hy||dd&&8<dd&&11>=dd),N_=" ",L_=!1;function P_(s,r){switch(s){case"keyup":return FR.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ec=!1;function HR(s,r){switch(s){case"compositionend":return O_(r);case"keypress":return r.which!==32?null:(L_=!0,N_);case"textInput":return s=r.data,s===N_&&L_?null:s;default:return null}}function BR(s,r){if(ec)return s==="compositionend"||!Hy&&P_(s,r)?(s=x_(),wp=Ly=Ka=null,ec=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return k_&&r.locale!=="ko"?null:r.data;default:return null}}var VR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!VR[s.type]:r==="textarea"}function U_(s,r,c,h){Jl?jl?jl.push(h):jl=[h]:Jl=h,r=gg(r,"onChange"),0<r.length&&(c=new Mp("onChange","change",null,c,h),s.push({event:c,listeners:r}))}var hd=null,fd=null;function zR(s){vC(s,0)}function Ip(s){var r=rd(s);if(A_(r))return s}function H_(s,r){if(s==="change")return r}var B_=!1;if(Zs){var By;if(Zs){var Vy="oninput"in document;if(!Vy){var V_=document.createElement("div");V_.setAttribute("oninput","return;"),Vy=typeof V_.oninput=="function"}By=Vy}else By=!1;B_=By&&(!document.documentMode||9<document.documentMode)}function z_(){hd&&(hd.detachEvent("onpropertychange",G_),fd=hd=null)}function G_(s){if(s.propertyName==="value"&&Ip(fd)){var r=[];U_(r,fd,s,Dy(s)),E_(zR,r)}}function GR(s,r,c){s==="focusin"?(z_(),hd=r,fd=c,hd.attachEvent("onpropertychange",G_)):s==="focusout"&&z_()}function qR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ip(fd)}function $R(s,r){if(s==="click")return Ip(r)}function YR(s,r){if(s==="input"||s==="change")return Ip(r)}function WR(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ni=typeof Object.is=="function"?Object.is:WR;function pd(s,r){if(ni(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var c=Object.keys(s),h=Object.keys(r);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!my.call(r,v)||!ni(s[v],r[v]))return!1}return!0}function q_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function $_(s,r){var c=q_(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=r&&h>=r)return{node:c,offset:r-s};s=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=q_(c)}}function Y_(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Y_(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function W_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Tp(s.document);r instanceof s.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)s=r.contentWindow;else break;r=Tp(s.document)}return r}function zy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var XR=Zs&&"documentMode"in document&&11>=document.documentMode,tc=null,Gy=null,gd=null,qy=!1;function X_(s,r,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;qy||tc==null||tc!==Tp(h)||(h=tc,"selectionStart"in h&&zy(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),gd&&pd(gd,h)||(gd=h,h=gg(Gy,"onSelect"),0<h.length&&(r=new Mp("onSelect","select",null,r,c),s.push({event:r,listeners:h}),r.target=tc)))}function lo(s,r){var c={};return c[s.toLowerCase()]=r.toLowerCase(),c["Webkit"+s]="webkit"+r,c["Moz"+s]="moz"+r,c}var nc={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},$y={},K_={};Zs&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete nc.animationend.animation,delete nc.animationiteration.animation,delete nc.animationstart.animation),"TransitionEvent"in window||delete nc.transitionend.transition);function co(s){if($y[s])return $y[s];if(!nc[s])return s;var r=nc[s],c;for(c in r)if(r.hasOwnProperty(c)&&c in K_)return $y[s]=r[c];return s}var Z_=co("animationend"),Q_=co("animationiteration"),J_=co("animationstart"),KR=co("transitionrun"),ZR=co("transitionstart"),QR=co("transitioncancel"),j_=co("transitionend"),eS=new Map,Yy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yy.push("scrollEnd");function Ki(s,r){eS.set(s,r),ro(r,[s])}var tS=new WeakMap;function Mi(s,r){if(typeof s=="object"&&s!==null){var c=tS.get(s);return c!==void 0?c:(r={value:s,source:r,stack:y_(r)},tS.set(s,r),r)}return{value:s,source:r,stack:y_(r)}}var Ri=[],ic=0,Wy=0;function Dp(){for(var s=ic,r=Wy=ic=0;r<s;){var c=Ri[r];Ri[r++]=null;var h=Ri[r];Ri[r++]=null;var v=Ri[r];Ri[r++]=null;var b=Ri[r];if(Ri[r++]=null,h!==null&&v!==null){var E=h.pending;E===null?v.next=v:(v.next=E.next,E.next=v),h.pending=v}b!==0&&nS(c,v,b)}}function kp(s,r,c,h){Ri[ic++]=s,Ri[ic++]=r,Ri[ic++]=c,Ri[ic++]=h,Wy|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Xy(s,r,c,h){return kp(s,r,c,h),Np(s)}function sc(s,r){return kp(s,null,null,r),Np(s)}function nS(s,r,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var v=!1,b=s.return;b!==null;)b.childLanes|=c,h=b.alternate,h!==null&&(h.childLanes|=c),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(v=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,v&&r!==null&&(v=31-ti(c),s=b.hiddenUpdates,h=s[v],h===null?s[v]=[r]:h.push(r),r.lane=c|536870912),b):null}function Np(s){if(50<Bd)throw Bd=0,e0=null,Error(n(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ac={};function JR(s,r,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(s,r,c,h){return new JR(s,r,c,h)}function Ky(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qs(s,r){var c=s.alternate;return c===null?(c=ii(s.tag,r,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=r,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,r=s.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function iS(s,r){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,r=c.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Lp(s,r,c,h,v,b){var E=0;if(h=s,typeof s=="function")Ky(s)&&(E=1);else if(typeof s=="string")E=eD(s,c,Se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case J:return s=ii(31,c,r,v),s.elementType=J,s.lanes=b,s;case T:return uo(c.children,v,b,r);case C:E=8,v|=24;break;case x:return s=ii(12,c,r,v|2),s.elementType=x,s.lanes=b,s;case F:return s=ii(13,c,r,v),s.elementType=F,s.lanes=b,s;case W:return s=ii(19,c,r,v),s.elementType=W,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:case L:E=10;break e;case k:E=9;break e;case U:E=11;break e;case K:E=14;break e;case Q:E=16,h=null;break e}E=29,c=Error(n(130,s===null?"null":typeof s,"")),h=null}return r=ii(E,c,r,v),r.elementType=s,r.type=h,r.lanes=b,r}function uo(s,r,c,h){return s=ii(7,s,h,r),s.lanes=c,s}function Zy(s,r,c){return s=ii(6,s,null,r),s.lanes=c,s}function Qy(s,r,c){return r=ii(4,s.children!==null?s.children:[],s.key,r),r.lanes=c,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var rc=[],oc=0,Pp=null,Op=0,Ii=[],Di=0,ho=null,Js=1,js="";function fo(s,r){rc[oc++]=Op,rc[oc++]=Pp,Pp=s,Op=r}function sS(s,r,c){Ii[Di++]=Js,Ii[Di++]=js,Ii[Di++]=ho,ho=s;var h=Js;s=js;var v=32-ti(h)-1;h&=~(1<<v),c+=1;var b=32-ti(r)+v;if(30<b){var E=v-v%5;b=(h&(1<<E)-1).toString(32),h>>=E,v-=E,Js=1<<32-ti(r)+v|c<<v|h,js=b+s}else Js=1<<b|c<<v|h,js=s}function Jy(s){s.return!==null&&(fo(s,1),sS(s,1,0))}function jy(s){for(;s===Pp;)Pp=rc[--oc],rc[oc]=null,Op=rc[--oc],rc[oc]=null;for(;s===ho;)ho=Ii[--Di],Ii[Di]=null,js=Ii[--Di],Ii[Di]=null,Js=Ii[--Di],Ii[Di]=null}var In=null,Dt=null,st=!1,po=null,ys=!1,ev=Error(n(519));function go(s){var r=Error(n(418,""));throw vd(Mi(r,s)),ev}function aS(s){var r=s.stateNode,c=s.type,h=s.memoizedProps;switch(r[vn]=s,r[Vn]=h,c){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(c=0;c<zd.length;c++)Xe(zd[c],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":Xe("invalid",r),b_(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Sp(r);break;case"select":Xe("invalid",r);break;case"textarea":Xe("invalid",r),S_(r,h.value,h.defaultValue,h.children),Sp(r)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||h.suppressHydrationWarning===!0||SC(r.textContent,c)?(h.popover!=null&&(Xe("beforetoggle",r),Xe("toggle",r)),h.onScroll!=null&&Xe("scroll",r),h.onScrollEnd!=null&&Xe("scrollend",r),h.onClick!=null&&(r.onclick=mg),r=!0):r=!1,r||go(s)}function rS(s){for(In=s.return;In;)switch(In.tag){case 5:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:In=In.return}}function md(s){if(s!==In)return!1;if(!st)return rS(s),st=!0,!1;var r=s.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||m0(s.type,s.memoizedProps)),c=!c),c&&Dt&&go(s),rS(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(r===0){Dt=Qi(s.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;s=s.nextSibling}Dt=null}}else r===27?(r=Dt,dr(s.type)?(s=b0,b0=null,Dt=s):Dt=r):Dt=In?Qi(s.stateNode.nextSibling):null;return!0}function yd(){Dt=In=null,st=!1}function oS(){var s=po;return s!==null&&($n===null?$n=s:$n.push.apply($n,s),po=null),s}function vd(s){po===null?po=[s]:po.push(s)}var tv=Z(null),mo=null,ea=null;function Za(s,r,c){ae(tv,r._currentValue),r._currentValue=c}function ta(s){s._currentValue=tv.current,oe(tv)}function nv(s,r,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),s===c)break;s=s.return}}function iv(s,r,c,h){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var b=v.dependencies;if(b!==null){var E=v.child;b=b.firstContext;e:for(;b!==null;){var I=b;b=v;for(var N=0;N<r.length;N++)if(I.context===r[N]){b.lanes|=c,I=b.alternate,I!==null&&(I.lanes|=c),nv(b.return,c,s),h||(E=null);break e}b=I.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(n(341));E.lanes|=c,b=E.alternate,b!==null&&(b.lanes|=c),nv(E,c,s),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===s){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function Ad(s,r,c,h){s=null;for(var v=r,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var I=v.type;ni(v.pendingProps.value,E.value)||(s!==null?s.push(I):s=[I])}}else if(v===Ge.current){if(E=v.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Xd):s=[Xd])}v=v.return}s!==null&&iv(r,s,c,h),r.flags|=262144}function Fp(s){for(s=s.firstContext;s!==null;){if(!ni(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function yo(s){mo=s,ea=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function An(s){return lS(mo,s)}function Up(s,r){return mo===null&&yo(s),lS(s,r)}function lS(s,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},ea===null){if(s===null)throw Error(n(308));ea=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ea=ea.next=r;return c}var jR=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){r.aborted=!0,s.forEach(function(c){return c()})}},eI=o.unstable_scheduleCallback,tI=o.unstable_NormalPriority,$t={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sv(){return{controller:new jR,data:new Map,refCount:0}}function bd(s){s.refCount--,s.refCount===0&&eI(tI,function(){s.controller.abort()})}var _d=null,av=0,lc=0,cc=null;function nI(s,r){if(_d===null){var c=_d=[];av=0,lc=o0(),cc={status:"pending",value:void 0,then:function(h){c.push(h)}}}return av++,r.then(cS,cS),r}function cS(){if(--av===0&&_d!==null){cc!==null&&(cc.status="fulfilled");var s=_d;_d=null,lc=0,cc=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function iI(s,r){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return s.then(function(){h.status="fulfilled",h.value=r;for(var v=0;v<c.length;v++)(0,c[v])(r)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var uS=O.S;O.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&nI(s,r),uS!==null&&uS(s,r)};var vo=Z(null);function rv(){var s=vo.current;return s!==null?s:vt.pooledCache}function Hp(s,r){r===null?ae(vo,vo.current):ae(vo,r.pool)}function dS(){var s=rv();return s===null?null:{parent:$t._currentValue,pool:s}}var Sd=Error(n(460)),hS=Error(n(474)),Bp=Error(n(542)),ov={then:function(){}};function fS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Vp(){}function pS(s,r,c){switch(c=s[c],c===void 0?s.push(r):c!==r&&(r.then(Vp,Vp),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,mS(s),s;default:if(typeof r.status=="string")r.then(Vp,Vp);else{if(s=vt,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=r,s.status="pending",s.then(function(h){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=h}},function(h){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,mS(s),s}throw Td=r,Sd}}var Td=null;function gS(){if(Td===null)throw Error(n(459));var s=Td;return Td=null,s}function mS(s){if(s===Sd||s===Bp)throw Error(n(483))}var Qa=!1;function lv(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cv(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ja(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ja(s,r,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(rt&2)!==0){var v=h.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),h.pending=r,r=Np(s),nS(s,null,c),r}return kp(s,h,r,c),Np(s)}function Cd(s,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,c_(s,c)}}function uv(s,r){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?v=b=E:b=b.next=E,c=c.next}while(c!==null);b===null?v=b=r:b=b.next=r}else v=b=r;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=r:s.next=r,c.lastBaseUpdate=r}var dv=!1;function wd(){if(dv){var s=cc;if(s!==null)throw s}}function Ed(s,r,c,h){dv=!1;var v=s.updateQueue;Qa=!1;var b=v.firstBaseUpdate,E=v.lastBaseUpdate,I=v.shared.pending;if(I!==null){v.shared.pending=null;var N=I,$=N.next;N.next=null,E===null?b=$:E.next=$,E=N;var j=s.alternate;j!==null&&(j=j.updateQueue,I=j.lastBaseUpdate,I!==E&&(I===null?j.firstBaseUpdate=$:I.next=$,j.lastBaseUpdate=N))}if(b!==null){var te=v.baseState;E=0,j=$=N=null,I=b;do{var Y=I.lane&-536870913,X=Y!==I.lane;if(X?(Qe&Y)===Y:(h&Y)===Y){Y!==0&&Y===lc&&(dv=!0),j!==null&&(j=j.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Re=s,Ee=I;Y=r;var ht=c;switch(Ee.tag){case 1:if(Re=Ee.payload,typeof Re=="function"){te=Re.call(ht,te,Y);break e}te=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ee.payload,Y=typeof Re=="function"?Re.call(ht,te,Y):Re,Y==null)break e;te=y({},te,Y);break e;case 2:Qa=!0}}Y=I.callback,Y!==null&&(s.flags|=64,X&&(s.flags|=8192),X=v.callbacks,X===null?v.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},j===null?($=j=X,N=te):j=j.next=X,E|=Y;if(I=I.next,I===null){if(I=v.shared.pending,I===null)break;X=I,I=X.next,X.next=null,v.lastBaseUpdate=X,v.shared.pending=null}}while(!0);j===null&&(N=te),v.baseState=N,v.firstBaseUpdate=$,v.lastBaseUpdate=j,b===null&&(v.shared.lanes=0),or|=E,s.lanes=E,s.memoizedState=te}}function yS(s,r){if(typeof s!="function")throw Error(n(191,s));s.call(r)}function vS(s,r){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)yS(c[s],r)}var uc=Z(null),zp=Z(0);function AS(s,r){s=la,ae(zp,s),ae(uc,r),la=s|r.baseLanes}function hv(){ae(zp,la),ae(uc,uc.current)}function fv(){la=zp.current,oe(uc),oe(zp)}var er=0,Be=null,ut=null,Ht=null,Gp=!1,dc=!1,Ao=!1,qp=0,xd=0,hc=null,sI=0;function Lt(){throw Error(n(321))}function pv(s,r){if(r===null)return!1;for(var c=0;c<r.length&&c<s.length;c++)if(!ni(s[c],r[c]))return!1;return!0}function gv(s,r,c,h,v,b){return er=b,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=s===null||s.memoizedState===null?nT:iT,Ao=!1,b=c(h,v),Ao=!1,dc&&(b=_S(r,c,h,v)),bS(s),b}function bS(s){O.H=Zp;var r=ut!==null&&ut.next!==null;if(er=0,Ht=ut=Be=null,Gp=!1,xd=0,hc=null,r)throw Error(n(300));s===null||jt||(s=s.dependencies,s!==null&&Fp(s)&&(jt=!0))}function _S(s,r,c,h){Be=s;var v=0;do{if(dc&&(hc=null),xd=0,dc=!1,25<=v)throw Error(n(301));if(v+=1,Ht=ut=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}O.H=dI,b=r(c,h)}while(dc);return b}function aI(){var s=O.H,r=s.useState()[0];return r=typeof r.then=="function"?Md(r):r,s=s.useState()[0],(ut!==null?ut.memoizedState:null)!==s&&(Be.flags|=1024),r}function mv(){var s=qp!==0;return qp=0,s}function yv(s,r,c){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~c}function vv(s){if(Gp){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Gp=!1}er=0,Ht=ut=Be=null,dc=!1,xd=qp=0,hc=null}function Gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Be.memoizedState=Ht=s:Ht=Ht.next=s,Ht}function Bt(){if(ut===null){var s=Be.alternate;s=s!==null?s.memoizedState:null}else s=ut.next;var r=Ht===null?Be.memoizedState:Ht.next;if(r!==null)Ht=r,ut=s;else{if(s===null)throw Be.alternate===null?Error(n(467)):Error(n(310));ut=s,s={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Ht===null?Be.memoizedState=Ht=s:Ht=Ht.next=s}return Ht}function Av(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Md(s){var r=xd;return xd+=1,hc===null&&(hc=[]),s=pS(hc,s,r),r=Be,(Ht===null?r.memoizedState:Ht.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?nT:iT),s}function $p(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Md(s);if(s.$$typeof===L)return An(s)}throw Error(n(438,String(s)))}function bv(s){var r=null,c=Be.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var h=Be.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Av(),Be.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(s),h=0;h<s;h++)c[h]=se;return r.index++,c}function na(s,r){return typeof r=="function"?r(s):r}function Yp(s){var r=Bt();return _v(r,ut,s)}function _v(s,r,c){var h=s.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=c;var v=s.baseQueue,b=h.pending;if(b!==null){if(v!==null){var E=v.next;v.next=b.next,b.next=E}r.baseQueue=v=b,h.pending=null}if(b=s.baseState,v===null)s.memoizedState=b;else{r=v.next;var I=E=null,N=null,$=r,j=!1;do{var te=$.lane&-536870913;if(te!==$.lane?(Qe&te)===te:(er&te)===te){var Y=$.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),te===lc&&(j=!0);else if((er&Y)===Y){$=$.next,Y===lc&&(j=!0);continue}else te={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(I=N=te,E=b):N=N.next=te,Be.lanes|=Y,or|=Y;te=$.action,Ao&&c(b,te),b=$.hasEagerState?$.eagerState:c(b,te)}else Y={lane:te,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(I=N=Y,E=b):N=N.next=Y,Be.lanes|=te,or|=te;$=$.next}while($!==null&&$!==r);if(N===null?E=b:N.next=I,!ni(b,s.memoizedState)&&(jt=!0,j&&(c=cc,c!==null)))throw c;s.memoizedState=b,s.baseState=E,s.baseQueue=N,h.lastRenderedState=b}return v===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Sv(s){var r=Bt(),c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var h=c.dispatch,v=c.pending,b=r.memoizedState;if(v!==null){c.pending=null;var E=v=v.next;do b=s(b,E.action),E=E.next;while(E!==v);ni(b,r.memoizedState)||(jt=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,h]}function SS(s,r,c){var h=Be,v=Bt(),b=st;if(b){if(c===void 0)throw Error(n(407));c=c()}else c=r();var E=!ni((ut||v).memoizedState,c);E&&(v.memoizedState=c,jt=!0),v=v.queue;var I=wS.bind(null,h,v,s);if(Rd(2048,8,I,[s]),v.getSnapshot!==r||E||Ht!==null&&Ht.memoizedState.tag&1){if(h.flags|=2048,fc(9,Wp(),CS.bind(null,h,v,c,r),null),vt===null)throw Error(n(349));b||(er&124)!==0||TS(h,r,c)}return c}function TS(s,r,c){s.flags|=16384,s={getSnapshot:r,value:c},r=Be.updateQueue,r===null?(r=Av(),Be.updateQueue=r,r.stores=[s]):(c=r.stores,c===null?r.stores=[s]:c.push(s))}function CS(s,r,c,h){r.value=c,r.getSnapshot=h,ES(r)&&xS(s)}function wS(s,r,c){return c(function(){ES(r)&&xS(s)})}function ES(s){var r=s.getSnapshot;s=s.value;try{var c=r();return!ni(s,c)}catch{return!0}}function xS(s){var r=sc(s,2);r!==null&&li(r,s,2)}function Tv(s){var r=Gn();if(typeof s=="function"){var c=s;if(s=c(),Ao){Wa(!0);try{c()}finally{Wa(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:s},r}function MS(s,r,c,h){return s.baseState=c,_v(s,ut,typeof h=="function"?h:na)}function rI(s,r,c,h,v){if(Kp(s))throw Error(n(485));if(s=r.action,s!==null){var b={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};O.T!==null?c(!0):b.isTransition=!1,h(b),c=r.pending,c===null?(b.next=r.pending=b,RS(r,b)):(b.next=c.next,r.pending=c.next=b)}}function RS(s,r){var c=r.action,h=r.payload,v=s.state;if(r.isTransition){var b=O.T,E={};O.T=E;try{var I=c(v,h),N=O.S;N!==null&&N(E,I),IS(s,r,I)}catch($){Cv(s,r,$)}finally{O.T=b}}else try{b=c(v,h),IS(s,r,b)}catch($){Cv(s,r,$)}}function IS(s,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){DS(s,r,h)},function(h){return Cv(s,r,h)}):DS(s,r,c)}function DS(s,r,c){r.status="fulfilled",r.value=c,kS(r),s.state=c,r=s.pending,r!==null&&(c=r.next,c===r?s.pending=null:(c=c.next,r.next=c,RS(s,c)))}function Cv(s,r,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=c,kS(r),r=r.next;while(r!==h)}s.action=null}function kS(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function NS(s,r){return r}function LS(s,r){if(st){var c=vt.formState;if(c!==null){e:{var h=Be;if(st){if(Dt){t:{for(var v=Dt,b=ys;v.nodeType!==8;){if(!b){v=null;break t}if(v=Qi(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){Dt=Qi(v.nextSibling),h=v.data==="F!";break e}}go(h)}h=!1}h&&(r=c[0])}}return c=Gn(),c.memoizedState=c.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NS,lastRenderedState:r},c.queue=h,c=jS.bind(null,Be,h),h.dispatch=c,h=Tv(!1),b=Rv.bind(null,Be,!1,h.queue),h=Gn(),v={state:r,dispatch:null,action:s,pending:null},h.queue=v,c=rI.bind(null,Be,v,b,c),v.dispatch=c,h.memoizedState=s,[r,c,!1]}function PS(s){var r=Bt();return OS(r,ut,s)}function OS(s,r,c){if(r=_v(s,r,NS)[0],s=Yp(na)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Md(r)}catch(E){throw E===Sd?Bp:E}else h=r;r=Bt();var v=r.queue,b=v.dispatch;return c!==r.memoizedState&&(Be.flags|=2048,fc(9,Wp(),oI.bind(null,v,c),null)),[h,b,s]}function oI(s,r){s.action=r}function FS(s){var r=Bt(),c=ut;if(c!==null)return OS(r,c,s);Bt(),r=r.memoizedState,c=Bt();var h=c.queue.dispatch;return c.memoizedState=s,[r,h,!1]}function fc(s,r,c,h){return s={tag:s,create:c,deps:h,inst:r,next:null},r=Be.updateQueue,r===null&&(r=Av(),Be.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,r.lastEffect=s),s}function Wp(){return{destroy:void 0,resource:void 0}}function US(){return Bt().memoizedState}function Xp(s,r,c,h){var v=Gn();h=h===void 0?null:h,Be.flags|=s,v.memoizedState=fc(1|r,Wp(),c,h)}function Rd(s,r,c,h){var v=Bt();h=h===void 0?null:h;var b=v.memoizedState.inst;ut!==null&&h!==null&&pv(h,ut.memoizedState.deps)?v.memoizedState=fc(r,b,c,h):(Be.flags|=s,v.memoizedState=fc(1|r,b,c,h))}function HS(s,r){Xp(8390656,8,s,r)}function BS(s,r){Rd(2048,8,s,r)}function VS(s,r){return Rd(4,2,s,r)}function zS(s,r){return Rd(4,4,s,r)}function GS(s,r){if(typeof r=="function"){s=s();var c=r(s);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function qS(s,r,c){c=c!=null?c.concat([s]):null,Rd(4,4,GS.bind(null,r,s),c)}function wv(){}function $S(s,r){var c=Bt();r=r===void 0?null:r;var h=c.memoizedState;return r!==null&&pv(r,h[1])?h[0]:(c.memoizedState=[s,r],s)}function YS(s,r){var c=Bt();r=r===void 0?null:r;var h=c.memoizedState;if(r!==null&&pv(r,h[1]))return h[0];if(h=s(),Ao){Wa(!0);try{s()}finally{Wa(!1)}}return c.memoizedState=[h,r],h}function Ev(s,r,c){return c===void 0||(er&1073741824)!==0?s.memoizedState=r:(s.memoizedState=c,s=KT(),Be.lanes|=s,or|=s,c)}function WS(s,r,c,h){return ni(c,r)?c:uc.current!==null?(s=Ev(s,c,h),ni(s,r)||(jt=!0),s):(er&42)===0?(jt=!0,s.memoizedState=c):(s=KT(),Be.lanes|=s,or|=s,r)}function XS(s,r,c,h,v){var b=z.p;z.p=b!==0&&8>b?b:8;var E=O.T,I={};O.T=I,Rv(s,!1,r,c);try{var N=v(),$=O.S;if($!==null&&$(I,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var j=iI(N,h);Id(s,r,j,oi(s))}else Id(s,r,h,oi(s))}catch(te){Id(s,r,{then:function(){},status:"rejected",reason:te},oi())}finally{z.p=b,O.T=E}}function lI(){}function xv(s,r,c,h){if(s.tag!==5)throw Error(n(476));var v=KS(s).queue;XS(s,v,r,le,c===null?lI:function(){return ZS(s),c(h)})}function KS(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:le},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:c},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function ZS(s){var r=KS(s).next.queue;Id(s,r,{},oi())}function Mv(){return An(Xd)}function QS(){return Bt().memoizedState}function JS(){return Bt().memoizedState}function cI(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var c=oi();s=Ja(c);var h=ja(r,s,c);h!==null&&(li(h,r,c),Cd(h,r,c)),r={cache:sv()},s.payload=r;return}r=r.return}}function uI(s,r,c){var h=oi();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Kp(s)?eT(r,c):(c=Xy(s,r,c,h),c!==null&&(li(c,s,h),tT(c,r,h)))}function jS(s,r,c){var h=oi();Id(s,r,c,h)}function Id(s,r,c,h){var v={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Kp(s))eT(r,v);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var E=r.lastRenderedState,I=b(E,c);if(v.hasEagerState=!0,v.eagerState=I,ni(I,E))return kp(s,r,v,0),vt===null&&Dp(),!1}catch{}finally{}if(c=Xy(s,r,v,h),c!==null)return li(c,s,h),tT(c,r,h),!0}return!1}function Rv(s,r,c,h){if(h={lane:2,revertLane:o0(),action:h,hasEagerState:!1,eagerState:null,next:null},Kp(s)){if(r)throw Error(n(479))}else r=Xy(s,c,h,2),r!==null&&li(r,s,2)}function Kp(s){var r=s.alternate;return s===Be||r!==null&&r===Be}function eT(s,r){dc=Gp=!0;var c=s.pending;c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r}function tT(s,r,c){if((c&4194048)!==0){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,c_(s,c)}}var Zp={readContext:An,use:$p,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},nT={readContext:An,use:$p,useCallback:function(s,r){return Gn().memoizedState=[s,r===void 0?null:r],s},useContext:An,useEffect:HS,useImperativeHandle:function(s,r,c){c=c!=null?c.concat([s]):null,Xp(4194308,4,GS.bind(null,r,s),c)},useLayoutEffect:function(s,r){return Xp(4194308,4,s,r)},useInsertionEffect:function(s,r){Xp(4,2,s,r)},useMemo:function(s,r){var c=Gn();r=r===void 0?null:r;var h=s();if(Ao){Wa(!0);try{s()}finally{Wa(!1)}}return c.memoizedState=[h,r],h},useReducer:function(s,r,c){var h=Gn();if(c!==void 0){var v=c(r);if(Ao){Wa(!0);try{c(r)}finally{Wa(!1)}}}else v=r;return h.memoizedState=h.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},h.queue=s,s=s.dispatch=uI.bind(null,Be,s),[h.memoizedState,s]},useRef:function(s){var r=Gn();return s={current:s},r.memoizedState=s},useState:function(s){s=Tv(s);var r=s.queue,c=jS.bind(null,Be,r);return r.dispatch=c,[s.memoizedState,c]},useDebugValue:wv,useDeferredValue:function(s,r){var c=Gn();return Ev(c,s,r)},useTransition:function(){var s=Tv(!1);return s=XS.bind(null,Be,s.queue,!0,!1),Gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,c){var h=Be,v=Gn();if(st){if(c===void 0)throw Error(n(407));c=c()}else{if(c=r(),vt===null)throw Error(n(349));(Qe&124)!==0||TS(h,r,c)}v.memoizedState=c;var b={value:c,getSnapshot:r};return v.queue=b,HS(wS.bind(null,h,b,s),[s]),h.flags|=2048,fc(9,Wp(),CS.bind(null,h,b,c,r),null),c},useId:function(){var s=Gn(),r=vt.identifierPrefix;if(st){var c=js,h=Js;c=(h&~(1<<32-ti(h)-1)).toString(32)+c,r="«"+r+"R"+c,c=qp++,0<c&&(r+="H"+c.toString(32)),r+="»"}else c=sI++,r="«"+r+"r"+c.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:Mv,useFormState:LS,useActionState:LS,useOptimistic:function(s){var r=Gn();r.memoizedState=r.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Rv.bind(null,Be,!0,c),c.dispatch=r,[s,r]},useMemoCache:bv,useCacheRefresh:function(){return Gn().memoizedState=cI.bind(null,Be)}},iT={readContext:An,use:$p,useCallback:$S,useContext:An,useEffect:BS,useImperativeHandle:qS,useInsertionEffect:VS,useLayoutEffect:zS,useMemo:YS,useReducer:Yp,useRef:US,useState:function(){return Yp(na)},useDebugValue:wv,useDeferredValue:function(s,r){var c=Bt();return WS(c,ut.memoizedState,s,r)},useTransition:function(){var s=Yp(na)[0],r=Bt().memoizedState;return[typeof s=="boolean"?s:Md(s),r]},useSyncExternalStore:SS,useId:QS,useHostTransitionStatus:Mv,useFormState:PS,useActionState:PS,useOptimistic:function(s,r){var c=Bt();return MS(c,ut,s,r)},useMemoCache:bv,useCacheRefresh:JS},dI={readContext:An,use:$p,useCallback:$S,useContext:An,useEffect:BS,useImperativeHandle:qS,useInsertionEffect:VS,useLayoutEffect:zS,useMemo:YS,useReducer:Sv,useRef:US,useState:function(){return Sv(na)},useDebugValue:wv,useDeferredValue:function(s,r){var c=Bt();return ut===null?Ev(c,s,r):WS(c,ut.memoizedState,s,r)},useTransition:function(){var s=Sv(na)[0],r=Bt().memoizedState;return[typeof s=="boolean"?s:Md(s),r]},useSyncExternalStore:SS,useId:QS,useHostTransitionStatus:Mv,useFormState:FS,useActionState:FS,useOptimistic:function(s,r){var c=Bt();return ut!==null?MS(c,ut,s,r):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:bv,useCacheRefresh:JS},pc=null,Dd=0;function Qp(s){var r=Dd;return Dd+=1,pc===null&&(pc=[]),pS(pc,s,r)}function kd(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Jp(s,r){throw r.$$typeof===A?Error(n(525)):(s=Object.prototype.toString.call(r),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function sT(s){var r=s._init;return r(s._payload)}function aT(s){function r(V,H){if(s){var G=V.deletions;G===null?(V.deletions=[H],V.flags|=16):G.push(H)}}function c(V,H){if(!s)return null;for(;H!==null;)r(V,H),H=H.sibling;return null}function h(V){for(var H=new Map;V!==null;)V.key!==null?H.set(V.key,V):H.set(V.index,V),V=V.sibling;return H}function v(V,H){return V=Qs(V,H),V.index=0,V.sibling=null,V}function b(V,H,G){return V.index=G,s?(G=V.alternate,G!==null?(G=G.index,G<H?(V.flags|=67108866,H):G):(V.flags|=67108866,H)):(V.flags|=1048576,H)}function E(V){return s&&V.alternate===null&&(V.flags|=67108866),V}function I(V,H,G,ee){return H===null||H.tag!==6?(H=Zy(G,V.mode,ee),H.return=V,H):(H=v(H,G),H.return=V,H)}function N(V,H,G,ee){var ye=G.type;return ye===T?j(V,H,G.props.children,ee,G.key):H!==null&&(H.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Q&&sT(ye)===H.type)?(H=v(H,G.props),kd(H,G),H.return=V,H):(H=Lp(G.type,G.key,G.props,null,V.mode,ee),kd(H,G),H.return=V,H)}function $(V,H,G,ee){return H===null||H.tag!==4||H.stateNode.containerInfo!==G.containerInfo||H.stateNode.implementation!==G.implementation?(H=Qy(G,V.mode,ee),H.return=V,H):(H=v(H,G.children||[]),H.return=V,H)}function j(V,H,G,ee,ye){return H===null||H.tag!==7?(H=uo(G,V.mode,ee,ye),H.return=V,H):(H=v(H,G),H.return=V,H)}function te(V,H,G){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Zy(""+H,V.mode,G),H.return=V,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case _:return G=Lp(H.type,H.key,H.props,null,V.mode,G),kd(G,H),G.return=V,G;case S:return H=Qy(H,V.mode,G),H.return=V,H;case Q:var ee=H._init;return H=ee(H._payload),te(V,H,G)}if(ue(H)||B(H))return H=uo(H,V.mode,G,null),H.return=V,H;if(typeof H.then=="function")return te(V,Qp(H),G);if(H.$$typeof===L)return te(V,Up(V,H),G);Jp(V,H)}return null}function Y(V,H,G,ee){var ye=H!==null?H.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ye!==null?null:I(V,H,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return G.key===ye?N(V,H,G,ee):null;case S:return G.key===ye?$(V,H,G,ee):null;case Q:return ye=G._init,G=ye(G._payload),Y(V,H,G,ee)}if(ue(G)||B(G))return ye!==null?null:j(V,H,G,ee,null);if(typeof G.then=="function")return Y(V,H,Qp(G),ee);if(G.$$typeof===L)return Y(V,H,Up(V,G),ee);Jp(V,G)}return null}function X(V,H,G,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return V=V.get(G)||null,I(H,V,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return V=V.get(ee.key===null?G:ee.key)||null,N(H,V,ee,ye);case S:return V=V.get(ee.key===null?G:ee.key)||null,$(H,V,ee,ye);case Q:var qe=ee._init;return ee=qe(ee._payload),X(V,H,G,ee,ye)}if(ue(ee)||B(ee))return V=V.get(G)||null,j(H,V,ee,ye,null);if(typeof ee.then=="function")return X(V,H,G,Qp(ee),ye);if(ee.$$typeof===L)return X(V,H,G,Up(H,ee),ye);Jp(H,ee)}return null}function Re(V,H,G,ee){for(var ye=null,qe=null,Ce=H,Me=H=0,tn=null;Ce!==null&&Me<G.length;Me++){Ce.index>Me?(tn=Ce,Ce=null):tn=Ce.sibling;var je=Y(V,Ce,G[Me],ee);if(je===null){Ce===null&&(Ce=tn);break}s&&Ce&&je.alternate===null&&r(V,Ce),H=b(je,H,Me),qe===null?ye=je:qe.sibling=je,qe=je,Ce=tn}if(Me===G.length)return c(V,Ce),st&&fo(V,Me),ye;if(Ce===null){for(;Me<G.length;Me++)Ce=te(V,G[Me],ee),Ce!==null&&(H=b(Ce,H,Me),qe===null?ye=Ce:qe.sibling=Ce,qe=Ce);return st&&fo(V,Me),ye}for(Ce=h(Ce);Me<G.length;Me++)tn=X(Ce,V,Me,G[Me],ee),tn!==null&&(s&&tn.alternate!==null&&Ce.delete(tn.key===null?Me:tn.key),H=b(tn,H,Me),qe===null?ye=tn:qe.sibling=tn,qe=tn);return s&&Ce.forEach(function(mr){return r(V,mr)}),st&&fo(V,Me),ye}function Ee(V,H,G,ee){if(G==null)throw Error(n(151));for(var ye=null,qe=null,Ce=H,Me=H=0,tn=null,je=G.next();Ce!==null&&!je.done;Me++,je=G.next()){Ce.index>Me?(tn=Ce,Ce=null):tn=Ce.sibling;var mr=Y(V,Ce,je.value,ee);if(mr===null){Ce===null&&(Ce=tn);break}s&&Ce&&mr.alternate===null&&r(V,Ce),H=b(mr,H,Me),qe===null?ye=mr:qe.sibling=mr,qe=mr,Ce=tn}if(je.done)return c(V,Ce),st&&fo(V,Me),ye;if(Ce===null){for(;!je.done;Me++,je=G.next())je=te(V,je.value,ee),je!==null&&(H=b(je,H,Me),qe===null?ye=je:qe.sibling=je,qe=je);return st&&fo(V,Me),ye}for(Ce=h(Ce);!je.done;Me++,je=G.next())je=X(Ce,V,Me,je.value,ee),je!==null&&(s&&je.alternate!==null&&Ce.delete(je.key===null?Me:je.key),H=b(je,H,Me),qe===null?ye=je:qe.sibling=je,qe=je);return s&&Ce.forEach(function(hD){return r(V,hD)}),st&&fo(V,Me),ye}function ht(V,H,G,ee){if(typeof G=="object"&&G!==null&&G.type===T&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case _:e:{for(var ye=G.key;H!==null;){if(H.key===ye){if(ye=G.type,ye===T){if(H.tag===7){c(V,H.sibling),ee=v(H,G.props.children),ee.return=V,V=ee;break e}}else if(H.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Q&&sT(ye)===H.type){c(V,H.sibling),ee=v(H,G.props),kd(ee,G),ee.return=V,V=ee;break e}c(V,H);break}else r(V,H);H=H.sibling}G.type===T?(ee=uo(G.props.children,V.mode,ee,G.key),ee.return=V,V=ee):(ee=Lp(G.type,G.key,G.props,null,V.mode,ee),kd(ee,G),ee.return=V,V=ee)}return E(V);case S:e:{for(ye=G.key;H!==null;){if(H.key===ye)if(H.tag===4&&H.stateNode.containerInfo===G.containerInfo&&H.stateNode.implementation===G.implementation){c(V,H.sibling),ee=v(H,G.children||[]),ee.return=V,V=ee;break e}else{c(V,H);break}else r(V,H);H=H.sibling}ee=Qy(G,V.mode,ee),ee.return=V,V=ee}return E(V);case Q:return ye=G._init,G=ye(G._payload),ht(V,H,G,ee)}if(ue(G))return Re(V,H,G,ee);if(B(G)){if(ye=B(G),typeof ye!="function")throw Error(n(150));return G=ye.call(G),Ee(V,H,G,ee)}if(typeof G.then=="function")return ht(V,H,Qp(G),ee);if(G.$$typeof===L)return ht(V,H,Up(V,G),ee);Jp(V,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,H!==null&&H.tag===6?(c(V,H.sibling),ee=v(H,G),ee.return=V,V=ee):(c(V,H),ee=Zy(G,V.mode,ee),ee.return=V,V=ee),E(V)):c(V,H)}return function(V,H,G,ee){try{Dd=0;var ye=ht(V,H,G,ee);return pc=null,ye}catch(Ce){if(Ce===Sd||Ce===Bp)throw Ce;var qe=ii(29,Ce,null,V.mode);return qe.lanes=ee,qe.return=V,qe}finally{}}}var gc=aT(!0),rT=aT(!1),ki=Z(null),vs=null;function tr(s){var r=s.alternate;ae(Yt,Yt.current&1),ae(ki,s),vs===null&&(r===null||uc.current!==null||r.memoizedState!==null)&&(vs=s)}function oT(s){if(s.tag===22){if(ae(Yt,Yt.current),ae(ki,s),vs===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(vs=s)}}else nr()}function nr(){ae(Yt,Yt.current),ae(ki,ki.current)}function ia(s){oe(ki),vs===s&&(vs=null),oe(Yt)}var Yt=Z(0);function jp(s){for(var r=s;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||A0(c)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Iv(s,r,c,h){r=s.memoizedState,c=c(h,r),c=c==null?r:y({},r,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Dv={enqueueSetState:function(s,r,c){s=s._reactInternals;var h=oi(),v=Ja(h);v.payload=r,c!=null&&(v.callback=c),r=ja(s,v,h),r!==null&&(li(r,s,h),Cd(r,s,h))},enqueueReplaceState:function(s,r,c){s=s._reactInternals;var h=oi(),v=Ja(h);v.tag=1,v.payload=r,c!=null&&(v.callback=c),r=ja(s,v,h),r!==null&&(li(r,s,h),Cd(r,s,h))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var c=oi(),h=Ja(c);h.tag=2,r!=null&&(h.callback=r),r=ja(s,h,c),r!==null&&(li(r,s,c),Cd(r,s,c))}};function lT(s,r,c,h,v,b,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,b,E):r.prototype&&r.prototype.isPureReactComponent?!pd(c,h)||!pd(v,b):!0}function cT(s,r,c,h){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,h),r.state!==s&&Dv.enqueueReplaceState(r,r.state,null)}function bo(s,r){var c=r;if("ref"in r){c={};for(var h in r)h!=="ref"&&(c[h]=r[h])}if(s=s.defaultProps){c===r&&(c=y({},c));for(var v in s)c[v]===void 0&&(c[v]=s[v])}return c}var eg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function uT(s){eg(s)}function dT(s){console.error(s)}function hT(s){eg(s)}function tg(s,r){try{var c=s.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function fT(s,r,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function kv(s,r,c){return c=Ja(c),c.tag=3,c.payload={element:null},c.callback=function(){tg(s,r)},c}function pT(s){return s=Ja(s),s.tag=3,s}function gT(s,r,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var b=h.value;s.payload=function(){return v(b)},s.callback=function(){fT(r,c,h)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){fT(r,c,h),typeof v!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var I=h.stack;this.componentDidCatch(h.value,{componentStack:I!==null?I:""})})}function hI(s,r,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=c.alternate,r!==null&&Ad(r,c,v,!0),c=ki.current,c!==null){switch(c.tag){case 13:return vs===null?n0():c.alternate===null&&kt===0&&(kt=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===ov?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([h]):r.add(h),s0(s,h,v)),!1;case 22:return c.flags|=65536,h===ov?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([h]):c.add(h)),s0(s,h,v)),!1}throw Error(n(435,c.tag))}return s0(s,h,v),n0(),!1}if(st)return r=ki.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,h!==ev&&(s=Error(n(422),{cause:h}),vd(Mi(s,c)))):(h!==ev&&(r=Error(n(423),{cause:h}),vd(Mi(r,c))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,h=Mi(h,c),v=kv(s.stateNode,h,v),uv(s,v),kt!==4&&(kt=2)),!1;var b=Error(n(520),{cause:h});if(b=Mi(b,c),Hd===null?Hd=[b]:Hd.push(b),kt!==4&&(kt=2),r===null)return!0;h=Mi(h,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,s=v&-v,c.lanes|=s,s=kv(c.stateNode,h,s),uv(c,s),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(lr===null||!lr.has(b))))return c.flags|=65536,v&=-v,c.lanes|=v,v=pT(v),gT(v,s,c,h),uv(c,v),!1}c=c.return}while(c!==null);return!1}var mT=Error(n(461)),jt=!1;function cn(s,r,c,h){r.child=s===null?rT(r,null,c,h):gc(r,s.child,c,h)}function yT(s,r,c,h,v){c=c.render;var b=r.ref;if("ref"in h){var E={};for(var I in h)I!=="ref"&&(E[I]=h[I])}else E=h;return yo(r),h=gv(s,r,c,E,b,v),I=mv(),s!==null&&!jt?(yv(s,r,v),sa(s,r,v)):(st&&I&&Jy(r),r.flags|=1,cn(s,r,h,v),r.child)}function vT(s,r,c,h,v){if(s===null){var b=c.type;return typeof b=="function"&&!Ky(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,AT(s,r,b,h,v)):(s=Lp(c.type,null,h,r,r.mode,v),s.ref=r.ref,s.return=r,r.child=s)}if(b=s.child,!Bv(s,v)){var E=b.memoizedProps;if(c=c.compare,c=c!==null?c:pd,c(E,h)&&s.ref===r.ref)return sa(s,r,v)}return r.flags|=1,s=Qs(b,h),s.ref=r.ref,s.return=r,r.child=s}function AT(s,r,c,h,v){if(s!==null){var b=s.memoizedProps;if(pd(b,h)&&s.ref===r.ref)if(jt=!1,r.pendingProps=h=b,Bv(s,v))(s.flags&131072)!==0&&(jt=!0);else return r.lanes=s.lanes,sa(s,r,v)}return Nv(s,r,c,h,v)}function bT(s,r,c){var h=r.pendingProps,v=h.children,b=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=b!==null?b.baseLanes|c:c,s!==null){for(v=r.child=s.child,b=0;v!==null;)b=b|v.lanes|v.childLanes,v=v.sibling;r.childLanes=b&~h}else r.childLanes=0,r.child=null;return _T(s,r,h,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Hp(r,b!==null?b.cachePool:null),b!==null?AS(r,b):hv(),oT(r);else return r.lanes=r.childLanes=536870912,_T(s,r,b!==null?b.baseLanes|c:c,c)}else b!==null?(Hp(r,b.cachePool),AS(r,b),nr(),r.memoizedState=null):(s!==null&&Hp(r,null),hv(),nr());return cn(s,r,v,c),r.child}function _T(s,r,c,h){var v=rv();return v=v===null?null:{parent:$t._currentValue,pool:v},r.memoizedState={baseLanes:c,cachePool:v},s!==null&&Hp(r,null),hv(),oT(r),s!==null&&Ad(s,r,h,!0),null}function ng(s,r){var c=r.ref;if(c===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(s===null||s.ref!==c)&&(r.flags|=4194816)}}function Nv(s,r,c,h,v){return yo(r),c=gv(s,r,c,h,void 0,v),h=mv(),s!==null&&!jt?(yv(s,r,v),sa(s,r,v)):(st&&h&&Jy(r),r.flags|=1,cn(s,r,c,v),r.child)}function ST(s,r,c,h,v,b){return yo(r),r.updateQueue=null,c=_S(r,h,c,v),bS(s),h=mv(),s!==null&&!jt?(yv(s,r,b),sa(s,r,b)):(st&&h&&Jy(r),r.flags|=1,cn(s,r,c,b),r.child)}function TT(s,r,c,h,v){if(yo(r),r.stateNode===null){var b=ac,E=c.contextType;typeof E=="object"&&E!==null&&(b=An(E)),b=new c(h,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Dv,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=h,b.state=r.memoizedState,b.refs={},lv(r),E=c.contextType,b.context=typeof E=="object"&&E!==null?An(E):ac,b.state=r.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Iv(r,c,E,h),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&Dv.enqueueReplaceState(b,b.state,null),Ed(r,h,b,v),wd(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(s===null){b=r.stateNode;var I=r.memoizedProps,N=bo(c,I);b.props=N;var $=b.context,j=c.contextType;E=ac,typeof j=="object"&&j!==null&&(E=An(j));var te=c.getDerivedStateFromProps;j=typeof te=="function"||typeof b.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,j||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I||$!==E)&&cT(r,b,h,E),Qa=!1;var Y=r.memoizedState;b.state=Y,Ed(r,h,b,v),wd(),$=r.memoizedState,I||Y!==$||Qa?(typeof te=="function"&&(Iv(r,c,te,h),$=r.memoizedState),(N=Qa||lT(r,c,N,h,Y,$,E))?(j||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=$),b.props=h,b.state=$,b.context=E,h=N):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{b=r.stateNode,cv(s,r),E=r.memoizedProps,j=bo(c,E),b.props=j,te=r.pendingProps,Y=b.context,$=c.contextType,N=ac,typeof $=="object"&&$!==null&&(N=An($)),I=c.getDerivedStateFromProps,($=typeof I=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==te||Y!==N)&&cT(r,b,h,N),Qa=!1,Y=r.memoizedState,b.state=Y,Ed(r,h,b,v),wd();var X=r.memoizedState;E!==te||Y!==X||Qa||s!==null&&s.dependencies!==null&&Fp(s.dependencies)?(typeof I=="function"&&(Iv(r,c,I,h),X=r.memoizedState),(j=Qa||lT(r,c,j,h,Y,X,N)||s!==null&&s.dependencies!==null&&Fp(s.dependencies))?($||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,X,N),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,X,N)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=X),b.props=h,b.state=X,b.context=N,h=j):(typeof b.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),h=!1)}return b=h,ng(s,r),h=(r.flags&128)!==0,b||h?(b=r.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,s!==null&&h?(r.child=gc(r,s.child,null,v),r.child=gc(r,null,c,v)):cn(s,r,c,v),r.memoizedState=b.state,s=r.child):s=sa(s,r,v),s}function CT(s,r,c,h){return yd(),r.flags|=256,cn(s,r,c,h),r.child}var Lv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pv(s){return{baseLanes:s,cachePool:dS()}}function Ov(s,r,c){return s=s!==null?s.childLanes&~c:0,r&&(s|=Ni),s}function wT(s,r,c){var h=r.pendingProps,v=!1,b=(r.flags&128)!==0,E;if((E=b)||(E=s!==null&&s.memoizedState===null?!1:(Yt.current&2)!==0),E&&(v=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(st){if(v?tr(r):nr(),st){var I=Dt,N;if(N=I){e:{for(N=I,I=ys;N.nodeType!==8;){if(!I){I=null;break e}if(N=Qi(N.nextSibling),N===null){I=null;break e}}I=N}I!==null?(r.memoizedState={dehydrated:I,treeContext:ho!==null?{id:Js,overflow:js}:null,retryLane:536870912,hydrationErrors:null},N=ii(18,null,null,0),N.stateNode=I,N.return=r,r.child=N,In=r,Dt=null,N=!0):N=!1}N||go(r)}if(I=r.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return A0(I)?r.lanes=32:r.lanes=536870912,null;ia(r)}return I=h.children,h=h.fallback,v?(nr(),v=r.mode,I=ig({mode:"hidden",children:I},v),h=uo(h,v,c,null),I.return=r,h.return=r,I.sibling=h,r.child=I,v=r.child,v.memoizedState=Pv(c),v.childLanes=Ov(s,E,c),r.memoizedState=Lv,h):(tr(r),Fv(r,I))}if(N=s.memoizedState,N!==null&&(I=N.dehydrated,I!==null)){if(b)r.flags&256?(tr(r),r.flags&=-257,r=Uv(s,r,c)):r.memoizedState!==null?(nr(),r.child=s.child,r.flags|=128,r=null):(nr(),v=h.fallback,I=r.mode,h=ig({mode:"visible",children:h.children},I),v=uo(v,I,c,null),v.flags|=2,h.return=r,v.return=r,h.sibling=v,r.child=h,gc(r,s.child,null,c),h=r.child,h.memoizedState=Pv(c),h.childLanes=Ov(s,E,c),r.memoizedState=Lv,r=v);else if(tr(r),A0(I)){if(E=I.nextSibling&&I.nextSibling.dataset,E)var $=E.dgst;E=$,h=Error(n(419)),h.stack="",h.digest=E,vd({value:h,source:null,stack:null}),r=Uv(s,r,c)}else if(jt||Ad(s,r,c,!1),E=(c&s.childLanes)!==0,jt||E){if(E=vt,E!==null&&(h=c&-c,h=(h&42)!==0?1:by(h),h=(h&(E.suspendedLanes|c))!==0?0:h,h!==0&&h!==N.retryLane))throw N.retryLane=h,sc(s,h),li(E,s,h),mT;I.data==="$?"||n0(),r=Uv(s,r,c)}else I.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=N.treeContext,Dt=Qi(I.nextSibling),In=r,st=!0,po=null,ys=!1,s!==null&&(Ii[Di++]=Js,Ii[Di++]=js,Ii[Di++]=ho,Js=s.id,js=s.overflow,ho=r),r=Fv(r,h.children),r.flags|=4096);return r}return v?(nr(),v=h.fallback,I=r.mode,N=s.child,$=N.sibling,h=Qs(N,{mode:"hidden",children:h.children}),h.subtreeFlags=N.subtreeFlags&65011712,$!==null?v=Qs($,v):(v=uo(v,I,c,null),v.flags|=2),v.return=r,h.return=r,h.sibling=v,r.child=h,h=v,v=r.child,I=s.child.memoizedState,I===null?I=Pv(c):(N=I.cachePool,N!==null?($=$t._currentValue,N=N.parent!==$?{parent:$,pool:$}:N):N=dS(),I={baseLanes:I.baseLanes|c,cachePool:N}),v.memoizedState=I,v.childLanes=Ov(s,E,c),r.memoizedState=Lv,h):(tr(r),c=s.child,s=c.sibling,c=Qs(c,{mode:"visible",children:h.children}),c.return=r,c.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=c,r.memoizedState=null,c)}function Fv(s,r){return r=ig({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function ig(s,r){return s=ii(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Uv(s,r,c){return gc(r,s.child,null,c),s=Fv(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function ET(s,r,c){s.lanes|=r;var h=s.alternate;h!==null&&(h.lanes|=r),nv(s.return,r,c)}function Hv(s,r,c,h,v){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=c,b.tailMode=v)}function xT(s,r,c){var h=r.pendingProps,v=h.revealOrder,b=h.tail;if(cn(s,r,h.children,c),h=Yt.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ET(s,c,r);else if(s.tag===19)ET(s,c,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(ae(Yt,h),v){case"forwards":for(c=r.child,v=null;c!==null;)s=c.alternate,s!==null&&jp(s)===null&&(v=c),c=c.sibling;c=v,c===null?(v=r.child,r.child=null):(v=c.sibling,c.sibling=null),Hv(r,!1,v,c,b);break;case"backwards":for(c=null,v=r.child,r.child=null;v!==null;){if(s=v.alternate,s!==null&&jp(s)===null){r.child=v;break}s=v.sibling,v.sibling=c,c=v,v=s}Hv(r,!0,c,null,b);break;case"together":Hv(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function sa(s,r,c){if(s!==null&&(r.dependencies=s.dependencies),or|=r.lanes,(c&r.childLanes)===0)if(s!==null){if(Ad(s,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(n(153));if(r.child!==null){for(s=r.child,c=Qs(s,s.pendingProps),r.child=c,c.return=r;s.sibling!==null;)s=s.sibling,c=c.sibling=Qs(s,s.pendingProps),c.return=r;c.sibling=null}return r.child}function Bv(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Fp(s)))}function fI(s,r,c){switch(r.tag){case 3:it(r,r.stateNode.containerInfo),Za(r,$t,s.memoizedState.cache),yd();break;case 27:case 5:td(r);break;case 4:it(r,r.stateNode.containerInfo);break;case 10:Za(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(tr(r),r.flags|=128,null):(c&r.child.childLanes)!==0?wT(s,r,c):(tr(r),s=sa(s,r,c),s!==null?s.sibling:null);tr(r);break;case 19:var v=(s.flags&128)!==0;if(h=(c&r.childLanes)!==0,h||(Ad(s,r,c,!1),h=(c&r.childLanes)!==0),v){if(h)return xT(s,r,c);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ae(Yt,Yt.current),h)break;return null;case 22:case 23:return r.lanes=0,bT(s,r,c);case 24:Za(r,$t,s.memoizedState.cache)}return sa(s,r,c)}function MT(s,r,c){if(s!==null)if(s.memoizedProps!==r.pendingProps)jt=!0;else{if(!Bv(s,c)&&(r.flags&128)===0)return jt=!1,fI(s,r,c);jt=(s.flags&131072)!==0}else jt=!1,st&&(r.flags&1048576)!==0&&sS(r,Op,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var h=r.elementType,v=h._init;if(h=v(h._payload),r.type=h,typeof h=="function")Ky(h)?(s=bo(h,s),r.tag=1,r=TT(null,r,h,s,c)):(r.tag=0,r=Nv(null,r,h,s,c));else{if(h!=null){if(v=h.$$typeof,v===U){r.tag=11,r=yT(null,r,h,s,c);break e}else if(v===K){r.tag=14,r=vT(null,r,h,s,c);break e}}throw r=ne(h)||h,Error(n(306,r,""))}}return r;case 0:return Nv(s,r,r.type,r.pendingProps,c);case 1:return h=r.type,v=bo(h,r.pendingProps),TT(s,r,h,v,c);case 3:e:{if(it(r,r.stateNode.containerInfo),s===null)throw Error(n(387));h=r.pendingProps;var b=r.memoizedState;v=b.element,cv(s,r),Ed(r,h,null,c);var E=r.memoizedState;if(h=E.cache,Za(r,$t,h),h!==b.cache&&iv(r,[$t],c,!0),wd(),h=E.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=CT(s,r,h,c);break e}else if(h!==v){v=Mi(Error(n(424)),r),vd(v),r=CT(s,r,h,c);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Dt=Qi(s.firstChild),In=r,st=!0,po=null,ys=!0,c=rT(r,null,h,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(yd(),h===v){r=sa(s,r,c);break e}cn(s,r,h,c)}r=r.child}return r;case 26:return ng(s,r),s===null?(c=kC(r.type,null,r.pendingProps,null))?r.memoizedState=c:st||(c=r.type,s=r.pendingProps,h=yg(be.current).createElement(c),h[vn]=r,h[Vn]=s,dn(h,c,s),Jt(h),r.stateNode=h):r.memoizedState=kC(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return td(r),s===null&&st&&(h=r.stateNode=RC(r.type,r.pendingProps,be.current),In=r,ys=!0,v=Dt,dr(r.type)?(b0=v,Dt=Qi(h.firstChild)):Dt=v),cn(s,r,r.pendingProps.children,c),ng(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&st&&((v=h=Dt)&&(h=VI(h,r.type,r.pendingProps,ys),h!==null?(r.stateNode=h,In=r,Dt=Qi(h.firstChild),ys=!1,v=!0):v=!1),v||go(r)),td(r),v=r.type,b=r.pendingProps,E=s!==null?s.memoizedProps:null,h=b.children,m0(v,b)?h=null:E!==null&&m0(v,E)&&(r.flags|=32),r.memoizedState!==null&&(v=gv(s,r,aI,null,null,c),Xd._currentValue=v),ng(s,r),cn(s,r,h,c),r.child;case 6:return s===null&&st&&((s=c=Dt)&&(c=zI(c,r.pendingProps,ys),c!==null?(r.stateNode=c,In=r,Dt=null,s=!0):s=!1),s||go(r)),null;case 13:return wT(s,r,c);case 4:return it(r,r.stateNode.containerInfo),h=r.pendingProps,s===null?r.child=gc(r,null,h,c):cn(s,r,h,c),r.child;case 11:return yT(s,r,r.type,r.pendingProps,c);case 7:return cn(s,r,r.pendingProps,c),r.child;case 8:return cn(s,r,r.pendingProps.children,c),r.child;case 12:return cn(s,r,r.pendingProps.children,c),r.child;case 10:return h=r.pendingProps,Za(r,r.type,h.value),cn(s,r,h.children,c),r.child;case 9:return v=r.type._context,h=r.pendingProps.children,yo(r),v=An(v),h=h(v),r.flags|=1,cn(s,r,h,c),r.child;case 14:return vT(s,r,r.type,r.pendingProps,c);case 15:return AT(s,r,r.type,r.pendingProps,c);case 19:return xT(s,r,c);case 31:return h=r.pendingProps,c=r.mode,h={mode:h.mode,children:h.children},s===null?(c=ig(h,c),c.ref=r.ref,r.child=c,c.return=r,r=c):(c=Qs(s.child,h),c.ref=r.ref,r.child=c,c.return=r,r=c),r;case 22:return bT(s,r,c);case 24:return yo(r),h=An($t),s===null?(v=rv(),v===null&&(v=vt,b=sv(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=c),v=b),r.memoizedState={parent:h,cache:v},lv(r),Za(r,$t,v)):((s.lanes&c)!==0&&(cv(s,r),Ed(r,null,null,c),wd()),v=s.memoizedState,b=r.memoizedState,v.parent!==h?(v={parent:h,cache:h},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Za(r,$t,h)):(h=b.cache,Za(r,$t,h),h!==v.cache&&iv(r,[$t],c,!0))),cn(s,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function aa(s){s.flags|=4}function RT(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!FC(r)){if(r=ki.current,r!==null&&((Qe&4194048)===Qe?vs!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||r!==vs))throw Td=ov,hS;s.flags|=8192}}function sg(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?o_():536870912,s.lanes|=r,Ac|=r)}function Nd(s,r){if(!st)switch(s.tailMode){case"hidden":r=s.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Et(s){var r=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(r)for(var v=s.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=h,s.childLanes=c,r}function pI(s,r,c){var h=r.pendingProps;switch(jy(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(r),null;case 1:return Et(r),null;case 3:return c=r.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),ta($t),Xi(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(md(r)?aa(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,oS())),Et(r),null;case 26:return c=r.memoizedState,s===null?(aa(r),c!==null?(Et(r),RT(r,c)):(Et(r),r.flags&=-16777217)):c?c!==s.memoizedState?(aa(r),Et(r),RT(r,c)):(Et(r),r.flags&=-16777217):(s.memoizedProps!==h&&aa(r),Et(r),r.flags&=-16777217),null;case 27:gp(r),c=be.current;var v=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==h&&aa(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return Et(r),null}s=Se.current,md(r)?aS(r):(s=RC(v,h,c),r.stateNode=s,aa(r))}return Et(r),null;case 5:if(gp(r),c=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==h&&aa(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return Et(r),null}if(s=Se.current,md(r))aS(r);else{switch(v=yg(be.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?v.createElement("select",{is:h.is}):v.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?v.createElement(c,{is:h.is}):v.createElement(c)}}s[vn]=r,s[Vn]=h;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=s;e:switch(dn(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&aa(r)}}return Et(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==h&&aa(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(n(166));if(s=be.current,md(r)){if(s=r.stateNode,c=r.memoizedProps,h=null,v=In,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}s[vn]=r,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||SC(s.nodeValue,c)),s||go(r)}else s=yg(s).createTextNode(h),s[vn]=r,r.stateNode=s}return Et(r),null;case 13:if(h=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=md(r),h!==null&&h.dehydrated!==null){if(s===null){if(!v)throw Error(n(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[vn]=r}else yd(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),v=!1}else v=oS(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(ia(r),r):(ia(r),null)}if(ia(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=r.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool);var b=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==v&&(h.flags|=2048)}return c!==s&&c&&(r.child.flags|=8192),sg(r,r.updateQueue),Et(r),null;case 4:return Xi(),s===null&&d0(r.stateNode.containerInfo),Et(r),null;case 10:return ta(r.type),Et(r),null;case 19:if(oe(Yt),v=r.memoizedState,v===null)return Et(r),null;if(h=(r.flags&128)!==0,b=v.rendering,b===null)if(h)Nd(v,!1);else{if(kt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(b=jp(s),b!==null){for(r.flags|=128,Nd(v,!1),s=b.updateQueue,r.updateQueue=s,sg(r,s),r.subtreeFlags=0,s=c,c=r.child;c!==null;)iS(c,s),c=c.sibling;return ae(Yt,Yt.current&1|2),r.child}s=s.sibling}v.tail!==null&&ms()>og&&(r.flags|=128,h=!0,Nd(v,!1),r.lanes=4194304)}else{if(!h)if(s=jp(b),s!==null){if(r.flags|=128,h=!0,s=s.updateQueue,r.updateQueue=s,sg(r,s),Nd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!st)return Et(r),null}else 2*ms()-v.renderingStartTime>og&&c!==536870912&&(r.flags|=128,h=!0,Nd(v,!1),r.lanes=4194304);v.isBackwards?(b.sibling=r.child,r.child=b):(s=v.last,s!==null?s.sibling=b:r.child=b,v.last=b)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=ms(),r.sibling=null,s=Yt.current,ae(Yt,h?s&1|2:s&1),r):(Et(r),null);case 22:case 23:return ia(r),fv(),h=r.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(c&536870912)!==0&&(r.flags&128)===0&&(Et(r),r.subtreeFlags&6&&(r.flags|=8192)):Et(r),c=r.updateQueue,c!==null&&sg(r,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048),s!==null&&oe(vo),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ta($t),Et(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function gI(s,r){switch(jy(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ta($t),Xi(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return gp(r),null;case 13:if(ia(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(n(340));yd()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return oe(Yt),null;case 4:return Xi(),null;case 10:return ta(r.type),null;case 22:case 23:return ia(r),fv(),s!==null&&oe(vo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ta($t),null;case 25:return null;default:return null}}function IT(s,r){switch(jy(r),r.tag){case 3:ta($t),Xi();break;case 26:case 27:case 5:gp(r);break;case 4:Xi();break;case 13:ia(r);break;case 19:oe(Yt);break;case 10:ta(r.type);break;case 22:case 23:ia(r),fv(),s!==null&&oe(vo);break;case 24:ta($t)}}function Ld(s,r){try{var c=r.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&s)===s){h=void 0;var b=c.create,E=c.inst;h=b(),E.destroy=h}c=c.next}while(c!==v)}}catch(I){mt(r,r.return,I)}}function ir(s,r,c){try{var h=r.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&s)===s){var E=h.inst,I=E.destroy;if(I!==void 0){E.destroy=void 0,v=r;var N=c,$=I;try{$()}catch(j){mt(v,N,j)}}}h=h.next}while(h!==b)}}catch(j){mt(r,r.return,j)}}function DT(s){var r=s.updateQueue;if(r!==null){var c=s.stateNode;try{vS(r,c)}catch(h){mt(s,s.return,h)}}}function kT(s,r,c){c.props=bo(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){mt(s,r,h)}}function Pd(s,r){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(v){mt(s,r,v)}}function As(s,r){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){mt(s,r,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){mt(s,r,v)}else c.current=null}function NT(s){var r=s.type,c=s.memoizedProps,h=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){mt(s,s.return,v)}}function Vv(s,r,c){try{var h=s.stateNode;OI(h,s.type,c,r),h[Vn]=r}catch(v){mt(s,s.return,v)}}function LT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&dr(s.type)||s.tag===4}function zv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||LT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&dr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Gv(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(s),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=mg));else if(h!==4&&(h===27&&dr(s.type)&&(c=s.stateNode,r=null),s=s.child,s!==null))for(Gv(s,r,c),s=s.sibling;s!==null;)Gv(s,r,c),s=s.sibling}function ag(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?c.insertBefore(s,r):c.appendChild(s);else if(h!==4&&(h===27&&dr(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(ag(s,r,c),s=s.sibling;s!==null;)ag(s,r,c),s=s.sibling}function PT(s){var r=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);dn(r,h,c),r[vn]=s,r[Vn]=c}catch(b){mt(s,s.return,b)}}var ra=!1,Pt=!1,qv=!1,OT=typeof WeakSet=="function"?WeakSet:Set,en=null;function mI(s,r){if(s=s.containerInfo,p0=Tg,s=W_(s),zy(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var E=0,I=-1,N=-1,$=0,j=0,te=s,Y=null;t:for(;;){for(var X;te!==c||v!==0&&te.nodeType!==3||(I=E+v),te!==b||h!==0&&te.nodeType!==3||(N=E+h),te.nodeType===3&&(E+=te.nodeValue.length),(X=te.firstChild)!==null;)Y=te,te=X;for(;;){if(te===s)break t;if(Y===c&&++$===v&&(I=E),Y===b&&++j===h&&(N=E),(X=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=X}c=I===-1||N===-1?null:{start:I,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(g0={focusedElem:s,selectionRange:c},Tg=!1,en=r;en!==null;)if(r=en,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,en=s;else for(;en!==null;){switch(r=en,b=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,c=r,v=b.memoizedProps,b=b.memoizedState,h=c.stateNode;try{var Re=bo(c.type,v,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(Re,b),h.__reactInternalSnapshotBeforeUpdate=s}catch(Ee){mt(c,c.return,Ee)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,c=s.nodeType,c===9)v0(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":v0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=r.sibling,s!==null){s.return=r.return,en=s;break}en=r.return}}function FT(s,r,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:sr(s,c),h&4&&Ld(5,c);break;case 1:if(sr(s,c),h&4)if(s=c.stateNode,r===null)try{s.componentDidMount()}catch(E){mt(c,c.return,E)}else{var v=bo(c.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(v,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){mt(c,c.return,E)}}h&64&&DT(c),h&512&&Pd(c,c.return);break;case 3:if(sr(s,c),h&64&&(s=c.updateQueue,s!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{vS(s,r)}catch(E){mt(c,c.return,E)}}break;case 27:r===null&&h&4&&PT(c);case 26:case 5:sr(s,c),r===null&&h&4&&NT(c),h&512&&Pd(c,c.return);break;case 12:sr(s,c);break;case 13:sr(s,c),h&4&&BT(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=wI.bind(null,c),GI(s,c))));break;case 22:if(h=c.memoizedState!==null||ra,!h){r=r!==null&&r.memoizedState!==null||Pt,v=ra;var b=Pt;ra=h,(Pt=r)&&!b?ar(s,c,(c.subtreeFlags&8772)!==0):sr(s,c),ra=v,Pt=b}break;case 30:break;default:sr(s,c)}}function UT(s){var r=s.alternate;r!==null&&(s.alternate=null,UT(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Ty(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,qn=!1;function oa(s,r,c){for(c=c.child;c!==null;)HT(s,r,c),c=c.sibling}function HT(s,r,c){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(nd,c)}catch{}switch(c.tag){case 26:Pt||As(c,r),oa(s,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Pt||As(c,r);var h=St,v=qn;dr(c.type)&&(St=c.stateNode,qn=!1),oa(s,r,c),qd(c.stateNode),St=h,qn=v;break;case 5:Pt||As(c,r);case 6:if(h=St,v=qn,St=null,oa(s,r,c),St=h,qn=v,St!==null)if(qn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(c.stateNode)}catch(b){mt(c,r,b)}else try{St.removeChild(c.stateNode)}catch(b){mt(c,r,b)}break;case 18:St!==null&&(qn?(s=St,xC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Jd(s)):xC(St,c.stateNode));break;case 4:h=St,v=qn,St=c.stateNode.containerInfo,qn=!0,oa(s,r,c),St=h,qn=v;break;case 0:case 11:case 14:case 15:Pt||ir(2,c,r),Pt||ir(4,c,r),oa(s,r,c);break;case 1:Pt||(As(c,r),h=c.stateNode,typeof h.componentWillUnmount=="function"&&kT(c,r,h)),oa(s,r,c);break;case 21:oa(s,r,c);break;case 22:Pt=(h=Pt)||c.memoizedState!==null,oa(s,r,c),Pt=h;break;default:oa(s,r,c)}}function BT(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Jd(s)}catch(c){mt(r,r.return,c)}}function yI(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new OT),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new OT),r;default:throw Error(n(435,s.tag))}}function $v(s,r){var c=yI(s);r.forEach(function(h){var v=EI.bind(null,s,h);c.has(h)||(c.add(h),h.then(v,v))})}function si(s,r){var c=r.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],b=s,E=r,I=E;e:for(;I!==null;){switch(I.tag){case 27:if(dr(I.type)){St=I.stateNode,qn=!1;break e}break;case 5:St=I.stateNode,qn=!1;break e;case 3:case 4:St=I.stateNode.containerInfo,qn=!0;break e}I=I.return}if(St===null)throw Error(n(160));HT(b,E,v),St=null,qn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)VT(r,s),r=r.sibling}var Zi=null;function VT(s,r){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:si(r,s),ai(s),h&4&&(ir(3,s,s.return),Ld(3,s),ir(5,s,s.return));break;case 1:si(r,s),ai(s),h&512&&(Pt||c===null||As(c,c.return)),h&64&&ra&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Zi;if(si(r,s),ai(s),h&512&&(Pt||c===null||As(c,c.return)),h&4){var b=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){e:{h=s.type,c=s.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":b=v.getElementsByTagName("title")[0],(!b||b[ad]||b[vn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(h),v.head.insertBefore(b,v.querySelector("head > title"))),dn(b,h,c),b[vn]=s,Jt(b),h=b;break e;case"link":var E=PC("link","href",v).get(h+(c.href||""));if(E){for(var I=0;I<E.length;I++)if(b=E[I],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(I,1);break t}}b=v.createElement(h),dn(b,h,c),v.head.appendChild(b);break;case"meta":if(E=PC("meta","content",v).get(h+(c.content||""))){for(I=0;I<E.length;I++)if(b=E[I],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(I,1);break t}}b=v.createElement(h),dn(b,h,c),v.head.appendChild(b);break;default:throw Error(n(468,h))}b[vn]=s,Jt(b),h=b}s.stateNode=h}else OC(v,s.type,s.stateNode);else s.stateNode=LC(v,h,s.memoizedProps);else b!==h?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,h===null?OC(v,s.type,s.stateNode):LC(v,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Vv(s,s.memoizedProps,c.memoizedProps)}break;case 27:si(r,s),ai(s),h&512&&(Pt||c===null||As(c,c.return)),c!==null&&h&4&&Vv(s,s.memoizedProps,c.memoizedProps);break;case 5:if(si(r,s),ai(s),h&512&&(Pt||c===null||As(c,c.return)),s.flags&32){v=s.stateNode;try{Ql(v,"")}catch(X){mt(s,s.return,X)}}h&4&&s.stateNode!=null&&(v=s.memoizedProps,Vv(s,v,c!==null?c.memoizedProps:v)),h&1024&&(qv=!0);break;case 6:if(si(r,s),ai(s),h&4){if(s.stateNode===null)throw Error(n(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(X){mt(s,s.return,X)}}break;case 3:if(bg=null,v=Zi,Zi=vg(r.containerInfo),si(r,s),Zi=v,ai(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Jd(r.containerInfo)}catch(X){mt(s,s.return,X)}qv&&(qv=!1,zT(s));break;case 4:h=Zi,Zi=vg(s.stateNode.containerInfo),si(r,s),ai(s),Zi=h;break;case 12:si(r,s),ai(s);break;case 13:si(r,s),ai(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Qv=ms()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,$v(s,h)));break;case 22:v=s.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,$=ra,j=Pt;if(ra=$||v,Pt=j||N,si(r,s),Pt=j,ra=$,ai(s),h&8192)e:for(r=s.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(c===null||N||ra||Pt||_o(s)),c=null,r=s;;){if(r.tag===5||r.tag===26){if(c===null){N=c=r;try{if(b=N.stateNode,v)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{I=N.stateNode;var te=N.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(X){mt(N,N.return,X)}}}else if(r.tag===6){if(c===null){N=r;try{N.stateNode.nodeValue=v?"":N.memoizedProps}catch(X){mt(N,N.return,X)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,$v(s,c))));break;case 19:si(r,s),ai(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,$v(s,h)));break;case 30:break;case 21:break;default:si(r,s),ai(s)}}function ai(s){var r=s.flags;if(r&2){try{for(var c,h=s.return;h!==null;){if(LT(h)){c=h;break}h=h.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var v=c.stateNode,b=zv(s);ag(s,b,v);break;case 5:var E=c.stateNode;c.flags&32&&(Ql(E,""),c.flags&=-33);var I=zv(s);ag(s,I,E);break;case 3:case 4:var N=c.stateNode.containerInfo,$=zv(s);Gv(s,$,N);break;default:throw Error(n(161))}}catch(j){mt(s,s.return,j)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function zT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;zT(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function sr(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)FT(s,r.alternate,r),r=r.sibling}function _o(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ir(4,r,r.return),_o(r);break;case 1:As(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&kT(r,r.return,c),_o(r);break;case 27:qd(r.stateNode);case 26:case 5:As(r,r.return),_o(r);break;case 22:r.memoizedState===null&&_o(r);break;case 30:_o(r);break;default:_o(r)}s=s.sibling}}function ar(s,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,v=s,b=r,E=b.flags;switch(b.tag){case 0:case 11:case 15:ar(v,b,c),Ld(4,b);break;case 1:if(ar(v,b,c),h=b,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch($){mt(h,h.return,$)}if(h=b,v=h.updateQueue,v!==null){var I=h.stateNode;try{var N=v.shared.hiddenCallbacks;if(N!==null)for(v.shared.hiddenCallbacks=null,v=0;v<N.length;v++)yS(N[v],I)}catch($){mt(h,h.return,$)}}c&&E&64&&DT(b),Pd(b,b.return);break;case 27:PT(b);case 26:case 5:ar(v,b,c),c&&h===null&&E&4&&NT(b),Pd(b,b.return);break;case 12:ar(v,b,c);break;case 13:ar(v,b,c),c&&E&4&&BT(v,b);break;case 22:b.memoizedState===null&&ar(v,b,c),Pd(b,b.return);break;case 30:break;default:ar(v,b,c)}r=r.sibling}}function Yv(s,r){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&bd(c))}function Wv(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bd(s))}function bs(s,r,c,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)GT(s,r,c,h),r=r.sibling}function GT(s,r,c,h){var v=r.flags;switch(r.tag){case 0:case 11:case 15:bs(s,r,c,h),v&2048&&Ld(9,r);break;case 1:bs(s,r,c,h);break;case 3:bs(s,r,c,h),v&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bd(s)));break;case 12:if(v&2048){bs(s,r,c,h),s=r.stateNode;try{var b=r.memoizedProps,E=b.id,I=b.onPostCommit;typeof I=="function"&&I(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){mt(r,r.return,N)}}else bs(s,r,c,h);break;case 13:bs(s,r,c,h);break;case 23:break;case 22:b=r.stateNode,E=r.alternate,r.memoizedState!==null?b._visibility&2?bs(s,r,c,h):Od(s,r):b._visibility&2?bs(s,r,c,h):(b._visibility|=2,mc(s,r,c,h,(r.subtreeFlags&10256)!==0)),v&2048&&Yv(E,r);break;case 24:bs(s,r,c,h),v&2048&&Wv(r.alternate,r);break;default:bs(s,r,c,h)}}function mc(s,r,c,h,v){for(v=v&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var b=s,E=r,I=c,N=h,$=E.flags;switch(E.tag){case 0:case 11:case 15:mc(b,E,I,N,v),Ld(8,E);break;case 23:break;case 22:var j=E.stateNode;E.memoizedState!==null?j._visibility&2?mc(b,E,I,N,v):Od(b,E):(j._visibility|=2,mc(b,E,I,N,v)),v&&$&2048&&Yv(E.alternate,E);break;case 24:mc(b,E,I,N,v),v&&$&2048&&Wv(E.alternate,E);break;default:mc(b,E,I,N,v)}r=r.sibling}}function Od(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=s,h=r,v=h.flags;switch(h.tag){case 22:Od(c,h),v&2048&&Yv(h.alternate,h);break;case 24:Od(c,h),v&2048&&Wv(h.alternate,h);break;default:Od(c,h)}r=r.sibling}}var Fd=8192;function yc(s){if(s.subtreeFlags&Fd)for(s=s.child;s!==null;)qT(s),s=s.sibling}function qT(s){switch(s.tag){case 26:yc(s),s.flags&Fd&&s.memoizedState!==null&&nD(Zi,s.memoizedState,s.memoizedProps);break;case 5:yc(s);break;case 3:case 4:var r=Zi;Zi=vg(s.stateNode.containerInfo),yc(s),Zi=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Fd,Fd=16777216,yc(s),Fd=r):yc(s));break;default:yc(s)}}function $T(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Ud(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];en=h,WT(h,s)}$T(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)YT(s),s=s.sibling}function YT(s){switch(s.tag){case 0:case 11:case 15:Ud(s),s.flags&2048&&ir(9,s,s.return);break;case 3:Ud(s);break;case 12:Ud(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,rg(s)):Ud(s);break;default:Ud(s)}}function rg(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];en=h,WT(h,s)}$T(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ir(8,r,r.return),rg(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,rg(r));break;default:rg(r)}s=s.sibling}}function WT(s,r){for(;en!==null;){var c=en;switch(c.tag){case 0:case 11:case 15:ir(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:bd(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,en=h;else e:for(c=s;en!==null;){h=en;var v=h.sibling,b=h.return;if(UT(h),h===c){en=null;break e}if(v!==null){v.return=b,en=v;break e}en=b}}}var vI={getCacheForType:function(s){var r=An($t),c=r.data.get(s);return c===void 0&&(c=s(),r.data.set(s,c)),c}},AI=typeof WeakMap=="function"?WeakMap:Map,rt=0,vt=null,We=null,Qe=0,ot=0,ri=null,rr=!1,vc=!1,Xv=!1,la=0,kt=0,or=0,So=0,Kv=0,Ni=0,Ac=0,Hd=null,$n=null,Zv=!1,Qv=0,og=1/0,lg=null,lr=null,un=0,cr=null,bc=null,_c=0,Jv=0,jv=null,XT=null,Bd=0,e0=null;function oi(){if((rt&2)!==0&&Qe!==0)return Qe&-Qe;if(O.T!==null){var s=lc;return s!==0?s:o0()}return u_()}function KT(){Ni===0&&(Ni=(Qe&536870912)===0||st?r_():536870912);var s=ki.current;return s!==null&&(s.flags|=32),Ni}function li(s,r,c){(s===vt&&(ot===2||ot===9)||s.cancelPendingCommit!==null)&&(Sc(s,0),ur(s,Qe,Ni,!1)),sd(s,c),((rt&2)===0||s!==vt)&&(s===vt&&((rt&2)===0&&(So|=c),kt===4&&ur(s,Qe,Ni,!1)),_s(s))}function ZT(s,r,c){if((rt&6)!==0)throw Error(n(327));var h=!c&&(r&124)===0&&(r&s.expiredLanes)===0||id(s,r),v=h?SI(s,r):i0(s,r,!0),b=h;do{if(v===0){vc&&!h&&ur(s,r,0,!1);break}else{if(c=s.current.alternate,b&&!bI(c)){v=i0(s,r,!1),b=!1;continue}if(v===2){if(b=r,s.errorRecoveryDisabledLanes&b)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var I=s;v=Hd;var N=I.current.memoizedState.isDehydrated;if(N&&(Sc(I,E).flags|=256),E=i0(I,E,!1),E!==2){if(Xv&&!N){I.errorRecoveryDisabledLanes|=b,So|=b,v=4;break e}b=$n,$n=v,b!==null&&($n===null?$n=b:$n.push.apply($n,b))}v=E}if(b=!1,v!==2)continue}}if(v===1){Sc(s,0),ur(s,r,0,!0);break}e:{switch(h=s,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:ur(h,r,Ni,!rr);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(v=Qv+300-ms(),10<v)){if(ur(h,r,Ni,!rr),Ap(h,0,!0)!==0)break e;h.timeoutHandle=wC(QT.bind(null,h,c,$n,lg,Zv,r,Ni,So,Ac,rr,b,2,-0,0),v);break e}QT(h,c,$n,lg,Zv,r,Ni,So,Ac,rr,b,0,-0,0)}}break}while(!0);_s(s)}function QT(s,r,c,h,v,b,E,I,N,$,j,te,Y,X){if(s.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Wd={stylesheets:null,count:0,unsuspend:tD},qT(r),te=iD(),te!==null)){s.cancelPendingCommit=te(sC.bind(null,s,r,b,c,h,v,E,I,N,j,1,Y,X)),ur(s,b,E,!$);return}sC(s,r,b,c,h,v,E,I,N)}function bI(s){for(var r=s;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],b=v.getSnapshot;v=v.value;try{if(!ni(b(),v))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ur(s,r,c,h){r&=~Kv,r&=~So,s.suspendedLanes|=r,s.pingedLanes&=~r,h&&(s.warmLanes|=r),h=s.expirationTimes;for(var v=r;0<v;){var b=31-ti(v),E=1<<b;h[b]=-1,v&=~E}c!==0&&l_(s,c,r)}function cg(){return(rt&6)===0?(Vd(0),!1):!0}function t0(){if(We!==null){if(ot===0)var s=We.return;else s=We,ea=mo=null,vv(s),pc=null,Dd=0,s=We;for(;s!==null;)IT(s.alternate,s),s=s.return;We=null}}function Sc(s,r){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,UI(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),t0(),vt=s,We=c=Qs(s.current,null),Qe=r,ot=0,ri=null,rr=!1,vc=id(s,r),Xv=!1,Ac=Ni=Kv=So=or=kt=0,$n=Hd=null,Zv=!1,(r&8)!==0&&(r|=r&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=r;0<h;){var v=31-ti(h),b=1<<v;r|=s[v],h&=~b}return la=r,Dp(),c}function JT(s,r){Be=null,O.H=Zp,r===Sd||r===Bp?(r=gS(),ot=3):r===hS?(r=gS(),ot=4):ot=r===mT?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ri=r,We===null&&(kt=1,tg(s,Mi(r,s.current)))}function jT(){var s=O.H;return O.H=Zp,s===null?Zp:s}function eC(){var s=O.A;return O.A=vI,s}function n0(){kt=4,rr||(Qe&4194048)!==Qe&&ki.current!==null||(vc=!0),(or&134217727)===0&&(So&134217727)===0||vt===null||ur(vt,Qe,Ni,!1)}function i0(s,r,c){var h=rt;rt|=2;var v=jT(),b=eC();(vt!==s||Qe!==r)&&(lg=null,Sc(s,r)),r=!1;var E=kt;e:do try{if(ot!==0&&We!==null){var I=We,N=ri;switch(ot){case 8:t0(),E=6;break e;case 3:case 2:case 9:case 6:ki.current===null&&(r=!0);var $=ot;if(ot=0,ri=null,Tc(s,I,N,$),c&&vc){E=0;break e}break;default:$=ot,ot=0,ri=null,Tc(s,I,N,$)}}_I(),E=kt;break}catch(j){JT(s,j)}while(!0);return r&&s.shellSuspendCounter++,ea=mo=null,rt=h,O.H=v,O.A=b,We===null&&(vt=null,Qe=0,Dp()),E}function _I(){for(;We!==null;)tC(We)}function SI(s,r){var c=rt;rt|=2;var h=jT(),v=eC();vt!==s||Qe!==r?(lg=null,og=ms()+500,Sc(s,r)):vc=id(s,r);e:do try{if(ot!==0&&We!==null){r=We;var b=ri;t:switch(ot){case 1:ot=0,ri=null,Tc(s,r,b,1);break;case 2:case 9:if(fS(b)){ot=0,ri=null,nC(r);break}r=function(){ot!==2&&ot!==9||vt!==s||(ot=7),_s(s)},b.then(r,r);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:fS(b)?(ot=0,ri=null,nC(r)):(ot=0,ri=null,Tc(s,r,b,7));break;case 5:var E=null;switch(We.tag){case 26:E=We.memoizedState;case 5:case 27:var I=We;if(!E||FC(E)){ot=0,ri=null;var N=I.sibling;if(N!==null)We=N;else{var $=I.return;$!==null?(We=$,ug($)):We=null}break t}}ot=0,ri=null,Tc(s,r,b,5);break;case 6:ot=0,ri=null,Tc(s,r,b,6);break;case 8:t0(),kt=6;break e;default:throw Error(n(462))}}TI();break}catch(j){JT(s,j)}while(!0);return ea=mo=null,O.H=h,O.A=v,rt=c,We!==null?0:(vt=null,Qe=0,Dp(),kt)}function TI(){for(;We!==null&&!$M();)tC(We)}function tC(s){var r=MT(s.alternate,s,la);s.memoizedProps=s.pendingProps,r===null?ug(s):We=r}function nC(s){var r=s,c=r.alternate;switch(r.tag){case 15:case 0:r=ST(c,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=ST(c,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:vv(r);default:IT(c,r),r=We=iS(r,la),r=MT(c,r,la)}s.memoizedProps=s.pendingProps,r===null?ug(s):We=r}function Tc(s,r,c,h){ea=mo=null,vv(r),pc=null,Dd=0;var v=r.return;try{if(hI(s,v,r,c,Qe)){kt=1,tg(s,Mi(c,s.current)),We=null;return}}catch(b){if(v!==null)throw We=v,b;kt=1,tg(s,Mi(c,s.current)),We=null;return}r.flags&32768?(st||h===1?s=!0:vc||(Qe&536870912)!==0?s=!1:(rr=s=!0,(h===2||h===9||h===3||h===6)&&(h=ki.current,h!==null&&h.tag===13&&(h.flags|=16384))),iC(r,s)):ug(r)}function ug(s){var r=s;do{if((r.flags&32768)!==0){iC(r,rr);return}s=r.return;var c=pI(r.alternate,r,la);if(c!==null){We=c;return}if(r=r.sibling,r!==null){We=r;return}We=r=s}while(r!==null);kt===0&&(kt=5)}function iC(s,r){do{var c=gI(s.alternate,s);if(c!==null){c.flags&=32767,We=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(s=s.sibling,s!==null)){We=s;return}We=s=c}while(s!==null);kt=6,We=null}function sC(s,r,c,h,v,b,E,I,N){s.cancelPendingCommit=null;do dg();while(un!==0);if((rt&6)!==0)throw Error(n(327));if(r!==null){if(r===s.current)throw Error(n(177));if(b=r.lanes|r.childLanes,b|=Wy,tR(s,c,b,E,I,N),s===vt&&(We=vt=null,Qe=0),bc=r,cr=s,_c=c,Jv=b,jv=v,XT=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,xI(mp,function(){return cC(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=O.T,O.T=null,v=z.p,z.p=2,E=rt,rt|=4;try{mI(s,r,c)}finally{rt=E,z.p=v,O.T=h}}un=1,aC(),rC(),oC()}}function aC(){if(un===1){un=0;var s=cr,r=bc,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=O.T,O.T=null;var h=z.p;z.p=2;var v=rt;rt|=4;try{VT(r,s);var b=g0,E=W_(s.containerInfo),I=b.focusedElem,N=b.selectionRange;if(E!==I&&I&&I.ownerDocument&&Y_(I.ownerDocument.documentElement,I)){if(N!==null&&zy(I)){var $=N.start,j=N.end;if(j===void 0&&(j=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(j,I.value.length);else{var te=I.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),Re=I.textContent.length,Ee=Math.min(N.start,Re),ht=N.end===void 0?Ee:Math.min(N.end,Re);!X.extend&&Ee>ht&&(E=ht,ht=Ee,Ee=E);var V=$_(I,Ee),H=$_(I,ht);if(V&&H&&(X.rangeCount!==1||X.anchorNode!==V.node||X.anchorOffset!==V.offset||X.focusNode!==H.node||X.focusOffset!==H.offset)){var G=te.createRange();G.setStart(V.node,V.offset),X.removeAllRanges(),Ee>ht?(X.addRange(G),X.extend(H.node,H.offset)):(G.setEnd(H.node,H.offset),X.addRange(G))}}}}for(te=[],X=I;X=X.parentNode;)X.nodeType===1&&te.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<te.length;I++){var ee=te[I];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Tg=!!p0,g0=p0=null}finally{rt=v,z.p=h,O.T=c}}s.current=r,un=2}}function rC(){if(un===2){un=0;var s=cr,r=bc,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=O.T,O.T=null;var h=z.p;z.p=2;var v=rt;rt|=4;try{FT(s,r.alternate,r)}finally{rt=v,z.p=h,O.T=c}}un=3}}function oC(){if(un===4||un===3){un=0,YM();var s=cr,r=bc,c=_c,h=XT;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?un=5:(un=0,bc=cr=null,lC(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(lr=null),_y(c),r=r.stateNode,ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(nd,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=O.T,v=z.p,z.p=2,O.T=null;try{for(var b=s.onRecoverableError,E=0;E<h.length;E++){var I=h[E];b(I.value,{componentStack:I.stack})}}finally{O.T=r,z.p=v}}(_c&3)!==0&&dg(),_s(s),v=s.pendingLanes,(c&4194090)!==0&&(v&42)!==0?s===e0?Bd++:(Bd=0,e0=s):Bd=0,Vd(0)}}function lC(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,bd(r)))}function dg(s){return aC(),rC(),oC(),cC()}function cC(){if(un!==5)return!1;var s=cr,r=Jv;Jv=0;var c=_y(_c),h=O.T,v=z.p;try{z.p=32>c?32:c,O.T=null,c=jv,jv=null;var b=cr,E=_c;if(un=0,bc=cr=null,_c=0,(rt&6)!==0)throw Error(n(331));var I=rt;if(rt|=4,YT(b.current),GT(b,b.current,E,c),rt=I,Vd(0,!1),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(nd,b)}catch{}return!0}finally{z.p=v,O.T=h,lC(s,r)}}function uC(s,r,c){r=Mi(c,r),r=kv(s.stateNode,r,2),s=ja(s,r,2),s!==null&&(sd(s,2),_s(s))}function mt(s,r,c){if(s.tag===3)uC(s,s,c);else for(;r!==null;){if(r.tag===3){uC(r,s,c);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(lr===null||!lr.has(h))){s=Mi(c,s),c=pT(2),h=ja(r,c,2),h!==null&&(gT(c,h,r,s),sd(h,2),_s(h));break}}r=r.return}}function s0(s,r,c){var h=s.pingCache;if(h===null){h=s.pingCache=new AI;var v=new Set;h.set(r,v)}else v=h.get(r),v===void 0&&(v=new Set,h.set(r,v));v.has(c)||(Xv=!0,v.add(c),s=CI.bind(null,s,r,c),r.then(s,s))}function CI(s,r,c){var h=s.pingCache;h!==null&&h.delete(r),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,vt===s&&(Qe&c)===c&&(kt===4||kt===3&&(Qe&62914560)===Qe&&300>ms()-Qv?(rt&2)===0&&Sc(s,0):Kv|=c,Ac===Qe&&(Ac=0)),_s(s)}function dC(s,r){r===0&&(r=o_()),s=sc(s,r),s!==null&&(sd(s,r),_s(s))}function wI(s){var r=s.memoizedState,c=0;r!==null&&(c=r.retryLane),dC(s,c)}function EI(s,r){var c=0;switch(s.tag){case 13:var h=s.stateNode,v=s.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(r),dC(s,c)}function xI(s,r){return yy(s,r)}var hg=null,Cc=null,a0=!1,fg=!1,r0=!1,To=0;function _s(s){s!==Cc&&s.next===null&&(Cc===null?hg=Cc=s:Cc=Cc.next=s),fg=!0,a0||(a0=!0,RI())}function Vd(s,r){if(!r0&&fg){r0=!0;do for(var c=!1,h=hg;h!==null;){if(s!==0){var v=h.pendingLanes;if(v===0)var b=0;else{var E=h.suspendedLanes,I=h.pingedLanes;b=(1<<31-ti(42|s)+1)-1,b&=v&~(E&~I),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,gC(h,b))}else b=Qe,b=Ap(h,h===vt?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||id(h,b)||(c=!0,gC(h,b));h=h.next}while(c);r0=!1}}function MI(){hC()}function hC(){fg=a0=!1;var s=0;To!==0&&(FI()&&(s=To),To=0);for(var r=ms(),c=null,h=hg;h!==null;){var v=h.next,b=fC(h,r);b===0?(h.next=null,c===null?hg=v:c.next=v,v===null&&(Cc=c)):(c=h,(s!==0||(b&3)!==0)&&(fg=!0)),h=v}Vd(s)}function fC(s,r){for(var c=s.suspendedLanes,h=s.pingedLanes,v=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var E=31-ti(b),I=1<<E,N=v[E];N===-1?((I&c)===0||(I&h)!==0)&&(v[E]=eR(I,r)):N<=r&&(s.expiredLanes|=I),b&=~I}if(r=vt,c=Qe,c=Ap(s,s===r?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===r&&(ot===2||ot===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&vy(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||id(s,c)){if(r=c&-c,r===s.callbackPriority)return r;switch(h!==null&&vy(h),_y(c)){case 2:case 8:c=s_;break;case 32:c=mp;break;case 268435456:c=a_;break;default:c=mp}return h=pC.bind(null,s),c=yy(c,h),s.callbackPriority=r,s.callbackNode=c,r}return h!==null&&h!==null&&vy(h),s.callbackPriority=2,s.callbackNode=null,2}function pC(s,r){if(un!==0&&un!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(dg()&&s.callbackNode!==c)return null;var h=Qe;return h=Ap(s,s===vt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(ZT(s,h,r),fC(s,ms()),s.callbackNode!=null&&s.callbackNode===c?pC.bind(null,s):null)}function gC(s,r){if(dg())return null;ZT(s,r,!0)}function RI(){HI(function(){(rt&6)!==0?yy(i_,MI):hC()})}function o0(){return To===0&&(To=r_()),To}function mC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Cp(""+s)}function yC(s,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,s.id&&c.setAttribute("form",s.id),r.parentNode.insertBefore(c,r),s=new FormData(s),c.parentNode.removeChild(c),s}function II(s,r,c,h,v){if(r==="submit"&&c&&c.stateNode===v){var b=mC((v[Vn]||null).action),E=h.submitter;E&&(r=(r=E[Vn]||null)?mC(r.formAction):E.getAttribute("formAction"),r!==null&&(b=r,E=null));var I=new Mp("action","action",null,h,v);s.push({event:I,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(To!==0){var N=E?yC(v,E):new FormData(v);xv(c,{pending:!0,data:N,method:v.method,action:b},null,N)}}else typeof b=="function"&&(I.preventDefault(),N=E?yC(v,E):new FormData(v),xv(c,{pending:!0,data:N,method:v.method,action:b},b,N))},currentTarget:v}]})}}for(var l0=0;l0<Yy.length;l0++){var c0=Yy[l0],DI=c0.toLowerCase(),kI=c0[0].toUpperCase()+c0.slice(1);Ki(DI,"on"+kI)}Ki(Z_,"onAnimationEnd"),Ki(Q_,"onAnimationIteration"),Ki(J_,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(KR,"onTransitionRun"),Ki(ZR,"onTransitionStart"),Ki(QR,"onTransitionCancel"),Ki(j_,"onTransitionEnd"),Xl("onMouseEnter",["mouseout","mouseover"]),Xl("onMouseLeave",["mouseout","mouseover"]),Xl("onPointerEnter",["pointerout","pointerover"]),Xl("onPointerLeave",["pointerout","pointerover"]),ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ro("onBeforeInput",["compositionend","keypress","textInput","paste"]),ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zd));function vC(s,r){r=(r&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],v=h.event;h=h.listeners;e:{var b=void 0;if(r)for(var E=h.length-1;0<=E;E--){var I=h[E],N=I.instance,$=I.currentTarget;if(I=I.listener,N!==b&&v.isPropagationStopped())break e;b=I,v.currentTarget=$;try{b(v)}catch(j){eg(j)}v.currentTarget=null,b=N}else for(E=0;E<h.length;E++){if(I=h[E],N=I.instance,$=I.currentTarget,I=I.listener,N!==b&&v.isPropagationStopped())break e;b=I,v.currentTarget=$;try{b(v)}catch(j){eg(j)}v.currentTarget=null,b=N}}}}function Xe(s,r){var c=r[Sy];c===void 0&&(c=r[Sy]=new Set);var h=s+"__bubble";c.has(h)||(AC(r,s,2,!1),c.add(h))}function u0(s,r,c){var h=0;r&&(h|=4),AC(c,s,h,r)}var pg="_reactListening"+Math.random().toString(36).slice(2);function d0(s){if(!s[pg]){s[pg]=!0,h_.forEach(function(c){c!=="selectionchange"&&(NI.has(c)||u0(c,!1,s),u0(c,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[pg]||(r[pg]=!0,u0("selectionchange",!1,r))}}function AC(s,r,c,h){switch(GC(r)){case 2:var v=rD;break;case 8:v=oD;break;default:v=w0}c=v.bind(null,r,c,s),v=void 0,!Ny||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),h?v!==void 0?s.addEventListener(r,c,{capture:!0,passive:v}):s.addEventListener(r,c,!0):v!==void 0?s.addEventListener(r,c,{passive:v}):s.addEventListener(r,c,!1)}function h0(s,r,c,h,v){var b=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var I=h.stateNode.containerInfo;if(I===v)break;if(E===4)for(E=h.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;I!==null;){if(E=$l(I),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){h=b=E;continue e}I=I.parentNode}}h=h.return}E_(function(){var $=b,j=Dy(c),te=[];e:{var Y=eS.get(s);if(Y!==void 0){var X=Mp,Re=s;switch(s){case"keypress":if(Ep(c)===0)break e;case"keydown":case"keyup":X=xR;break;case"focusin":Re="focus",X=Fy;break;case"focusout":Re="blur",X=Fy;break;case"beforeblur":case"afterblur":X=Fy;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=R_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=gR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=IR;break;case Z_:case Q_:case J_:X=vR;break;case j_:X=kR;break;case"scroll":case"scrollend":X=fR;break;case"wheel":X=LR;break;case"copy":case"cut":case"paste":X=bR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=D_;break;case"toggle":case"beforetoggle":X=OR}var Ee=(r&4)!==0,ht=!Ee&&(s==="scroll"||s==="scrollend"),V=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var H=$,G;H!==null;){var ee=H;if(G=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||G===null||V===null||(ee=od(H,V),ee!=null&&Ee.push(Gd(H,ee,G))),ht)break;H=H.return}0<Ee.length&&(Y=new X(Y,Re,null,c,j),te.push({event:Y,listeners:Ee}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",Y&&c!==Iy&&(Re=c.relatedTarget||c.fromElement)&&($l(Re)||Re[ql]))break e;if((X||Y)&&(Y=j.window===j?j:(Y=j.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(Re=c.relatedTarget||c.toElement,X=$,Re=Re?$l(Re):null,Re!==null&&(ht=a(Re),Ee=Re.tag,Re!==ht||Ee!==5&&Ee!==27&&Ee!==6)&&(Re=null)):(X=null,Re=$),X!==Re)){if(Ee=R_,ee="onMouseLeave",V="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Ee=D_,ee="onPointerLeave",V="onPointerEnter",H="pointer"),ht=X==null?Y:rd(X),G=Re==null?Y:rd(Re),Y=new Ee(ee,H+"leave",X,c,j),Y.target=ht,Y.relatedTarget=G,ee=null,$l(j)===$&&(Ee=new Ee(V,H+"enter",Re,c,j),Ee.target=G,Ee.relatedTarget=ht,ee=Ee),ht=ee,X&&Re)t:{for(Ee=X,V=Re,H=0,G=Ee;G;G=wc(G))H++;for(G=0,ee=V;ee;ee=wc(ee))G++;for(;0<H-G;)Ee=wc(Ee),H--;for(;0<G-H;)V=wc(V),G--;for(;H--;){if(Ee===V||V!==null&&Ee===V.alternate)break t;Ee=wc(Ee),V=wc(V)}Ee=null}else Ee=null;X!==null&&bC(te,Y,X,Ee,!1),Re!==null&&ht!==null&&bC(te,ht,Re,Ee,!0)}}e:{if(Y=$?rd($):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var ye=H_;else if(F_(Y))if(B_)ye=YR;else{ye=qR;var qe=GR}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&Ry($.elementType)&&(ye=H_):ye=$R;if(ye&&(ye=ye(s,$))){U_(te,ye,c,j);break e}qe&&qe(s,Y,$),s==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&My(Y,"number",Y.value)}switch(qe=$?rd($):window,s){case"focusin":(F_(qe)||qe.contentEditable==="true")&&(tc=qe,Gy=$,gd=null);break;case"focusout":gd=Gy=tc=null;break;case"mousedown":qy=!0;break;case"contextmenu":case"mouseup":case"dragend":qy=!1,X_(te,c,j);break;case"selectionchange":if(XR)break;case"keydown":case"keyup":X_(te,c,j)}var Ce;if(Hy)e:{switch(s){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else ec?P_(s,c)&&(Me="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Me="onCompositionStart");Me&&(k_&&c.locale!=="ko"&&(ec||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&ec&&(Ce=x_()):(Ka=j,Ly="value"in Ka?Ka.value:Ka.textContent,ec=!0)),qe=gg($,Me),0<qe.length&&(Me=new I_(Me,s,null,c,j),te.push({event:Me,listeners:qe}),Ce?Me.data=Ce:(Ce=O_(c),Ce!==null&&(Me.data=Ce)))),(Ce=UR?HR(s,c):BR(s,c))&&(Me=gg($,"onBeforeInput"),0<Me.length&&(qe=new I_("onBeforeInput","beforeinput",null,c,j),te.push({event:qe,listeners:Me}),qe.data=Ce)),II(te,s,$,c,j)}vC(te,r)})}function Gd(s,r,c){return{instance:s,listener:r,currentTarget:c}}function gg(s,r){for(var c=r+"Capture",h=[];s!==null;){var v=s,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=od(s,c),v!=null&&h.unshift(Gd(s,v,b)),v=od(s,r),v!=null&&h.push(Gd(s,v,b))),s.tag===3)return h;s=s.return}return[]}function wc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function bC(s,r,c,h,v){for(var b=r._reactName,E=[];c!==null&&c!==h;){var I=c,N=I.alternate,$=I.stateNode;if(I=I.tag,N!==null&&N===h)break;I!==5&&I!==26&&I!==27||$===null||(N=$,v?($=od(c,b),$!=null&&E.unshift(Gd(c,$,N))):v||($=od(c,b),$!=null&&E.push(Gd(c,$,N)))),c=c.return}E.length!==0&&s.push({event:r,listeners:E})}var LI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function _C(s){return(typeof s=="string"?s:""+s).replace(LI,`
`).replace(PI,"")}function SC(s,r){return r=_C(r),_C(s)===r}function mg(){}function dt(s,r,c,h,v,b){switch(c){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Ql(s,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Ql(s,""+h);break;case"className":_p(s,"class",h);break;case"tabIndex":_p(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":_p(s,c,h);break;case"style":C_(s,h,b);break;case"data":if(r!=="object"){_p(s,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=Cp(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&dt(s,r,"name",v.name,v,null),dt(s,r,"formEncType",v.formEncType,v,null),dt(s,r,"formMethod",v.formMethod,v,null),dt(s,r,"formTarget",v.formTarget,v,null)):(dt(s,r,"encType",v.encType,v,null),dt(s,r,"method",v.method,v,null),dt(s,r,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=Cp(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=mg);break;case"onScroll":h!=null&&Xe("scroll",s);break;case"onScrollEnd":h!=null&&Xe("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=Cp(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":Xe("beforetoggle",s),Xe("toggle",s),bp(s,"popover",h);break;case"xlinkActuate":Ks(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ks(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ks(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ks(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ks(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ks(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ks(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ks(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ks(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":bp(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=dR.get(c)||c,bp(s,c,h))}}function f0(s,r,c,h,v,b){switch(c){case"style":C_(s,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"children":typeof h=="string"?Ql(s,h):(typeof h=="number"||typeof h=="bigint")&&Ql(s,""+h);break;case"onScroll":h!=null&&Xe("scroll",s);break;case"onScrollEnd":h!=null&&Xe("scrollend",s);break;case"onClick":h!=null&&(s.onclick=mg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!f_.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),r=c.slice(2,v?c.length-7:void 0),b=s[Vn]||null,b=b!=null?b[c]:null,typeof b=="function"&&s.removeEventListener(r,b,v),typeof h=="function")){typeof b!="function"&&b!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(r,h,v);break e}c in s?s[c]=h:h===!0?s.setAttribute(c,""):bp(s,c,h)}}}function dn(s,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",s),Xe("load",s);var h=!1,v=!1,b;for(b in c)if(c.hasOwnProperty(b)){var E=c[b];if(E!=null)switch(b){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:dt(s,r,b,E,c,null)}}v&&dt(s,r,"srcSet",c.srcSet,c,null),h&&dt(s,r,"src",c.src,c,null);return;case"input":Xe("invalid",s);var I=b=E=v=null,N=null,$=null;for(h in c)if(c.hasOwnProperty(h)){var j=c[h];if(j!=null)switch(h){case"name":v=j;break;case"type":E=j;break;case"checked":N=j;break;case"defaultChecked":$=j;break;case"value":b=j;break;case"defaultValue":I=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(137,r));break;default:dt(s,r,h,j,c,null)}}b_(s,b,I,N,$,E,v,!1),Sp(s);return;case"select":Xe("invalid",s),h=E=b=null;for(v in c)if(c.hasOwnProperty(v)&&(I=c[v],I!=null))switch(v){case"value":b=I;break;case"defaultValue":E=I;break;case"multiple":h=I;default:dt(s,r,v,I,c,null)}r=b,c=E,s.multiple=!!h,r!=null?Zl(s,!!h,r,!1):c!=null&&Zl(s,!!h,c,!0);return;case"textarea":Xe("invalid",s),b=v=h=null;for(E in c)if(c.hasOwnProperty(E)&&(I=c[E],I!=null))switch(E){case"value":h=I;break;case"defaultValue":v=I;break;case"children":b=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(n(91));break;default:dt(s,r,E,I,c,null)}S_(s,h,v,b),Sp(s);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(h=c[N],h!=null))switch(N){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:dt(s,r,N,h,c,null)}return;case"dialog":Xe("beforetoggle",s),Xe("toggle",s),Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":Xe("load",s);break;case"video":case"audio":for(h=0;h<zd.length;h++)Xe(zd[h],s);break;case"image":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"embed":case"source":case"link":Xe("error",s),Xe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in c)if(c.hasOwnProperty($)&&(h=c[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:dt(s,r,$,h,c,null)}return;default:if(Ry(r)){for(j in c)c.hasOwnProperty(j)&&(h=c[j],h!==void 0&&f0(s,r,j,h,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(h=c[I],h!=null&&dt(s,r,I,h,c,null))}function OI(s,r,c,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,E=null,I=null,N=null,$=null,j=null;for(X in c){var te=c[X];if(c.hasOwnProperty(X)&&te!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":N=te;default:h.hasOwnProperty(X)||dt(s,r,X,null,h,te)}}for(var Y in h){var X=h[Y];if(te=c[Y],h.hasOwnProperty(Y)&&(X!=null||te!=null))switch(Y){case"type":b=X;break;case"name":v=X;break;case"checked":$=X;break;case"defaultChecked":j=X;break;case"value":E=X;break;case"defaultValue":I=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(137,r));break;default:X!==te&&dt(s,r,Y,X,h,te)}}xy(s,E,I,N,$,j,b,v);return;case"select":X=E=I=Y=null;for(b in c)if(N=c[b],c.hasOwnProperty(b)&&N!=null)switch(b){case"value":break;case"multiple":X=N;default:h.hasOwnProperty(b)||dt(s,r,b,null,h,N)}for(v in h)if(b=h[v],N=c[v],h.hasOwnProperty(v)&&(b!=null||N!=null))switch(v){case"value":Y=b;break;case"defaultValue":I=b;break;case"multiple":E=b;default:b!==N&&dt(s,r,v,b,h,N)}r=I,c=E,h=X,Y!=null?Zl(s,!!c,Y,!1):!!h!=!!c&&(r!=null?Zl(s,!!c,r,!0):Zl(s,!!c,c?[]:"",!1));return;case"textarea":X=Y=null;for(I in c)if(v=c[I],c.hasOwnProperty(I)&&v!=null&&!h.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:dt(s,r,I,null,h,v)}for(E in h)if(v=h[E],b=c[E],h.hasOwnProperty(E)&&(v!=null||b!=null))switch(E){case"value":Y=v;break;case"defaultValue":X=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&dt(s,r,E,v,h,b)}__(s,Y,X);return;case"option":for(var Re in c)if(Y=c[Re],c.hasOwnProperty(Re)&&Y!=null&&!h.hasOwnProperty(Re))switch(Re){case"selected":s.selected=!1;break;default:dt(s,r,Re,null,h,Y)}for(N in h)if(Y=h[N],X=c[N],h.hasOwnProperty(N)&&Y!==X&&(Y!=null||X!=null))switch(N){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:dt(s,r,N,Y,h,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in c)Y=c[Ee],c.hasOwnProperty(Ee)&&Y!=null&&!h.hasOwnProperty(Ee)&&dt(s,r,Ee,null,h,Y);for($ in h)if(Y=h[$],X=c[$],h.hasOwnProperty($)&&Y!==X&&(Y!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,r));break;default:dt(s,r,$,Y,h,X)}return;default:if(Ry(r)){for(var ht in c)Y=c[ht],c.hasOwnProperty(ht)&&Y!==void 0&&!h.hasOwnProperty(ht)&&f0(s,r,ht,void 0,h,Y);for(j in h)Y=h[j],X=c[j],!h.hasOwnProperty(j)||Y===X||Y===void 0&&X===void 0||f0(s,r,j,Y,h,X);return}}for(var V in c)Y=c[V],c.hasOwnProperty(V)&&Y!=null&&!h.hasOwnProperty(V)&&dt(s,r,V,null,h,Y);for(te in h)Y=h[te],X=c[te],!h.hasOwnProperty(te)||Y===X||Y==null&&X==null||dt(s,r,te,Y,h,X)}var p0=null,g0=null;function yg(s){return s.nodeType===9?s:s.ownerDocument}function TC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CC(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function m0(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var y0=null;function FI(){var s=window.event;return s&&s.type==="popstate"?s===y0?!1:(y0=s,!0):(y0=null,!1)}var wC=typeof setTimeout=="function"?setTimeout:void 0,UI=typeof clearTimeout=="function"?clearTimeout:void 0,EC=typeof Promise=="function"?Promise:void 0,HI=typeof queueMicrotask=="function"?queueMicrotask:typeof EC<"u"?function(s){return EC.resolve(null).then(s).catch(BI)}:wC;function BI(s){setTimeout(function(){throw s})}function dr(s){return s==="head"}function xC(s,r){var c=r,h=0,v=0;do{var b=c.nextSibling;if(s.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<h&&8>h){c=h;var E=s.ownerDocument;if(c&1&&qd(E.documentElement),c&2&&qd(E.body),c&4)for(c=E.head,qd(c),E=c.firstChild;E;){var I=E.nextSibling,N=E.nodeName;E[ad]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||c.removeChild(E),E=I}}if(v===0){s.removeChild(b),Jd(r);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:h=c.charCodeAt(0)-48;else h=0;c=b}while(c);Jd(r)}function v0(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":v0(c),Ty(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function VI(s,r,c,h){for(;s.nodeType===1;){var v=c;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[ad])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Qi(s.nextSibling),s===null)break}return null}function zI(s,r,c){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Qi(s.nextSibling),s===null))return null;return s}function A0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function GI(s,r){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")r();else{var h=function(){r(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Qi(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var b0=null;function MC(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return s;r--}else c==="/$"&&r++}s=s.previousSibling}return null}function RC(s,r,c){switch(r=yg(c),s){case"html":if(s=r.documentElement,!s)throw Error(n(452));return s;case"head":if(s=r.head,!s)throw Error(n(453));return s;case"body":if(s=r.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function qd(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ty(s)}var Li=new Map,IC=new Set;function vg(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ca=z.d;z.d={f:qI,r:$I,D:YI,C:WI,L:XI,m:KI,X:QI,S:ZI,M:JI};function qI(){var s=ca.f(),r=cg();return s||r}function $I(s){var r=Yl(s);r!==null&&r.tag===5&&r.type==="form"?ZS(r):ca.r(s)}var Ec=typeof document>"u"?null:document;function DC(s,r,c){var h=Ec;if(h&&typeof r=="string"&&r){var v=xi(r);v='link[rel="'+s+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),IC.has(v)||(IC.add(v),s={rel:s,crossOrigin:c,href:r},h.querySelector(v)===null&&(r=h.createElement("link"),dn(r,"link",s),Jt(r),h.head.appendChild(r)))}}function YI(s){ca.D(s),DC("dns-prefetch",s,null)}function WI(s,r){ca.C(s,r),DC("preconnect",s,r)}function XI(s,r,c){ca.L(s,r,c);var h=Ec;if(h&&s&&r){var v='link[rel="preload"][as="'+xi(r)+'"]';r==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+xi(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+xi(c.imageSizes)+'"]')):v+='[href="'+xi(s)+'"]';var b=v;switch(r){case"style":b=xc(s);break;case"script":b=Mc(s)}Li.has(b)||(s=y({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:s,as:r},c),Li.set(b,s),h.querySelector(v)!==null||r==="style"&&h.querySelector($d(b))||r==="script"&&h.querySelector(Yd(b))||(r=h.createElement("link"),dn(r,"link",s),Jt(r),h.head.appendChild(r)))}}function KI(s,r){ca.m(s,r);var c=Ec;if(c&&s){var h=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+xi(h)+'"][href="'+xi(s)+'"]',b=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Mc(s)}if(!Li.has(b)&&(s=y({rel:"modulepreload",href:s},r),Li.set(b,s),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Yd(b)))return}h=c.createElement("link"),dn(h,"link",s),Jt(h),c.head.appendChild(h)}}}function ZI(s,r,c){ca.S(s,r,c);var h=Ec;if(h&&s){var v=Wl(h).hoistableStyles,b=xc(s);r=r||"default";var E=v.get(b);if(!E){var I={loading:0,preload:null};if(E=h.querySelector($d(b)))I.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":r},c),(c=Li.get(b))&&_0(s,c);var N=E=h.createElement("link");Jt(N),dn(N,"link",s),N._p=new Promise(function($,j){N.onload=$,N.onerror=j}),N.addEventListener("load",function(){I.loading|=1}),N.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Ag(E,r,h)}E={type:"stylesheet",instance:E,count:1,state:I},v.set(b,E)}}}function QI(s,r){ca.X(s,r);var c=Ec;if(c&&s){var h=Wl(c).hoistableScripts,v=Mc(s),b=h.get(v);b||(b=c.querySelector(Yd(v)),b||(s=y({src:s,async:!0},r),(r=Li.get(v))&&S0(s,r),b=c.createElement("script"),Jt(b),dn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function JI(s,r){ca.M(s,r);var c=Ec;if(c&&s){var h=Wl(c).hoistableScripts,v=Mc(s),b=h.get(v);b||(b=c.querySelector(Yd(v)),b||(s=y({src:s,async:!0,type:"module"},r),(r=Li.get(v))&&S0(s,r),b=c.createElement("script"),Jt(b),dn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function kC(s,r,c,h){var v=(v=be.current)?vg(v):null;if(!v)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=xc(c.href),c=Wl(v).hoistableStyles,h=c.get(r),h||(h={type:"style",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=xc(c.href);var b=Wl(v).hoistableStyles,E=b.get(s);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,E),(b=v.querySelector($d(s)))&&!b._p&&(E.instance=b,E.state.loading=5),Li.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Li.set(s,c),b||jI(v,s,c,E.state))),r&&h===null)throw Error(n(528,""));return E}if(r&&h!==null)throw Error(n(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Mc(c),c=Wl(v).hoistableScripts,h=c.get(r),h||(h={type:"script",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function xc(s){return'href="'+xi(s)+'"'}function $d(s){return'link[rel="stylesheet"]['+s+"]"}function NC(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function jI(s,r,c,h){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=s.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),dn(r,"link",c),Jt(r),s.head.appendChild(r))}function Mc(s){return'[src="'+xi(s)+'"]'}function Yd(s){return"script[async]"+s}function LC(s,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var h=s.querySelector('style[data-href~="'+xi(c.href)+'"]');if(h)return r.instance=h,Jt(h),h;var v=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Jt(h),dn(h,"style",v),Ag(h,c.precedence,s),r.instance=h;case"stylesheet":v=xc(c.href);var b=s.querySelector($d(v));if(b)return r.state.loading|=4,r.instance=b,Jt(b),b;h=NC(c),(v=Li.get(v))&&_0(h,v),b=(s.ownerDocument||s).createElement("link"),Jt(b);var E=b;return E._p=new Promise(function(I,N){E.onload=I,E.onerror=N}),dn(b,"link",h),r.state.loading|=4,Ag(b,c.precedence,s),r.instance=b;case"script":return b=Mc(c.src),(v=s.querySelector(Yd(b)))?(r.instance=v,Jt(v),v):(h=c,(v=Li.get(b))&&(h=y({},c),S0(h,v)),s=s.ownerDocument||s,v=s.createElement("script"),Jt(v),dn(v,"link",h),s.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Ag(h,c.precedence,s));return r.instance}function Ag(s,r,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,b=v,E=0;E<h.length;E++){var I=h[E];if(I.dataset.precedence===r)b=I;else if(b!==v)break}b?b.parentNode.insertBefore(s,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(s,r.firstChild))}function _0(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function S0(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var bg=null;function PC(s,r,c){if(bg===null){var h=new Map,v=bg=new Map;v.set(c,h)}else v=bg,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),v=0;v<c.length;v++){var b=c[v];if(!(b[ad]||b[vn]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(r)||"";E=s+E;var I=h.get(E);I?I.push(b):h.set(E,[b])}}return h}function OC(s,r,c){s=s.ownerDocument||s,s.head.insertBefore(c,r==="title"?s.querySelector("head > title"):null)}function eD(s,r,c){if(c===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function FC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Wd=null;function tD(){}function nD(s,r,c){if(Wd===null)throw Error(n(475));var h=Wd;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var v=xc(c.href),b=s.querySelector($d(v));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=_g.bind(h),s.then(h,h)),r.state.loading|=4,r.instance=b,Jt(b);return}b=s.ownerDocument||s,c=NC(c),(v=Li.get(v))&&_0(c,v),b=b.createElement("link"),Jt(b);var E=b;E._p=new Promise(function(I,N){E.onload=I,E.onerror=N}),dn(b,"link",c),r.instance=b}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=_g.bind(h),s.addEventListener("load",r),s.addEventListener("error",r))}}function iD(){if(Wd===null)throw Error(n(475));var s=Wd;return s.stylesheets&&s.count===0&&T0(s,s.stylesheets),0<s.count?function(r){var c=setTimeout(function(){if(s.stylesheets&&T0(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(c)}}:null}function _g(){if(this.count--,this.count===0){if(this.stylesheets)T0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Sg=null;function T0(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Sg=new Map,r.forEach(sD,s),Sg=null,_g.call(s))}function sD(s,r){if(!(r.state.loading&4)){var c=Sg.get(s);if(c)var h=c.get(null);else{c=new Map,Sg.set(s,c);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var E=v[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),h=E)}h&&c.set(null,h)}v=r.instance,E=v.getAttribute("data-precedence"),b=c.get(E)||h,b===h&&c.set(null,v),c.set(E,v),this.count++,h=_g.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),b?b.parentNode.insertBefore(v,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),r.state.loading|=4}}var Xd={$$typeof:L,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function aD(s,r,c,h,v,b,E,I){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ay(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ay(0),this.hiddenUpdates=Ay(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function UC(s,r,c,h,v,b,E,I,N,$,j,te){return s=new aD(s,r,c,E,I,N,$,te),r=1,b===!0&&(r|=24),b=ii(3,null,null,r),s.current=b,b.stateNode=s,r=sv(),r.refCount++,s.pooledCache=r,r.refCount++,b.memoizedState={element:h,isDehydrated:c,cache:r},lv(b),s}function HC(s){return s?(s=ac,s):ac}function BC(s,r,c,h,v,b){v=HC(v),h.context===null?h.context=v:h.pendingContext=v,h=Ja(r),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),c=ja(s,h,r),c!==null&&(li(c,s,r),Cd(c,s,r))}function VC(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<r?c:r}}function C0(s,r){VC(s,r),(s=s.alternate)&&VC(s,r)}function zC(s){if(s.tag===13){var r=sc(s,67108864);r!==null&&li(r,s,67108864),C0(s,67108864)}}var Tg=!0;function rD(s,r,c,h){var v=O.T;O.T=null;var b=z.p;try{z.p=2,w0(s,r,c,h)}finally{z.p=b,O.T=v}}function oD(s,r,c,h){var v=O.T;O.T=null;var b=z.p;try{z.p=8,w0(s,r,c,h)}finally{z.p=b,O.T=v}}function w0(s,r,c,h){if(Tg){var v=E0(h);if(v===null)h0(s,r,h,Cg,c),qC(s,h);else if(cD(v,s,r,c,h))h.stopPropagation();else if(qC(s,h),r&4&&-1<lD.indexOf(s)){for(;v!==null;){var b=Yl(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=ao(b.pendingLanes);if(E!==0){var I=b;for(I.pendingLanes|=2,I.entangledLanes|=2;E;){var N=1<<31-ti(E);I.entanglements[1]|=N,E&=~N}_s(b),(rt&6)===0&&(og=ms()+500,Vd(0))}}break;case 13:I=sc(b,2),I!==null&&li(I,b,2),cg(),C0(b,2)}if(b=E0(h),b===null&&h0(s,r,h,Cg,c),b===v)break;v=b}v!==null&&h.stopPropagation()}else h0(s,r,h,null,c)}}function E0(s){return s=Dy(s),x0(s)}var Cg=null;function x0(s){if(Cg=null,s=$l(s),s!==null){var r=a(s);if(r===null)s=null;else{var c=r.tag;if(c===13){if(s=l(r),s!==null)return s;s=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Cg=s,null}function GC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(WM()){case i_:return 2;case s_:return 8;case mp:case XM:return 32;case a_:return 268435456;default:return 32}default:return 32}}var M0=!1,hr=null,fr=null,pr=null,Kd=new Map,Zd=new Map,gr=[],lD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qC(s,r){switch(s){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Kd.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(r.pointerId)}}function Qd(s,r,c,h,v,b){return s===null||s.nativeEvent!==b?(s={blockedOn:r,domEventName:c,eventSystemFlags:h,nativeEvent:b,targetContainers:[v]},r!==null&&(r=Yl(r),r!==null&&zC(r)),s):(s.eventSystemFlags|=h,r=s.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),s)}function cD(s,r,c,h,v){switch(r){case"focusin":return hr=Qd(hr,s,r,c,h,v),!0;case"dragenter":return fr=Qd(fr,s,r,c,h,v),!0;case"mouseover":return pr=Qd(pr,s,r,c,h,v),!0;case"pointerover":var b=v.pointerId;return Kd.set(b,Qd(Kd.get(b)||null,s,r,c,h,v)),!0;case"gotpointercapture":return b=v.pointerId,Zd.set(b,Qd(Zd.get(b)||null,s,r,c,h,v)),!0}return!1}function $C(s){var r=$l(s.target);if(r!==null){var c=a(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){s.blockedOn=r,nR(s.priority,function(){if(c.tag===13){var h=oi();h=by(h);var v=sc(c,h);v!==null&&li(v,c,h),C0(c,h)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function wg(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var c=E0(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Iy=h,c.target.dispatchEvent(h),Iy=null}else return r=Yl(c),r!==null&&zC(r),s.blockedOn=c,!1;r.shift()}return!0}function YC(s,r,c){wg(s)&&c.delete(r)}function uD(){M0=!1,hr!==null&&wg(hr)&&(hr=null),fr!==null&&wg(fr)&&(fr=null),pr!==null&&wg(pr)&&(pr=null),Kd.forEach(YC),Zd.forEach(YC)}function Eg(s,r){s.blockedOn===r&&(s.blockedOn=null,M0||(M0=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,uD)))}var xg=null;function WC(s){xg!==s&&(xg=s,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){xg===s&&(xg=null);for(var r=0;r<s.length;r+=3){var c=s[r],h=s[r+1],v=s[r+2];if(typeof h!="function"){if(x0(h||c)===null)continue;break}var b=Yl(c);b!==null&&(s.splice(r,3),r-=3,xv(b,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Jd(s){function r(N){return Eg(N,s)}hr!==null&&Eg(hr,s),fr!==null&&Eg(fr,s),pr!==null&&Eg(pr,s),Kd.forEach(r),Zd.forEach(r);for(var c=0;c<gr.length;c++){var h=gr[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<gr.length&&(c=gr[0],c.blockedOn===null);)$C(c),c.blockedOn===null&&gr.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],b=c[h+1],E=v[Vn]||null;if(typeof b=="function")E||WC(c);else if(E){var I=null;if(b&&b.hasAttribute("formAction")){if(v=b,E=b[Vn]||null)I=E.formAction;else if(x0(v)!==null)continue}else I=E.action;typeof I=="function"?c[h+1]=I:(c.splice(h,3),h-=3),WC(c)}}}function R0(s){this._internalRoot=s}Mg.prototype.render=R0.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(n(409));var c=r.current,h=oi();BC(c,h,s,r,null,null)},Mg.prototype.unmount=R0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;BC(s.current,2,null,s,null,null),cg(),r[ql]=null}};function Mg(s){this._internalRoot=s}Mg.prototype.unstable_scheduleHydration=function(s){if(s){var r=u_();s={blockedOn:null,target:s,priority:r};for(var c=0;c<gr.length&&r!==0&&r<gr[c].priority;c++);gr.splice(c,0,s),c===0&&$C(s)}};var XC=e.version;if(XC!=="19.1.0")throw Error(n(527,XC,"19.1.0"));z.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=d(r),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var dD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rg.isDisabled&&Rg.supportsFiber)try{nd=Rg.inject(dD),ei=Rg}catch{}}return sh.createRoot=function(s,r){if(!i(s))throw Error(n(299));var c=!1,h="",v=uT,b=dT,E=hT,I=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks)),r=UC(s,1,!1,null,null,c,h,v,b,E,I,null),s[ql]=r.current,d0(s),new R0(r)},sh.hydrateRoot=function(s,r,c){if(!i(s))throw Error(n(299));var h=!1,v="",b=uT,E=dT,I=hT,N=null,$=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks),c.formState!==void 0&&($=c.formState)),r=UC(s,1,!0,r,c??null,h,v,b,E,I,N,$),r.context=HC(null),c=r.current,h=oi(),h=by(h),v=Ja(h),v.callback=null,ja(c,v,h),c=h,r.current.lanes=c,sd(r,c),_s(r),s[ql]=r.current,d0(s),new Mg(r)},sh.version="19.1.0",sh}var ww;function CN(){if(ww)return B0.exports;ww=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),B0.exports=TN(),B0.exports}var wN=CN();const EN=iM(wN),xN=()=>q.jsx("header",{className:"bg-slate-900 shadow-lg border-b border-slate-700 sticky top-0 z-50",children:q.jsxs("div",{className:"container mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[q.jsx("div",{className:"flex items-center",children:q.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold",children:[q.jsx("span",{className:"text-gray-100",children:"boolean"}),q.jsx("span",{className:"text-red-500",children:"legal"})]})}),q.jsxs("span",{className:"text-xs sm:text-sm text-slate-500 text-right",children:["Powered by",q.jsx("br",{className:"xxs:hidden sm:hidden"})," UB Intelligence"]})]})}),MN="gemini-2.5-flash-preview-04-17",RN=`© ${new Date().getFullYear()} Boolean Legal. AI-powered assistance. Always consult with a human lawyer for definitive legal advice.`,IN=()=>q.jsx("footer",{className:"bg-slate-900 text-center py-3 sm:py-4 md:py-6 border-t border-slate-700",children:q.jsx("p",{className:"text-xs sm:text-sm text-slate-500 px-2",children:RN})});function Ub(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Gl=Ub();function sM(o){Gl=o}const aM=/[&<>"']/,DN=new RegExp(aM.source,"g"),rM=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,kN=new RegExp(rM.source,"g"),NN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ew=o=>NN[o];function Si(o,e){if(e){if(aM.test(o))return o.replace(DN,Ew)}else if(rM.test(o))return o.replace(kN,Ew);return o}const LN=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function PN(o){return o.replace(LN,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const ON=/(^|[^\[])\^/g;function gt(o,e){let t=typeof o=="string"?o:o.source;e=e||"";const n={replace:(i,a)=>{let l=typeof a=="string"?a:a.source;return l=l.replace(ON,"$1"),t=t.replace(i,l),n},getRegex:()=>new RegExp(t,e)};return n}function xw(o){try{o=encodeURI(o).replace(/%25/g,"%")}catch{return null}return o}const Mh={exec:()=>null};function Mw(o,e){const t=o.replace(/\|/g,(a,l,u)=>{let d=!1,f=l;for(;--f>=0&&u[f]==="\\";)d=!d;return d?"|":" |"}),n=t.split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function ah(o,e,t){const n=o.length;if(n===0)return"";let i=0;for(;i<n&&o.charAt(n-i-1)===e;)i++;return o.slice(0,n-i)}function FN(o,e){if(o.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<o.length;n++)if(o[n]==="\\")n++;else if(o[n]===e[0])t++;else if(o[n]===e[1]&&(t--,t<0))return n;return-1}function Rw(o,e,t,n){const i=e.href,a=e.title?Si(e.title):null,l=o[1].replace(/\\([\[\]])/g,"$1");if(o[0].charAt(0)!=="!"){n.state.inLink=!0;const u={type:"link",raw:t,href:i,title:a,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,u}return{type:"image",raw:t,href:i,title:a,text:Si(l)}}function UN(o,e){const t=o.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(i=>{const a=i.match(/^\s+/);if(a===null)return i;const[l]=a;return l.length>=n.length?i.slice(n.length):i}).join(`
`)}class wm{constructor(e){he(this,"options");he(this,"rules");he(this,"lexer");this.options=e||Gl}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:ah(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],i=UN(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const i=ah(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ah(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=ah(t[0],`
`).split(`
`),i="",a="";const l=[];for(;n.length>0;){let u=!1;const d=[];let f;for(f=0;f<n.length;f++)if(/^ {0,3}>/.test(n[f]))d.push(n[f]),u=!0;else if(!u)d.push(n[f]);else break;n=n.slice(f);const y=d.join(`
`),A=y.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}
${y}`:y,a=a?`${a}
${A}`:A;const _=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(A,l,!0),this.lexer.state.top=_,n.length===0)break;const S=l[l.length-1];if((S==null?void 0:S.type)==="code")break;if((S==null?void 0:S.type)==="blockquote"){const T=S,C=T.raw+`
`+n.join(`
`),x=this.blockquote(C);l[l.length-1]=x,i=i.substring(0,i.length-T.raw.length)+x.raw,a=a.substring(0,a.length-T.text.length)+x.text;break}else if((S==null?void 0:S.type)==="list"){const T=S,C=T.raw+`
`+n.join(`
`),x=this.list(C);l[l.length-1]=x,i=i.substring(0,i.length-S.raw.length)+x.raw,a=a.substring(0,a.length-T.raw.length)+x.raw,n=C.substring(l[l.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:l,text:a}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const i=n.length>1,a={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const l=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let u=!1;for(;e;){let d=!1,f="",y="";if(!(t=l.exec(e))||this.rules.block.hr.test(e))break;f=t[0],e=e.substring(f.length);let A=t[2].split(`
`,1)[0].replace(/^\t+/,D=>" ".repeat(3*D.length)),_=e.split(`
`,1)[0],S=!A.trim(),T=0;if(this.options.pedantic?(T=2,y=A.trimStart()):S?T=t[1].length+1:(T=t[2].search(/[^ ]/),T=T>4?1:T,y=A.slice(T),T+=t[1].length),S&&/^ *$/.test(_)&&(f+=_+`
`,e=e.substring(_.length+1),d=!0),!d){const D=new RegExp(`^ {0,${Math.min(3,T-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),k=new RegExp(`^ {0,${Math.min(3,T-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),L=new RegExp(`^ {0,${Math.min(3,T-1)}}(?:\`\`\`|~~~)`),U=new RegExp(`^ {0,${Math.min(3,T-1)}}#`);for(;e;){const F=e.split(`
`,1)[0];if(_=F,this.options.pedantic&&(_=_.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),L.test(_)||U.test(_)||D.test(_)||k.test(e))break;if(_.search(/[^ ]/)>=T||!_.trim())y+=`
`+_.slice(T);else{if(S||A.search(/[^ ]/)>=4||L.test(A)||U.test(A)||k.test(A))break;y+=`
`+_}!S&&!_.trim()&&(S=!0),f+=F+`
`,e=e.substring(F.length+1),A=_.slice(T)}}a.loose||(u?a.loose=!0:/\n *\n *$/.test(f)&&(u=!0));let C=null,x;this.options.gfm&&(C=/^\[[ xX]\] /.exec(y),C&&(x=C[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:f,task:!!C,checked:x,loose:!1,text:y,tokens:[]}),a.raw+=f}a.items[a.items.length-1].raw=a.items[a.items.length-1].raw.trimEnd(),a.items[a.items.length-1].text=a.items[a.items.length-1].text.trimEnd(),a.raw=a.raw.trimEnd();for(let d=0;d<a.items.length;d++)if(this.lexer.state.top=!1,a.items[d].tokens=this.lexer.blockTokens(a.items[d].text,[]),!a.loose){const f=a.items[d].tokens.filter(A=>A.type==="space"),y=f.length>0&&f.some(A=>/\n.*\n/.test(A.raw));a.loose=y}if(a.loose)for(let d=0;d<a.items.length;d++)a.items[d].loose=!0;return a}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:a}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=Mw(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),a=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],l={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const u of i)/^ *-+: *$/.test(u)?l.align.push("right"):/^ *:-+: *$/.test(u)?l.align.push("center"):/^ *:-+ *$/.test(u)?l.align.push("left"):l.align.push(null);for(let u=0;u<n.length;u++)l.header.push({text:n[u],tokens:this.lexer.inline(n[u]),header:!0,align:l.align[u]});for(const u of a)l.rows.push(Mw(u,l.header.length).map((d,f)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:l.align[f]})));return l}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Si(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const l=ah(n.slice(0,-1),"\\");if((n.length-l.length)%2===0)return}else{const l=FN(t[2],"()");if(l>-1){const d=(t[0].indexOf("!")===0?5:4)+t[1].length+l;t[2]=t[2].substring(0,l),t[0]=t[0].substring(0,d).trim(),t[3]=""}}let i=t[2],a="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);l&&(i=l[1],a=l[3])}else a=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),Rw(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const i=(n[2]||n[1]).replace(/\s+/g," "),a=t[i.toLowerCase()];if(!a){const l=n[0].charAt(0);return{type:"text",raw:l,text:l}}return Rw(n,a,n[0],this.lexer)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const l=[...i[0]].length-1;let u,d,f=l,y=0;const A=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(A.lastIndex=0,t=t.slice(-1*e.length+l);(i=A.exec(t))!=null;){if(u=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!u)continue;if(d=[...u].length,i[3]||i[4]){f+=d;continue}else if((i[5]||i[6])&&l%3&&!((l+d)%3)){y+=d;continue}if(f-=d,f>0)continue;d=Math.min(d,d+f+y);const _=[...i[0]][0].length,S=e.slice(0,l+i.index+_+d);if(Math.min(l,d)%2){const C=S.slice(1,-1);return{type:"em",raw:S,text:C,tokens:this.lexer.inlineTokens(C)}}const T=S.slice(2,-2);return{type:"strong",raw:S,text:T,tokens:this.lexer.inlineTokens(T)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const i=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return i&&a&&(n=n.substring(1,n.length-1)),n=Si(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=Si(t[1]),i="mailto:"+n):(n=Si(t[1]),i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let i,a;if(t[2]==="@")i=Si(t[0]),a="mailto:"+i;else{let l;do l=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(l!==t[0]);i=Si(t[0]),t[1]==="www."?a="http://"+t[0]:a=t[0]}return{type:"link",raw:t[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return this.lexer.state.inRawBlock?n=t[0]:n=Si(t[0]),{type:"text",raw:t[0],text:n}}}}const HN=/^(?: *(?:\n|$))+/,BN=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,VN=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hp=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,zN=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,oM=/(?:[*+-]|\d{1,9}[.)])/,lM=gt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,oM).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Hb=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,GN=/^[^\n]+/,Bb=/(?!\s*\])(?:\\.|[^\[\]\\])+/,qN=gt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Bb).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),$N=gt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,oM).getRegex(),dy="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Vb=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,YN=gt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Vb).replace("tag",dy).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),cM=gt(Hb).replace("hr",hp).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dy).getRegex(),WN=gt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",cM).getRegex(),zb={blockquote:WN,code:BN,def:qN,fences:VN,heading:zN,hr:hp,html:YN,lheading:lM,list:$N,newline:HN,paragraph:cM,table:Mh,text:GN},Iw=gt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hp).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dy).getRegex(),XN={...zb,table:Iw,paragraph:gt(Hb).replace("hr",hp).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Iw).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dy).getRegex()},KN={...zb,html:gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Vb).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Mh,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gt(Hb).replace("hr",hp).replace("heading",` *#{1,6} *[^
]`).replace("lheading",lM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},uM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ZN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dM=/^( {2,}|\\)\n(?!\s*$)/,QN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,fp="\\p{P}\\p{S}",JN=gt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,fp).getRegex(),jN=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,eL=gt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,fp).getRegex(),tL=gt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,fp).getRegex(),nL=gt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,fp).getRegex(),iL=gt(/\\([punct])/,"gu").replace(/punct/g,fp).getRegex(),sL=gt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),aL=gt(Vb).replace("(?:-->|$)","-->").getRegex(),rL=gt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",aL).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Em=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,oL=gt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Em).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hM=gt(/^!?\[(label)\]\[(ref)\]/).replace("label",Em).replace("ref",Bb).getRegex(),fM=gt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Bb).getRegex(),lL=gt("reflink|nolink(?!\\()","g").replace("reflink",hM).replace("nolink",fM).getRegex(),Gb={_backpedal:Mh,anyPunctuation:iL,autolink:sL,blockSkip:jN,br:dM,code:ZN,del:Mh,emStrongLDelim:eL,emStrongRDelimAst:tL,emStrongRDelimUnd:nL,escape:uM,link:oL,nolink:fM,punctuation:JN,reflink:hM,reflinkSearch:lL,tag:rL,text:QN,url:Mh},cL={...Gb,link:gt(/^!?\[(label)\]\((.*?)\)/).replace("label",Em).getRegex(),reflink:gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Em).getRegex()},ob={...Gb,escape:gt(uM).replace("])","~|])").getRegex(),url:gt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},uL={...ob,br:gt(dM).replace("{2,}","*").getRegex(),text:gt(ob.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Lg={normal:zb,gfm:XN,pedantic:KN},rh={normal:Gb,gfm:ob,breaks:uL,pedantic:cL};class Gs{constructor(e){he(this,"tokens");he(this,"options");he(this,"state");he(this,"tokenizer");he(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Gl,this.options.tokenizer=this.options.tokenizer||new wm,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Lg.normal,inline:rh.normal};this.options.pedantic?(t.block=Lg.pedantic,t.inline=rh.pedantic):this.options.gfm&&(t.block=Lg.gfm,this.options.breaks?t.inline=rh.breaks:t.inline=rh.gfm),this.tokenizer.rules=t}static get rules(){return{block:Lg,inline:rh}}static lex(e,t){return new Gs(t).lex(e)}static lexInline(e,t){return new Gs(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(u,d,f)=>d+"    ".repeat(f.length));let i,a,l;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(u=>(i=u.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),a=t[t.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+i.raw,a.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),a=t[t.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+i.raw,a.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(l=e,this.options.extensions&&this.options.extensions.startBlock){let u=1/0;const d=e.slice(1);let f;this.options.extensions.startBlock.forEach(y=>{f=y.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(this.state.top&&(i=this.tokenizer.paragraph(l))){a=t[t.length-1],n&&(a==null?void 0:a.type)==="paragraph"?(a.raw+=`
`+i.raw,a.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):t.push(i),n=l.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),a=t[t.length-1],a&&a.type==="text"?(a.raw+=`
`+i.raw,a.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,i,a,l=e,u,d,f;if(this.tokens.links){const y=Object.keys(this.tokens.links);if(y.length>0)for(;(u=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)y.includes(u[0].slice(u[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,u.index)+"["+"a".repeat(u[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(u=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,u.index)+"["+"a".repeat(u[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(u=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,u.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(d||(f=""),d=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(y=>(n=y.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,l,f)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let y=1/0;const A=e.slice(1);let _;this.options.extensions.startInline.forEach(S=>{_=S.call({lexer:this},A),typeof _=="number"&&_>=0&&(y=Math.min(y,_))}),y<1/0&&y>=0&&(a=e.substring(0,y+1))}if(n=this.tokenizer.inlineText(a)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),d=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(e){const y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return t}}class xm{constructor(e){he(this,"options");he(this,"parser");this.options=e||Gl}space(e){return""}code({text:e,lang:t,escaped:n}){var l;const i=(l=(t||"").match(/^\S*/))==null?void 0:l[0],a=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+Si(i)+'">'+(n?a:Si(a,!0))+`</code></pre>
`:"<pre><code>"+(n?a:Si(a,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let i="";for(let u=0;u<e.items.length;u++){const d=e.items[u];i+=this.listitem(d)}const a=t?"ol":"ul",l=t&&n!==1?' start="'+n+'"':"";return"<"+a+l+`>
`+i+"</"+a+`>
`}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let a=0;a<e.header.length;a++)n+=this.tablecell(e.header[a]);t+=this.tablerow({text:n});let i="";for(let a=0;a<e.rows.length;a++){const l=e.rows[a];n="";for(let u=0;u<l.length;u++)n+=this.tablecell(l[u]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const i=this.parser.parseInline(n),a=xw(e);if(a===null)return i;e=a;let l='<a href="'+e+'"';return t&&(l+=' title="'+t+'"'),l+=">"+i+"</a>",l}image({href:e,title:t,text:n}){const i=xw(e);if(i===null)return n;e=i;let a=`<img src="${e}" alt="${n}"`;return t&&(a+=` title="${t}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class qb{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class qs{constructor(e){he(this,"options");he(this,"renderer");he(this,"textRenderer");this.options=e||Gl,this.options.renderer=this.options.renderer||new xm,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new qb}static parse(e,t){return new qs(t).parse(e)}static parseInline(e,t){return new qs(t).parseInline(e)}parse(e,t=!0){let n="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const u=a,d=this.options.extensions.renderers[u.type].call({parser:this},u);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){n+=d||"";continue}}const l=a;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let u=l,d=this.renderer.text(u);for(;i+1<e.length&&e[i+1].type==="text";)u=e[++i],d+=`
`+this.renderer.text(u);t?n+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d}]}):n+=d;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){n+=u||"";continue}}const l=a;switch(l.type){case"escape":{n+=t.text(l);break}case"html":{n+=t.html(l);break}case"link":{n+=t.link(l);break}case"image":{n+=t.image(l);break}case"strong":{n+=t.strong(l);break}case"em":{n+=t.em(l);break}case"codespan":{n+=t.codespan(l);break}case"br":{n+=t.br(l);break}case"del":{n+=t.del(l);break}case"text":{n+=t.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}}class Rh{constructor(e){he(this,"options");this.options=e||Gl}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}he(Rh,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Ya,pM,lb,gM;class dL{constructor(...e){M(this,Ya);he(this,"defaults",Ub());he(this,"options",this.setOptions);he(this,"parse",R(this,Ya,lb).call(this,Gs.lex,qs.parse));he(this,"parseInline",R(this,Ya,lb).call(this,Gs.lexInline,qs.parseInline));he(this,"Parser",qs);he(this,"Renderer",xm);he(this,"TextRenderer",qb);he(this,"Lexer",Gs);he(this,"Tokenizer",wm);he(this,"Hooks",Rh);this.use(...e)}walkTokens(e,t){var i,a;let n=[];for(const l of e)switch(n=n.concat(t.call(this,l)),l.type){case"table":{const u=l;for(const d of u.header)n=n.concat(this.walkTokens(d.tokens,t));for(const d of u.rows)for(const f of d)n=n.concat(this.walkTokens(f.tokens,t));break}case"list":{const u=l;n=n.concat(this.walkTokens(u.items,t));break}default:{const u=l;(a=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&a[u.type]?this.defaults.extensions.childTokens[u.type].forEach(d=>{const f=u[d].flat(1/0);n=n.concat(this.walkTokens(f,t))}):u.tokens&&(n=n.concat(this.walkTokens(u.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const l=t.renderers[a.name];l?t.renderers[a.name]=function(...u){let d=a.renderer.apply(this,u);return d===!1&&(d=l.apply(this,u)),d}:t.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const l=t[a.level];l?l.unshift(a.tokenizer):t[a.level]=[a.tokenizer],a.start&&(a.level==="block"?t.startBlock?t.startBlock.push(a.start):t.startBlock=[a.start]:a.level==="inline"&&(t.startInline?t.startInline.push(a.start):t.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(t.childTokens[a.name]=a.childTokens)}),i.extensions=t),n.renderer){const a=this.defaults.renderer||new xm(this.defaults);for(const l in n.renderer){if(!(l in a))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;const u=l;let d=n.renderer[u];n.useNewRenderer||(d=R(this,Ya,pM).call(this,d,u,a));const f=a[u];a[u]=(...y)=>{let A=d.apply(a,y);return A===!1&&(A=f.apply(a,y)),A||""}}i.renderer=a}if(n.tokenizer){const a=this.defaults.tokenizer||new wm(this.defaults);for(const l in n.tokenizer){if(!(l in a))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;const u=l,d=n.tokenizer[u],f=a[u];a[u]=(...y)=>{let A=d.apply(a,y);return A===!1&&(A=f.apply(a,y)),A}}i.tokenizer=a}if(n.hooks){const a=this.defaults.hooks||new Rh;for(const l in n.hooks){if(!(l in a))throw new Error(`hook '${l}' does not exist`);if(l==="options")continue;const u=l,d=n.hooks[u],f=a[u];Rh.passThroughHooks.has(l)?a[u]=y=>{if(this.defaults.async)return Promise.resolve(d.call(a,y)).then(_=>f.call(a,_));const A=d.call(a,y);return f.call(a,A)}:a[u]=(...y)=>{let A=d.apply(a,y);return A===!1&&(A=f.apply(a,y)),A}}i.hooks=a}if(n.walkTokens){const a=this.defaults.walkTokens,l=n.walkTokens;i.walkTokens=function(u){let d=[];return d.push(l.call(this,u)),a&&(d=d.concat(a.call(this,u))),d}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Gs.lex(e,t??this.defaults)}parser(e,t){return qs.parse(e,t??this.defaults)}}Ya=new WeakSet,pM=function(e,t,n){switch(t){case"heading":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,n.parser.parseInline(i.tokens),i.depth,PN(n.parser.parseInline(i.tokens,n.parser.textRenderer)))};case"code":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text,i.lang,!!i.escaped)};case"table":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);let a="",l="";for(let d=0;d<i.header.length;d++)l+=this.tablecell({text:i.header[d].text,tokens:i.header[d].tokens,header:!0,align:i.align[d]});a+=this.tablerow({text:l});let u="";for(let d=0;d<i.rows.length;d++){const f=i.rows[d];l="";for(let y=0;y<f.length;y++)l+=this.tablecell({text:f[y].text,tokens:f[y].tokens,header:!1,align:i.align[y]});u+=this.tablerow({text:l})}return e.call(this,a,u)};case"blockquote":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);const a=this.parser.parse(i.tokens);return e.call(this,a)};case"list":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);const a=i.ordered,l=i.start,u=i.loose;let d="";for(let f=0;f<i.items.length;f++){const y=i.items[f],A=y.checked,_=y.task;let S="";if(y.task){const T=this.checkbox({checked:!!A});u?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=T+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=T+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:T+" "}):S+=T+" "}S+=this.parser.parse(y.tokens,u),d+=this.listitem({type:"list_item",raw:S,text:S,task:_,checked:!!A,loose:u,tokens:y.tokens})}return e.call(this,d,a,l)};case"html":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text,i.block)};case"paragraph":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"escape":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)};case"link":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.href,i.title,this.parser.parseInline(i.tokens))};case"image":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.href,i.title,i.text)};case"strong":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"em":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"codespan":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)};case"del":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"text":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)}}return e},lb=function(e,t){return(n,i)=>{const a={...i},l={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(l.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),l.async=!0);const u=R(this,Ya,gM).call(this,!!l.silent,!!l.async);if(typeof n>"u"||n===null)return u(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(l.hooks&&(l.hooks.options=l),l.async)return Promise.resolve(l.hooks?l.hooks.preprocess(n):n).then(d=>e(d,l)).then(d=>l.hooks?l.hooks.processAllTokens(d):d).then(d=>l.walkTokens?Promise.all(this.walkTokens(d,l.walkTokens)).then(()=>d):d).then(d=>t(d,l)).then(d=>l.hooks?l.hooks.postprocess(d):d).catch(u);try{l.hooks&&(n=l.hooks.preprocess(n));let d=e(n,l);l.hooks&&(d=l.hooks.processAllTokens(d)),l.walkTokens&&this.walkTokens(d,l.walkTokens);let f=t(d,l);return l.hooks&&(f=l.hooks.postprocess(f)),f}catch(d){return u(d)}}},gM=function(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Si(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}};const Fl=new dL;function tt(o,e){return Fl.parse(o,e)}tt.options=tt.setOptions=function(o){return Fl.setOptions(o),tt.defaults=Fl.defaults,sM(tt.defaults),tt};tt.getDefaults=Ub;tt.defaults=Gl;tt.use=function(...o){return Fl.use(...o),tt.defaults=Fl.defaults,sM(tt.defaults),tt};tt.walkTokens=function(o,e){return Fl.walkTokens(o,e)};tt.parseInline=Fl.parseInline;tt.Parser=qs;tt.parser=qs.parse;tt.Renderer=xm;tt.TextRenderer=qb;tt.Lexer=Gs;tt.lexer=Gs.lex;tt.Tokenizer=wm;tt.Hooks=Rh;tt.parse=tt;tt.options;tt.setOptions;tt.use;tt.walkTokens;tt.parseInline;qs.parse;Gs.lex;var Gi=(o=>(o.VENTURE_CAPITAL="Venture Capital & Startup Advisory",o.MERGERS_ACQUISITIONS="Mergers & Acquisitions (M&A)",o.REGULATORY_GUIDANCE="Regulatory Guidance",o.INTELLECTUAL_PROPERTY="Intellectual Property, Media & Technology",o.VIRTUAL_GENERAL_COUNSEL="Virtual General Counsel Services",o.LEGAL_TECH_SOLUTIONS="Legal Tech Solutions",o.CASE_LAW_ANALYSIS="Case Law & Judgment Analysis",o))(Gi||{}),Mm=(o=>(o.GENERAL_QUERY="General Legal Q&A",o.DRAFT_DOCUMENT="Draft Document / Clause",o.SUMMARIZE_LEGAL_CONCEPT="Summarize Legal Concept",o.LEGAL_RESEARCH="Legal Research & Updates",o.COMPLIANCE_CHECKLIST="Compliance Checklist/Guidance",o.ANALYZE_CONTRACT_RISKS="Analyze Contract for Risks & Issues",o.REVIEW_COMPLIANCE_AGAINST_DOCUMENT="Review Document for Compliance",o.SUMMARIZE_UPLOADED_DOCUMENT_KEY_POINTS="Summarize Uploaded Document (Key Points)",o.EXTRACT_DEFINITIONS_OBLIGATIONS_FROM_DOCUMENT="Extract Definitions & Obligations from Document",o))(Mm||{}),cb=(o=>(o.ACCURACY="Accuracy Issue",o.CLARITY="Clarity Needed",o.MISSING_INFO="Missing Information",o.SUGGESTION="Suggestion",o.POSITIVE="Positive Feedback",o.OTHER="Other",o))(cb||{});const hL=({source:o,index:e})=>q.jsx("li",{className:"mb-1 last:mb-0",children:q.jsxs("a",{href:o.web.uri,target:"_blank",rel:"noopener noreferrer",className:"text-red-300 hover:text-red-200 hover:underline break-all text-[0.7rem] sm:text-xs",title:o.web.title||o.web.uri,children:[e+1,". ",o.web.title||o.web.uri]})},o.web.uri||e),fL=({message:o})=>{const[e,t]=Ve.useState("");return Ve.useEffect(()=>{tt.setOptions({gfm:!0,breaks:!0}),t(tt.parse(o.queryText))},[o.queryText]),q.jsx("div",{className:"flex justify-end mb-3 sm:mb-4 group animate-fade-in-slide-up",children:q.jsxs("div",{className:"bg-red-600 text-white p-2 sm:p-3 rounded-l-xl rounded-tr-xl shadow-md max-w-[85%] sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl",children:[q.jsx("div",{className:"prose prose-sm md:prose-base prose-invert max-w-none text-white",dangerouslySetInnerHTML:{__html:e}}),o.filesInfo&&o.filesInfo.length>0&&q.jsxs("div",{className:"mt-1.5 sm:mt-2 pt-1.5 sm:pt-2 border-t border-red-400/50",children:[q.jsx("p",{className:"text-[0.7rem] sm:text-xs font-medium text-red-200 mb-0.5 sm:mb-1",children:"Attached:"}),q.jsx("ul",{className:"list-none pl-0 space-y-0.5",children:o.filesInfo.map(n=>q.jsxs("li",{className:"text-[0.7rem] sm:text-xs text-red-100 break-all",children:["📄 ",n.name," (",(n.size/1024).toFixed(1)," KB)"]},n.name))})]}),q.jsx("p",{className:"text-[0.65rem] sm:text-xs text-red-200/80 mt-1.5 sm:mt-2 text-right",children:new Date(o.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})},pL=({message:o})=>{const[e,t]=Ve.useState(""),[n,i]=Ve.useState(!1),[a,l]=Ve.useState(!1),[u,d]=Ve.useState(cb.ACCURACY),[f,y]=Ve.useState(""),[A,_]=Ve.useState(!1);Ve.useEffect(()=>{if(o.text){tt.setOptions({gfm:!0,breaks:!0});const x=tt.parse(o.text);t(x)}else t("")},[o.text]);const S=()=>i(!n),T=x=>{console.log(`Feedback for AI message ID ${o.id}: ${x}`),alert("Thank you for your feedback!")},C=x=>{x.preventDefault(),console.log({messageId:o.id,category:u,comment:f}),_(!0),l(!1),setTimeout(()=>_(!1),3e3)};return q.jsx("div",{className:"flex justify-start mb-3 sm:mb-4 group animate-fade-in-slide-up",children:q.jsxs("div",{className:"bg-slate-700 p-2 sm:p-3 rounded-r-xl rounded-tl-xl shadow-md max-w-[85%] sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl",children:[e?q.jsx("div",{className:"prose prose-sm md:prose-base prose-invert ai-message-enhanced-spacing max-w-none text-slate-100 leading-relaxed",dangerouslySetInnerHTML:{__html:e}}):q.jsx("p",{className:"text-slate-400",children:"AI response processing..."}),o.sources&&o.sources.length>0&&q.jsxs("div",{className:"mt-2 sm:mt-3 pt-1.5 sm:pt-2 border-t border-slate-600",children:[q.jsxs("button",{onClick:S,"aria-expanded":n,"aria-controls":`web-search-sources-${o.id}`,className:"w-full flex items-center justify-between text-left text-[0.7rem] sm:text-xs font-semibold mb-1 text-red-400 hover:text-red-300 focus:outline-none",children:[q.jsxs("span",{children:["Web Search Sources (",o.sources.length,")"]}),q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:`w-2.5 h-2.5 sm:w-3 sm:h-3 transition-transform duration-200 ${n?"transform rotate-180":""}`,children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),n&&q.jsx("div",{id:`web-search-sources-${o.id}`,className:"mt-1",children:q.jsx("ul",{className:"list-none pl-0 space-y-0.5",children:o.sources.map((x,D)=>x.web&&x.web.uri?q.jsx(hL,{source:x,index:D},D):null)})})]}),q.jsxs("div",{className:"mt-1.5 sm:mt-2 pt-1.5 sm:pt-2 border-t border-slate-600/50 flex items-center justify-between",children:[q.jsx("p",{className:"text-[0.65rem] sm:text-xs text-slate-400/80",children:new Date(o.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),!o.text.startsWith("Error:")&&q.jsx("div",{className:"flex space-x-1 sm:space-x-1.5 items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:A?q.jsx("span",{className:"text-[0.7rem] sm:text-xs text-green-400",children:"Thanks!"}):q.jsxs(q.Fragment,{children:[q.jsx("button",{onClick:()=>T("helpful"),className:"p-0.5 sm:p-1 rounded hover:bg-slate-600 transition-all duration-150 hover:scale-110 active:scale-95","aria-label":"Helpful",children:q.jsx("span",{className:"text-xs sm:text-sm",children:"👍"})}),q.jsx("button",{onClick:()=>T("unhelpful"),className:"p-0.5 sm:p-1 rounded hover:bg-slate-600 transition-all duration-150 hover:scale-110 active:scale-95","aria-label":"Not helpful",children:q.jsx("span",{className:"text-xs sm:text-sm",children:"👎"})}),q.jsx("button",{onClick:()=>l(!a),className:"p-0.5 sm:p-1 rounded hover:bg-slate-600 text-[0.65rem] sm:text-xs text-slate-400 hover:text-slate-200 transition-all duration-150 hover:scale-110 active:scale-95","aria-label":"Detailed feedback",children:a?"Cancel":"More"})]})})]}),a&&!A&&q.jsxs("form",{onSubmit:C,className:"space-y-1.5 sm:space-y-2 mt-1.5 sm:mt-2 p-1.5 sm:p-2 bg-slate-600/70 rounded-md text-[0.7rem] sm:text-xs",id:`detailed-feedback-form-${o.id}`,children:[q.jsx("select",{id:`feedbackCategory-${o.id}`,value:u,onChange:x=>d(x.target.value),className:"w-full p-1 sm:p-1.5 bg-slate-700 border border-slate-500 rounded-md focus:ring-red-500 focus:border-red-500 text-gray-100 text-[0.7rem] sm:text-xs",children:Object.values(cb).map(x=>q.jsx("option",{value:x,children:x},x))}),q.jsx("textarea",{id:`feedbackComment-${o.id}`,rows:2,value:f,onChange:x=>y(x.target.value),placeholder:"Optional comments...",className:"w-full p-1 sm:p-1.5 bg-slate-700 border border-slate-500 rounded-md focus:ring-red-500 focus:border-red-500 text-gray-100 placeholder-slate-400 resize-y text-[0.7rem] sm:text-xs"}),q.jsx("button",{type:"submit",className:"px-1.5 py-0.5 sm:px-2 sm:py-1 font-medium rounded-md bg-red-600 hover:bg-red-700 text-white focus:outline-none text-[0.7rem] sm:text-xs transition-colors",children:"Submit"})]})]})})},gL=({message:o})=>q.jsx("div",{className:"my-2 sm:my-3 text-center animate-fade-in-slide-up",children:q.jsxs("span",{className:"inline-block bg-slate-700 text-slate-300 text-[0.65rem] sm:text-xs px-2 py-0.5 sm:px-3 sm:py-1 rounded-full shadow",children:[o.text," – ",q.jsx("span",{className:"text-slate-400",children:new Date(o.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),mL=({messages:o})=>{const e=Ve.useRef(null);return Ve.useEffect(()=>{var t;(t=e.current)==null||t.scrollIntoView({behavior:"smooth"})},[o]),!o||o.length===0?q.jsx("div",{className:"text-center text-slate-500 py-6 sm:py-10 animate-fade-in",children:q.jsx("p",{className:"text-sm",children:"No messages in this chat yet. Send one to start!"})}):q.jsxs("div",{className:"px-1 sm:px-2 md:px-4",children:[o.map(t=>t.role==="user"?q.jsx(fL,{message:t},t.id):t.role==="ai"?q.jsx(pL,{message:t},t.id):t.role==="system"?q.jsx(gL,{message:t},t.id):null),q.jsx("div",{ref:e})]})},yL=()=>q.jsxs("div",{className:"flex justify-center items-center py-10","aria-label":"Loading response",children:[q.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-500"}),q.jsx("p",{className:"ml-4 text-xl text-slate-300",children:"AI is processing your request..."})]}),vL=({message:o})=>q.jsx("div",{className:"my-6 p-4 bg-red-700/20 border border-red-600/50 text-red-300 rounded-md shadow-md",role:"alert",children:q.jsxs("div",{className:"flex items-center",children:[q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 mr-3 text-red-400 flex-shrink-0",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),q.jsxs("div",{children:[q.jsx("p",{className:"font-semibold text-red-200",children:"Error"}),q.jsx("p",{className:"text-sm",children:o})]})]})}),AL=({sessions:o,activeSessionId:e,onLoadChat:t,onNewChat:n,onDeleteChat:i,onRenameChat:a,isOpen:l,onCloseRequest:u})=>{const[d,f]=Ve.useState(null),[y,A]=Ve.useState(""),_=C=>{f(C.id),A(C.title)},S=C=>{y.trim()&&a(C,y.trim()),f(null),A("")},T=(C,x)=>{window.confirm(`Are you sure you want to delete the chat "${x}"? This action cannot be undone.`)&&i(C)};return q.jsx("div",{className:`
        bg-slate-800 border-r border-slate-700 flex flex-col h-full shadow-lg z-40
        transition-all duration-300 ease-in-out
        ${l?"p-2 sm:p-3 w-full sm:w-60 md:w-72 lg:w-80":"w-0 p-0 overflow-hidden"}
      `,"aria-hidden":!l,children:l&&q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3 pb-2 sm:pb-3 border-b border-slate-700",children:[q.jsx("h2",{className:"text-md sm:text-lg font-semibold text-white ml-1",children:"Chat History"}),q.jsx("button",{onClick:u,className:"p-1 sm:p-1.5 text-slate-400 hover:text-red-400 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 transition-transform duration-150 hover:scale-110 active:scale-95","aria-label":"Close chat history",title:"Close chat history",children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 sm:w-5 sm:h-5",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})})]}),q.jsx("div",{className:"mb-2 sm:mb-3",children:q.jsx("button",{onClick:n,className:"w-full px-2 py-2 sm:px-3 sm:py-2.5 text-xs sm:text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition-all duration-150 hover:scale-105 active:scale-95",children:"+ New Chat"})}),q.jsxs("nav",{className:"flex-grow overflow-y-auto space-y-1 -mr-1 pr-1",children:[" ",o.length===0&&q.jsx("p",{className:"text-xs text-slate-500 text-center py-4",children:"No chat history yet."}),o.map(C=>q.jsx("div",{className:`group p-2 sm:p-2.5 rounded-md cursor-pointer transition-all duration-200 ease-in-out ${e===C.id?"bg-slate-700 border-l-2 border-red-500":"hover:bg-slate-700/60 hover:shadow-md hover:-translate-y-px"}`,children:d===C.id?q.jsxs("div",{className:"flex items-center",children:[q.jsx("input",{type:"text",value:y,onChange:x=>A(x.target.value),onBlur:()=>S(C.id),onKeyDown:x=>x.key==="Enter"&&S(C.id),className:"flex-grow p-1 text-xs sm:text-sm bg-slate-600 text-white rounded-md border border-slate-500 focus:ring-1 focus:ring-red-500",autoFocus:!0}),q.jsx("button",{onClick:()=>S(C.id),className:"ml-1 p-1 text-green-400 hover:text-green-300 transition-transform duration-150 hover:scale-110",title:"Save",children:"✓"})]}):q.jsxs("div",{className:"flex items-center justify-between",onClick:()=>t(C.id),children:[q.jsxs("div",{className:"flex-grow truncate",children:[q.jsx("p",{className:`text-xs sm:text-sm font-medium truncate ${e===C.id?"text-red-300":"text-slate-200"}`,title:C.title,children:C.title}),q.jsx("p",{className:"text-[0.65rem] sm:text-xs text-slate-400",children:new Date(C.updatedAt).toLocaleString([],{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),q.jsxs("div",{className:"flex-shrink-0 space-x-0.5 sm:space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[q.jsx("button",{onClick:x=>{x.stopPropagation(),_(C)},className:"p-0.5 sm:p-1 text-slate-400 hover:text-slate-200 transition-transform duration-150 hover:scale-110","aria-label":"Rename chat",title:"Rename",children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-3.5 h-3.5 sm:w-4 sm:h-4",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}),q.jsx("button",{onClick:x=>{x.stopPropagation(),T(C.id,C.title)},className:"p-0.5 sm:p-1 text-red-400 hover:text-red-300 transition-transform duration-150 hover:scale-110","aria-label":"Delete chat",title:"Delete",children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-3.5 h-3.5 sm:w-4 sm:h-4",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c1.153 0 2.243.462 3.032 1.214a48.09 48.09 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})]})},C.id))]}),q.jsx("div",{className:"text-center text-[0.65rem] sm:text-xs text-slate-600 pt-2 sm:pt-3 mt-auto border-t border-slate-700",children:"Chat history is stored locally."})]})})},bL={[Gi.VENTURE_CAPITAL]:["What is venture capital (VC) financing and how does it work in India?","What are the typical stages of startup funding (Seed, Series A, B, C)?","Explain the role and expectations of a VC firm post-investment.","Key differences between Angel Investors, Micro VCs, and larger VC funds?","What is a Term Sheet and what are its binding/non-binding provisions?","Describe the due diligence process from a VC's perspective in India.","Common valuation methodologies for early-stage startups in India?","How does equity dilution impact founders and early employees?","What are the standard rights VCs seek in Indian deals (e.g., information, board seat)?","What is a capitalization table (cap table) and why is it crucial?","What is the difference between pre-money and post-money valuation?","What are the common mistakes founders make when pitching to VCs?","What is a venture debt and how does it differ from equity financing?","What are alternative funding options for startups in India besides VC?","What are the pros and cons of bootstrapping vs. seeking VC funding?","Explain the concept of 'dry powder' in VC context.","What is a 'lead investor' and their role in a funding round?","What are current trends in the Indian VC landscape?","How long does a typical VC funding round take from start to finish?","What are the legal costs associated with a VC funding round?","What are the essential clauses in a Term Sheet for an Indian startup?","Key provisions to negotiate in a Shareholders' Agreement (SHA)?","Key provisions in a Share Subscription Agreement (SSA)?","Importance of 'Representations and Warranties' by founders?","Explain 'Conditions Precedent' (CPs) and 'Conditions Subsequent' (CSs) in funding.","What are 'Pre-emptive Rights' and 'Right of First Refusal' (ROFR)?","Difference between 'Drag-Along' and 'Tag-Along' rights?","Explain 'Anti-Dilution Protection': Full Ratchet vs. Broad-Based Weighted Average.","What is a 'Liquidation Preference'? (e.g., 1x participating/non-participating).","What are 'Information Rights' and 'Inspection Rights' for VCs?","Key elements of a Founders' Agreement in an Indian context?","What is a 'Side Letter' and when is it used in VC deals?","How are disputes typically resolved as per VC agreements in India?","What are the standard 'Closing Deliverables' in a funding round?","Explain 'Control Provisions' and 'Affirmative Vote Matters' for investors.","What is a 'Pay-to-Play' provision in VC financing?","What are 'milestone-based' tranches in funding agreements?","Importance of 'Governing Law' and 'Jurisdiction' clauses in cross-border deals.","What is an 'Indemnification' clause and its typical caps/baskets?","How are 'Escrow Accounts' used in VC funding rounds?","Optimal legal structure for a tech startup in India (Pvt Ltd, LLP)?","Step-by-step process for incorporating a Private Limited Company in India.","Key initial ROC (Registrar of Companies) compliances for a new startup?","How to structure an Employee Stock Option Plan (ESOP) under Indian law?","What is 'Sweat Equity' and how can it be issued to founders/advisors?","Strategies for protecting a startup's Intellectual Property (IP) from day one.","Essential terms for a Co-founder Agreement to prevent future disputes.","What is 'Vesting of Shares' (time-based, cliff) for founders and ESOPs?","Legal implications of pivoting a startup's business model in India.","How to legally handle founder departures or disputes?","Requirements for Foreign Direct Investment (FDI) in Indian startups under FEMA.","What is downstream investment and its compliance?","What is a Convertible Note? Key terms (discount rate, valuation cap).","What is a SAFE (Simple Agreement for Future Equity) and its use in India?","Pros and cons of various debt instruments for startups (venture debt, debentures).","How does a 'Bridge Round' work and when is it needed?","Common red flags for investors during legal due diligence of a startup.","What are the legal and financial implications of a 'Down Round'?","Legal aspects of an 'Acqui-hire' in the Indian startup ecosystem.","Typical 'Exit Strategies' for VCs and founders (IPO, M&A, secondary sale).","What is 'Startup India Initiative' and its benefits for recognized startups?","How to obtain DPIIT recognition for a startup?","What are 'Angel Networks' and how do they operate in India?","What are the legal aspects of a 'friends and family' funding round?","How to handle related party transactions in a startup context?","Explain SEBI (Alternative Investment Funds) Regulations, 2012 for VC funds.","Tax implications of ESOPs for employees and the company in India?","What is 'Angel Tax' (Section 56(2)(viib)) and recent exemptions/changes?","Annual ROC compliances for a Pvt Ltd company (DIR-3 KYC, DPT-3, MSME-1, AOC-4, MGT-7).","Consequences of non-compliance with terms of funding agreements.","Process for increasing Authorized Share Capital of a company.","How to issue Rights Shares or Bonus Shares in a startup?","Key legal considerations when preparing for a Series A funding round.","Legal differences between Cumulative/Non-Cumulative Preference Shares and Equity Shares.","How to structure an Advisory Board and agreements for advisors?","Key legal documents needed for a VC pitch deck?","Most common legal mistakes Indian startups make in early stages?","Effective negotiation strategies for a Term Sheet with a VC.","Role and responsibilities of legal counsel in a VC funding round.","Key terms to scrutinize in an Incubation/Accelerator Agreement.","Ensuring compliance with Indian labor laws for a rapidly growing startup.","Data privacy (DPDP Act) compliance for Indian tech startups.","How to issue shares for consideration other than cash (e.g., for IP, services)?","Process for changing the Registered Office of a company within or across states.","Director Identification Number (DIN) and Digital Signature Certificate (DSC) requirements.","Board meeting procedures, quorum, and minutes preparation as per Companies Act, 2013.","Maintenance of statutory registers (e.g., Register of Members, Directors).","IP assignment from founders/employees to the company: Process and importance.","Legal aspects of forming a Joint Venture (JV) for a startup.","'Know Your Customer' (KYC) and Anti-Money Laundering (AML) for investors.","Restrictions on transfer of shares in a private limited company in India.","Legal disclaimers and considerations for a startup's website and marketing materials.","Dealing with an investor's request for early exit or liquidity.","'Key Person' insurance provisions in VC investment agreements.","'Most Favored Nation' (MFN) clauses in Term Sheets: Implications.","Structuring investments from international accelerator programs: FEMA and tax.","Impact of significant beneficial ownership (SBO) rules on startups.","Regulations around crowdfunding and peer-to-peer lending for startups in India.","How to best prepare for an investor's legal due diligence checklist?","'Lock-in' periods for shares: For founders, investors, pre-IPO.","Initial steps a startup should take upon receiving a legal notice.","Legal implications of using open-source software in proprietary products.","Key clauses in vendor and supplier contracts for a startup.","Legal checklist for a startup planning international expansion from India.","'Reverse Vesting' for founders: How it works and why it's used.","Protecting confidential information during discussions with potential investors (NDAs).","Enforceability of 'Non-Compete' and 'Non-Solicit' clauses for founders/employees.","Process for voluntary winding up / striking off a private limited company.","Issuing debentures (convertible/non-convertible) as a startup: Legal process.","Key recent legal/regulatory updates impacting startups in India.","Can a foreign national be a full-time director in an Indian startup?","What are the compliances under Shops and Establishment Act for startups?","Handling a situation if a co-founder is non-performing or wishes to exit.","Common pitfalls in SAFEs and Convertible Notes if not structured carefully.","Legal considerations for a B2B SaaS startup vs. a B2C product startup.","Structuring a Pilot Agreement or Beta Testing Agreement with early customers.","Implications of misrepresentation or fraud during a funding round.","Typical legal fee structures for startup advisory and fundraising legal work.","Managing 'Board Observer' rights vs. 'Board Director' rights for investors."],[Gi.MERGERS_ACQUISITIONS]:["What are the main types of M&A transactions in India (merger, demerger, acquisition)?","Differentiate between a merger, an acquisition, and an amalgamation under Indian law.","Key differences and implications of a Share Purchase vs. an Asset Purchase/BTA.","What is a 'Slump Sale' as defined under the Indian Income Tax Act?","Strategic rationale behind M&A deals (e.g., market entry, consolidation, technology).","Distinguish between a 'Friendly Takeover' and a 'Hostile Takeover' (rare in India).","Outline the typical lifecycle/stages of an M&A transaction in India.","What is a Leveraged Buyout (LBO) and its applicability in India?","Explain a 'Reverse Merger' and its typical objectives.","Key roles and responsibilities of advisors in an M&A deal (legal, financial, tax).","What is a 'Creeping Acquisition' under SEBI Takeover Code?","What is a 'Management Buyout (MBO)' or 'Management Buy-in (MBI)'?","Difference between horizontal, vertical, and conglomerate mergers?","What are 'synergies' in M&A and how are they typically valued?","What is a 'carve-out' transaction?","Key considerations for cross-border M&A involving an Indian company.","What is a 'distressed M&A' and its unique challenges?","How does a 'strategic alliance' or 'joint venture' differ from an M&A?","What are 'PIPE' (Private Investment in Public Equity) deals?","What is the role of a merchant banker in M&A involving listed companies?","Scope and objectives of Legal Due Diligence in an Indian M&A context.","Key areas covered in a comprehensive Legal DD checklist for an Indian target.","What is Financial Due Diligence? Tax Due Diligence? Operational Due Diligence?","How to effectively prepare and manage a Due Diligence Questionnaire (DDQ)?","Common 'Red Flags' or material issues identified during Legal DD in India.","Significance and best practices for managing a Virtual Data Room (VDR) in M&A.","Specific challenges in conducting DD for a cross-border M&A deal.","Legal consequences of inadequate or flawed due diligence.","How is Intellectual Property (IP) Due Diligence conducted in technology M&A?","Explain 'Material Adverse Change' (MAC) / 'Material Adverse Effect' (MAE) clauses.","What is environmental due diligence and its importance?","How to conduct anti-bribery and anti-corruption (ABAC) due diligence?","What is HR due diligence and what does it cover?","What are 'change of control' clauses and how are they identified in DD?","How is litigation and dispute DD conducted?","What is the importance of verifying title to shares/assets?","How to assess regulatory compliance during DD?","What is the role of forensic due diligence in specific cases?","How are findings from DD typically addressed in the transaction documents?","What is 'seller due diligence' or 'vendor due diligence'?","How to structure an M&A deal for optimal tax efficiency in India?","Key provisions of a Non-Disclosure Agreement (NDA) specific to M&A.","What is a Letter of Intent (LOI) or Term Sheet in M&A? Binding aspects?","Essential clauses in a Share Purchase Agreement (SPA) under Indian law.","Essential clauses in an Asset Purchase Agreement (APA) / Business Transfer Agreement (BTA).","Nature and scope of 'Representations and Warranties' in M&A agreements.","What are 'Indemnification' clauses? (Caps, baskets, survival periods).","'Conditions Precedent' (CPs) to Closing an M&A deal: Examples.","'Closing Conditions' vs. 'Closing Actions': Clarify the distinction.","Use and structure of an Escrow Agreement in M&A for purchase price/indemnity.","Explain 'Earn-out' provisions and their structuring challenges.","Non-compete and Non-solicit clauses: Enforceability under Indian contract law.","Legal framework for employee transfers in M&A (Section 25FF of ID Act).","Role and importance of 'Disclosure Schedules' in M&A agreements.","Treatment of liabilities in a Share Purchase vs. an Asset Purchase.","What is 'Locked Box' vs. 'Completion Accounts' mechanism for purchase price adjustment?","How to draft 'Further Assurances' clauses effectively?","What are 'assignment and change of control' provisions in M&A context?","How to structure 'holdback' provisions for indemnification claims?","What is a 'Transitional Services Agreement' (TSA)?","Overview of regulatory approvals required for M&A in India (CCI, NCLT, SEBI, RBI).","Role of the Competition Commission of India (CCI) in merger control.","Current monetary thresholds for CCI notification in India.","Process for NCLT approval for schemes of merger/amalgamation under Companies Act.","SEBI Takeover Code implications for acquisitions involving listed Indian companies.","Specific approvals needed for M&A in regulated sectors (e.g., banking, insurance, telecom).","FEMA implications for cross-border M&A (inbound and outbound).","Stamp duty calculation and payment on M&A transaction documents in India.","Key tax implications of M&A: Capital Gains, GST, tax on slump sale.","Process for obtaining foreign investment approvals (e.g., from DPIIT, MHA if applicable).","What is 'Form FC-TRS' and 'Form FC-GPR' reporting to RBI?","What are the implications of Press Note 3 (2020) for FDI in M&A?","What is 'Indirect Transfer' of shares and its tax implications in India?","How are 'Conditions Subsequent' to regulatory approvals handled?","What are the consequences of 'gun jumping' under Indian competition law?","Key legal considerations for successful Post-Merger Integration (PMI).","Process for integrating employee contracts, benefits, and HR policies post-acquisition.","Harmonizing corporate policies and compliance programs after a merger.","Common types of post-closing disputes in M&A and how to mitigate them.","What is a 'Demerger' (Spin-off, Split-off) and its structuring under Indian law?","Legal framework and process for a Management Buyout (MBO) in India.","Key legal considerations when acquiring a distressed company or assets under IBC.","Impact of the Insolvency and Bankruptcy Code (IBC) on M&A strategies.","Structuring a Joint Venture (JV) as an alternative to a full acquisition.","Protecting minority shareholder rights in an M&A transaction.","Process and legality of 'Squeeze-out' of minority shareholders in India.","What is a 'Scheme of Arrangement' under the Companies Act and its uses beyond M&A?","Common valuation methods used in Indian M&A deals.","Difference between Enterprise Value (EV) and Equity Value.","Key negotiation points in an M&A SPA from a Seller's perspective.","Key negotiation points in an M&A SPA from a Buyer's perspective.","Managing confidentiality and information flow during M&A negotiations.","Role of Investment Bankers and other advisors in facilitating M&A.","Common legal pitfalls to avoid in executing M&A transactions in India.","Impact of M&A on corporate governance structure and board composition.","Handling integration of IT systems, data, and IP post-merger: Legal aspects.","Specific challenges in acquiring a family-owned business in India.","'Warranty and Indemnity' (W&I) Insurance in Indian M&A: Availability and use.","Process and compliances for M&A involving a listed Indian company.","Requirements for disclosure of related party M&A transactions.","Reviewing 'Material Contracts' during DD: What to look for?","Implications of 'Change of Control' clauses in material contracts of the target.","Managing existing litigation and contingent liabilities of the target company.","Process for amalgamation of a subsidiary company with its parent company.","Ensuring proper transfer and protection of Intellectual Property in M&A.","Legal considerations for 'Divestitures' or 'Spin-offs' of business units.","Managing public relations and stakeholder communications during an M&A deal.","'Break Fees' or 'Termination Fees' in M&A agreements: Enforceability.","Ensuring compliance with anti-bribery and corruption laws during cross-border M&A.","Typical post-closing obligations and covenants for buyer and seller.","Legal mechanisms for unwinding an M&A deal if it fails or faces issues.","Recent trends and landmark M&A deals in the Indian market.","SEBI (LODR) Regulations compliances applicable to M&A involving listed entities.","Role and importance of 'Fairness Opinions' in M&A transactions.","Sector-specific M&A considerations (e.g., Pharma, Fintech, E-commerce).","Legal differences and complexities in acquiring a public vs. a private company in India.","Managing data privacy (DPDP Act) issues during M&A DD and post-merger integration.","Key terms in a Merger Agreement or Scheme of Amalgamation document.","Structuring 'Deferred Consideration' or 'Contingent Consideration' in M&A.","Implications of GAAR (General Anti-Avoidance Rule) on M&A tax structuring.","How to effectively deal with unknown or contingent liabilities of the target?","Process for effecting a name change of a company post-acquisition/merger.","Common methods for financing an acquisition in India (debt, equity, internal accruals).","Valuing intangible assets (brand, IP, goodwill) in an M&A context.","Key legal documents required for each stage of an M&A deal (LOI to Closing).","Explain 'Specific Performance' as a remedy in M&A agreement disputes."],[Gi.REGULATORY_GUIDANCE]:["Which are the key regulatory bodies a new business in India must be aware of?","How can a business identify all applicable central and state regulations in India?","Outline the general process for obtaining necessary licenses and permits for a business.","What are the typical penalties for non-compliance with major Indian business regulations?","How to conduct a comprehensive regulatory compliance audit for my company?","Core principles of corporate governance for unlisted companies under Companies Act, 2013?","Explain the functions of the Ministry of Corporate Affairs (MCA) and ROC.","Key ongoing compliance requirements under the Indian Companies Act, 2013 for Pvt Ltd Co.","Best practices for staying updated on frequent changes in Indian regulations?","What is the Digital Personal Data Protection (DPDP) Act, 2023 and its applicability?","How to map regulatory obligations to business processes?","What is 'regulatory sandbox' and its availability in India (e.g., for Fintech)?","What are the common challenges faced by businesses in navigating Indian regulations?","How to develop a compliance calendar for a business?","What is the role of a compliance officer in an organization?","What are 'Standard Operating Procedures' (SOPs) for ensuring regulatory compliance?","How to manage third-party vendor compliance risk?","What are the regulations around 'Know Your Customer' (KYC) for non-financial businesses?","What are the implications of 'Significant Beneficial Ownership' (SBO) rules?","How to handle conflicts between different regulatory requirements?","Key SEBI (LODR) regulations for listed companies beyond M&A (e.g., disclosures, governance).","RBI guidelines for Fintech companies (e.g., payment aggregators, digital lending).","E-commerce regulations in India (Consumer Protection E-commerce Rules, FDI Policy).","Regulatory framework for Telecom companies by TRAI and DoT.","FSSAI licensing and compliance for food manufacturing, processing, and retail businesses.","Drug and Cosmetic Act regulations for pharmaceutical manufacturing and sales.","Environmental regulations (Air, Water, Waste Management) for manufacturing units.","Key labor law compliances for factories vs. commercial establishments in India.","Regulations and licensing for Non-Banking Financial Companies (NBFCs).","IRDAI regulations impacting insurance companies and intermediaries.","Regulations for Real Estate developers under RERA (Real Estate Regulation and Development Act).","What are the regulations for online gaming and fantasy sports in India?","Specific regulations for EdTech platforms in India.","Regulations for HealthTech services, including telemedicine and e-pharmacies.","What are the regulations for renewable energy projects in India?","Compliance requirements for logistics and warehousing businesses.","Regulations applicable to media and entertainment companies (broadcast, OTT).","What are the key compliances for a hospital or healthcare facility?","Regulations for companies operating in Special Economic Zones (SEZs).","What are the regulations concerning drone operations in India?","To whom does the Foreign Exchange Management Act (FEMA), 1999 apply?","Detailed rules for Foreign Direct Investment (FDI) under different sectors in India.","Distinguish between Automatic Route and Government Approval Route for FDI.","What are 'downstream investments' under FEMA and their associated compliances?","Step-by-step process for reporting FDI to RBI via the FIRMS portal (SMF, ARF).","Regulations for External Commercial Borrowings (ECB): Eligible borrowers, lenders, end-uses.","Overseas Direct Investment (ODI) regulations for Indian entities investing abroad.","Process and compliance for setting up a Liaison Office, Branch Office, or Project Office.","Rules for repatriation of profits, dividends, and disinvestment proceeds by foreign investors.","Transfer pricing regulations under Income Tax Act and their interplay with FEMA.","What is 'round tripping' under FEMA and its implications?","Regulations for investment by Non-Resident Indians (NRIs) and Overseas Citizens of India (OCIs).","What are Foreign Portfolio Investment (FPI) regulations?","Compounding of contraventions under FEMA: Process and implications.","What are the regulations for issuance and transfer of shares to non-residents?","Key obligations of 'Data Fiduciaries' and 'Data Processors' under DPDP Act?","What constitutes 'Personal Data' and 'Sensitive Personal Data' under Indian law?","Requirements for obtaining valid 'Consent' under the DPDP Act, 2023.","Data Breach notification obligations under DPDP Act and CERT-In directions.","CERT-In directions regarding cybersecurity incidents, logging, and reporting.","Relevant provisions of the Information Technology Act, 2000 concerning cybercrimes and intermediaries.","How to draft a comprehensive Privacy Policy compliant with DPDP Act and IT Rules?","Rules and restrictions for cross-border transfer of personal data from India.","What are the 'Rights of Data Principals' (e.g., access, correction, erasure) under DPDP Act?","Penalties for non-compliance with DPDP Act and other data protection laws.","What are 'Data Protection Impact Assessments' (DPIA) and when are they required?","Cybersecurity best practices for businesses operating in India.","What are the legal requirements for data localization in specific sectors (e.g., payments)?","How to handle employee data privacy in compliance with Indian laws?","What are the legal aspects of using cookies and online tracking technologies?","Objectives and key provisions of the Competition Act, 2002.","What constitutes an 'anti-competitive agreement' (horizontal and vertical)?","Defining and proving 'abuse of dominant position' under Competition Act.","How are cartels defined and penalized under Indian competition law?","Merger control provisions: notification thresholds and review process by CCI.","Investigative powers and procedures of the Competition Commission of India (CCI).","Penalties and remedies for violations of competition law in India.","What is a 'Leniency Program' or 'Lesser Penalty' regime under Competition Act?","Process for filing an information or complaint with the CCI.","'Resale Price Maintenance', 'Tie-in Arrangements', 'Exclusive Supply/Distribution' as vertical restraints.","What is 'predatory pricing' by a dominant enterprise?","How does competition law apply to digital markets and platforms?","What are 'hub and spoke' cartels?","Role of economic analysis in competition law assessments.","What are interim relief measures that CCI can grant?","Key features and processes under the Insolvency and Bankruptcy Code (IBC), 2016.","Who can initiate Corporate Insolvency Resolution Process (CIRP) and on what grounds?","AML/KYC (Anti-Money Laundering/Know Your Customer) requirements beyond financial institutions.","POSH Act (Sexual Harassment of Women at Workplace) compliances: ICC, training, reporting.","Core labor law compliances (EPF, ESI, Gratuity, Minimum Wages, Maternity Benefit).","CSR (Corporate Social Responsibility) spending and reporting requirements under Companies Act.","Advertising standards and codes by ASCI; implications of misleading advertisements.","Best practices for handling regulatory inspections and investigations by authorities.","Legal Metrology Act and Packaged Commodities Rules: Labeling and measurement compliance.","Process and benefits of obtaining an Import-Export Code (IEC).","Regulations for 'Related Party Transactions' under Companies Act and SEBI (LODR).","Legal requirements and procedures for conducting Annual General Meetings (AGM) / Extraordinary General Meetings (EGM).","Compliance with anti-bribery and anti-corruption laws (Prevention of Corruption Act).","Requirements for establishing and implementing a Whistle-blower Policy.","Regulations for Payment Aggregators and Payment Gateways by RBI.","Impact of RERA on real estate developers and projects: Registration and compliance.","SEBI (Prohibition of Insider Trading) Regulations: Key prohibitions and disclosures.","Legal requirements for digital lending apps and platforms: RBI guidelines.","Emerging ESG (Environmental, Social, and Governance) reporting norms in India.","Significance of Udyam/MSME registration and associated benefits/compliances.","Regulations governing NGOs, charitable trusts, and Section 8 companies.","Compliance with local municipal laws (e.g., trade licenses, building permits).","Key regulations for Telemedicine and Digital Health services in India.","Legal and regulatory requirements for E-pharmacies and online sale of medicines.","How to proactively manage regulatory risks in a new or expanding business venture?","Process for 'Compounding of Offences' under Companies Act, FEMA, etc.","Key provisions of the Consumer Protection Act, 2019 impacting businesses.","Procedure for obtaining various No Objection Certificates (NOCs) from government bodies.","Waste management rules (e-waste, plastic waste, biomedical waste) and pollution control norms.","Food Safety and Standards Act (FSSAI) labeling and packaging laws.","Legal process and considerations for a product recall in India.","Regulations for conducting clinical trials for drugs and medical devices.","Legal requirements for operating cloud kitchens and food delivery services.","Fire safety regulations and compliance for commercial establishments.","Regulations for Direct Selling Entities and Multi-Level Marketing (MLM) in India.","Key aspects of the Right to Information (RTI) Act applicable to certain businesses.","Compliance with regulations for handling and storage of hazardous substances.","SEBI regulations for Investment Advisers and Research Analysts.","Regulatory framework for Alternative Investment Funds (AIFs) in India."],[Gi.INTELLECTUAL_PROPERTY]:["What is a trademark? What types of marks can be registered in India (word, logo, sound)?","How to conduct a comprehensive trademark search in India (online database, market search)?","Step-by-step process for trademark registration in India from application to registration.","Understanding the 45 classes of goods and services under the NICE classification.","Proper usage of ™, ℠, and ® symbols in relation to trademarks.","Duration of trademark registration in India and the process for renewal.","What constitutes trademark infringement? Examples and legal remedies.","Explain the concept of 'Passing Off' and its difference from infringement.","How to respond to a trademark examination report (objections) or an opposition?","What are 'Well-Known Trademarks' and their enhanced protection in India?","What is a 'collective mark' or a 'certification mark'?","How to register a trademark internationally (Madrid Protocol)?","What is trademark dilution and how is it prevented?","Can a color or a shape be registered as a trademark?","What is 'secondary meaning' or 'acquired distinctiveness' for trademarks?","What is copyright? What original literary, dramatic, musical, artistic works are protected?","Is copyright registration mandatory in India? What are its benefits?","Detailed process for copyright registration in India with the Copyright Office.","What is the term of copyright protection for different types of works in India?","What acts constitute copyright infringement of various works?","Explain 'Fair Use' or 'Fair Dealing' exceptions under Indian Copyright Act.","What are 'Moral Rights' of an author (right of paternity, right of integrity)?","Process and key terms for licensing or assigning a copyright.","Procedure for issuing a takedown notice for online copyright infringement in India.","How is software (source code, object code, UI) protected under copyright law?","What are 'related rights' or 'neighboring rights' in copyright (performers, broadcasters)?","Can ideas or concepts be copyrighted?","What is a 'compulsory license' for copyrighted works?","How to deal with copyright infringement on social media platforms?","What is the 'first sale doctrine' or 'doctrine of exhaustion' in copyright?","What is a patent? What are the criteria for patentability (novelty, inventive step, industrial applicability)?","What inventions are not patentable in India (Section 3 & 4 of Patents Act)?","How to conduct a thorough patent search (prior art search)?","Process for filing a patent application in India (provisional vs. complete specification).","What is patent prosecution? Stages involved (examination, hearing, grant).","Term of a patent in India and requirements for maintenance (renewal fees).","What constitutes patent infringement? Direct, indirect, contributory.","What are 'Compulsory Licensing' provisions under the Indian Patents Act?","How to file an international patent application via PCT (Patent Cooperation Treaty)?","Key elements and drafting considerations for a patent specification (claims, description).","What is 'Freedom to Operate' (FTO) analysis and its importance?","What is a 'patent of addition'?","What are pre-grant and post-grant oppositions to a patent application/patent?","What is the Bolar exemption or research exemption in patent law?","How are pharmaceutical patents and software patents treated in India?","What is an Industrial Design? What aesthetic features are protected in India?","Step-by-step process for design registration with the Indian Patent Office.","What is a Trade Secret? How can it be legally protected without registration?","What are Geographical Indications (GIs)? Examples and registration process in India.","Protection of Semiconductor Integrated Circuit Layout Designs in India.","How are Plant Varieties protected in India (Protection of Plant Varieties and Farmers' Rights Act)?","What is 'confidential information' and how does it differ from trade secrets?","What are domain names and how do they relate to trademarks (cybersquatting)?","How to protect a business model or a unique concept?","What is 'personality rights' or 'publicity rights' and its protection in India?","Key clauses in an IP Assignment Agreement (trademarks, copyrights, patents).","Drafting an effective IP Licensing Agreement (exclusive/non-exclusive, territory, royalty).","What is a Technology Transfer Agreement and its IP implications?","IP aspects of a Franchise Agreement (trademark license, know-how).","Checklist for IP Due Diligence in M&A, investments, or collaborations.","Pros and cons of an IP Holding Company structure for Indian businesses.","Common methodologies for valuing Intellectual Property assets.","Structuring royalty payments in IP license agreements (fixed, percentage, tiered).","IP ownership clauses in Software Development Agreements (client vs. developer).","Key IP considerations in SaaS (Software as a Service) agreements.","What are IP indemnification clauses in commercial agreements?","What is an 'escrow agreement' for source code?","How to manage joint ownership of IP?","What are 'open innovation' models and their IP implications?","What are 'patent pools' and 'cross-licensing' agreements?","Overview of key media laws in India (Prasar Bharati Act, Cable TV Networks Act, etc.).","Content regulations for online platforms under IT (Intermediary Guidelines) Rules, 2021.","Advertising laws and self-regulation by ASCI (Advertising Standards Council of India).","Civil and criminal aspects of Defamation Law in India (online and offline).","Legal issues related to User-Generated Content (UGC) and platform liability.","Legal and ethical guidelines for Influencer Marketing in India.","Data privacy for media/tech companies under DPDP Act and other regulations.","IT Act, 2000: Key provisions for intermediaries, e-signatures, cybercrimes.","Drafting enforceable End User License Agreements (EULAs) for software/apps.","Compliance issues with various Open-Source Software (OSS) licenses (GPL, MIT, Apache).","What are OTT platform regulations in India?","What are the laws related to online news portals and digital media ethics?","What are the legal implications of deepfakes and synthetic media?","How is online gaming regulated in India (skill vs. chance)?","What are the Cinematograph Act and its relevance to film certification?","Drafting an effective Cease and Desist Notice for IP infringement.","Civil remedies for IP infringement (injunctions, damages, accounts of profits).","Criminal remedies for trademark and copyright infringement in India.","Current status and functioning of Commercial Courts for IP disputes.","Role of Customs authorities in preventing import/export of counterfeit goods (IPR Enforcement Rules).","IP Arbitration and Mediation as alternative dispute resolution mechanisms.","What is a 'John Doe Order' (Anton Piller order) in IP enforcement?","Strategies for combating online IP infringement (e-commerce, social media).","Resolving cybersquatting and domain name disputes (UDRP, INDRP).","Estimating costs associated with IP litigation in Indian courts.","Protecting IP when collaborating with universities or research institutions.","Conducting an IP audit: Process, benefits, and key areas of focus.","Developing a comprehensive IP strategy aligned with business goals.","Common IP mistakes and how startups/SMEs can avoid them.","Ensuring IP ownership from employees, consultants, and contract developers.","'Prior Art' search and its significance in patent invalidation.","India's position on 'First to File' vs. 'First to Invent' for patents.","IP ownership and infringement issues related to AI-generated content and inventions.","Dealing with 'Patent Trolls' or Non-Practicing Entities (NPEs).","Specific IP challenges and strategies for pharmaceutical companies in India.","Comprehensive IP protection strategy for a mobile application.","Broadcasting rights for sports events and their protection.","Copyright issues in the music industry (mechanical rights, performing rights, sync licenses).","Legal implications of 'Sampling' in music creation.","'Fair Dealing' for criticism, review, reporting under Copyright Act.","Protecting Traditional Knowledge (TK) and Traditional Cultural Expressions (TCEs).","Border control measures by customs for IP protection: Practical aspects.","Taxation of IP transactions (royalties, assignment fees) in India.","Strategies for securing and enforcing IP rights in international markets.","Using the Madrid Protocol for international trademark registration: Pros and Cons.","International copyright protection under Berne Convention and WIPO treaties.","IP landscaping as a tool for R&D planning and competitive intelligence.","Role of IP in securing investment and enhancing business valuation.","Drafting and implementing an effective internal IP Policy for a company.","IP considerations in Joint Development Agreements and R&D collaborations.","Protecting trade secrets when employees leave or join competitors.","Using IP as collateral for securing loans or financing.","Recent landmark judgments and amendments in Indian IP laws.","Impact of digital transformation and emerging technologies (Metaverse, NFTs) on IP.","Addressing IP issues in cloud computing agreements and data hosting."],[Gi.VIRTUAL_GENERAL_COUNSEL]:["Can you review this [specific type] agreement and highlight key risks/areas for negotiation?","What are the essential elements of a legally binding contract under Indian Contract Act?","How to draft a comprehensive Master Service Agreement (MSA) for ongoing services?","Best practices for drafting and using Non-Disclosure Agreements (NDAs).","Common pitfalls and negotiation points in SaaS subscription agreements.","Key legal considerations when negotiating commercial lease agreements in India.","Relationship between a Statement of Work (SOW) and an MSA: How to ensure consistency?","Legal implications of an unsigned contract or agreement by email exchange.","Steps to implement an effective contract lifecycle management (CLM) system.","Are 'Limitation of Liability' clauses always enforceable? What are reasonable caps?","Drafting and negotiating 'Indemnity' and 'Hold Harmless' clauses.","What is a 'Force Majeure' clause and its relevance in current times?","How to ensure proper contract execution (stamping, signatures, witnesses)?","What are 'boilerplate' clauses and which ones need careful review?","How to manage contract renewals and terminations effectively?","What are the mandatory annual ROC filings for a private/public limited company in India?","Procedure for conducting valid Board Meetings and General Meetings (AGM/EGM).","Fiduciary duties and liabilities of Directors under the Companies Act, 2013.","Maintenance of statutory registers (Members, Directors, Charges, etc.): Requirements.","Overview of corporate secretarial compliances for an Indian entity.","Identifying and managing 'Related Party Transactions' as per Companies Act and SEBI LODR.","Best practices for drafting accurate and compliant Minutes of meetings.","Process for appointment, resignation, or removal of a Director or KMP.","Applicability and compliance with CSR (Corporate Social Responsibility) provisions.","Establishing and operationalizing a Whistle-blower/Vigil Mechanism policy.","What are 'Director KYC' (DIR-3 KYC) and 'Active Company Tagging' (INC-22A/ACTIVE) compliances?","What is 'Significant Beneficial Ownership' (SBO) reporting?","How to handle 'Oppression and Mismanagement' issues under Companies Act?","What are the requirements for internal financial controls (IFC)?","Compliance with Secretarial Standards issued by ICSI.","Key clauses to include in an Employment Agreement for different employee levels.","Difference between an Offer Letter and an Appointment Letter: Legal standing.","POSH Act compliances: ICC formation, training, annual reporting, policy.","Legal procedure for employee termination (misconduct, retrenchment, resignation).","Enforceability of Non-compete, Non-solicit, and Confidentiality clauses for employees in India.","Compliance with Provident Fund (PF), ESI, Payment of Gratuity Act, Bonus Act.","Contents of an Employee Handbook/HR Policy Manual compliant with Indian laws.","Legal aspects of performance appraisals, promotions, and disciplinary actions.","Managing legal distinctions and risks with contract employees vs. permanent employees.","Compliance with Shops and Establishments Act of the respective state.","Maternity Benefit Act: Entitlements and employer obligations.","What are the laws related to child labor and prevention?","How to handle employee data privacy under DPDP Act?","What are the legal requirements for background verification of employees?","How to structure an effective employee grievance redressal mechanism?","How to effectively respond to a legal notice or a show-cause notice?","When and how to send a formal legal notice to another party?","Ensuring day-to-day operational compliance with DPDP Act, 2023.","Legal requirements for a company's website: Terms of Use, Privacy Policy, Cookie Policy.","How to conduct a periodic legal health check-up or compliance audit for a business?","Identifying and mitigating key legal risks for an e-commerce or online business.","Developing and implementing a practical legal risk management framework.","What types of business insurance policies are essential or advisable in India?","Best practices for handling customer complaints that have legal implications.","Legal review of marketing and advertising materials to ensure compliance (ASCI, Consumer Protection Act).","What are the stamping requirements for various commercial documents in India?","How to deal with regulatory inspections by tax authorities or other bodies?","What are the legal implications of using electronic signatures (e-signatures)?","How to manage legal risks associated with social media usage by the company/employees?","What are the 'Know Your Distributor/Agent' compliance requirements?","What are the recommended first steps when a commercial dispute arises?","Mediation vs. Arbitration vs. Litigation: Pros and cons for different situations.","Drafting an effective multi-tiered dispute resolution clause in commercial contracts.","Value and process of pre-litigation legal advice and strategy.","How to manage ongoing litigation effectively and control costs?","Typical costs and timelines involved in commercial litigation in Indian courts.","When is it appropriate to send a formal Demand Letter before initiating legal action?","Strategies for negotiating a favorable settlement in a commercial dispute.","Understanding the concept of 'Limitation Period' for various legal claims.","Criteria for selecting and managing external counsel for specialized litigation.","What is 'interim relief' in litigation and when can it be sought?","What is the Commercial Courts Act and how does it expedite disputes?","How to enforce a judgment or arbitral award in India?","What are the grounds for challenging an arbitral award?","What is 'Without Prejudice' communication in settlement negotiations?","Legal implications of expanding business operations to new states within India.","Structuring a Joint Venture or Strategic Alliance: Key legal considerations.","Legal checklist before launching a new product or service in the Indian market.","Measures to protect confidential business information and trade secrets from misuse.","Benefits and compliance requirements for MSME (Udyam) registration.","Ensuring compliance with all necessary local licenses and permits (e.g., trade, health).","Key terms and negotiation points in Distribution Agreements or Agency Agreements.","Ownership and protection of Intellectual Property created by employees or contractors.","Legal aspects of setting up and running a franchise business in India.","How to prepare for and manage a potential regulatory audit or inspection by authorities?","Developing Standard Operating Procedures (SOPs) that ensure legal compliance.","Legal review and risk mitigation in supply chain contracts and vendor agreements.","Implementing a company's ESG (Environmental, Social, Governance) policy: Legal aspects.","Procedure and best practices for conducting internal investigations (e.g., fraud, misconduct).","Legal requirements for data retention and record management policies.","Managing legal compliance for a remote or hybrid workforce in India.","Compliance with e-invoicing, GST returns, and other indirect tax requirements.","Developing a legal response plan for cybersecurity incidents and data breaches.","What kind of legal and compliance training should employees receive regularly?","Ensuring marketing claims and product labeling are legally compliant.","Legal risks and considerations when using third-party software, APIs, or cloud services.","Policy for handling unsolicited business proposals or IP submissions from external parties.","Key legal differences and considerations: Partnership Firm vs. LLP vs. Private Limited Company.","Legal process for dissolution of a Partnership Firm or winding up an LLP.","Legal requirements for conducting online contests, giveaways, or sweepstakes in India.","Managing online reputation and legally addressing defamatory content or false reviews.","Legal implications of using website cookies and obtaining user consent.","Ensuring Terms and Conditions for online services are clear, comprehensive, and enforceable.","Legal review of a startup's pitch deck and representations made to potential investors.","Implementing and monitoring a Conflict of Interest policy for directors and employees.","Best practices for maintaining corporate records from a legal and evidentiary standpoint.","Ensuring effectiveness of anti-corruption and anti-bribery policies and training.","Legal requirements and best practices for board diversity and inclusion initiatives.","Legal and logistical management of a product recall or service disruption.","Understanding vicarious liability: When is a company liable for acts of its employees?","Ensuring influencer marketing campaigns comply with ASCI guidelines and consumer law.","Legal considerations for data residency and sovereignty when using global cloud services.","Drafting and implementing an effective Code of Conduct and Ethics for the company.","Legal requirements for shareholder communications and investor relations (for unlisted closely held too).","Responding to information requests from statutory authorities or law enforcement.","Reviewing and invoking 'Force Majeure' clauses in contracts during unforeseen events.","Process for amending a company's Memorandum of Association (MOA) or Articles of Association (AOA)."],[Gi.LEGAL_TECH_SOLUTIONS]:["Current and emerging applications of AI in the Indian legal industry (research, drafting, prediction)?","How can AI tools effectively assist with legal research, case law analysis, and due diligence?","Ethical considerations and challenges of using AI in legal decision-making and client advice.","What are the liability risks associated with AI-powered legal advice or document generation tools?","Impact of AI on e-discovery processes: Predictive coding, document review.","Legal validity and recognition of AI-generated legal documents or contracts in India.","How can Indian law firms and legal departments practically leverage AI for improved efficiency?","Data privacy and confidentiality concerns when using AI-based legal tech solutions with client data.","Strategies to ensure fairness, transparency, and mitigate bias in legal AI algorithms.","Future trends and predictions for AI adoption in the Indian legal practice.","What is 'explainable AI' (XAI) and its importance in legal tech?","How can AI be used for contract review and analysis (e.g., identifying risky clauses)?","What are Large Language Models (LLMs) and their specific applications/risks in law?","Regulatory landscape for AI in India: Any specific laws or guidelines for legal AI?","Can AI assist in predicting litigation outcomes? What are the limitations?","IP protection strategies (patents, copyright, trade secrets) for a new legal tech product.","How to protect the source code, algorithms, and unique features of a legal tech solution?","Key regulatory compliances for a legal tech startup in India (company law, tax, data privacy).","Drafting robust User Agreements (EULA, Terms of Service, SLA) for a legal tech platform.","Essential data security standards (e.g., ISO 27001) for legal tech products handling sensitive information.","Ensuring compliance with DPDP Act, 2023 for a SaaS-based legal tech product.","Common challenges and strategies for marketing and selling legal tech to Indian law firms.","How to structure effective pilot programs or beta testing for a new legal tech solution?","Key features and differentiators of successful Contract Lifecycle Management (CLM) tools.","Technical and legal considerations for API integrations in legal tech products.","What are the challenges in developing multilingual legal tech solutions for India?","How to incorporate user feedback effectively in legal tech product development cycles?","What are the specific needs of in-house legal departments vs. law firms for tech solutions?","How to approach pricing and subscription models for legal tech products?","What are the legal implications of using third-party AI models in a legal tech product?","Specific data privacy risks and vulnerabilities for legal tech companies handling client matters.","Implementing 'Privacy by Design' and 'Security by Design' principles in legal tech development.","Data localization requirements for legal tech services storing Indian client data.","Conducting a Data Protection Impact Assessment (DPIA) for a new legal tech solution.","Best practices for encrypting and securing client data on a legal tech platform (at rest, in transit).","Developing and testing an incident response plan for data breaches in a legal tech company.","Implications of GDPR for Indian legal tech companies with EU clients or data subjects.","Common cybersecurity threats targeting legal tech solutions and law firms (phishing, ransomware).","Ensuring ethical data handling and anonymization in legal analytics and AI training datasets.","Role and responsibilities of a Data Protection Officer (DPO) in a legal tech firm under DPDP Act.","What are secure software development lifecycle (SSDLC) practices for legal tech?","How to manage vendor risk for third-party components or services used in legal tech?","What are the client expectations regarding data security from their legal tech providers?","How to demonstrate compliance with data protection regulations to clients and auditors?","What are the specific challenges of securing data in cloud-based legal tech applications?","Detailed overview of the e-discovery process (EDRM model) in the Indian context.","Comparison of common e-discovery tools and technologies available in India.","Legal best practices for data preservation (legal hold) and collection of electronic evidence.","Standards for admissibility and authentication of electronic evidence under Indian Evidence Act.","How can technology enhance efficiency and effectiveness of Legal Operations (Legal Ops)?","Key Performance Indicators (KPIs) for measuring legal department efficiency using technology.","Selection criteria and implementation process for a Matter Management or Case Management System.","Role of technology (e-billing, spend analytics) in managing outside counsel spend and budget.","Automating routine legal tasks (document generation, compliance tracking) using tech.","Benefits and implementation of document automation tools for law firms/legal departments.","What is 'Technology Assisted Review' (TAR) in e-discovery?","How to manage cross-border e-discovery challenges (data privacy, blocking statutes)?","What is forensic data collection and when is it required?","How to create an effective e-discovery playbook for an organization?","What is 'Legal Project Management' and how can tech support it?","What is Online Dispute Resolution (ODR)? Various models (e-negotiation, e-mediation, e-arbitration).","Benefits, challenges, and adoption status of ODR in the Indian justice system.","Which types of disputes are most suitable for resolution through ODR platforms?","Legal validity and enforceability of ODR outcomes (settlements, awards) in India.","How can technology (AI, video conferencing) make access to justice more effective via ODR?","What are Smart Contracts? How are they technically created and deployed (e.g., on blockchain)?","Current legal position on the enforceability of Smart Contracts under Indian contract law.","Practical risks, limitations, and dispute resolution mechanisms for Smart Contracts.","Applications of Blockchain technology in the legal field beyond smart contracts (e.g., IP registry, evidence).","Regulatory considerations and potential hurdles for widespread adoption of Smart Contracts in India.","What are Decentralized Autonomous Organizations (DAOs) and their legal implications?","How do oracles work in the context of smart contracts?","What are the challenges in coding legal nuances into smart contracts?","What is the 'Digital Rupee' (CBDC) and its potential impact on smart contracts/payments?","What are Non-Fungible Tokens (NFTs) and their legal/IP implications?","Ethical guidelines and professional conduct rules for lawyers using legal technology in India.","Strategies for effective change management when implementing new legal tech in a firm/department.","Impact of legal tech on the traditional law firm business model and lawyer roles.","Essential digital skills and competencies for lawyers in a tech-driven legal environment.","How can legal tech be leveraged to improve 'Access to Justice' for marginalized communities?","Current investment trends and government initiatives supporting the legal tech sector in India.","Key challenges and opportunities for legal tech startups in the Indian market.","What is 'RegTech' (Regulatory Technology) and its intersection with Legal Tech?","Potential impact of Quantum Computing on legal tech, data security, and cryptography.","Predictions for the evolution of legal tech and its integration into legal practice in next 5-10 years.","Methodologies for evaluating the Return on Investment (ROI) of legal technology adoption.","Security and compliance considerations for using cloud-based legal tech solutions.","Ensuring interoperability and data exchange standards between different legal tech tools.","Role of Legal Process Outsourcing (LPO) and Alternative Legal Service Providers (ALSPs) in the tech ecosystem.","How legal tech can streamline compliance management, risk assessment, and reporting.","Legal and ethical implications of using Generative AI (like ChatGPT) for drafting legal documents or advice.","Ensuring data sovereignty and compliance with cross-border data regulations when using global legal tech.","Designing effective training programs for legal professionals on new legal tech tools.","Affordable and impactful legal tech solutions for small law firms and solo practitioners in India.","Cybersecurity best practices specifically tailored for law firms adopting various legal technologies.","How legal tech addresses challenges of document version control, audit trails, and knowledge management.","Rise of 'No-Code' or 'Low-Code' platforms for building custom legal applications.","Using legal tech for managing and analyzing large intellectual property (IP) portfolios.","Ethical rules regarding client communication, confidentiality, and privilege when using tech platforms.","Due diligence process for selecting and vetting third-party legal tech vendors.","How legal tech solutions can assist with KYC, AML, and other regulatory screening processes.","Role of legal tech in managing legal spend and improving predictability of legal costs.","How is legal tech being utilized in the Indian eCourts project and virtual hearings?","Privacy and ethical considerations when using legal analytics tools on public/private case data.","Using legal tech for automated monitoring of regulatory changes and alerts.","Potential biases in legal tech AI tools (data, algorithmic) and strategies for mitigation.","Key success factors for sustainable legal tech adoption and integration within an organization.","How legal tech can facilitate cross-border legal collaboration and service delivery.","Cybersecurity insurance considerations for law firms heavily reliant on legal tech.","Maintaining attorney-client privilege and work product protection in a digital environment.","Best practices for data migration when switching between legal tech systems.","How can legal tech assist in proactive compliance and risk prevention rather than just reactive solutions?"],[Gi.CASE_LAW_ANALYSIS]:["Summarize the key facts of this uploaded judgment.","What were the main legal issues discussed in this judgment?","Who were the parties involved in this case?","Which court delivered this judgment and on what date?","What was the final decision or order in this judgment?","Briefly explain the background leading up to this case.","What is the citation of this judgment?","Identify the judges who delivered this opinion.","Is this a civil or criminal matter? Explain why.","What was the nature of the dispute (e.g., contract, tort, constitutional)?","Can you provide a timeline of key events as per the judgment?","Were there any dissenting opinions? If so, summarize them.","What reliefs were sought by the petitioner/appellant?","What reliefs were granted or denied by the court?","Extract the operative part of the judgment.","What is the significance of this judgment in brief?","Was this an appeal? If so, from which lower court's decision?","Does the judgment mention any specific statutes primarily relied upon?","Identify any amicus curiae, if mentioned, and their submissions.","How long is the judgment in terms of pages or paragraphs?","What is the ratio decidendi of this judgment?","Identify any obiter dicta in this judgment.","Explain the court's reasoning for its decision on the main issues.","Which legal principles or doctrines were applied or discussed?","What precedents (case laws) were relied upon by the court? List them.","Did the court distinguish this case from any precedents? If so, how?","Did the court overrule any previous decisions?","How did the court interpret [specific statute/section] in this judgment?","What were the main arguments advanced by the appellant/petitioner?","What were the main arguments advanced by the respondent?","How did the court address the arguments of each party?","Does this judgment lay down any new law or clarify existing law?","Analyze the jurisprudential basis of the court's decision.","What standard of proof or review was applied by the court?","Does the judgment discuss any constitutional provisions? If so, analyze their interpretation.","Were there any questions of jurisdiction discussed? What was the finding?","Does the judgment make any recommendations for law reform?","Critically analyze the court's application of [specific legal test/doctrine].","What is the binding value of this judgment (e.g., Supreme Court, High Court)?","How does this judgment impact [specific area of law, e.g., contract law, IP law]?","Were there any international law principles or foreign judgments referred to?","What are the implications of this judgment for future cases?","Does the judgment discuss the concept of 'natural justice' or 'due process'?","How does the judgment deal with evidentiary issues, if any?","What is the court's stance on public policy considerations in this case?","Extract key legal propositions or statements of law from the judgment.","Does the judgment refer to any Law Commission reports or academic writings?","Analyze the court's approach to statutory interpretation in this case.","Were there any concurrent findings by lower courts? How did this court treat them?","What is the precedential weight of different parts of this judgment?","What are the practical implications of this judgment for businesses in [specific sector]?","How might this judgment affect ongoing litigation in similar matters?","What advice would you give to a client based on this judgment regarding [specific scenario]?","Does this judgment create any new compliance requirements for companies?","How can this judgment be used to support an argument in [hypothetical case]?","Are there any ambiguities in the judgment that might lead to future litigation?","What are the potential financial implications or remedies discussed?","Does the judgment provide any guidance on drafting contracts or policies?","How does this judgment impact individual rights or liberties?","Based on this judgment, what are the do's and don'ts for [specific activity]?","Does this judgment have any impact on regulatory bodies or their functioning?","What aspects of this judgment are likely to be challenged or appealed further?","Does this judgment clarify any procedural aspects of litigation?","How does this judgment align or conflict with other recent judgments on similar issues?","What steps should a legal professional take after reading this judgment?","Can you identify any policy gaps highlighted by this judgment?","What are the socio-economic impacts discussed or implied by the judgment?","How does this judgment affect government powers or administrative actions?","Are there any specific industries or sectors most impacted by this ruling?","Does the judgment offer any guidance on dispute resolution mechanisms?","What are the key takeaways for legal practitioners from this judgment?","Can this judgment be cited in international forums? Why or why not?","What are the ethical considerations raised or addressed in this judgment?","Does the judgment touch upon issues of technology or digital evidence?","Are there any warnings or admonishments given by the court in this judgment?","Compare the reasoning in this judgment with [another specific judgment - user to provide name/context].","How does the approach in this Indian judgment compare to the approach in [foreign jurisdiction, e.g., UK, US] on similar issues?","Track the evolution of law on [specific issue] leading up to this judgment.","Is this judgment considered a landmark ruling? Why or why not?","Identify any dissenting opinions and analyze their main points of disagreement.","What academic commentary or legal scholarship exists regarding this judgment or the issues it addresses?","Does this judgment reflect a particular judicial philosophy or interpretative approach?","What is the broader constitutional or public law significance of this decision?","How does this judgment contribute to the development of common law in India?","Analyze the use of specific legal terms or maxims in the judgment.","What future legal questions or challenges might arise from this judgment?","How has this judgment been subsequently treated (followed, distinguished, overruled) by other courts? (Requires external knowledge if not in text)","Could AI have assisted in any part of the judicial decision-making process evident here?","Discuss the impact of judicial activism or restraint as seen in this judgment.","How does this judgment impact the balance of power between different state organs?","Extract all defined terms and their definitions from this judgment.","List all annexures or schedules referred to in this judgment.","Find all instances where [specific name/term] is mentioned.","What is the overall tone of the judgment (e.g., critical, empathetic, formal)?","Are there any tables, charts, or figures in this judgment? Summarize them.","Identify any sections that appear to be direct quotes from submissions or evidence.","What is the word count or approximate length of the core reasoning section?","Are there any typographical errors or obvious inconsistencies you can spot? (Use with caution)","Convert this judgment into a plain language summary understandable by a non-lawyer.","Create a structured outline or table of contents for this judgment."]},mM=10,_L=mM*1024*1024,SL=50,TL=["image/jpeg","image/png","image/webp","image/gif","image/heic","image/heif"],CL=({onSubmit:o,isLoading:e,serviceArea:t,legalTask:n,onServiceAreaChange:i,onLegalTaskChange:a})=>{const[l,u]=Ve.useState(""),[d,f]=Ve.useState([]),y=Ve.useRef(null),A=Ve.useRef(null),[_,S]=Ve.useState(!1),[T,C]=Ve.useState([]),[x,D]=Ve.useState(!1),k=Ve.useRef(null),[L,U]=Ve.useState(-1);Ve.useEffect(()=>{if(A.current){A.current.style.height="auto";const B=A.current.scrollHeight,ie=parseInt(getComputedStyle(A.current).maxHeight,10);B>ie&&ie>0?A.current.style.height=`${ie}px`:A.current.style.height=`${B}px`}},[l]),Ve.useEffect(()=>{!e&&l===""&&A.current&&A.current.focus()},[e,l]),Ve.useEffect(()=>{if(l.trim()&&t){const ie=(bL[t]||[]).filter(ne=>ne.toLowerCase().includes(l.toLowerCase()));C(ie.slice(0,10)),D(ie.length>0),U(-1)}else C([]),D(!1)},[l,t]),Ve.useEffect(()=>{function B(ie){k.current&&!k.current.contains(ie.target)&&A.current&&!A.current.contains(ie.target)&&D(!1)}return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[k,A]);const F=Ve.useCallback(async B=>{if(console.log(`Processing file: ${B.name}, type: ${B.type}, size: ${B.size}`),B.size>_L)return{name:B.name,type:B.type,status:"error",errorMessage:`File too large (max ${mM}MB)`};if(B.type==="application/pdf")try{console.log(`Starting PDF processing for ${B.name}`);const ie=await B.arrayBuffer(),ne=await pN({data:ie}).promise;console.log(`PDF ${B.name} has ${ne.numPages} pages.`);let ue=0,O="";for(let z=1;z<=ne.numPages;z++){const P=(await(await ne.getPage(z)).getTextContent()).items.map(Z=>"str"in Z?Z.str:"").join(" ");O+=P+"\\n\\n",ue+=P.length,console.log(`PDF ${B.name}, Page ${z}: ${P.length} chars extracted.`)}if(console.log(`PDF ${B.name}: Total chars extracted: ${ue}, Avg chars/page: ${ne.numPages>0?ue/ne.numPages:0}`),ne.numPages>0&&ue/ne.numPages<SL&&ne.numPages<=5){console.log(`Low text content for ${B.name}. Attempting OCR via image conversion (max 5 pages).`);const z=[];for(let le=1;le<=Math.min(ne.numPages,5);le++){const we=await ne.getPage(le),P=we.getViewport({scale:1.5}),Z=document.createElement("canvas"),oe=Z.getContext("2d");Z.height=P.height,Z.width=P.width,oe?(await we.render({canvasContext:oe,viewport:P}).promise,z.push(Z.toDataURL("image/png")),console.log(`PDF ${B.name}, Page ${le}: Converted to image for OCR.`)):console.error(`Could not get canvas context for PDF page ${le} of ${B.name}.`)}return z.length>0?{name:B.name,type:B.type,imagePageDataUrls:z,status:"processed"}:O.trim()?(console.log(`PDF ${B.name}: Image conversion failed, but some text was extracted. Using text content.`),{name:B.name,type:B.type,textContent:O.trim(),status:"processed"}):{name:B.name,type:B.type,status:"error",errorMessage:"PDF has low text content, and image conversion for OCR failed."}}return console.log(`PDF ${B.name}: Processed with text extraction.`),{name:B.name,type:B.type,textContent:O.trim(),status:"processed"}}catch(ie){console.error(`Error processing PDF ${B.name}:`,ie);let ne="Error processing PDF.";return ie instanceof Error?ie.name==="PasswordException"?ne="PDF is password protected and cannot be processed.":ie.name==="InvalidPDFException"?ne="Invalid or corrupted PDF file.":ne=`PDF Error (${ie.name}): ${ie.message}`:ne=String(ie),{name:B.name,type:B.type,status:"error",errorMessage:ne}}else{if(TL.includes(B.type))return console.log(`Processing image file: ${B.name}`),new Promise(ie=>{const ne=new FileReader;ne.onload=ue=>{var z;const O=(z=ue.target)==null?void 0:z.result;console.log(`Image ${B.name} read as data URL, length: ${O.length}`),ie({name:B.name,type:B.type,imagePageDataUrls:[O],status:"processed"})},ne.onerror=ue=>{console.error(`Error reading image file ${B.name}:`,ue),ie({name:B.name,type:B.type,status:"error",errorMessage:"Error reading image file."})},ne.readAsDataURL(B)});if(B.type==="text/plain"||B.type==="text/markdown")return console.log(`Processing text file: ${B.name}`),new Promise(ie=>{const ne=new FileReader;ne.onload=ue=>{var z;const O=(z=ue.target)==null?void 0:z.result;console.log(`Text file ${B.name} read, length: ${O.length}`),ie({name:B.name,type:B.type,textContent:O,status:"processed"})},ne.onerror=ue=>{console.error(`Error reading text file ${B.name}:`,ue),ie({name:B.name,type:B.type,status:"error",errorMessage:"Error reading text file."})},ne.readAsText(B)});if(B.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||B.type==="application/msword")return console.log(`Processing Word document: ${B.name}`),new Promise(ie=>{const ne=new FileReader;ne.onload=ue=>{var z;const O=(z=ue.target)==null?void 0:z.result;console.log(`Word document ${B.name} read as data URL, length: ${O.length}`),ie({name:B.name,type:B.type,textContent:O,status:"processed"})},ne.onerror=ue=>{console.error(`Error reading Word document ${B.name}:`,ue),ie({name:B.name,type:B.type,status:"error",errorMessage:"Error reading document file."})},ne.readAsDataURL(B)})}return console.warn(`File type ${B.type} for ${B.name} is not explicitly handled for direct content extraction. Attempting to read as data URL for potential generic upload.`),new Promise(ie=>{const ne=new FileReader;ne.onload=ue=>{var z;const O=(z=ue.target)==null?void 0:z.result;console.log(`Generic file ${B.name} read as data URL, length: ${O.length}`),ie({name:B.name,type:B.type,textContent:O,status:"processed"})},ne.onerror=ue=>{console.error(`Error reading generic file ${B.name}:`,ue),ie({name:B.name,type:B.type,status:"error",errorMessage:"Error reading file data."})},ne.readAsDataURL(B)})},[]),W=Ve.useCallback(async B=>{const ie=B.target.files;if(ie){const ne=d.length,ue=Array.from(ie).slice(0,5-ne);for(const O of ue){const z=`${O.name}-${O.lastModified}-${O.size}-${Math.random().toString(36).substring(2,9)}`,le={id:z,name:O.name,type:O.type,originalFile:O,status:"processing"};f(we=>[...we,le]),F(O).then(we=>{f(P=>P.map(Z=>Z.id===z?{...Z,...we,status:we.status||(we.errorMessage?"error":"processed")}:Z))}).catch(we=>{console.error("Error in handleFileProcessing promise chain:",we),f(P=>P.map(Z=>Z.id===z?{...Z,status:"error",errorMessage:"Unexpected processing error."}:Z))})}y.current&&(y.current.value="")}},[d,F]),K=B=>{f(ie=>ie.filter(ne=>ne.id!==B))},Q=B=>{const ie=d.filter(ue=>ue.status==="processed");if(!l.trim()&&ie.length===0)return;if(d.some(ue=>ue.status==="processing")){alert("Some files are still processing. Please wait.");return}const ne=d.filter(ue=>ue.status==="error");ne.length>0&&!confirm(`${ne.length} file(s) had processing errors. Do you want to proceed with the successfully processed files and your query? Errors: ${ne.map(ue=>`${ue.name}: ${ue.errorMessage}`).join(", ")}`)||(o(l,ie,_),u(""),f([]),D(!1),A.current&&(A.current.style.height="auto"))},J=B=>{var ie;u(B),D(!1),(ie=A.current)==null||ie.focus()},se=B=>{x&&T.length>0&&(B.key==="ArrowDown"?(B.preventDefault(),U(ie=>(ie+1)%T.length)):B.key==="ArrowUp"?(B.preventDefault(),U(ie=>(ie-1+T.length)%T.length)):B.key==="Enter"&&L>-1?(B.preventDefault(),J(T[L]),U(-1)):B.key==="Escape"&&(D(!1),U(-1))),B.key==="Enter"&&!B.shiftKey&&!(x&&L>-1)&&(B.preventDefault(),Q())},ce=()=>{S(B=>!B)};return q.jsxs("div",{className:"bg-slate-800 p-2 sm:p-3 md:p-4 border-t border-slate-700 relative",children:[d.length>0&&q.jsx("div",{className:"mb-1.5 sm:mb-2 flex flex-wrap gap-1 sm:gap-2 items-center",children:d.map(B=>q.jsxs("div",{className:`flex items-center text-[0.7rem] sm:text-xs rounded-full py-0.5 px-2 sm:py-1 sm:px-3 space-x-1 animate-fade-in transition-transform duration-150 hover:scale-105 hover:shadow-md
                ${B.status==="processed"?"bg-green-600/30 text-green-300":""}
                ${B.status==="processing"?"bg-yellow-600/30 text-yellow-300 animate-pulse":""}
                ${B.status==="error"?"bg-red-600/30 text-red-300":""}
              `,title:B.status==="error"?B.errorMessage:B.name,children:[B.status==="processing"&&q.jsxs("svg",{className:"animate-spin h-3 w-3 mr-1 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[q.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),q.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),B.status==="processed"&&q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1 text-current",viewBox:"0 0 20 20",fill:"currentColor",children:q.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),B.status==="error"&&q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1 text-current",viewBox:"0 0 20 20",fill:"currentColor",children:q.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),q.jsx("span",{children:B.name.length>15?B.name.substring(0,13)+"...":B.name}),q.jsx("button",{type:"button",onClick:()=>K(B.id),disabled:e,className:"ml-0.5 sm:ml-1 text-current hover:text-white font-bold leading-none disabled:opacity-50","aria-label":`Remove ${B.name}`,children:"×"})]},B.id))}),q.jsxs("div",{className:"flex items-end bg-slate-700 rounded-lg sm:rounded-xl p-0.5 sm:p-1 shadow-md",children:[q.jsx("button",{type:"button",onClick:()=>{var B;return(B=y.current)==null?void 0:B.click()},disabled:e||d.length>=5,className:"p-2 sm:p-2.5 text-slate-400 hover:text-red-400 disabled:text-slate-600 disabled:cursor-not-allowed focus:outline-none rounded-full hover:bg-slate-600/50 transition-all duration-200 hover:scale-110 active:scale-100","aria-label":"Upload documents",title:"Upload documents (max 5 files)",children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 sm:w-6 sm:h-6",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),q.jsx("input",{type:"file",ref:y,multiple:!0,onChange:W,className:"hidden",accept:".txt,.md,.pdf,.doc,.docx,application/pdf,text/plain,text/markdown,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/jpeg,image/png,image/webp,image/gif,image/heic,image/heif",disabled:e||d.length>=5}),q.jsx("button",{type:"button",onClick:ce,disabled:e,className:`p-2 sm:p-2.5 rounded-full focus:outline-none hover:bg-slate-600/50 transition-all duration-200 hover:scale-110 active:scale-100
            ${_?"text-red-500 hover:text-red-600":"text-slate-400 hover:text-red-400"}
            ${e?"disabled:text-slate-600 disabled:cursor-not-allowed":""}
          `,"aria-label":"Toggle Web Search",title:_?"Disable Web Search":"Enable Web Search","aria-pressed":_,children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 sm:w-6 sm:h-6",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A11.978 11.978 0 0112 13.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0021 12c0 .778-.099 1.533-.284 2.253M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})}),q.jsx("textarea",{ref:A,rows:1,value:l,onChange:B=>u(B.target.value),onKeyDown:se,onFocus:()=>l.trim()&&T.length>0&&D(!0),placeholder:"Type your legal query...",className:"flex-grow p-2 sm:p-2.5 bg-transparent border-none focus:ring-0 text-sm sm:text-base text-gray-100 placeholder-slate-400 resize-none overflow-y-auto min-h-9 sm:min-h-11 max-h-32 sm:max-h-40 custom-scrollbar-thin",disabled:e,"aria-autocomplete":"list","aria-controls":"suggestions-listbox","aria-activedescendant":L>-1?`suggestion-${L}`:void 0}),q.jsx("button",{type:"button",onClick:()=>Q(),disabled:e||!l.trim()&&d.filter(B=>B.status==="processed").length===0||d.some(B=>B.status==="processing"),className:"p-2 sm:p-2.5 bg-red-600 text-white rounded-md sm:rounded-lg hover:bg-red-700 disabled:bg-red-800/50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-slate-700 transition-all duration-200 hover:scale-105 active:scale-95 ml-0.5 sm:ml-1","aria-label":"Send message",children:e?q.jsxs("svg",{className:"animate-spin h-5 w-5 sm:h-6 sm:w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[q.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),q.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 sm:w-6 sm:h-6",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]}),x&&T.length>0&&q.jsx("div",{ref:k,id:"suggestions-listbox",className:"absolute bottom-full left-0 right-0 mb-1 bg-slate-700 border border-slate-600 rounded-md shadow-lg max-h-48 overflow-y-auto z-50 custom-scrollbar-thin animate-fade-in-scale-up",role:"listbox",children:T.map((B,ie)=>q.jsx("div",{id:`suggestion-${ie}`,onClick:()=>J(B),onMouseEnter:()=>U(ie),className:`p-2 sm:p-2.5 text-xs sm:text-sm text-slate-200 hover:bg-slate-600 cursor-pointer ${L===ie?"bg-slate-600":""}`,role:"option","aria-selected":L===ie,children:B},ie))}),q.jsxs("div",{className:"grid md:grid-cols-2 gap-2 sm:gap-3 mt-2 sm:mt-3",children:[q.jsxs("div",{children:[q.jsx("label",{htmlFor:"chatServiceArea",className:"sr-only",children:"Service Area"}),q.jsx("select",{id:"chatServiceArea",value:t,onChange:B=>i(B.target.value),className:"w-full p-2 sm:p-2.5 text-xs sm:text-sm bg-slate-700 border border-slate-600 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 text-gray-100 placeholder-slate-400 transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-md",disabled:e,"aria-label":"Select Service Area",children:Object.values(Gi).map(B=>q.jsx("option",{value:B,children:B},B))})]}),q.jsxs("div",{children:[q.jsx("label",{htmlFor:"chatLegalTask",className:"sr-only",children:"Legal Task"}),q.jsx("select",{id:"chatLegalTask",value:n,onChange:B=>a(B.target.value),className:"w-full p-2 sm:p-2.5 text-xs sm:text-sm bg-slate-700 border border-slate-600 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 text-gray-100 placeholder-slate-400 transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-md",disabled:e,"aria-label":"Select Legal Task",children:Object.values(Mm).map(B=>q.jsx("option",{value:B,children:B},B))})]})]})]})};var et;(function(o){o.assertEqual=i=>{};function e(i){}o.assertIs=e;function t(i){throw new Error}o.assertNever=t,o.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},o.getValidEnumValues=i=>{const a=o.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return o.objectValues(l)},o.objectValues=i=>o.objectKeys(i).map(function(a){return i[a]}),o.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},o.find=(i,a)=>{for(const l of i)if(a(l))return l},o.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}o.joinValues=n,o.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(et||(et={}));var Dw;(function(o){o.mergeShapes=(e,t)=>({...e,...t})})(Dw||(Dw={}));const ve=et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vr=o=>{switch(typeof o){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return Number.isNaN(o)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(o)?ve.array:o===null?ve.null:o.then&&typeof o.then=="function"&&o.catch&&typeof o.catch=="function"?ve.promise:typeof Map<"u"&&o instanceof Map?ve.map:typeof Set<"u"&&o instanceof Set?ve.set:typeof Date<"u"&&o instanceof Date?ve.date:ve.object;default:return ve.unknown}},re=et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ga extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(t(l));else{let u=n,d=0;for(;d<l.path.length;){const f=l.path[d];d===l.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(t(l))):u[f]=u[f]||{_errors:[]},u=u[f],d++}}};return i(this),n}static assert(e){if(!(e instanceof Ga))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ga.create=o=>new Ga(o);const ub=(o,e)=>{let t;switch(o.code){case re.invalid_type:o.received===ve.undefined?t="Required":t=`Expected ${o.expected}, received ${o.received}`;break;case re.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(o.expected,et.jsonStringifyReplacer)}`;break;case re.unrecognized_keys:t=`Unrecognized key(s) in object: ${et.joinValues(o.keys,", ")}`;break;case re.invalid_union:t="Invalid input";break;case re.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${et.joinValues(o.options)}`;break;case re.invalid_enum_value:t=`Invalid enum value. Expected ${et.joinValues(o.options)}, received '${o.received}'`;break;case re.invalid_arguments:t="Invalid function arguments";break;case re.invalid_return_type:t="Invalid function return type";break;case re.invalid_date:t="Invalid date";break;case re.invalid_string:typeof o.validation=="object"?"includes"in o.validation?(t=`Invalid input: must include "${o.validation.includes}"`,typeof o.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${o.validation.position}`)):"startsWith"in o.validation?t=`Invalid input: must start with "${o.validation.startsWith}"`:"endsWith"in o.validation?t=`Invalid input: must end with "${o.validation.endsWith}"`:et.assertNever(o.validation):o.validation!=="regex"?t=`Invalid ${o.validation}`:t="Invalid";break;case re.too_small:o.type==="array"?t=`Array must contain ${o.exact?"exactly":o.inclusive?"at least":"more than"} ${o.minimum} element(s)`:o.type==="string"?t=`String must contain ${o.exact?"exactly":o.inclusive?"at least":"over"} ${o.minimum} character(s)`:o.type==="number"?t=`Number must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${o.minimum}`:o.type==="date"?t=`Date must be ${o.exact?"exactly equal to ":o.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(o.minimum))}`:t="Invalid input";break;case re.too_big:o.type==="array"?t=`Array must contain ${o.exact?"exactly":o.inclusive?"at most":"less than"} ${o.maximum} element(s)`:o.type==="string"?t=`String must contain ${o.exact?"exactly":o.inclusive?"at most":"under"} ${o.maximum} character(s)`:o.type==="number"?t=`Number must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="bigint"?t=`BigInt must be ${o.exact?"exactly":o.inclusive?"less than or equal to":"less than"} ${o.maximum}`:o.type==="date"?t=`Date must be ${o.exact?"exactly":o.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(o.maximum))}`:t="Invalid input";break;case re.custom:t="Invalid input";break;case re.invalid_intersection_types:t="Intersection results could not be merged";break;case re.not_multiple_of:t=`Number must be a multiple of ${o.multipleOf}`;break;case re.not_finite:t="Number must be finite";break;default:t=e.defaultError,et.assertNever(o)}return{message:t}};let wL=ub;function EL(){return wL}const xL=o=>{const{data:e,path:t,errorMaps:n,issueData:i}=o,a=[...t,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const d=n.filter(f=>!!f).slice().reverse();for(const f of d)u=f(l,{data:e,defaultError:u}).message;return{...i,path:a,message:u}};function fe(o,e){const t=EL(),n=xL({issueData:e,data:o.data,path:o.path,errorMaps:[o.common.contextualErrorMap,o.schemaErrorMap,t,t===ub?void 0:ub].filter(i=>!!i)});o.common.issues.push(n)}class Bn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if(i.status==="aborted")return Ne;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const i of t){const a=await i.key,l=await i.value;n.push({key:a,value:l})}return Bn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return Ne;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(n[a.value]=l.value)}return{status:e.value,value:n}}}const Ne=Object.freeze({status:"aborted"}),wh=o=>({status:"dirty",value:o}),Wi=o=>({status:"valid",value:o}),kw=o=>o.status==="aborted",Nw=o=>o.status==="dirty",Xu=o=>o.status==="valid",Rm=o=>typeof Promise<"u"&&o instanceof Promise;var Ae;(function(o){o.errToObj=e=>typeof e=="string"?{message:e}:e||{},o.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class Ws{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Lw=(o,e)=>{if(Xu(e))return{success:!0,data:e.value};if(!o.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ga(o.common.issues);return this._error=t,this._error}}};function He(o){if(!o)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:i}=o;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{const{message:d}=o;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??n??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??t??u.defaultError}},description:i}}class Ze{get description(){return this._def.description}_getType(e){return vr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:vr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Bn,ctx:{common:e.parent.common,data:e.data,parsedType:vr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Rm(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Lw(n,i)}"~validate"(e){var n,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vr(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return Xu(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(i=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>Xu(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vr(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(Rm(i)?i:Promise.resolve(i));return Lw(n,a)}refine(e,t){const n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,a)=>{const l=e(i),u=()=>a.addIssue({code:re.custom,...n(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new Qu({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Qr.create(this,this._def)}nullable(){return Ju.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ys.create(this)}promise(){return Lm.create(this,this._def)}or(e){return Dm.create([this,e],this._def)}and(e){return km.create(this,e,this._def)}transform(e){return new Qu({...He(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new pb({...He(this._def),innerType:this,defaultValue:t,typeName:De.ZodDefault})}brand(){return new ZL({typeName:De.ZodBranded,type:this,...He(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new gb({...He(this._def),innerType:this,catchValue:t,typeName:De.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return $b.create(this,e)}readonly(){return mb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ML=/^c[^\s-]{8,}$/i,RL=/^[0-9a-z]+$/,IL=/^[0-9A-HJKMNP-TV-Z]{26}$/i,DL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kL=/^[a-z0-9_-]{21}$/i,NL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,LL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,PL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,OL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let q0;const FL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,UL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,HL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",GL=new RegExp(`^${yM}$`);function vM(o){let e="[0-5]\\d";o.precision?e=`${e}\\.\\d{${o.precision}}`:o.precision==null&&(e=`${e}(\\.\\d+)?`);const t=o.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function qL(o){return new RegExp(`^${vM(o)}$`)}function $L(o){let e=`${yM}T${vM(o)}`;const t=[];return t.push(o.local?"Z?":"Z"),o.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function YL(o,e){return!!((e==="v4"||!e)&&FL.test(o)||(e==="v6"||!e)&&HL.test(o))}function WL(o,e){if(!NL.test(o))return!1;try{const[t]=o.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function XL(o,e){return!!((e==="v4"||!e)&&UL.test(o)||(e==="v6"||!e)&&BL.test(o))}class $s extends Ze{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){const a=this._getOrReturnCtx(e);return fe(a,{code:re.invalid_type,expected:ve.string,received:a.parsedType}),Ne}const n=new Bn;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?fe(i,{code:re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&fe(i,{code:re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")PL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"email",code:re.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")q0||(q0=new RegExp(OL,"u")),q0.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"emoji",code:re.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")DL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"uuid",code:re.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")kL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"nanoid",code:re.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")ML.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cuid",code:re.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")RL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cuid2",code:re.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")IL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"ulid",code:re.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),fe(i,{validation:"url",code:re.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"regex",code:re.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?$L(a).test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?GL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?qL(a).test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{code:re.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?LL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"duration",code:re.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?YL(e.data,a.version)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"ip",code:re.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?WL(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"jwt",code:re.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?XL(e.data,a.version)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cidr",code:re.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?VL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"base64",code:re.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?zL.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"base64url",code:re.invalid_string,message:a.message}),n.dirty()):et.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:re.invalid_string,...Ae.errToObj(n)})}_addCheck(e){return new $s({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ae.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ae.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ae.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ae.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ae.errToObj(t)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new $s({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $s({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $s({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}$s.create=o=>new $s({checks:[],typeName:De.ZodString,coerce:(o==null?void 0:o.coerce)??!1,...He(o)});function KL(o,e){const t=(o.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,a=Number.parseInt(o.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return a%l/10**i}class Ul extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){const a=this._getOrReturnCtx(e);return fe(a,{code:re.invalid_type,expected:ve.number,received:a.parsedType}),Ne}let n;const i=new Bn;for(const a of this._def.checks)a.kind==="int"?et.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),fe(n,{code:re.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?KL(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),fe(n,{code:re.not_finite,message:a.message}),i.dirty()):et.assertNever(a);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ae.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ae.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ae.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ae.toString(t))}setLimit(e,t,n,i){return new Ul({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ae.toString(i)}]})}_addCheck(e){return new Ul({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&et.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ul.create=o=>new Ul({checks:[],typeName:De.ZodNumber,coerce:(o==null?void 0:o.coerce)||!1,...He(o)});class Hl extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ve.bigint)return this._getInvalidInput(e);let n;const i=new Bn;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),fe(n,{code:re.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):et.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return fe(t,{code:re.invalid_type,expected:ve.bigint,received:t.parsedType}),Ne}gte(e,t){return this.setLimit("min",e,!0,Ae.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ae.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ae.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ae.toString(t))}setLimit(e,t,n,i){return new Hl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ae.toString(i)}]})}_addCheck(e){return new Hl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Hl.create=o=>new Hl({checks:[],typeName:De.ZodBigInt,coerce:(o==null?void 0:o.coerce)??!1,...He(o)});class Im extends Ze{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ve.boolean,received:n.parsedType}),Ne}return Wi(e.data)}}Im.create=o=>new Im({typeName:De.ZodBoolean,coerce:(o==null?void 0:o.coerce)||!1,...He(o)});class Ku extends Ze{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){const a=this._getOrReturnCtx(e);return fe(a,{code:re.invalid_type,expected:ve.date,received:a.parsedType}),Ne}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return fe(a,{code:re.invalid_date}),Ne}const n=new Bn;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:re.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):et.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ku({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ku.create=o=>new Ku({checks:[],coerce:(o==null?void 0:o.coerce)||!1,typeName:De.ZodDate,...He(o)});class Pw extends Ze{_parse(e){if(this._getType(e)!==ve.symbol){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ve.symbol,received:n.parsedType}),Ne}return Wi(e.data)}}Pw.create=o=>new Pw({typeName:De.ZodSymbol,...He(o)});class Ow extends Ze{_parse(e){if(this._getType(e)!==ve.undefined){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ve.undefined,received:n.parsedType}),Ne}return Wi(e.data)}}Ow.create=o=>new Ow({typeName:De.ZodUndefined,...He(o)});class Fw extends Ze{_parse(e){if(this._getType(e)!==ve.null){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ve.null,received:n.parsedType}),Ne}return Wi(e.data)}}Fw.create=o=>new Fw({typeName:De.ZodNull,...He(o)});class Uw extends Ze{constructor(){super(...arguments),this._any=!0}_parse(e){return Wi(e.data)}}Uw.create=o=>new Uw({typeName:De.ZodAny,...He(o)});class db extends Ze{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wi(e.data)}}db.create=o=>new db({typeName:De.ZodUnknown,...He(o)});class eo extends Ze{_parse(e){const t=this._getOrReturnCtx(e);return fe(t,{code:re.invalid_type,expected:ve.never,received:t.parsedType}),Ne}}eo.create=o=>new eo({typeName:De.ZodNever,...He(o)});class Hw extends Ze{_parse(e){if(this._getType(e)!==ve.undefined){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ve.void,received:n.parsedType}),Ne}return Wi(e.data)}}Hw.create=o=>new Hw({typeName:De.ZodVoid,...He(o)});class Ys extends Ze{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==ve.array)return fe(t,{code:re.invalid_type,expected:ve.array,received:t.parsedType}),Ne;if(i.exactLength!==null){const l=t.data.length>i.exactLength.value,u=t.data.length<i.exactLength.value;(l||u)&&(fe(t,{code:l?re.too_big:re.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(fe(t,{code:re.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(fe(t,{code:re.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((l,u)=>i.type._parseAsync(new Ws(t,l,t.path,u)))).then(l=>Bn.mergeArray(n,l));const a=[...t.data].map((l,u)=>i.type._parseSync(new Ws(t,l,t.path,u)));return Bn.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new Ys({...this._def,minLength:{value:e,message:Ae.toString(t)}})}max(e,t){return new Ys({...this._def,maxLength:{value:e,message:Ae.toString(t)}})}length(e,t){return new Ys({...this._def,exactLength:{value:e,message:Ae.toString(t)}})}nonempty(e){return this.min(1,e)}}Ys.create=(o,e)=>new Ys({type:o,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...He(e)});function Fc(o){if(o instanceof zt){const e={};for(const t in o.shape){const n=o.shape[t];e[t]=Qr.create(Fc(n))}return new zt({...o._def,shape:()=>e})}else return o instanceof Ys?new Ys({...o._def,type:Fc(o.element)}):o instanceof Qr?Qr.create(Fc(o.unwrap())):o instanceof Ju?Ju.create(Fc(o.unwrap())):o instanceof Bl?Bl.create(o.items.map(e=>Fc(e))):o}class zt extends Ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=et.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ve.object){const f=this._getOrReturnCtx(e);return fe(f,{code:re.invalid_type,expected:ve.object,received:f.parsedType}),Ne}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof eo&&this._def.unknownKeys==="strip"))for(const f in i.data)l.includes(f)||u.push(f);const d=[];for(const f of l){const y=a[f],A=i.data[f];d.push({key:{status:"valid",value:f},value:y._parse(new Ws(i,A,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof eo){const f=this._def.unknownKeys;if(f==="passthrough")for(const y of u)d.push({key:{status:"valid",value:y},value:{status:"valid",value:i.data[y]}});else if(f==="strict")u.length>0&&(fe(i,{code:re.unrecognized_keys,keys:u}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const y of u){const A=i.data[y];d.push({key:{status:"valid",value:y},value:f._parse(new Ws(i,A,i.path,y)),alwaysSet:y in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const y of d){const A=await y.key,_=await y.value;f.push({key:A,value:_,alwaysSet:y.alwaysSet})}return f}).then(f=>Bn.mergeObjectSync(n,f)):Bn.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new zt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,l;const i=((l=(a=this._def).errorMap)==null?void 0:l.call(a,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:Ae.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new zt({...this._def,unknownKeys:"strip"})}passthrough(){return new zt({...this._def,unknownKeys:"passthrough"})}extend(e){return new zt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new zt({...this._def,catchall:e})}pick(e){const t={};for(const n of et.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new zt({...this._def,shape:()=>t})}omit(e){const t={};for(const n of et.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new zt({...this._def,shape:()=>t})}deepPartial(){return Fc(this)}partial(e){const t={};for(const n of et.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}return new zt({...this._def,shape:()=>t})}required(e){const t={};for(const n of et.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Qr;)a=a._def.innerType;t[n]=a}return new zt({...this._def,shape:()=>t})}keyof(){return AM(et.objectKeys(this.shape))}}zt.create=(o,e)=>new zt({shape:()=>o,unknownKeys:"strip",catchall:eo.create(),typeName:De.ZodObject,...He(e)});zt.strictCreate=(o,e)=>new zt({shape:()=>o,unknownKeys:"strict",catchall:eo.create(),typeName:De.ZodObject,...He(e)});zt.lazycreate=(o,e)=>new zt({shape:o,unknownKeys:"strip",catchall:eo.create(),typeName:De.ZodObject,...He(e)});class Dm extends Ze{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new Ga(u.ctx.common.issues));return fe(t,{code:re.invalid_union,unionErrors:l}),Ne}if(t.common.async)return Promise.all(n.map(async a=>{const l={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const d of n){const f={...t,common:{...t.common,issues:[]},parent:null},y=d._parseSync({data:t.data,path:t.path,parent:f});if(y.status==="valid")return y;y.status==="dirty"&&!a&&(a={result:y,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(d=>new Ga(d));return fe(t,{code:re.invalid_union,unionErrors:u}),Ne}}get options(){return this._def.options}}Dm.create=(o,e)=>new Dm({options:o,typeName:De.ZodUnion,...He(e)});function hb(o,e){const t=vr(o),n=vr(e);if(o===e)return{valid:!0,data:o};if(t===ve.object&&n===ve.object){const i=et.objectKeys(e),a=et.objectKeys(o).filter(u=>i.indexOf(u)!==-1),l={...o,...e};for(const u of a){const d=hb(o[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(t===ve.array&&n===ve.array){if(o.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<o.length;a++){const l=o[a],u=e[a],d=hb(l,u);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return t===ve.date&&n===ve.date&&+o==+e?{valid:!0,data:o}:{valid:!1}}class km extends Ze{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(a,l)=>{if(kw(a)||kw(l))return Ne;const u=hb(a.value,l.value);return u.valid?((Nw(a)||Nw(l))&&t.dirty(),{status:t.value,value:u.data}):(fe(n,{code:re.invalid_intersection_types}),Ne)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}km.create=(o,e,t)=>new km({left:o,right:e,typeName:De.ZodIntersection,...He(t)});class Bl extends Ze{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.array)return fe(n,{code:re.invalid_type,expected:ve.array,received:n.parsedType}),Ne;if(n.data.length<this._def.items.length)return fe(n,{code:re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ne;!this._def.rest&&n.data.length>this._def.items.length&&(fe(n,{code:re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new Ws(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>Bn.mergeArray(t,l)):Bn.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Bl({...this._def,rest:e})}}Bl.create=(o,e)=>{if(!Array.isArray(o))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bl({items:o,typeName:De.ZodTuple,rest:null,...He(e)})};class Nm extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.object)return fe(n,{code:re.invalid_type,expected:ve.object,received:n.parsedType}),Ne;const i=[],a=this._def.keyType,l=this._def.valueType;for(const u in n.data)i.push({key:a._parse(new Ws(n,u,n.path,u)),value:l._parse(new Ws(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?Bn.mergeObjectAsync(t,i):Bn.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Ze?new Nm({keyType:e,valueType:t,typeName:De.ZodRecord,...He(n)}):new Nm({keyType:$s.create(),valueType:e,typeName:De.ZodRecord,...He(t)})}}class Bw extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.map)return fe(n,{code:re.invalid_type,expected:ve.map,received:n.parsedType}),Ne;const i=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([u,d],f)=>({key:i._parse(new Ws(n,u,n.path,[f,"key"])),value:a._parse(new Ws(n,d,n.path,[f,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const f=await d.key,y=await d.value;if(f.status==="aborted"||y.status==="aborted")return Ne;(f.status==="dirty"||y.status==="dirty")&&t.dirty(),u.set(f.value,y.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const d of l){const f=d.key,y=d.value;if(f.status==="aborted"||y.status==="aborted")return Ne;(f.status==="dirty"||y.status==="dirty")&&t.dirty(),u.set(f.value,y.value)}return{status:t.value,value:u}}}}Bw.create=(o,e,t)=>new Bw({valueType:e,keyType:o,typeName:De.ZodMap,...He(t)});class Oh extends Ze{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.set)return fe(n,{code:re.invalid_type,expected:ve.set,received:n.parsedType}),Ne;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(fe(n,{code:re.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(fe(n,{code:re.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function l(d){const f=new Set;for(const y of d){if(y.status==="aborted")return Ne;y.status==="dirty"&&t.dirty(),f.add(y.value)}return{status:t.value,value:f}}const u=[...n.data.values()].map((d,f)=>a._parse(new Ws(n,d,n.path,f)));return n.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,t){return new Oh({...this._def,minSize:{value:e,message:Ae.toString(t)}})}max(e,t){return new Oh({...this._def,maxSize:{value:e,message:Ae.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Oh.create=(o,e)=>new Oh({valueType:o,minSize:null,maxSize:null,typeName:De.ZodSet,...He(e)});class fb extends Ze{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}fb.create=(o,e)=>new fb({getter:o,typeName:De.ZodLazy,...He(e)});class Vw extends Ze{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return fe(t,{received:t.data,code:re.invalid_literal,expected:this._def.value}),Ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}Vw.create=(o,e)=>new Vw({value:o,typeName:De.ZodLiteral,...He(e)});function AM(o,e){return new Zu({values:o,typeName:De.ZodEnum,...He(e)})}class Zu extends Ze{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return fe(t,{expected:et.joinValues(n),received:t.parsedType,code:re.invalid_type}),Ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return fe(t,{received:t.data,code:re.invalid_enum_value,options:n}),Ne}return Wi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Zu.create(e,{...this._def,...t})}exclude(e,t=this._def){return Zu.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Zu.create=AM;class zw extends Ze{_parse(e){const t=et.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ve.string&&n.parsedType!==ve.number){const i=et.objectValues(t);return fe(n,{expected:et.joinValues(i),received:n.parsedType,code:re.invalid_type}),Ne}if(this._cache||(this._cache=new Set(et.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=et.objectValues(t);return fe(n,{received:n.data,code:re.invalid_enum_value,options:i}),Ne}return Wi(e.data)}get enum(){return this._def.values}}zw.create=(o,e)=>new zw({values:o,typeName:De.ZodNativeEnum,...He(e)});class Lm extends Ze{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.promise&&t.common.async===!1)return fe(t,{code:re.invalid_type,expected:ve.promise,received:t.parsedType}),Ne;const n=t.parsedType===ve.promise?t.data:Promise.resolve(t.data);return Wi(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Lm.create=(o,e)=>new Lm({type:o,typeName:De.ZodPromise,...He(e)});class Qu extends Ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{fe(n,l),l.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async u=>{if(t.value==="aborted")return Ne;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?Ne:d.status==="dirty"||t.value==="dirty"?wh(d.value):d});{if(t.value==="aborted")return Ne;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?Ne:u.status==="dirty"||t.value==="dirty"?wh(u.value):u}}if(i.type==="refinement"){const l=u=>{const d=i.refinement(u,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?Ne:(u.status==="dirty"&&t.dirty(),l(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?Ne:(u.status==="dirty"&&t.dirty(),l(u.value).then(()=>({status:t.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Xu(l))return Ne;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>Xu(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:t.value,value:u})):Ne);et.assertNever(i)}}Qu.create=(o,e,t)=>new Qu({schema:o,typeName:De.ZodEffects,effect:e,...He(t)});Qu.createWithPreprocess=(o,e,t)=>new Qu({schema:e,effect:{type:"preprocess",transform:o},typeName:De.ZodEffects,...He(t)});class Qr extends Ze{_parse(e){return this._getType(e)===ve.undefined?Wi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qr.create=(o,e)=>new Qr({innerType:o,typeName:De.ZodOptional,...He(e)});class Ju extends Ze{_parse(e){return this._getType(e)===ve.null?Wi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ju.create=(o,e)=>new Ju({innerType:o,typeName:De.ZodNullable,...He(e)});class pb extends Ze{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===ve.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}pb.create=(o,e)=>new pb({innerType:o,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...He(e)});class gb extends Ze{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Rm(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ga(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ga(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}gb.create=(o,e)=>new gb({innerType:o,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...He(e)});class Gw extends Ze{_parse(e){if(this._getType(e)!==ve.nan){const n=this._getOrReturnCtx(e);return fe(n,{code:re.invalid_type,expected:ve.nan,received:n.parsedType}),Ne}return{status:"valid",value:e.data}}}Gw.create=o=>new Gw({typeName:De.ZodNaN,...He(o)});class ZL extends Ze{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class $b extends Ze{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Ne:a.status==="dirty"?(t.dirty(),wh(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Ne:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new $b({in:e,out:t,typeName:De.ZodPipeline})}}class mb extends Ze{_parse(e){const t=this._def.innerType._parse(e),n=i=>(Xu(i)&&(i.value=Object.freeze(i.value)),i);return Rm(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}}mb.create=(o,e)=>new mb({innerType:o,typeName:De.ZodReadonly,...He(e)});var De;(function(o){o.ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline",o.ZodReadonly="ZodReadonly"})(De||(De={}));const Co=$s.create,qw=Ul.create;Hl.create;const QL=Im.create;Ku.create;const $w=db.create;eo.create;const Eh=Ys.create,JL=zt.create,jL=Dm.create;km.create;Bl.create;const eP=Nm.create,tP=fb.create,nP=Zu.create;Lm.create;Qr.create;Ju.create;const Rc={string:o=>$s.create({...o,coerce:!0}),number:o=>Ul.create({...o,coerce:!0}),boolean:o=>Im.create({...o,coerce:!0}),bigint:o=>Hl.create({...o,coerce:!0}),date:o=>Ku.create({...o,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let iP,sP;function aP(){return{geminiUrl:iP,vertexUrl:sP}}function rP(o,e,t){var n,i,a;if(!(!((n=o.httpOptions)===null||n===void 0)&&n.baseUrl)){const l=aP();return o.vertexai?(i=l.vertexUrl)!==null&&i!==void 0?i:e:(a=l.geminiUrl)!==null&&a!==void 0?a:t}return o.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pp{}function Ie(o,e){const t=/\{([^}]+)\}/g;return o.replace(t,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(o,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in o))if(Array.isArray(t))o[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(o[u])){const d=o[u];if(Array.isArray(t))for(let f=0;f<d.length;f++){const y=d[f];m(y,e.slice(a+1),t[f])}else for(const f of d)m(f,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in o||(o[u]=[{}]);const d=o[u];m(d[0],e.slice(a+1),t);return}(!o[l]||typeof o[l]!="object")&&(o[l]={}),o=o[l]}const n=e[e.length-1],i=o[n];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else o[n]=t}function g(o,e){try{if(e.length===1&&e[0]==="_self")return o;for(let t=0;t<e.length;t++){if(typeof o!="object"||o===null)return;const n=e[t];if(n.endsWith("[]")){const i=n.slice(0,-2);if(i in o){const a=o[i];return Array.isArray(a)?a.map(l=>g(l,e.slice(t+1))):void 0}else return}else o=o[n]}return o}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yw;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Yw||(Yw={}));var Ww;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(Ww||(Ww={}));var zs;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT",o.NULL="NULL"})(zs||(zs={}));var Xw;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Xw||(Xw={}));var Kw;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(Kw||(Kw={}));var Zw;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(Zw||(Zw={}));var Qw;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Qw||(Qw={}));var Jw;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})(Jw||(Jw={}));var jw;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY"})(jw||(jw={}));var eE;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(eE||(eE={}));var tE;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(tE||(tE={}));var nE;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(nE||(nE={}));var iE;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(iE||(iE={}));var Pm;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(Pm||(Pm={}));var sE;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sE||(sE={}));var yb;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(yb||(yb={}));var aE;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(aE||(aE={}));var rE;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(rE||(rE={}));var oE;(function(o){o.UNSPECIFIED="UNSPECIFIED",o.BLOCKING="BLOCKING",o.NON_BLOCKING="NON_BLOCKING"})(oE||(oE={}));var lE;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(lE||(lE={}));var cE;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(cE||(cE={}));var uE;(function(o){o.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",o.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",o.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(uE||(uE={}));var dE;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(dE||(dE={}));var hE;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(hE||(hE={}));var fE;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi"})(fE||(fE={}));var pE;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(pE||(pE={}));var gE;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(gE||(gE={}));var mE;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mE||(mE={}));var yE;(function(o){o.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",o.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",o.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",o.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",o.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",o.EDIT_MODE_STYLE="EDIT_MODE_STYLE",o.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",o.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(yE||(yE={}));var vE;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(vE||(vE={}));var AE;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(AE||(AE={}));var bE;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(bE||(bE={}));var _E;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_E||(_E={}));var SE;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(SE||(SE={}));var TE;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(TE||(TE={}));var CE;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(CE||(CE={}));var wE;(function(o){o.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",o.SILENT="SILENT",o.WHEN_IDLE="WHEN_IDLE",o.INTERRUPT="INTERRUPT"})(wE||(wE={}));var EE;(function(o){o.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",o.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",o.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",o.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",o.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",o.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",o.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",o.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",o.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",o.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",o.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",o.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",o.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(EE||(EE={}));var Uc;(function(o){o.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",o.PLAY="PLAY",o.PAUSE="PAUSE",o.STOP="STOP",o.RESET_CONTEXT="RESET_CONTEXT"})(Uc||(Uc={}));class oh{get text(){var e,t,n,i,a,l,u,d;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",y=!1;const A=[];for(const _ of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[S,T]of Object.entries(_))S!=="text"&&S!=="thought"&&(T!==null||T!==void 0)&&A.push(S);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;y=!0,f+=_.text}}return A.length>0&&console.warn(`there are non-text parts ${A} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?f:void 0}get data(){var e,t,n,i,a,l,u,d;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const y=[];for(const A of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[_,S]of Object.entries(A))_!=="inlineData"&&(S!==null||S!==void 0)&&y.push(_);A.inlineData&&typeof A.inlineData.data=="string"&&(f+=atob(A.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,n,i,a,l,u,d;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,n,i,a,l,u,d,f;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(A=>A.executableCode).map(A=>A.executableCode).filter(A=>A!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,n,i,a,l,u,d,f;if(((i=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(A=>A.codeExecutionResult).map(A=>A.codeExecutionResult).filter(A=>A!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.output}}class xE{}class ME{}class oP{}class lP{}class RE{}class IE{}class DE{}class cP{}class kE{}class NE{}class LE{}class uP{}class vb{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class dP{}class hP{}class fP{get text(){var e,t,n;let i="",a=!1;const l=[];for(const u of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[d,f]of Object.entries(u))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,i+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,t,n;let i="";const a=[];for(const l of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class pP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _t(o,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bM(o,e){const t=_t(o,e);return t?t.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}`:t.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${t}`:t:""}function _M(o,e){return Array.isArray(e)?e.map(t=>Om(o,t)):[Om(o,e)]}function Om(o,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function gP(o,e){const t=Om(o,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function mP(o,e){const t=Om(o,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function PE(o,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function SM(o,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>PE(o,t)):[PE(o,e)]}function Ab(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function OE(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function FE(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function jn(o,e){if(e==null)throw new Error("ContentUnion is required");return Ab(e)?e:{role:"user",parts:SM(o,e)}}function TM(o,e){if(!e)return[];if(o.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=jn(o,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(o.isVertexAI()){const t=jn(o,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>jn(o,t)):[jn(o,e)]}function fs(o,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(OE(e)||FE(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[jn(o,e)]}const t=[],n=[],i=Ab(e[0]);for(const a of e){const l=Ab(a);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(a);else{if(OE(a)||FE(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||t.push({role:"user",parts:SM(o,n)}),t}const UE=nP(["string","number","integer","object","array","boolean","null"]),yP=jL([UE,Eh(UE)]);function vP(o=!0){const e=tP(()=>{const t=JL({type:yP.optional(),format:Co().optional(),title:Co().optional(),description:Co().optional(),default:$w().optional(),items:e.optional(),minItems:Rc.string().optional(),maxItems:Rc.string().optional(),enum:Eh($w()).optional(),properties:eP(Co(),e).optional(),required:Eh(Co()).optional(),minProperties:Rc.string().optional(),maxProperties:Rc.string().optional(),propertyOrdering:Eh(Co()).optional(),minimum:qw().optional(),maximum:qw().optional(),minLength:Rc.string().optional(),maxLength:Rc.string().optional(),pattern:Co().optional(),anyOf:Eh(e).optional(),additionalProperties:QL().optional()});return o?t.strict():t});return e}function AP(o,e){o.includes("null")&&(e.nullable=!0);const t=o.filter(n=>n!=="null");if(t.length===1)e.type=Object.keys(zs).includes(t[0].toUpperCase())?zs[t[0].toUpperCase()]:zs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.keys(zs).includes(n.toUpperCase())?zs[n.toUpperCase()]:zs.TYPE_UNSPECIFIED})}}function Ih(o){const e={},t=["items"],n=["anyOf"],i=["properties"];if(o.type&&o.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=o.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,o=a[1]):a[1].type==="null"&&(e.nullable=!0,o=a[0])),o.type instanceof Array&&AP(o.type,e);for(const[l,u]of Object.entries(o))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.keys(zs).includes(u.toUpperCase())?u.toUpperCase():zs.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Ih(u);else if(n.includes(l)){const d=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}d.push(Ih(f))}e[l]=d}else if(i.includes(l)){const d={};for(const[f,y]of Object.entries(u))d[f]=Ih(y);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Fm(o,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=vP().parse(e);return Ih(t)}else return Ih(e)}function CM(o,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function wM(o,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function hy(o,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=Fm(o,t.parameters)),t.response&&(t.response=Fm(o,t.response));return e}function fy(o,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function bP(o,e,t,n=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===n;return o.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${o.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:i?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function io(o,e){if(typeof e!="string")throw new Error("name must be a string");return bP(o,e,"cachedContents")}function EM(o,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function so(o,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function _P(o){return o!=null&&typeof o=="object"&&"name"in o}function SP(o){return o!=null&&typeof o=="object"&&"video"in o}function TP(o){return o!=null&&typeof o=="object"&&"uri"in o}function xM(o,e){var t;let n;if(_P(e)&&(n=e.name),!(TP(e)&&(n=e.uri,n===void 0))&&!(SP(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function MM(o,e){let t;return o.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function RM(o,e){for(const t of["models","tunedModels","publisherModels"])if(CP(e,t))return e[t];return[]}function CP(o,e){return o!==null&&typeof o=="object"&&e in o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wP(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function EP(o,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["data"]);n!=null&&m(t,["data"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function xP(o,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);n!=null&&m(t,["fileUri"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function MP(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],wP(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],EP(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],xP(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function HE(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>MP(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function RP(o,e){const t={},n=g(e,["behavior"]);n!=null&&m(t,["behavior"],n);const i=g(e,["description"]);i!=null&&m(t,["description"],i);const a=g(e,["name"]);a!=null&&m(t,["name"],a);const l=g(e,["parameters"]);l!=null&&m(t,["parameters"],l);const u=g(e,["response"]);return u!=null&&m(t,["response"],u),t}function IP(o,e){const t={},n=g(e,["startTime"]);n!=null&&m(t,["startTime"],n);const i=g(e,["endTime"]);return i!=null&&m(t,["endTime"],i),t}function DP(o,e){const t={},n=g(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],IP(o,n)),t}function kP(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["dynamicThreshold"]);return i!=null&&m(t,["dynamicThreshold"],i),t}function NP(o,e){const t={},n=g(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],kP(o,n)),t}function LP(){return{}}function PP(o,e){const t={},n=g(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>RP(o,f))),m(t,["functionDeclarations"],d)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(e,["googleSearch"]);i!=null&&m(t,["googleSearch"],DP(o,i));const a=g(e,["googleSearchRetrieval"]);if(a!=null&&m(t,["googleSearchRetrieval"],NP(o,a)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&m(t,["urlContext"],LP());const u=g(e,["codeExecution"]);return u!=null&&m(t,["codeExecution"],u),t}function OP(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["allowedFunctionNames"]);return i!=null&&m(t,["allowedFunctionNames"],i),t}function FP(o,e){const t={},n=g(e,["latitude"]);n!=null&&m(t,["latitude"],n);const i=g(e,["longitude"]);return i!=null&&m(t,["longitude"],i),t}function UP(o,e){const t={},n=g(e,["latLng"]);n!=null&&m(t,["latLng"],FP(o,n));const i=g(e,["languageCode"]);return i!=null&&m(t,["languageCode"],i),t}function HP(o,e){const t={},n=g(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],OP(o,n));const i=g(e,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],UP(o,i)),t}function BP(o,e,t){const n={},i=g(e,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const a=g(e,["expireTime"]);t!==void 0&&a!=null&&m(t,["expireTime"],a);const l=g(e,["displayName"]);t!==void 0&&l!=null&&m(t,["displayName"],l);const u=g(e,["contents"]);if(t!==void 0&&u!=null){let A=fs(o,u);Array.isArray(A)&&(A=A.map(_=>HE(o,_))),m(t,["contents"],A)}const d=g(e,["systemInstruction"]);t!==void 0&&d!=null&&m(t,["systemInstruction"],HE(o,jn(o,d)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let A=f;Array.isArray(A)&&(A=A.map(_=>PP(o,_))),m(t,["tools"],A)}const y=g(e,["toolConfig"]);if(t!==void 0&&y!=null&&m(t,["toolConfig"],HP(o,y)),g(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function VP(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["model"],bM(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],BP(o,i,t)),t}function zP(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],io(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function GP(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],io(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function qP(o,e,t){const n={},i=g(e,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const a=g(e,["expireTime"]);return t!==void 0&&a!=null&&m(t,["expireTime"],a),n}function $P(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],io(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],qP(o,i,t)),t}function YP(o,e,t){const n={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const a=g(e,["pageToken"]);return t!==void 0&&a!=null&&m(t,["_query","pageToken"],a),n}function WP(o,e){const t={},n=g(e,["config"]);return n!=null&&m(t,["config"],YP(o,n,t)),t}function XP(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function KP(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["data"]);i!=null&&m(t,["data"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function ZP(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["fileUri"]);i!=null&&m(t,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function QP(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],XP(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],KP(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],ZP(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function BE(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>QP(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function JP(o,e){const t={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);n!=null&&m(t,["description"],n);const i=g(e,["name"]);i!=null&&m(t,["name"],i);const a=g(e,["parameters"]);a!=null&&m(t,["parameters"],a);const l=g(e,["response"]);return l!=null&&m(t,["response"],l),t}function jP(o,e){const t={},n=g(e,["startTime"]);n!=null&&m(t,["startTime"],n);const i=g(e,["endTime"]);return i!=null&&m(t,["endTime"],i),t}function e2(o,e){const t={},n=g(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],jP(o,n)),t}function t2(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["dynamicThreshold"]);return i!=null&&m(t,["dynamicThreshold"],i),t}function n2(o,e){const t={},n=g(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],t2(o,n)),t}function i2(){return{}}function s2(o,e){const t={},n=g(e,["apiKeyString"]);return n!=null&&m(t,["apiKeyString"],n),t}function a2(o,e){const t={},n=g(e,["apiKeyConfig"]);n!=null&&m(t,["apiKeyConfig"],s2(o,n));const i=g(e,["authType"]);i!=null&&m(t,["authType"],i);const a=g(e,["googleServiceAccountConfig"]);a!=null&&m(t,["googleServiceAccountConfig"],a);const l=g(e,["httpBasicAuthConfig"]);l!=null&&m(t,["httpBasicAuthConfig"],l);const u=g(e,["oauthConfig"]);u!=null&&m(t,["oauthConfig"],u);const d=g(e,["oidcConfig"]);return d!=null&&m(t,["oidcConfig"],d),t}function r2(o,e){const t={},n=g(e,["authConfig"]);return n!=null&&m(t,["authConfig"],a2(o,n)),t}function o2(o,e){const t={},n=g(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(A=>JP(o,A))),m(t,["functionDeclarations"],y)}const i=g(e,["retrieval"]);i!=null&&m(t,["retrieval"],i);const a=g(e,["googleSearch"]);a!=null&&m(t,["googleSearch"],e2(o,a));const l=g(e,["googleSearchRetrieval"]);l!=null&&m(t,["googleSearchRetrieval"],n2(o,l)),g(e,["enterpriseWebSearch"])!=null&&m(t,["enterpriseWebSearch"],i2());const d=g(e,["googleMaps"]);if(d!=null&&m(t,["googleMaps"],r2(o,d)),g(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const f=g(e,["codeExecution"]);return f!=null&&m(t,["codeExecution"],f),t}function l2(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["allowedFunctionNames"]);return i!=null&&m(t,["allowedFunctionNames"],i),t}function c2(o,e){const t={},n=g(e,["latitude"]);n!=null&&m(t,["latitude"],n);const i=g(e,["longitude"]);return i!=null&&m(t,["longitude"],i),t}function u2(o,e){const t={},n=g(e,["latLng"]);n!=null&&m(t,["latLng"],c2(o,n));const i=g(e,["languageCode"]);return i!=null&&m(t,["languageCode"],i),t}function d2(o,e){const t={},n=g(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],l2(o,n));const i=g(e,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],u2(o,i)),t}function h2(o,e,t){const n={},i=g(e,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const a=g(e,["expireTime"]);t!==void 0&&a!=null&&m(t,["expireTime"],a);const l=g(e,["displayName"]);t!==void 0&&l!=null&&m(t,["displayName"],l);const u=g(e,["contents"]);if(t!==void 0&&u!=null){let _=fs(o,u);Array.isArray(_)&&(_=_.map(S=>BE(o,S))),m(t,["contents"],_)}const d=g(e,["systemInstruction"]);t!==void 0&&d!=null&&m(t,["systemInstruction"],BE(o,jn(o,d)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(S=>o2(o,S))),m(t,["tools"],_)}const y=g(e,["toolConfig"]);t!==void 0&&y!=null&&m(t,["toolConfig"],d2(o,y));const A=g(e,["kmsKeyName"]);return t!==void 0&&A!=null&&m(t,["encryption_spec","kmsKeyName"],A),n}function f2(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["model"],bM(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],h2(o,i,t)),t}function p2(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],io(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function g2(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],io(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function m2(o,e,t){const n={},i=g(e,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const a=g(e,["expireTime"]);return t!==void 0&&a!=null&&m(t,["expireTime"],a),n}function y2(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],io(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],m2(o,i,t)),t}function v2(o,e,t){const n={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const a=g(e,["pageToken"]);return t!==void 0&&a!=null&&m(t,["_query","pageToken"],a),n}function A2(o,e){const t={},n=g(e,["config"]);return n!=null&&m(t,["config"],v2(o,n,t)),t}function fm(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["displayName"]);i!=null&&m(t,["displayName"],i);const a=g(e,["model"]);a!=null&&m(t,["model"],a);const l=g(e,["createTime"]);l!=null&&m(t,["createTime"],l);const u=g(e,["updateTime"]);u!=null&&m(t,["updateTime"],u);const d=g(e,["expireTime"]);d!=null&&m(t,["expireTime"],d);const f=g(e,["usageMetadata"]);return f!=null&&m(t,["usageMetadata"],f),t}function b2(){return{}}function _2(o,e){const t={},n=g(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const i=g(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>fm(o,l))),m(t,["cachedContents"],a)}return t}function pm(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["displayName"]);i!=null&&m(t,["displayName"],i);const a=g(e,["model"]);a!=null&&m(t,["model"],a);const l=g(e,["createTime"]);l!=null&&m(t,["createTime"],l);const u=g(e,["updateTime"]);u!=null&&m(t,["updateTime"],u);const d=g(e,["expireTime"]);d!=null&&m(t,["expireTime"],d);const f=g(e,["usageMetadata"]);return f!=null&&m(t,["usageMetadata"],f),t}function S2(){return{}}function T2(o,e){const t={},n=g(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const i=g(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>pm(o,l))),m(t,["cachedContents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ju;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ju||(ju={}));class py{constructor(e,t,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,i)}init(e,t,n){var i,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};n?typeof n=="object"?l=Object.assign({},n):l=n:l={config:{}},l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C2 extends pp{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new py(ju.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=f2(this.apiClient,e);return u=Ie("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>pm(this.apiClient,y))}else{const f=VP(this.apiClient,e);return u=Ie("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>fm(this.apiClient,y))}}async get(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=p2(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>pm(this.apiClient,y))}else{const f=zP(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>fm(this.apiClient,y))}}async delete(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=g2(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(()=>{const y=S2(),A=new NE;return Object.assign(A,y),A})}else{const f=GP(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(()=>{const y=b2(),A=new NE;return Object.assign(A,y),A})}}async update(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=y2(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>pm(this.apiClient,y))}else{const f=$P(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>fm(this.apiClient,y))}}async listInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=A2(this.apiClient,e);return u=Ie("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const A=T2(this.apiClient,y),_=new LE;return Object.assign(_,A),_})}else{const f=WP(this.apiClient,e);return u=Ie("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const A=_2(this.apiClient,y),_=new LE;return Object.assign(_,A),_})}}}function VE(o){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&o[e],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(o){return this instanceof Rt?(this.v=o,this):new Rt(o)}function Dh(o,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(S){return function(T){return Promise.resolve(T).then(S,A)}}function u(S,T){n[S]&&(i[S]=function(C){return new Promise(function(x,D){a.push([S,C,x,D])>1||d(S,C)})},T&&(i[S]=T(i[S])))}function d(S,T){try{f(n[S](T))}catch(C){_(a[0][3],C)}}function f(S){S.value instanceof Rt?Promise.resolve(S.value.v).then(y,A):_(a[0][2],S)}function y(S){d("next",S)}function A(S){d("throw",S)}function _(S,T){S(T),a.shift(),a.length&&d(a[0][0],a[0][1])}}function gm(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof VE=="function"?VE(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=o[a]&&function(l){return new Promise(function(u,d){l=o[a](l),i(u,d,l.done,l.value)})}}function i(a,l,u,d){Promise.resolve(d).then(function(f){a({value:f,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w2(o){var e;if(o.candidates==null||o.candidates.length===0)return!1;const t=(e=o.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:IM(t)}function IM(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const e of o.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function E2(o){if(o.length!==0){for(const e of o)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zE(o){if(o===void 0||o.length===0)return[];const e=[],t=o.length;let n=0;for(;n<t;)if(o[n].role==="user")e.push(o[n]),n++;else{const i=[];let a=!0;for(;n<t&&o[n].role==="model";)i.push(o[n]),a&&!IM(o[n])&&(a=!1),n++;a?e.push(...i):e.pop()}return e}class x2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new M2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class M2{constructor(e,t,n,i={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),E2(a)}async sendMessage(e){var t;await this.sendPromise;const n=jn(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,u;const d=await i,f=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=d.automaticFunctionCallingHistory,A=this.getHistory(!0).length;let _=[];y!=null&&(_=(u=y.slice(A))!==null&&u!==void 0?u:[]);const S=f?[f]:[];this.recordHistory(n,S,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const n=jn(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,n)}getHistory(e=!1){const t=e?zE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,i;return Dh(this,arguments,function*(){var l,u,d,f;const y=[];try{for(var A=!0,_=gm(e),S;S=yield Rt(_.next()),l=S.done,!l;A=!0){f=S.value,A=!1;const T=f;if(w2(T)){const C=(i=(n=T.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content;C!==void 0&&y.push(C)}yield yield Rt(T)}}catch(T){u={error:T}}finally{try{!A&&!l&&(d=_.return)&&(yield Rt(d.call(_)))}finally{if(u)throw u.error}}this.recordHistory(t,y)})}recordHistory(e,t,n){let i=[];t.length>0&&t.every(a=>a.role!==void 0)?i=t:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...zE(n)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R2(o,e,t){const n={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const a=g(e,["pageToken"]);return t!==void 0&&a!=null&&m(t,["_query","pageToken"],a),n}function I2(o,e){const t={},n=g(e,["config"]);return n!=null&&m(t,["config"],R2(o,n,t)),t}function D2(o,e){const t={},n=g(e,["details"]);n!=null&&m(t,["details"],n);const i=g(e,["message"]);i!=null&&m(t,["message"],i);const a=g(e,["code"]);return a!=null&&m(t,["code"],a),t}function k2(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["displayName"]);i!=null&&m(t,["displayName"],i);const a=g(e,["mimeType"]);a!=null&&m(t,["mimeType"],a);const l=g(e,["sizeBytes"]);l!=null&&m(t,["sizeBytes"],l);const u=g(e,["createTime"]);u!=null&&m(t,["createTime"],u);const d=g(e,["expirationTime"]);d!=null&&m(t,["expirationTime"],d);const f=g(e,["updateTime"]);f!=null&&m(t,["updateTime"],f);const y=g(e,["sha256Hash"]);y!=null&&m(t,["sha256Hash"],y);const A=g(e,["uri"]);A!=null&&m(t,["uri"],A);const _=g(e,["downloadUri"]);_!=null&&m(t,["downloadUri"],_);const S=g(e,["state"]);S!=null&&m(t,["state"],S);const T=g(e,["source"]);T!=null&&m(t,["source"],T);const C=g(e,["videoMetadata"]);C!=null&&m(t,["videoMetadata"],C);const x=g(e,["error"]);return x!=null&&m(t,["error"],D2(o,x)),t}function N2(o,e){const t={},n=g(e,["file"]);n!=null&&m(t,["file"],k2(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function L2(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","file"],xM(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function P2(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","file"],xM(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function O2(o,e){const t={},n=g(e,["details"]);n!=null&&m(t,["details"],n);const i=g(e,["message"]);i!=null&&m(t,["message"],i);const a=g(e,["code"]);return a!=null&&m(t,["code"],a),t}function bb(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["displayName"]);i!=null&&m(t,["displayName"],i);const a=g(e,["mimeType"]);a!=null&&m(t,["mimeType"],a);const l=g(e,["sizeBytes"]);l!=null&&m(t,["sizeBytes"],l);const u=g(e,["createTime"]);u!=null&&m(t,["createTime"],u);const d=g(e,["expirationTime"]);d!=null&&m(t,["expirationTime"],d);const f=g(e,["updateTime"]);f!=null&&m(t,["updateTime"],f);const y=g(e,["sha256Hash"]);y!=null&&m(t,["sha256Hash"],y);const A=g(e,["uri"]);A!=null&&m(t,["uri"],A);const _=g(e,["downloadUri"]);_!=null&&m(t,["downloadUri"],_);const S=g(e,["state"]);S!=null&&m(t,["state"],S);const T=g(e,["source"]);T!=null&&m(t,["source"],T);const C=g(e,["videoMetadata"]);C!=null&&m(t,["videoMetadata"],C);const x=g(e,["error"]);return x!=null&&m(t,["error"],O2(o,x)),t}function F2(o,e){const t={},n=g(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const i=g(e,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>bb(o,l))),m(t,["files"],a)}return t}function U2(){return{}}function H2(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B2 extends pp{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new py(ju.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>bb(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=I2(this.apiClient,e);return a=Ie("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const f=F2(this.apiClient,d),y=new uP;return Object.assign(y,f),y})}}async createInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N2(this.apiClient,e);return a=Ie("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=U2(),f=new dP;return Object.assign(f,d),f})}}async get(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=L2(this.apiClient,e);return a=Ie("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>bb(this.apiClient,d))}}async delete(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=P2(this.apiClient,e);return a=Ie("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=H2(),f=new hP;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V2(o,e){const t={},n=g(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function z2(o,e){const t={},n=g(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function DM(o,e){const t={},n=g(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],V2(o,n)),t}function G2(o,e){const t={},n=g(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],z2(o,n)),t}function q2(o,e){const t={},n=g(e,["speaker"]);n!=null&&m(t,["speaker"],n);const i=g(e,["voiceConfig"]);return i!=null&&m(t,["voiceConfig"],DM(o,i)),t}function $2(o,e){const t={},n=g(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>q2(o,a))),m(t,["speakerVoiceConfigs"],i)}return t}function Y2(o,e){const t={},n=g(e,["voiceConfig"]);n!=null&&m(t,["voiceConfig"],DM(o,n));const i=g(e,["multiSpeakerVoiceConfig"]);i!=null&&m(t,["multiSpeakerVoiceConfig"],$2(o,i));const a=g(e,["languageCode"]);return a!=null&&m(t,["languageCode"],a),t}function W2(o,e){const t={},n=g(e,["voiceConfig"]);if(n!=null&&m(t,["voiceConfig"],G2(o,n)),g(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=g(e,["languageCode"]);return i!=null&&m(t,["languageCode"],i),t}function X2(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function K2(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function Z2(o,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["data"]);n!=null&&m(t,["data"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function Q2(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["data"]);i!=null&&m(t,["data"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function J2(o,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);n!=null&&m(t,["fileUri"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function j2(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["fileUri"]);i!=null&&m(t,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function eO(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],X2(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],Z2(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],J2(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function tO(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],K2(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],Q2(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],j2(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function nO(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>eO(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function iO(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>tO(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function sO(o,e){const t={},n=g(e,["behavior"]);n!=null&&m(t,["behavior"],n);const i=g(e,["description"]);i!=null&&m(t,["description"],i);const a=g(e,["name"]);a!=null&&m(t,["name"],a);const l=g(e,["parameters"]);l!=null&&m(t,["parameters"],l);const u=g(e,["response"]);return u!=null&&m(t,["response"],u),t}function aO(o,e){const t={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);n!=null&&m(t,["description"],n);const i=g(e,["name"]);i!=null&&m(t,["name"],i);const a=g(e,["parameters"]);a!=null&&m(t,["parameters"],a);const l=g(e,["response"]);return l!=null&&m(t,["response"],l),t}function rO(o,e){const t={},n=g(e,["startTime"]);n!=null&&m(t,["startTime"],n);const i=g(e,["endTime"]);return i!=null&&m(t,["endTime"],i),t}function oO(o,e){const t={},n=g(e,["startTime"]);n!=null&&m(t,["startTime"],n);const i=g(e,["endTime"]);return i!=null&&m(t,["endTime"],i),t}function lO(o,e){const t={},n=g(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],rO(o,n)),t}function cO(o,e){const t={},n=g(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],oO(o,n)),t}function uO(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["dynamicThreshold"]);return i!=null&&m(t,["dynamicThreshold"],i),t}function dO(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["dynamicThreshold"]);return i!=null&&m(t,["dynamicThreshold"],i),t}function hO(o,e){const t={},n=g(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],uO(o,n)),t}function fO(o,e){const t={},n=g(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],dO(o,n)),t}function pO(){return{}}function gO(o,e){const t={},n=g(e,["apiKeyString"]);return n!=null&&m(t,["apiKeyString"],n),t}function mO(o,e){const t={},n=g(e,["apiKeyConfig"]);n!=null&&m(t,["apiKeyConfig"],gO(o,n));const i=g(e,["authType"]);i!=null&&m(t,["authType"],i);const a=g(e,["googleServiceAccountConfig"]);a!=null&&m(t,["googleServiceAccountConfig"],a);const l=g(e,["httpBasicAuthConfig"]);l!=null&&m(t,["httpBasicAuthConfig"],l);const u=g(e,["oauthConfig"]);u!=null&&m(t,["oauthConfig"],u);const d=g(e,["oidcConfig"]);return d!=null&&m(t,["oidcConfig"],d),t}function yO(o,e){const t={},n=g(e,["authConfig"]);return n!=null&&m(t,["authConfig"],mO(o,n)),t}function vO(){return{}}function AO(o,e){const t={},n=g(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>sO(o,f))),m(t,["functionDeclarations"],d)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(e,["googleSearch"]);i!=null&&m(t,["googleSearch"],lO(o,i));const a=g(e,["googleSearchRetrieval"]);if(a!=null&&m(t,["googleSearchRetrieval"],hO(o,a)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&m(t,["urlContext"],vO());const u=g(e,["codeExecution"]);return u!=null&&m(t,["codeExecution"],u),t}function bO(o,e){const t={},n=g(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(A=>aO(o,A))),m(t,["functionDeclarations"],y)}const i=g(e,["retrieval"]);i!=null&&m(t,["retrieval"],i);const a=g(e,["googleSearch"]);a!=null&&m(t,["googleSearch"],cO(o,a));const l=g(e,["googleSearchRetrieval"]);l!=null&&m(t,["googleSearchRetrieval"],fO(o,l)),g(e,["enterpriseWebSearch"])!=null&&m(t,["enterpriseWebSearch"],pO());const d=g(e,["googleMaps"]);if(d!=null&&m(t,["googleMaps"],yO(o,d)),g(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const f=g(e,["codeExecution"]);return f!=null&&m(t,["codeExecution"],f),t}function _O(o,e){const t={},n=g(e,["handle"]);if(n!=null&&m(t,["handle"],n),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function SO(o,e){const t={},n=g(e,["handle"]);n!=null&&m(t,["handle"],n);const i=g(e,["transparent"]);return i!=null&&m(t,["transparent"],i),t}function GE(){return{}}function qE(){return{}}function TO(o,e){const t={},n=g(e,["disabled"]);n!=null&&m(t,["disabled"],n);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&m(t,["startOfSpeechSensitivity"],i);const a=g(e,["endOfSpeechSensitivity"]);a!=null&&m(t,["endOfSpeechSensitivity"],a);const l=g(e,["prefixPaddingMs"]);l!=null&&m(t,["prefixPaddingMs"],l);const u=g(e,["silenceDurationMs"]);return u!=null&&m(t,["silenceDurationMs"],u),t}function CO(o,e){const t={},n=g(e,["disabled"]);n!=null&&m(t,["disabled"],n);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&m(t,["startOfSpeechSensitivity"],i);const a=g(e,["endOfSpeechSensitivity"]);a!=null&&m(t,["endOfSpeechSensitivity"],a);const l=g(e,["prefixPaddingMs"]);l!=null&&m(t,["prefixPaddingMs"],l);const u=g(e,["silenceDurationMs"]);return u!=null&&m(t,["silenceDurationMs"],u),t}function wO(o,e){const t={},n=g(e,["automaticActivityDetection"]);n!=null&&m(t,["automaticActivityDetection"],TO(o,n));const i=g(e,["activityHandling"]);i!=null&&m(t,["activityHandling"],i);const a=g(e,["turnCoverage"]);return a!=null&&m(t,["turnCoverage"],a),t}function EO(o,e){const t={},n=g(e,["automaticActivityDetection"]);n!=null&&m(t,["automaticActivityDetection"],CO(o,n));const i=g(e,["activityHandling"]);i!=null&&m(t,["activityHandling"],i);const a=g(e,["turnCoverage"]);return a!=null&&m(t,["turnCoverage"],a),t}function xO(o,e){const t={},n=g(e,["targetTokens"]);return n!=null&&m(t,["targetTokens"],n),t}function MO(o,e){const t={},n=g(e,["targetTokens"]);return n!=null&&m(t,["targetTokens"],n),t}function RO(o,e){const t={},n=g(e,["triggerTokens"]);n!=null&&m(t,["triggerTokens"],n);const i=g(e,["slidingWindow"]);return i!=null&&m(t,["slidingWindow"],xO(o,i)),t}function IO(o,e){const t={},n=g(e,["triggerTokens"]);n!=null&&m(t,["triggerTokens"],n);const i=g(e,["slidingWindow"]);return i!=null&&m(t,["slidingWindow"],MO(o,i)),t}function DO(o,e){const t={},n=g(e,["proactiveAudio"]);return n!=null&&m(t,["proactiveAudio"],n),t}function kO(o,e){const t={},n=g(e,["proactiveAudio"]);return n!=null&&m(t,["proactiveAudio"],n),t}function NO(o,e,t){const n={},i=g(e,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],i);const a=g(e,["responseModalities"]);t!==void 0&&a!=null&&m(t,["setup","generationConfig","responseModalities"],a);const l=g(e,["temperature"]);t!==void 0&&l!=null&&m(t,["setup","generationConfig","temperature"],l);const u=g(e,["topP"]);t!==void 0&&u!=null&&m(t,["setup","generationConfig","topP"],u);const d=g(e,["topK"]);t!==void 0&&d!=null&&m(t,["setup","generationConfig","topK"],d);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&m(t,["setup","generationConfig","maxOutputTokens"],f);const y=g(e,["mediaResolution"]);t!==void 0&&y!=null&&m(t,["setup","generationConfig","mediaResolution"],y);const A=g(e,["seed"]);t!==void 0&&A!=null&&m(t,["setup","generationConfig","seed"],A);const _=g(e,["speechConfig"]);t!==void 0&&_!=null&&m(t,["setup","generationConfig","speechConfig"],Y2(o,wM(o,_)));const S=g(e,["enableAffectiveDialog"]);t!==void 0&&S!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],S);const T=g(e,["systemInstruction"]);t!==void 0&&T!=null&&m(t,["setup","systemInstruction"],nO(o,jn(o,T)));const C=g(e,["tools"]);if(t!==void 0&&C!=null){let W=fy(o,C);Array.isArray(W)&&(W=W.map(K=>AO(o,hy(o,K)))),m(t,["setup","tools"],W)}const x=g(e,["sessionResumption"]);t!==void 0&&x!=null&&m(t,["setup","sessionResumption"],_O(o,x));const D=g(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&m(t,["setup","inputAudioTranscription"],GE());const k=g(e,["outputAudioTranscription"]);t!==void 0&&k!=null&&m(t,["setup","outputAudioTranscription"],GE());const L=g(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&m(t,["setup","realtimeInputConfig"],wO(o,L));const U=g(e,["contextWindowCompression"]);t!==void 0&&U!=null&&m(t,["setup","contextWindowCompression"],RO(o,U));const F=g(e,["proactivity"]);return t!==void 0&&F!=null&&m(t,["setup","proactivity"],DO(o,F)),n}function LO(o,e,t){const n={},i=g(e,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],i);const a=g(e,["responseModalities"]);t!==void 0&&a!=null&&m(t,["setup","generationConfig","responseModalities"],a);const l=g(e,["temperature"]);t!==void 0&&l!=null&&m(t,["setup","generationConfig","temperature"],l);const u=g(e,["topP"]);t!==void 0&&u!=null&&m(t,["setup","generationConfig","topP"],u);const d=g(e,["topK"]);t!==void 0&&d!=null&&m(t,["setup","generationConfig","topK"],d);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&m(t,["setup","generationConfig","maxOutputTokens"],f);const y=g(e,["mediaResolution"]);t!==void 0&&y!=null&&m(t,["setup","generationConfig","mediaResolution"],y);const A=g(e,["seed"]);t!==void 0&&A!=null&&m(t,["setup","generationConfig","seed"],A);const _=g(e,["speechConfig"]);t!==void 0&&_!=null&&m(t,["setup","generationConfig","speechConfig"],W2(o,wM(o,_)));const S=g(e,["enableAffectiveDialog"]);t!==void 0&&S!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],S);const T=g(e,["systemInstruction"]);t!==void 0&&T!=null&&m(t,["setup","systemInstruction"],iO(o,jn(o,T)));const C=g(e,["tools"]);if(t!==void 0&&C!=null){let W=fy(o,C);Array.isArray(W)&&(W=W.map(K=>bO(o,hy(o,K)))),m(t,["setup","tools"],W)}const x=g(e,["sessionResumption"]);t!==void 0&&x!=null&&m(t,["setup","sessionResumption"],SO(o,x));const D=g(e,["inputAudioTranscription"]);t!==void 0&&D!=null&&m(t,["setup","inputAudioTranscription"],qE());const k=g(e,["outputAudioTranscription"]);t!==void 0&&k!=null&&m(t,["setup","outputAudioTranscription"],qE());const L=g(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&m(t,["setup","realtimeInputConfig"],EO(o,L));const U=g(e,["contextWindowCompression"]);t!==void 0&&U!=null&&m(t,["setup","contextWindowCompression"],IO(o,U));const F=g(e,["proactivity"]);return t!==void 0&&F!=null&&m(t,["setup","proactivity"],kO(o,F)),n}function PO(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["setup","model"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],NO(o,i,t)),t}function OO(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["setup","model"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],LO(o,i,t)),t}function FO(){return{}}function UO(){return{}}function HO(){return{}}function BO(){return{}}function VO(o,e){const t={},n=g(e,["media"]);n!=null&&m(t,["mediaChunks"],_M(o,n));const i=g(e,["audio"]);i!=null&&m(t,["audio"],mP(o,i));const a=g(e,["audioStreamEnd"]);a!=null&&m(t,["audioStreamEnd"],a);const l=g(e,["video"]);l!=null&&m(t,["video"],gP(o,l));const u=g(e,["text"]);return u!=null&&m(t,["text"],u),g(e,["activityStart"])!=null&&m(t,["activityStart"],FO()),g(e,["activityEnd"])!=null&&m(t,["activityEnd"],HO()),t}function zO(o,e){const t={},n=g(e,["media"]);if(n!=null&&m(t,["mediaChunks"],_M(o,n)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=g(e,["audioStreamEnd"]);if(i!=null&&m(t,["audioStreamEnd"],i),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&m(t,["activityStart"],UO()),g(e,["activityEnd"])!=null&&m(t,["activityEnd"],BO()),t}function kM(o,e){const t={},n=g(e,["text"]);n!=null&&m(t,["text"],n);const i=g(e,["weight"]);return i!=null&&m(t,["weight"],i),t}function GO(o,e){const t={},n=g(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>kM(o,a))),m(t,["weightedPrompts"],i)}return t}function NM(o,e){const t={},n=g(e,["temperature"]);n!=null&&m(t,["temperature"],n);const i=g(e,["topK"]);i!=null&&m(t,["topK"],i);const a=g(e,["seed"]);a!=null&&m(t,["seed"],a);const l=g(e,["guidance"]);l!=null&&m(t,["guidance"],l);const u=g(e,["bpm"]);u!=null&&m(t,["bpm"],u);const d=g(e,["density"]);d!=null&&m(t,["density"],d);const f=g(e,["brightness"]);f!=null&&m(t,["brightness"],f);const y=g(e,["scale"]);y!=null&&m(t,["scale"],y);const A=g(e,["muteBass"]);A!=null&&m(t,["muteBass"],A);const _=g(e,["muteDrums"]);_!=null&&m(t,["muteDrums"],_);const S=g(e,["onlyBassAndDrums"]);return S!=null&&m(t,["onlyBassAndDrums"],S),t}function qO(o,e){const t={},n=g(e,["musicGenerationConfig"]);return n!=null&&m(t,["musicGenerationConfig"],NM(o,n)),t}function LM(o,e){const t={},n=g(e,["model"]);return n!=null&&m(t,["model"],n),t}function PM(o,e){const t={},n=g(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>kM(o,a))),m(t,["weightedPrompts"],i)}return t}function _b(o,e){const t={},n=g(e,["setup"]);n!=null&&m(t,["setup"],LM(o,n));const i=g(e,["clientContent"]);i!=null&&m(t,["clientContent"],PM(o,i));const a=g(e,["musicGenerationConfig"]);a!=null&&m(t,["musicGenerationConfig"],NM(o,a));const l=g(e,["playbackControl"]);return l!=null&&m(t,["playbackControl"],l),t}function $O(){return{}}function YO(){return{}}function WO(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function XO(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function KO(o,e){const t={},n=g(e,["data"]);n!=null&&m(t,["data"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function ZO(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["data"]);i!=null&&m(t,["data"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function QO(o,e){const t={},n=g(e,["fileUri"]);n!=null&&m(t,["fileUri"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function JO(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["fileUri"]);i!=null&&m(t,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function jO(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],WO(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],KO(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],QO(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function eF(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],XO(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],ZO(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],JO(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function tF(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>jO(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function nF(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>eF(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function $E(o,e){const t={},n=g(e,["text"]);n!=null&&m(t,["text"],n);const i=g(e,["finished"]);return i!=null&&m(t,["finished"],i),t}function YE(o,e){const t={},n=g(e,["text"]);n!=null&&m(t,["text"],n);const i=g(e,["finished"]);return i!=null&&m(t,["finished"],i),t}function iF(o,e){const t={},n=g(e,["retrievedUrl"]);n!=null&&m(t,["retrievedUrl"],n);const i=g(e,["urlRetrievalStatus"]);return i!=null&&m(t,["urlRetrievalStatus"],i),t}function sF(o,e){const t={},n=g(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>iF(o,a))),m(t,["urlMetadata"],i)}return t}function aF(o,e){const t={},n=g(e,["modelTurn"]);n!=null&&m(t,["modelTurn"],tF(o,n));const i=g(e,["turnComplete"]);i!=null&&m(t,["turnComplete"],i);const a=g(e,["interrupted"]);a!=null&&m(t,["interrupted"],a);const l=g(e,["groundingMetadata"]);l!=null&&m(t,["groundingMetadata"],l);const u=g(e,["generationComplete"]);u!=null&&m(t,["generationComplete"],u);const d=g(e,["inputTranscription"]);d!=null&&m(t,["inputTranscription"],$E(o,d));const f=g(e,["outputTranscription"]);f!=null&&m(t,["outputTranscription"],$E(o,f));const y=g(e,["urlContextMetadata"]);return y!=null&&m(t,["urlContextMetadata"],sF(o,y)),t}function rF(o,e){const t={},n=g(e,["modelTurn"]);n!=null&&m(t,["modelTurn"],nF(o,n));const i=g(e,["turnComplete"]);i!=null&&m(t,["turnComplete"],i);const a=g(e,["interrupted"]);a!=null&&m(t,["interrupted"],a);const l=g(e,["groundingMetadata"]);l!=null&&m(t,["groundingMetadata"],l);const u=g(e,["generationComplete"]);u!=null&&m(t,["generationComplete"],u);const d=g(e,["inputTranscription"]);d!=null&&m(t,["inputTranscription"],YE(o,d));const f=g(e,["outputTranscription"]);return f!=null&&m(t,["outputTranscription"],YE(o,f)),t}function oF(o,e){const t={},n=g(e,["id"]);n!=null&&m(t,["id"],n);const i=g(e,["args"]);i!=null&&m(t,["args"],i);const a=g(e,["name"]);return a!=null&&m(t,["name"],a),t}function lF(o,e){const t={},n=g(e,["args"]);n!=null&&m(t,["args"],n);const i=g(e,["name"]);return i!=null&&m(t,["name"],i),t}function cF(o,e){const t={},n=g(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>oF(o,a))),m(t,["functionCalls"],i)}return t}function uF(o,e){const t={},n=g(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>lF(o,a))),m(t,["functionCalls"],i)}return t}function dF(o,e){const t={},n=g(e,["ids"]);return n!=null&&m(t,["ids"],n),t}function hF(o,e){const t={},n=g(e,["ids"]);return n!=null&&m(t,["ids"],n),t}function Pg(o,e){const t={},n=g(e,["modality"]);n!=null&&m(t,["modality"],n);const i=g(e,["tokenCount"]);return i!=null&&m(t,["tokenCount"],i),t}function Og(o,e){const t={},n=g(e,["modality"]);n!=null&&m(t,["modality"],n);const i=g(e,["tokenCount"]);return i!=null&&m(t,["tokenCount"],i),t}function fF(o,e){const t={},n=g(e,["promptTokenCount"]);n!=null&&m(t,["promptTokenCount"],n);const i=g(e,["cachedContentTokenCount"]);i!=null&&m(t,["cachedContentTokenCount"],i);const a=g(e,["responseTokenCount"]);a!=null&&m(t,["responseTokenCount"],a);const l=g(e,["toolUsePromptTokenCount"]);l!=null&&m(t,["toolUsePromptTokenCount"],l);const u=g(e,["thoughtsTokenCount"]);u!=null&&m(t,["thoughtsTokenCount"],u);const d=g(e,["totalTokenCount"]);d!=null&&m(t,["totalTokenCount"],d);const f=g(e,["promptTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(T=>Pg(o,T))),m(t,["promptTokensDetails"],S)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(T=>Pg(o,T))),m(t,["cacheTokensDetails"],S)}const A=g(e,["responseTokensDetails"]);if(A!=null){let S=A;Array.isArray(S)&&(S=S.map(T=>Pg(o,T))),m(t,["responseTokensDetails"],S)}const _=g(e,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(T=>Pg(o,T))),m(t,["toolUsePromptTokensDetails"],S)}return t}function pF(o,e){const t={},n=g(e,["promptTokenCount"]);n!=null&&m(t,["promptTokenCount"],n);const i=g(e,["cachedContentTokenCount"]);i!=null&&m(t,["cachedContentTokenCount"],i);const a=g(e,["candidatesTokenCount"]);a!=null&&m(t,["responseTokenCount"],a);const l=g(e,["toolUsePromptTokenCount"]);l!=null&&m(t,["toolUsePromptTokenCount"],l);const u=g(e,["thoughtsTokenCount"]);u!=null&&m(t,["thoughtsTokenCount"],u);const d=g(e,["totalTokenCount"]);d!=null&&m(t,["totalTokenCount"],d);const f=g(e,["promptTokensDetails"]);if(f!=null){let T=f;Array.isArray(T)&&(T=T.map(C=>Og(o,C))),m(t,["promptTokensDetails"],T)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>Og(o,C))),m(t,["cacheTokensDetails"],T)}const A=g(e,["candidatesTokensDetails"]);if(A!=null){let T=A;Array.isArray(T)&&(T=T.map(C=>Og(o,C))),m(t,["responseTokensDetails"],T)}const _=g(e,["toolUsePromptTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>Og(o,C))),m(t,["toolUsePromptTokensDetails"],T)}const S=g(e,["trafficType"]);return S!=null&&m(t,["trafficType"],S),t}function gF(o,e){const t={},n=g(e,["timeLeft"]);return n!=null&&m(t,["timeLeft"],n),t}function mF(o,e){const t={},n=g(e,["timeLeft"]);return n!=null&&m(t,["timeLeft"],n),t}function yF(o,e){const t={},n=g(e,["newHandle"]);n!=null&&m(t,["newHandle"],n);const i=g(e,["resumable"]);i!=null&&m(t,["resumable"],i);const a=g(e,["lastConsumedClientMessageIndex"]);return a!=null&&m(t,["lastConsumedClientMessageIndex"],a),t}function vF(o,e){const t={},n=g(e,["newHandle"]);n!=null&&m(t,["newHandle"],n);const i=g(e,["resumable"]);i!=null&&m(t,["resumable"],i);const a=g(e,["lastConsumedClientMessageIndex"]);return a!=null&&m(t,["lastConsumedClientMessageIndex"],a),t}function AF(o,e){const t={};g(e,["setupComplete"])!=null&&m(t,["setupComplete"],$O());const i=g(e,["serverContent"]);i!=null&&m(t,["serverContent"],aF(o,i));const a=g(e,["toolCall"]);a!=null&&m(t,["toolCall"],cF(o,a));const l=g(e,["toolCallCancellation"]);l!=null&&m(t,["toolCallCancellation"],dF(o,l));const u=g(e,["usageMetadata"]);u!=null&&m(t,["usageMetadata"],fF(o,u));const d=g(e,["goAway"]);d!=null&&m(t,["goAway"],gF(o,d));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&m(t,["sessionResumptionUpdate"],yF(o,f)),t}function bF(o,e){const t={};g(e,["setupComplete"])!=null&&m(t,["setupComplete"],YO());const i=g(e,["serverContent"]);i!=null&&m(t,["serverContent"],rF(o,i));const a=g(e,["toolCall"]);a!=null&&m(t,["toolCall"],uF(o,a));const l=g(e,["toolCallCancellation"]);l!=null&&m(t,["toolCallCancellation"],hF(o,l));const u=g(e,["usageMetadata"]);u!=null&&m(t,["usageMetadata"],pF(o,u));const d=g(e,["goAway"]);d!=null&&m(t,["goAway"],mF(o,d));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&m(t,["sessionResumptionUpdate"],vF(o,f)),t}function _F(){return{}}function SF(o,e){const t={},n=g(e,["text"]);n!=null&&m(t,["text"],n);const i=g(e,["weight"]);return i!=null&&m(t,["weight"],i),t}function TF(o,e){const t={},n=g(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>SF(o,a))),m(t,["weightedPrompts"],i)}return t}function CF(o,e){const t={},n=g(e,["temperature"]);n!=null&&m(t,["temperature"],n);const i=g(e,["topK"]);i!=null&&m(t,["topK"],i);const a=g(e,["seed"]);a!=null&&m(t,["seed"],a);const l=g(e,["guidance"]);l!=null&&m(t,["guidance"],l);const u=g(e,["bpm"]);u!=null&&m(t,["bpm"],u);const d=g(e,["density"]);d!=null&&m(t,["density"],d);const f=g(e,["brightness"]);f!=null&&m(t,["brightness"],f);const y=g(e,["scale"]);y!=null&&m(t,["scale"],y);const A=g(e,["muteBass"]);A!=null&&m(t,["muteBass"],A);const _=g(e,["muteDrums"]);_!=null&&m(t,["muteDrums"],_);const S=g(e,["onlyBassAndDrums"]);return S!=null&&m(t,["onlyBassAndDrums"],S),t}function wF(o,e){const t={},n=g(e,["clientContent"]);n!=null&&m(t,["clientContent"],TF(o,n));const i=g(e,["musicGenerationConfig"]);return i!=null&&m(t,["musicGenerationConfig"],CF(o,i)),t}function EF(o,e){const t={},n=g(e,["data"]);n!=null&&m(t,["data"],n);const i=g(e,["mimeType"]);i!=null&&m(t,["mimeType"],i);const a=g(e,["sourceMetadata"]);return a!=null&&m(t,["sourceMetadata"],wF(o,a)),t}function xF(o,e){const t={},n=g(e,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>EF(o,a))),m(t,["audioChunks"],i)}return t}function MF(o,e){const t={},n=g(e,["text"]);n!=null&&m(t,["text"],n);const i=g(e,["filteredReason"]);return i!=null&&m(t,["filteredReason"],i),t}function RF(o,e){const t={};g(e,["setupComplete"])!=null&&m(t,["setupComplete"],_F());const i=g(e,["serverContent"]);i!=null&&m(t,["serverContent"],xF(o,i));const a=g(e,["filteredPrompt"]);return a!=null&&m(t,["filteredPrompt"],MF(o,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IF(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function DF(o,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["data"]);n!=null&&m(t,["data"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function kF(o,e){const t={};if(g(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(e,["fileUri"]);n!=null&&m(t,["fileUri"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function NF(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],IF(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],DF(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],kF(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function gy(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>NF(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function LF(o,e){const t={},n=g(e,["anyOf"]);n!=null&&m(t,["anyOf"],n);const i=g(e,["default"]);i!=null&&m(t,["default"],i);const a=g(e,["description"]);a!=null&&m(t,["description"],a);const l=g(e,["enum"]);l!=null&&m(t,["enum"],l);const u=g(e,["example"]);u!=null&&m(t,["example"],u);const d=g(e,["format"]);d!=null&&m(t,["format"],d);const f=g(e,["items"]);f!=null&&m(t,["items"],f);const y=g(e,["maxItems"]);y!=null&&m(t,["maxItems"],y);const A=g(e,["maxLength"]);A!=null&&m(t,["maxLength"],A);const _=g(e,["maxProperties"]);_!=null&&m(t,["maxProperties"],_);const S=g(e,["maximum"]);S!=null&&m(t,["maximum"],S);const T=g(e,["minItems"]);T!=null&&m(t,["minItems"],T);const C=g(e,["minLength"]);C!=null&&m(t,["minLength"],C);const x=g(e,["minProperties"]);x!=null&&m(t,["minProperties"],x);const D=g(e,["minimum"]);D!=null&&m(t,["minimum"],D);const k=g(e,["nullable"]);k!=null&&m(t,["nullable"],k);const L=g(e,["pattern"]);L!=null&&m(t,["pattern"],L);const U=g(e,["properties"]);U!=null&&m(t,["properties"],U);const F=g(e,["propertyOrdering"]);F!=null&&m(t,["propertyOrdering"],F);const W=g(e,["required"]);W!=null&&m(t,["required"],W);const K=g(e,["title"]);K!=null&&m(t,["title"],K);const Q=g(e,["type"]);return Q!=null&&m(t,["type"],Q),t}function PF(o,e){const t={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=g(e,["category"]);n!=null&&m(t,["category"],n);const i=g(e,["threshold"]);return i!=null&&m(t,["threshold"],i),t}function OF(o,e){const t={},n=g(e,["behavior"]);n!=null&&m(t,["behavior"],n);const i=g(e,["description"]);i!=null&&m(t,["description"],i);const a=g(e,["name"]);a!=null&&m(t,["name"],a);const l=g(e,["parameters"]);l!=null&&m(t,["parameters"],l);const u=g(e,["response"]);return u!=null&&m(t,["response"],u),t}function FF(o,e){const t={},n=g(e,["startTime"]);n!=null&&m(t,["startTime"],n);const i=g(e,["endTime"]);return i!=null&&m(t,["endTime"],i),t}function UF(o,e){const t={},n=g(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],FF(o,n)),t}function HF(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["dynamicThreshold"]);return i!=null&&m(t,["dynamicThreshold"],i),t}function BF(o,e){const t={},n=g(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],HF(o,n)),t}function VF(){return{}}function zF(o,e){const t={},n=g(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>OF(o,f))),m(t,["functionDeclarations"],d)}if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(e,["googleSearch"]);i!=null&&m(t,["googleSearch"],UF(o,i));const a=g(e,["googleSearchRetrieval"]);if(a!=null&&m(t,["googleSearchRetrieval"],BF(o,a)),g(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(g(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");g(e,["urlContext"])!=null&&m(t,["urlContext"],VF());const u=g(e,["codeExecution"]);return u!=null&&m(t,["codeExecution"],u),t}function GF(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["allowedFunctionNames"]);return i!=null&&m(t,["allowedFunctionNames"],i),t}function qF(o,e){const t={},n=g(e,["latitude"]);n!=null&&m(t,["latitude"],n);const i=g(e,["longitude"]);return i!=null&&m(t,["longitude"],i),t}function $F(o,e){const t={},n=g(e,["latLng"]);n!=null&&m(t,["latLng"],qF(o,n));const i=g(e,["languageCode"]);return i!=null&&m(t,["languageCode"],i),t}function YF(o,e){const t={},n=g(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],GF(o,n));const i=g(e,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],$F(o,i)),t}function WF(o,e){const t={},n=g(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function OM(o,e){const t={},n=g(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],WF(o,n)),t}function XF(o,e){const t={},n=g(e,["speaker"]);n!=null&&m(t,["speaker"],n);const i=g(e,["voiceConfig"]);return i!=null&&m(t,["voiceConfig"],OM(o,i)),t}function KF(o,e){const t={},n=g(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>XF(o,a))),m(t,["speakerVoiceConfigs"],i)}return t}function ZF(o,e){const t={},n=g(e,["voiceConfig"]);n!=null&&m(t,["voiceConfig"],OM(o,n));const i=g(e,["multiSpeakerVoiceConfig"]);i!=null&&m(t,["multiSpeakerVoiceConfig"],KF(o,i));const a=g(e,["languageCode"]);return a!=null&&m(t,["languageCode"],a),t}function QF(o,e){const t={},n=g(e,["includeThoughts"]);n!=null&&m(t,["includeThoughts"],n);const i=g(e,["thinkingBudget"]);return i!=null&&m(t,["thinkingBudget"],i),t}function JF(o,e,t){const n={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],gy(o,jn(o,i)));const a=g(e,["temperature"]);a!=null&&m(n,["temperature"],a);const l=g(e,["topP"]);l!=null&&m(n,["topP"],l);const u=g(e,["topK"]);u!=null&&m(n,["topK"],u);const d=g(e,["candidateCount"]);d!=null&&m(n,["candidateCount"],d);const f=g(e,["maxOutputTokens"]);f!=null&&m(n,["maxOutputTokens"],f);const y=g(e,["stopSequences"]);y!=null&&m(n,["stopSequences"],y);const A=g(e,["responseLogprobs"]);A!=null&&m(n,["responseLogprobs"],A);const _=g(e,["logprobs"]);_!=null&&m(n,["logprobs"],_);const S=g(e,["presencePenalty"]);S!=null&&m(n,["presencePenalty"],S);const T=g(e,["frequencyPenalty"]);T!=null&&m(n,["frequencyPenalty"],T);const C=g(e,["seed"]);C!=null&&m(n,["seed"],C);const x=g(e,["responseMimeType"]);x!=null&&m(n,["responseMimeType"],x);const D=g(e,["responseSchema"]);if(D!=null&&m(n,["responseSchema"],LF(o,Fm(o,D))),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=g(e,["safetySettings"]);if(t!==void 0&&k!=null){let se=k;Array.isArray(se)&&(se=se.map(ce=>PF(o,ce))),m(t,["safetySettings"],se)}const L=g(e,["tools"]);if(t!==void 0&&L!=null){let se=fy(o,L);Array.isArray(se)&&(se=se.map(ce=>zF(o,hy(o,ce)))),m(t,["tools"],se)}const U=g(e,["toolConfig"]);if(t!==void 0&&U!=null&&m(t,["toolConfig"],YF(o,U)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=g(e,["cachedContent"]);t!==void 0&&F!=null&&m(t,["cachedContent"],io(o,F));const W=g(e,["responseModalities"]);W!=null&&m(n,["responseModalities"],W);const K=g(e,["mediaResolution"]);K!=null&&m(n,["mediaResolution"],K);const Q=g(e,["speechConfig"]);if(Q!=null&&m(n,["speechConfig"],ZF(o,CM(o,Q))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=g(e,["thinkingConfig"]);return J!=null&&m(n,["thinkingConfig"],QF(o,J)),n}function WE(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["contents"]);if(i!=null){let l=fs(o,i);Array.isArray(l)&&(l=l.map(u=>gy(o,u))),m(t,["contents"],l)}const a=g(e,["config"]);return a!=null&&m(t,["generationConfig"],JF(o,a,t)),t}function jF(o,e,t){const n={},i=g(e,["taskType"]);t!==void 0&&i!=null&&m(t,["requests[]","taskType"],i);const a=g(e,["title"]);t!==void 0&&a!=null&&m(t,["requests[]","title"],a);const l=g(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&m(t,["requests[]","outputDimensionality"],l),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function eU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["contents"]);i!=null&&m(t,["requests[]","content"],TM(o,i));const a=g(e,["config"]);a!=null&&m(t,["config"],jF(o,a,t));const l=g(e,["model"]);return l!==void 0&&m(t,["requests[]","model"],_t(o,l)),t}function tU(o,e,t){const n={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(e,["numberOfImages"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const a=g(e,["aspectRatio"]);t!==void 0&&a!=null&&m(t,["parameters","aspectRatio"],a);const l=g(e,["guidanceScale"]);if(t!==void 0&&l!=null&&m(t,["parameters","guidanceScale"],l),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&m(t,["parameters","safetySetting"],u);const d=g(e,["personGeneration"]);t!==void 0&&d!=null&&m(t,["parameters","personGeneration"],d);const f=g(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&m(t,["parameters","includeSafetyAttributes"],f);const y=g(e,["includeRaiReason"]);t!==void 0&&y!=null&&m(t,["parameters","includeRaiReason"],y);const A=g(e,["language"]);t!==void 0&&A!=null&&m(t,["parameters","language"],A);const _=g(e,["outputMimeType"]);t!==void 0&&_!=null&&m(t,["parameters","outputOptions","mimeType"],_);const S=g(e,["outputCompressionQuality"]);if(t!==void 0&&S!=null&&m(t,["parameters","outputOptions","compressionQuality"],S),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function nU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const a=g(e,["config"]);return a!=null&&m(t,["config"],tU(o,a,t)),t}function iU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","name"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function sU(o,e,t){const n={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const a=g(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const l=g(e,["filter"]);t!==void 0&&l!=null&&m(t,["_query","filter"],l);const u=g(e,["queryBase"]);return t!==void 0&&u!=null&&m(t,["_url","models_url"],MM(o,u)),n}function aU(o,e){const t={},n=g(e,["config"]);return n!=null&&m(t,["config"],sU(o,n,t)),t}function rU(o,e,t){const n={},i=g(e,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const a=g(e,["description"]);t!==void 0&&a!=null&&m(t,["description"],a);const l=g(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&m(t,["defaultCheckpointId"],l),n}function oU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","name"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],rU(o,i,t)),t}function lU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","name"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function cU(o,e){const t={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function uU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["contents"]);if(i!=null){let l=fs(o,i);Array.isArray(l)&&(l=l.map(u=>gy(o,u))),m(t,["contents"],l)}const a=g(e,["config"]);return a!=null&&m(t,["config"],cU(o,a)),t}function dU(o,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(e,["imageBytes"]);n!=null&&m(t,["bytesBase64Encoded"],so(o,n));const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function hU(o,e,t){const n={},i=g(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=g(e,["durationSeconds"]);if(t!==void 0&&a!=null&&m(t,["parameters","durationSeconds"],a),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=g(e,["aspectRatio"]);if(t!==void 0&&l!=null&&m(t,["parameters","aspectRatio"],l),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=g(e,["personGeneration"]);if(t!==void 0&&u!=null&&m(t,["parameters","personGeneration"],u),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=g(e,["negativePrompt"]);if(t!==void 0&&d!=null&&m(t,["parameters","negativePrompt"],d),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(g(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return n}function fU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const a=g(e,["image"]);a!=null&&m(t,["instances[0]","image"],dU(o,a));const l=g(e,["config"]);return l!=null&&m(t,["config"],hU(o,l,t)),t}function pU(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function gU(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["data"]);i!=null&&m(t,["data"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function mU(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["fileUri"]);i!=null&&m(t,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function yU(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],pU(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],gU(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],mU(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function ed(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>yU(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function vU(o,e){const t={},n=g(e,["anyOf"]);n!=null&&m(t,["anyOf"],n);const i=g(e,["default"]);i!=null&&m(t,["default"],i);const a=g(e,["description"]);a!=null&&m(t,["description"],a);const l=g(e,["enum"]);l!=null&&m(t,["enum"],l);const u=g(e,["example"]);u!=null&&m(t,["example"],u);const d=g(e,["format"]);d!=null&&m(t,["format"],d);const f=g(e,["items"]);f!=null&&m(t,["items"],f);const y=g(e,["maxItems"]);y!=null&&m(t,["maxItems"],y);const A=g(e,["maxLength"]);A!=null&&m(t,["maxLength"],A);const _=g(e,["maxProperties"]);_!=null&&m(t,["maxProperties"],_);const S=g(e,["maximum"]);S!=null&&m(t,["maximum"],S);const T=g(e,["minItems"]);T!=null&&m(t,["minItems"],T);const C=g(e,["minLength"]);C!=null&&m(t,["minLength"],C);const x=g(e,["minProperties"]);x!=null&&m(t,["minProperties"],x);const D=g(e,["minimum"]);D!=null&&m(t,["minimum"],D);const k=g(e,["nullable"]);k!=null&&m(t,["nullable"],k);const L=g(e,["pattern"]);L!=null&&m(t,["pattern"],L);const U=g(e,["properties"]);U!=null&&m(t,["properties"],U);const F=g(e,["propertyOrdering"]);F!=null&&m(t,["propertyOrdering"],F);const W=g(e,["required"]);W!=null&&m(t,["required"],W);const K=g(e,["title"]);K!=null&&m(t,["title"],K);const Q=g(e,["type"]);return Q!=null&&m(t,["type"],Q),t}function AU(o,e){const t={},n=g(e,["featureSelectionPreference"]);return n!=null&&m(t,["featureSelectionPreference"],n),t}function bU(o,e){const t={},n=g(e,["method"]);n!=null&&m(t,["method"],n);const i=g(e,["category"]);i!=null&&m(t,["category"],i);const a=g(e,["threshold"]);return a!=null&&m(t,["threshold"],a),t}function _U(o,e){const t={};if(g(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(e,["description"]);n!=null&&m(t,["description"],n);const i=g(e,["name"]);i!=null&&m(t,["name"],i);const a=g(e,["parameters"]);a!=null&&m(t,["parameters"],a);const l=g(e,["response"]);return l!=null&&m(t,["response"],l),t}function SU(o,e){const t={},n=g(e,["startTime"]);n!=null&&m(t,["startTime"],n);const i=g(e,["endTime"]);return i!=null&&m(t,["endTime"],i),t}function TU(o,e){const t={},n=g(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],SU(o,n)),t}function CU(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["dynamicThreshold"]);return i!=null&&m(t,["dynamicThreshold"],i),t}function wU(o,e){const t={},n=g(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],CU(o,n)),t}function EU(){return{}}function xU(o,e){const t={},n=g(e,["apiKeyString"]);return n!=null&&m(t,["apiKeyString"],n),t}function MU(o,e){const t={},n=g(e,["apiKeyConfig"]);n!=null&&m(t,["apiKeyConfig"],xU(o,n));const i=g(e,["authType"]);i!=null&&m(t,["authType"],i);const a=g(e,["googleServiceAccountConfig"]);a!=null&&m(t,["googleServiceAccountConfig"],a);const l=g(e,["httpBasicAuthConfig"]);l!=null&&m(t,["httpBasicAuthConfig"],l);const u=g(e,["oauthConfig"]);u!=null&&m(t,["oauthConfig"],u);const d=g(e,["oidcConfig"]);return d!=null&&m(t,["oidcConfig"],d),t}function RU(o,e){const t={},n=g(e,["authConfig"]);return n!=null&&m(t,["authConfig"],MU(o,n)),t}function FM(o,e){const t={},n=g(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(A=>_U(o,A))),m(t,["functionDeclarations"],y)}const i=g(e,["retrieval"]);i!=null&&m(t,["retrieval"],i);const a=g(e,["googleSearch"]);a!=null&&m(t,["googleSearch"],TU(o,a));const l=g(e,["googleSearchRetrieval"]);l!=null&&m(t,["googleSearchRetrieval"],wU(o,l)),g(e,["enterpriseWebSearch"])!=null&&m(t,["enterpriseWebSearch"],EU());const d=g(e,["googleMaps"]);if(d!=null&&m(t,["googleMaps"],RU(o,d)),g(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const f=g(e,["codeExecution"]);return f!=null&&m(t,["codeExecution"],f),t}function IU(o,e){const t={},n=g(e,["mode"]);n!=null&&m(t,["mode"],n);const i=g(e,["allowedFunctionNames"]);return i!=null&&m(t,["allowedFunctionNames"],i),t}function DU(o,e){const t={},n=g(e,["latitude"]);n!=null&&m(t,["latitude"],n);const i=g(e,["longitude"]);return i!=null&&m(t,["longitude"],i),t}function kU(o,e){const t={},n=g(e,["latLng"]);n!=null&&m(t,["latLng"],DU(o,n));const i=g(e,["languageCode"]);return i!=null&&m(t,["languageCode"],i),t}function NU(o,e){const t={},n=g(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],IU(o,n));const i=g(e,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],kU(o,i)),t}function LU(o,e){const t={},n=g(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function PU(o,e){const t={},n=g(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],LU(o,n)),t}function OU(o,e){const t={},n=g(e,["voiceConfig"]);if(n!=null&&m(t,["voiceConfig"],PU(o,n)),g(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=g(e,["languageCode"]);return i!=null&&m(t,["languageCode"],i),t}function FU(o,e){const t={},n=g(e,["includeThoughts"]);n!=null&&m(t,["includeThoughts"],n);const i=g(e,["thinkingBudget"]);return i!=null&&m(t,["thinkingBudget"],i),t}function UU(o,e,t){const n={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],ed(o,jn(o,i)));const a=g(e,["temperature"]);a!=null&&m(n,["temperature"],a);const l=g(e,["topP"]);l!=null&&m(n,["topP"],l);const u=g(e,["topK"]);u!=null&&m(n,["topK"],u);const d=g(e,["candidateCount"]);d!=null&&m(n,["candidateCount"],d);const f=g(e,["maxOutputTokens"]);f!=null&&m(n,["maxOutputTokens"],f);const y=g(e,["stopSequences"]);y!=null&&m(n,["stopSequences"],y);const A=g(e,["responseLogprobs"]);A!=null&&m(n,["responseLogprobs"],A);const _=g(e,["logprobs"]);_!=null&&m(n,["logprobs"],_);const S=g(e,["presencePenalty"]);S!=null&&m(n,["presencePenalty"],S);const T=g(e,["frequencyPenalty"]);T!=null&&m(n,["frequencyPenalty"],T);const C=g(e,["seed"]);C!=null&&m(n,["seed"],C);const x=g(e,["responseMimeType"]);x!=null&&m(n,["responseMimeType"],x);const D=g(e,["responseSchema"]);D!=null&&m(n,["responseSchema"],vU(o,Fm(o,D)));const k=g(e,["routingConfig"]);k!=null&&m(n,["routingConfig"],k);const L=g(e,["modelSelectionConfig"]);L!=null&&m(n,["modelConfig"],AU(o,L));const U=g(e,["safetySettings"]);if(t!==void 0&&U!=null){let ne=U;Array.isArray(ne)&&(ne=ne.map(ue=>bU(o,ue))),m(t,["safetySettings"],ne)}const F=g(e,["tools"]);if(t!==void 0&&F!=null){let ne=fy(o,F);Array.isArray(ne)&&(ne=ne.map(ue=>FM(o,hy(o,ue)))),m(t,["tools"],ne)}const W=g(e,["toolConfig"]);t!==void 0&&W!=null&&m(t,["toolConfig"],NU(o,W));const K=g(e,["labels"]);t!==void 0&&K!=null&&m(t,["labels"],K);const Q=g(e,["cachedContent"]);t!==void 0&&Q!=null&&m(t,["cachedContent"],io(o,Q));const J=g(e,["responseModalities"]);J!=null&&m(n,["responseModalities"],J);const se=g(e,["mediaResolution"]);se!=null&&m(n,["mediaResolution"],se);const ce=g(e,["speechConfig"]);ce!=null&&m(n,["speechConfig"],OU(o,CM(o,ce)));const B=g(e,["audioTimestamp"]);B!=null&&m(n,["audioTimestamp"],B);const ie=g(e,["thinkingConfig"]);return ie!=null&&m(n,["thinkingConfig"],FU(o,ie)),n}function XE(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["contents"]);if(i!=null){let l=fs(o,i);Array.isArray(l)&&(l=l.map(u=>ed(o,u))),m(t,["contents"],l)}const a=g(e,["config"]);return a!=null&&m(t,["generationConfig"],UU(o,a,t)),t}function HU(o,e,t){const n={},i=g(e,["taskType"]);t!==void 0&&i!=null&&m(t,["instances[]","task_type"],i);const a=g(e,["title"]);t!==void 0&&a!=null&&m(t,["instances[]","title"],a);const l=g(e,["outputDimensionality"]);t!==void 0&&l!=null&&m(t,["parameters","outputDimensionality"],l);const u=g(e,["mimeType"]);t!==void 0&&u!=null&&m(t,["instances[]","mimeType"],u);const d=g(e,["autoTruncate"]);return t!==void 0&&d!=null&&m(t,["parameters","autoTruncate"],d),n}function BU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["contents"]);i!=null&&m(t,["instances[]","content"],TM(o,i));const a=g(e,["config"]);return a!=null&&m(t,["config"],HU(o,a,t)),t}function VU(o,e,t){const n={},i=g(e,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const a=g(e,["negativePrompt"]);t!==void 0&&a!=null&&m(t,["parameters","negativePrompt"],a);const l=g(e,["numberOfImages"]);t!==void 0&&l!=null&&m(t,["parameters","sampleCount"],l);const u=g(e,["aspectRatio"]);t!==void 0&&u!=null&&m(t,["parameters","aspectRatio"],u);const d=g(e,["guidanceScale"]);t!==void 0&&d!=null&&m(t,["parameters","guidanceScale"],d);const f=g(e,["seed"]);t!==void 0&&f!=null&&m(t,["parameters","seed"],f);const y=g(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&m(t,["parameters","safetySetting"],y);const A=g(e,["personGeneration"]);t!==void 0&&A!=null&&m(t,["parameters","personGeneration"],A);const _=g(e,["includeSafetyAttributes"]);t!==void 0&&_!=null&&m(t,["parameters","includeSafetyAttributes"],_);const S=g(e,["includeRaiReason"]);t!==void 0&&S!=null&&m(t,["parameters","includeRaiReason"],S);const T=g(e,["language"]);t!==void 0&&T!=null&&m(t,["parameters","language"],T);const C=g(e,["outputMimeType"]);t!==void 0&&C!=null&&m(t,["parameters","outputOptions","mimeType"],C);const x=g(e,["outputCompressionQuality"]);t!==void 0&&x!=null&&m(t,["parameters","outputOptions","compressionQuality"],x);const D=g(e,["addWatermark"]);t!==void 0&&D!=null&&m(t,["parameters","addWatermark"],D);const k=g(e,["enhancePrompt"]);return t!==void 0&&k!=null&&m(t,["parameters","enhancePrompt"],k),n}function zU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const a=g(e,["config"]);return a!=null&&m(t,["config"],VU(o,a,t)),t}function Yb(o,e){const t={},n=g(e,["gcsUri"]);n!=null&&m(t,["gcsUri"],n);const i=g(e,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],so(o,i));const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function GU(o,e){const t={},n=g(e,["maskMode"]);n!=null&&m(t,["maskMode"],n);const i=g(e,["segmentationClasses"]);i!=null&&m(t,["maskClasses"],i);const a=g(e,["maskDilation"]);return a!=null&&m(t,["dilation"],a),t}function qU(o,e){const t={},n=g(e,["controlType"]);n!=null&&m(t,["controlType"],n);const i=g(e,["enableControlImageComputation"]);return i!=null&&m(t,["computeControl"],i),t}function $U(o,e){const t={},n=g(e,["styleDescription"]);return n!=null&&m(t,["styleDescription"],n),t}function YU(o,e){const t={},n=g(e,["subjectType"]);n!=null&&m(t,["subjectType"],n);const i=g(e,["subjectDescription"]);return i!=null&&m(t,["subjectDescription"],i),t}function WU(o,e){const t={},n=g(e,["referenceImage"]);n!=null&&m(t,["referenceImage"],Yb(o,n));const i=g(e,["referenceId"]);i!=null&&m(t,["referenceId"],i);const a=g(e,["referenceType"]);a!=null&&m(t,["referenceType"],a);const l=g(e,["maskImageConfig"]);l!=null&&m(t,["maskImageConfig"],GU(o,l));const u=g(e,["controlImageConfig"]);u!=null&&m(t,["controlImageConfig"],qU(o,u));const d=g(e,["styleImageConfig"]);d!=null&&m(t,["styleImageConfig"],$U(o,d));const f=g(e,["subjectImageConfig"]);return f!=null&&m(t,["subjectImageConfig"],YU(o,f)),t}function XU(o,e,t){const n={},i=g(e,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const a=g(e,["negativePrompt"]);t!==void 0&&a!=null&&m(t,["parameters","negativePrompt"],a);const l=g(e,["numberOfImages"]);t!==void 0&&l!=null&&m(t,["parameters","sampleCount"],l);const u=g(e,["aspectRatio"]);t!==void 0&&u!=null&&m(t,["parameters","aspectRatio"],u);const d=g(e,["guidanceScale"]);t!==void 0&&d!=null&&m(t,["parameters","guidanceScale"],d);const f=g(e,["seed"]);t!==void 0&&f!=null&&m(t,["parameters","seed"],f);const y=g(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&m(t,["parameters","safetySetting"],y);const A=g(e,["personGeneration"]);t!==void 0&&A!=null&&m(t,["parameters","personGeneration"],A);const _=g(e,["includeSafetyAttributes"]);t!==void 0&&_!=null&&m(t,["parameters","includeSafetyAttributes"],_);const S=g(e,["includeRaiReason"]);t!==void 0&&S!=null&&m(t,["parameters","includeRaiReason"],S);const T=g(e,["language"]);t!==void 0&&T!=null&&m(t,["parameters","language"],T);const C=g(e,["outputMimeType"]);t!==void 0&&C!=null&&m(t,["parameters","outputOptions","mimeType"],C);const x=g(e,["outputCompressionQuality"]);t!==void 0&&x!=null&&m(t,["parameters","outputOptions","compressionQuality"],x);const D=g(e,["editMode"]);t!==void 0&&D!=null&&m(t,["parameters","editMode"],D);const k=g(e,["baseSteps"]);return t!==void 0&&k!=null&&m(t,["parameters","editConfig","baseSteps"],k),n}function KU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const a=g(e,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>WU(o,d))),m(t,["instances[0]","referenceImages"],u)}const l=g(e,["config"]);return l!=null&&m(t,["config"],XU(o,l,t)),t}function ZU(o,e,t){const n={},i=g(e,["includeRaiReason"]);t!==void 0&&i!=null&&m(t,["parameters","includeRaiReason"],i);const a=g(e,["outputMimeType"]);t!==void 0&&a!=null&&m(t,["parameters","outputOptions","mimeType"],a);const l=g(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&m(t,["parameters","outputOptions","compressionQuality"],l);const u=g(e,["numberOfImages"]);t!==void 0&&u!=null&&m(t,["parameters","sampleCount"],u);const d=g(e,["mode"]);return t!==void 0&&d!=null&&m(t,["parameters","mode"],d),n}function QU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["image"]);i!=null&&m(t,["instances[0]","image"],Yb(o,i));const a=g(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const l=g(e,["config"]);return l!=null&&m(t,["config"],ZU(o,l,t)),t}function JU(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","name"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function jU(o,e,t){const n={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const a=g(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const l=g(e,["filter"]);t!==void 0&&l!=null&&m(t,["_query","filter"],l);const u=g(e,["queryBase"]);return t!==void 0&&u!=null&&m(t,["_url","models_url"],MM(o,u)),n}function e3(o,e){const t={},n=g(e,["config"]);return n!=null&&m(t,["config"],jU(o,n,t)),t}function t3(o,e,t){const n={},i=g(e,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const a=g(e,["description"]);t!==void 0&&a!=null&&m(t,["description"],a);const l=g(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&m(t,["defaultCheckpointId"],l),n}function n3(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],t3(o,i,t)),t}function i3(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","name"],_t(o,n));const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function s3(o,e,t){const n={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],ed(o,jn(o,i)));const a=g(e,["tools"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>FM(o,d))),m(t,["tools"],u)}const l=g(e,["generationConfig"]);return t!==void 0&&l!=null&&m(t,["generationConfig"],l),n}function a3(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["contents"]);if(i!=null){let l=fs(o,i);Array.isArray(l)&&(l=l.map(u=>ed(o,u))),m(t,["contents"],l)}const a=g(e,["config"]);return a!=null&&m(t,["config"],s3(o,a,t)),t}function r3(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["contents"]);if(i!=null){let l=fs(o,i);Array.isArray(l)&&(l=l.map(u=>ed(o,u))),m(t,["contents"],l)}const a=g(e,["config"]);return a!=null&&m(t,["config"],a),t}function o3(o,e,t){const n={},i=g(e,["numberOfVideos"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const a=g(e,["outputGcsUri"]);t!==void 0&&a!=null&&m(t,["parameters","storageUri"],a);const l=g(e,["fps"]);t!==void 0&&l!=null&&m(t,["parameters","fps"],l);const u=g(e,["durationSeconds"]);t!==void 0&&u!=null&&m(t,["parameters","durationSeconds"],u);const d=g(e,["seed"]);t!==void 0&&d!=null&&m(t,["parameters","seed"],d);const f=g(e,["aspectRatio"]);t!==void 0&&f!=null&&m(t,["parameters","aspectRatio"],f);const y=g(e,["resolution"]);t!==void 0&&y!=null&&m(t,["parameters","resolution"],y);const A=g(e,["personGeneration"]);t!==void 0&&A!=null&&m(t,["parameters","personGeneration"],A);const _=g(e,["pubsubTopic"]);t!==void 0&&_!=null&&m(t,["parameters","pubsubTopic"],_);const S=g(e,["negativePrompt"]);t!==void 0&&S!=null&&m(t,["parameters","negativePrompt"],S);const T=g(e,["enhancePrompt"]);t!==void 0&&T!=null&&m(t,["parameters","enhancePrompt"],T);const C=g(e,["generateAudio"]);return t!==void 0&&C!=null&&m(t,["parameters","generateAudio"],C),n}function l3(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["_url","model"],_t(o,n));const i=g(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const a=g(e,["image"]);a!=null&&m(t,["instances[0]","image"],Yb(o,a));const l=g(e,["config"]);return l!=null&&m(t,["config"],o3(o,l,t)),t}function c3(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function u3(o,e){const t={},n=g(e,["data"]);n!=null&&m(t,["data"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function d3(o,e){const t={},n=g(e,["fileUri"]);n!=null&&m(t,["fileUri"],n);const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function h3(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],c3(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],u3(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],d3(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function f3(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>h3(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function p3(o,e){const t={},n=g(e,["citationSources"]);return n!=null&&m(t,["citations"],n),t}function g3(o,e){const t={},n=g(e,["retrievedUrl"]);n!=null&&m(t,["retrievedUrl"],n);const i=g(e,["urlRetrievalStatus"]);return i!=null&&m(t,["urlRetrievalStatus"],i),t}function m3(o,e){const t={},n=g(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>g3(o,a))),m(t,["urlMetadata"],i)}return t}function y3(o,e){const t={},n=g(e,["content"]);n!=null&&m(t,["content"],f3(o,n));const i=g(e,["citationMetadata"]);i!=null&&m(t,["citationMetadata"],p3(o,i));const a=g(e,["tokenCount"]);a!=null&&m(t,["tokenCount"],a);const l=g(e,["finishReason"]);l!=null&&m(t,["finishReason"],l);const u=g(e,["urlContextMetadata"]);u!=null&&m(t,["urlContextMetadata"],m3(o,u));const d=g(e,["avgLogprobs"]);d!=null&&m(t,["avgLogprobs"],d);const f=g(e,["groundingMetadata"]);f!=null&&m(t,["groundingMetadata"],f);const y=g(e,["index"]);y!=null&&m(t,["index"],y);const A=g(e,["logprobsResult"]);A!=null&&m(t,["logprobsResult"],A);const _=g(e,["safetyRatings"]);return _!=null&&m(t,["safetyRatings"],_),t}function KE(o,e){const t={},n=g(e,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>y3(o,d))),m(t,["candidates"],u)}const i=g(e,["modelVersion"]);i!=null&&m(t,["modelVersion"],i);const a=g(e,["promptFeedback"]);a!=null&&m(t,["promptFeedback"],a);const l=g(e,["usageMetadata"]);return l!=null&&m(t,["usageMetadata"],l),t}function v3(o,e){const t={},n=g(e,["values"]);return n!=null&&m(t,["values"],n),t}function A3(){return{}}function b3(o,e){const t={},n=g(e,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>v3(o,l))),m(t,["embeddings"],a)}return g(e,["metadata"])!=null&&m(t,["metadata"],A3()),t}function _3(o,e){const t={},n=g(e,["bytesBase64Encoded"]);n!=null&&m(t,["imageBytes"],so(o,n));const i=g(e,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function UM(o,e){const t={},n=g(e,["safetyAttributes","categories"]);n!=null&&m(t,["categories"],n);const i=g(e,["safetyAttributes","scores"]);i!=null&&m(t,["scores"],i);const a=g(e,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function S3(o,e){const t={},n=g(e,["_self"]);n!=null&&m(t,["image"],_3(o,n));const i=g(e,["raiFilteredReason"]);i!=null&&m(t,["raiFilteredReason"],i);const a=g(e,["_self"]);return a!=null&&m(t,["safetyAttributes"],UM(o,a)),t}function T3(o,e){const t={},n=g(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>S3(o,l))),m(t,["generatedImages"],a)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&m(t,["positivePromptSafetyAttributes"],UM(o,i)),t}function C3(o,e){const t={},n=g(e,["baseModel"]);n!=null&&m(t,["baseModel"],n);const i=g(e,["createTime"]);i!=null&&m(t,["createTime"],i);const a=g(e,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function Sb(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["displayName"]);i!=null&&m(t,["displayName"],i);const a=g(e,["description"]);a!=null&&m(t,["description"],a);const l=g(e,["version"]);l!=null&&m(t,["version"],l);const u=g(e,["_self"]);u!=null&&m(t,["tunedModelInfo"],C3(o,u));const d=g(e,["inputTokenLimit"]);d!=null&&m(t,["inputTokenLimit"],d);const f=g(e,["outputTokenLimit"]);f!=null&&m(t,["outputTokenLimit"],f);const y=g(e,["supportedGenerationMethods"]);return y!=null&&m(t,["supportedActions"],y),t}function w3(o,e){const t={},n=g(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const i=g(e,["_self"]);if(i!=null){let a=RM(o,i);Array.isArray(a)&&(a=a.map(l=>Sb(o,l))),m(t,["models"],a)}return t}function E3(){return{}}function x3(o,e){const t={},n=g(e,["totalTokens"]);n!=null&&m(t,["totalTokens"],n);const i=g(e,["cachedContentTokenCount"]);return i!=null&&m(t,["cachedContentTokenCount"],i),t}function M3(o,e){const t={},n=g(e,["video","uri"]);n!=null&&m(t,["uri"],n);const i=g(e,["video","encodedVideo"]);i!=null&&m(t,["videoBytes"],so(o,i));const a=g(e,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function R3(o,e){const t={},n=g(e,["_self"]);return n!=null&&m(t,["video"],M3(o,n)),t}function I3(o,e){const t={},n=g(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>R3(o,u))),m(t,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function D3(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["metadata"]);i!=null&&m(t,["metadata"],i);const a=g(e,["done"]);a!=null&&m(t,["done"],a);const l=g(e,["error"]);l!=null&&m(t,["error"],l);const u=g(e,["response","generateVideoResponse"]);return u!=null&&m(t,["response"],I3(o,u)),t}function k3(o,e){const t={},n=g(e,["fps"]);n!=null&&m(t,["fps"],n);const i=g(e,["endOffset"]);i!=null&&m(t,["endOffset"],i);const a=g(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function N3(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["data"]);i!=null&&m(t,["data"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function L3(o,e){const t={},n=g(e,["displayName"]);n!=null&&m(t,["displayName"],n);const i=g(e,["fileUri"]);i!=null&&m(t,["fileUri"],i);const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function P3(o,e){const t={},n=g(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],k3(o,n));const i=g(e,["thought"]);i!=null&&m(t,["thought"],i);const a=g(e,["inlineData"]);a!=null&&m(t,["inlineData"],N3(o,a));const l=g(e,["fileData"]);l!=null&&m(t,["fileData"],L3(o,l));const u=g(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const d=g(e,["executableCode"]);d!=null&&m(t,["executableCode"],d);const f=g(e,["functionCall"]);f!=null&&m(t,["functionCall"],f);const y=g(e,["functionResponse"]);y!=null&&m(t,["functionResponse"],y);const A=g(e,["text"]);return A!=null&&m(t,["text"],A),t}function O3(o,e){const t={},n=g(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>P3(o,l))),m(t,["parts"],a)}const i=g(e,["role"]);return i!=null&&m(t,["role"],i),t}function F3(o,e){const t={},n=g(e,["citations"]);return n!=null&&m(t,["citations"],n),t}function U3(o,e){const t={},n=g(e,["content"]);n!=null&&m(t,["content"],O3(o,n));const i=g(e,["citationMetadata"]);i!=null&&m(t,["citationMetadata"],F3(o,i));const a=g(e,["finishMessage"]);a!=null&&m(t,["finishMessage"],a);const l=g(e,["finishReason"]);l!=null&&m(t,["finishReason"],l);const u=g(e,["avgLogprobs"]);u!=null&&m(t,["avgLogprobs"],u);const d=g(e,["groundingMetadata"]);d!=null&&m(t,["groundingMetadata"],d);const f=g(e,["index"]);f!=null&&m(t,["index"],f);const y=g(e,["logprobsResult"]);y!=null&&m(t,["logprobsResult"],y);const A=g(e,["safetyRatings"]);return A!=null&&m(t,["safetyRatings"],A),t}function ZE(o,e){const t={},n=g(e,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(y=>U3(o,y))),m(t,["candidates"],f)}const i=g(e,["createTime"]);i!=null&&m(t,["createTime"],i);const a=g(e,["responseId"]);a!=null&&m(t,["responseId"],a);const l=g(e,["modelVersion"]);l!=null&&m(t,["modelVersion"],l);const u=g(e,["promptFeedback"]);u!=null&&m(t,["promptFeedback"],u);const d=g(e,["usageMetadata"]);return d!=null&&m(t,["usageMetadata"],d),t}function H3(o,e){const t={},n=g(e,["truncated"]);n!=null&&m(t,["truncated"],n);const i=g(e,["token_count"]);return i!=null&&m(t,["tokenCount"],i),t}function B3(o,e){const t={},n=g(e,["values"]);n!=null&&m(t,["values"],n);const i=g(e,["statistics"]);return i!=null&&m(t,["statistics"],H3(o,i)),t}function V3(o,e){const t={},n=g(e,["billableCharacterCount"]);return n!=null&&m(t,["billableCharacterCount"],n),t}function z3(o,e){const t={},n=g(e,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>B3(o,l))),m(t,["embeddings"],a)}const i=g(e,["metadata"]);return i!=null&&m(t,["metadata"],V3(o,i)),t}function G3(o,e){const t={},n=g(e,["gcsUri"]);n!=null&&m(t,["gcsUri"],n);const i=g(e,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],so(o,i));const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function HM(o,e){const t={},n=g(e,["safetyAttributes","categories"]);n!=null&&m(t,["categories"],n);const i=g(e,["safetyAttributes","scores"]);i!=null&&m(t,["scores"],i);const a=g(e,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function Wb(o,e){const t={},n=g(e,["_self"]);n!=null&&m(t,["image"],G3(o,n));const i=g(e,["raiFilteredReason"]);i!=null&&m(t,["raiFilteredReason"],i);const a=g(e,["_self"]);a!=null&&m(t,["safetyAttributes"],HM(o,a));const l=g(e,["prompt"]);return l!=null&&m(t,["enhancedPrompt"],l),t}function q3(o,e){const t={},n=g(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Wb(o,l))),m(t,["generatedImages"],a)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&m(t,["positivePromptSafetyAttributes"],HM(o,i)),t}function $3(o,e){const t={},n=g(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Wb(o,a))),m(t,["generatedImages"],i)}return t}function Y3(o,e){const t={},n=g(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Wb(o,a))),m(t,["generatedImages"],i)}return t}function W3(o,e){const t={},n=g(e,["endpoint"]);n!=null&&m(t,["name"],n);const i=g(e,["deployedModelId"]);return i!=null&&m(t,["deployedModelId"],i),t}function X3(o,e){const t={},n=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(t,["baseModel"],n);const i=g(e,["createTime"]);i!=null&&m(t,["createTime"],i);const a=g(e,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function K3(o,e){const t={},n=g(e,["checkpointId"]);n!=null&&m(t,["checkpointId"],n);const i=g(e,["epoch"]);i!=null&&m(t,["epoch"],i);const a=g(e,["step"]);return a!=null&&m(t,["step"],a),t}function Tb(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["displayName"]);i!=null&&m(t,["displayName"],i);const a=g(e,["description"]);a!=null&&m(t,["description"],a);const l=g(e,["versionId"]);l!=null&&m(t,["version"],l);const u=g(e,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(S=>W3(o,S))),m(t,["endpoints"],_)}const d=g(e,["labels"]);d!=null&&m(t,["labels"],d);const f=g(e,["_self"]);f!=null&&m(t,["tunedModelInfo"],X3(o,f));const y=g(e,["defaultCheckpointId"]);y!=null&&m(t,["defaultCheckpointId"],y);const A=g(e,["checkpoints"]);if(A!=null){let _=A;Array.isArray(_)&&(_=_.map(S=>K3(o,S))),m(t,["checkpoints"],_)}return t}function Z3(o,e){const t={},n=g(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const i=g(e,["_self"]);if(i!=null){let a=RM(o,i);Array.isArray(a)&&(a=a.map(l=>Tb(o,l))),m(t,["models"],a)}return t}function Q3(){return{}}function J3(o,e){const t={},n=g(e,["totalTokens"]);return n!=null&&m(t,["totalTokens"],n),t}function j3(o,e){const t={},n=g(e,["tokensInfo"]);return n!=null&&m(t,["tokensInfo"],n),t}function eH(o,e){const t={},n=g(e,["gcsUri"]);n!=null&&m(t,["uri"],n);const i=g(e,["bytesBase64Encoded"]);i!=null&&m(t,["videoBytes"],so(o,i));const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function tH(o,e){const t={},n=g(e,["_self"]);return n!=null&&m(t,["video"],eH(o,n)),t}function nH(o,e){const t={},n=g(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>tH(o,u))),m(t,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function iH(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["metadata"]);i!=null&&m(t,["metadata"],i);const a=g(e,["done"]);a!=null&&m(t,["done"],a);const l=g(e,["error"]);l!=null&&m(t,["error"],l);const u=g(e,["response"]);return u!=null&&m(t,["response"],nH(o,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sH="Content-Type",aH="X-Server-Timeout",rH="User-Agent",Cb="x-goog-api-client",oH="1.2.0",lH=`google-genai-sdk/${oH}`,cH="v1beta1",uH="v1beta",QE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class BM extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class wb extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class dH{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:cH,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:uH,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const i=[this.getRequestUrlInternal(t)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))i.searchParams.append(l,String(u));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(t))typeof a=="object"?n[i]=Object.assign(Object.assign({},n[i]),a):a!==void 0&&(n[i]=a);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const i=new AbortController,a=i.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),n&&n.addEventListener("abort",()=>{i.abort()}),e.signal=a}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async i=>(await JE(i),new vb(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async i=>(await JE(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Dh(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield Rt(i.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=a.decode(d);try{const A=JSON.parse(f);if("error"in A){const _=JSON.parse(JSON.stringify(A.error)),S=_.status,T=_.code,C=`got status: ${S}. ${JSON.stringify(A)}`;if(T>=400&&T<500)throw new BM(C);if(T>=500&&T<600)throw new wb(C)}}catch(A){const _=A;if(_.name==="ClientError"||_.name==="ServerError")throw A}l+=f;let y=l.match(QE);for(;y;){const A=y[1];try{const _=new Response(A,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Rt(new vb(_)),l=l.slice(y[0].length),y=l.match(QE)}catch(_){throw new Error(`exception parsing stream chunk ${A}. ${_}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=lH+" "+this.clientOptions.userAgentExtra;return e[rH]=t,e[Cb]=t,e[sH]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,i]of Object.entries(e.headers))t.append(n,i);e.timeout&&e.timeout>0&&t.append(aH,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);i.sizeBytes=String(l.size);const u=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const d=await this.fetchUploadUrl(i,t);return a.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},l=await this.request({path:Ie("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:i});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(n=l==null?void 0:l.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function JE(o){var e;if(o===void 0)throw new wb("response is undefined");if(!o.ok){const t=o.status,n=o.statusText;let i;!((e=o.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await o.json():i={error:{message:await o.text(),code:o.status,status:o.statusText}};const a=`got status: ${t} ${n}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new BM(a):t>=500&&t<600?new wb(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hH="mcp_used/unknown";function VM(o){for(const e of o)if(Xb(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function zM(o){var e;const t=(e=o[Cb])!==null&&e!==void 0?e:"";o[Cb]=(t+` ${hH}`).trimStart()}function fH(o){var e,t,n;return(n=(t=(e=o.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>Xb(i)))!==null&&n!==void 0?n:!1}function pH(o){var e,t,n;return(n=(t=(e=o.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>!Xb(i)))!==null&&n!==void 0?n:!1}function Xb(o){return o!==null&&typeof o=="object"&&"tool"in o&&"callTool"in o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gH(o,e,t){const n=new pP;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data);const a=RF(o,i);Object.assign(n,a),e(n)}class mH{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=AH(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const y=new Promise(L=>{f=L}),A=e.callbacks,_=function(){f({})},S=this.apiClient,T={onopen:_,onmessage:L=>{gH(S,A.onmessage,L)},onerror:(t=A==null?void 0:A.onerror)!==null&&t!==void 0?t:function(L){},onclose:(n=A==null?void 0:A.onclose)!==null&&n!==void 0?n:function(L){}},C=this.webSocketFactory.create(d,vH(l),T);C.connect(),await y;const x=_t(this.apiClient,e.model),D=LM(this.apiClient,{model:x}),k=_b(this.apiClient,{setup:D});return C.send(JSON.stringify(k)),new yH(C,this.apiClient)}}class yH{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=GO(this.apiClient,e),n=PM(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=qO(this.apiClient,e),n=_b(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=_b(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Uc.PLAY)}pause(){this.sendPlaybackControl(Uc.PAUSE)}stop(){this.sendPlaybackControl(Uc.STOP)}resetContext(){this.sendPlaybackControl(Uc.RESET_CONTEXT)}close(){this.conn.close()}}function vH(o){const e={};return o.forEach((t,n)=>{e[n]=t}),e}function AH(o){const e=new Headers;for(const[t,n]of Object.entries(o))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bH="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _H(o,e,t){const n=new fP;let i;if(t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),o.isVertexAI()){const a=bF(o,i);Object.assign(n,a)}else{const a=AF(o,i);Object.assign(n,a)}e(n)}class SH{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new mH(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,i,a,l,u;const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let y;const A=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&VM(e.config.tools)&&zM(A);const _=EH(A);if(this.apiClient.isVertexAI())y=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_);else{const J=this.apiClient.getApiKey();y=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateContent?key=${J}`}let S=()=>{};const T=new Promise(J=>{S=J}),C=e.callbacks,x=function(){var J;(J=C==null?void 0:C.onopen)===null||J===void 0||J.call(C),S({})},D=this.apiClient,k={onopen:x,onmessage:J=>{_H(D,C.onmessage,J)},onerror:(t=C==null?void 0:C.onerror)!==null&&t!==void 0?t:function(J){},onclose:(n=C==null?void 0:C.onclose)!==null&&n!==void 0?n:function(J){}},L=this.webSocketFactory.create(y,wH(_),k);L.connect(),await T;let U=_t(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const J=this.apiClient.getProject(),se=this.apiClient.getLocation();U=`projects/${J}/locations/${se}/`+U}let F={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Pm.AUDIO]}:e.config.responseModalities=[Pm.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],K=[];for(const J of W)if(this.isCallableTool(J)){const se=J;K.push(await se.tool())}else K.push(J);K.length>0&&(e.config.tools=K);const Q={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=OO(this.apiClient,Q):F=PO(this.apiClient,Q),delete F.config,L.send(JSON.stringify(F)),new CH(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const TH={turnComplete:!0};class CH{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=fs(e,t.turns),e.isVertexAI()?n=n.map(i=>ed(e,i)):n=n.map(i=>gy(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(bH)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},TH),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:zO(this.apiClient,e)}:t={realtimeInput:VO(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function wH(o){const e={};return o.forEach((t,n)=>{e[n]=t}),e}function EH(o){const e=new Headers;for(const[t,n]of Object.entries(o))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jE=10;function ex(o){var e,t,n;if(!((e=o==null?void 0:o.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(t=o==null?void 0:o.tools)!==null&&t!==void 0?t:[])if(mm(l)){i=!0;break}if(!i)return!0;const a=(n=o==null?void 0:o.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function mm(o){return"callTool"in o&&typeof o.callTool=="function"}function tx(o){var e;return!(!((e=o==null?void 0:o.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xH extends pp{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,i,a,l,u;const d=await this.processParamsForMcpUsage(t);if(!fH(t)||ex(t.config))return await this.generateContentInternal(d);if(pH(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,y;const A=fs(this.apiClient,d.contents),_=(a=(i=(n=d.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:jE;let S=0;for(;S<_&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,C=[];for(const x of(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(mm(x)){const k=await x.callTool(f.functionCalls);C.push(...k)}S++,y={role:"user",parts:C},d.contents=fs(this.apiClient,d.contents),d.contents.push(T),d.contents.push(y),tx(d.config)&&(A.push(T),A.push(y))}return tx(d.config)&&(f.automaticFunctionCallingHistory=A),f},this.generateContentStream=async t=>{if(ex(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var i;let a;const l=[];if(n!=null&&n.generatedImages)for(const d of n.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((i=d==null?void 0:d.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a}:u={generatedImages:l},u}),this.list=async t=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new py(ju.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(i)}}async processParamsForMcpUsage(e){var t,n,i;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>mm(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&VM(e.config.tools)){const d=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),zM(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var t,n,i;const a=new Map;for(const l of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(mm(l)){const u=l,d=await u.tool();for(const f of(i=d.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(a.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);a.set(f.name,u)}}return a}async processAfcStream(e){var t,n,i;const a=(i=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:jE;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return function(f,y,A){var _,S;return Dh(this,arguments,function*(){for(var T,C,x,D;u<a;){l&&(u++,l=!1);const F=yield Rt(f.processParamsForMcpUsage(A)),W=yield Rt(f.generateContentStreamInternal(F)),K=[],Q=[];try{for(var k=!0,L=(C=void 0,gm(W)),U;U=yield Rt(L.next()),T=U.done,!T;k=!0){D=U.value,k=!1;const J=D;if(yield yield Rt(J),J.candidates&&(!((_=J.candidates[0])===null||_===void 0)&&_.content)){Q.push(J.candidates[0].content);for(const se of(S=J.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(u<a&&se.functionCall){if(!se.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(se.functionCall.name)){const ce=yield Rt(y.get(se.functionCall.name).callTool([se.functionCall]));K.push(...ce)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${se.functionCall.name}`)}}}}catch(J){C={error:J}}finally{try{!k&&!T&&(x=L.return)&&(yield Rt(x.call(L)))}finally{if(C)throw C.error}}if(K.length>0){l=!0;const J=new oh;J.candidates=[{content:{role:"user",parts:K}}],yield yield Rt(J);const se=[];se.push(...Q),se.push({role:"user",parts:K});const ce=fs(f.apiClient,A.contents).concat(se);A.contents=ce}else break}})}(this,d,e)}async generateContentInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=XE(this.apiClient,e);return u=Ie("{model}:generateContent",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const A=ZE(this.apiClient,y),_=new oh;return Object.assign(_,A),_})}else{const f=WE(this.apiClient,e);return u=Ie("{model}:generateContent",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const A=KE(this.apiClient,y),_=new oh;return Object.assign(_,A),_})}}async generateContentStreamInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=XE(this.apiClient,e);u=Ie("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return l=y.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(A){return Dh(this,arguments,function*(){var _,S,T,C;try{for(var x=!0,D=gm(A),k;k=yield Rt(D.next()),_=k.done,!_;x=!0){C=k.value,x=!1;const U=ZE(y,yield Rt(C.json())),F=new oh;Object.assign(F,U),yield yield Rt(F)}}catch(L){S={error:L}}finally{try{!x&&!_&&(T=D.return)&&(yield Rt(T.call(D)))}finally{if(S)throw S.error}}})})}else{const f=WE(this.apiClient,e);u=Ie("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return l=y.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(A){return Dh(this,arguments,function*(){var _,S,T,C;try{for(var x=!0,D=gm(A),k;k=yield Rt(D.next()),_=k.done,!_;x=!0){C=k.value,x=!1;const U=KE(y,yield Rt(C.json())),F=new oh;Object.assign(F,U),yield yield Rt(F)}}catch(L){S={error:L}}finally{try{!x&&!_&&(T=D.return)&&(yield Rt(T.call(D)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=BU(this.apiClient,e);return u=Ie("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const A=z3(this.apiClient,y),_=new xE;return Object.assign(_,A),_})}else{const f=eU(this.apiClient,e);return u=Ie("{model}:batchEmbedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const A=b3(this.apiClient,y),_=new xE;return Object.assign(_,A),_})}}async generateImagesInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=zU(this.apiClient,e);return u=Ie("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const A=q3(this.apiClient,y),_=new ME;return Object.assign(_,A),_})}else{const f=nU(this.apiClient,e);return u=Ie("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const A=T3(this.apiClient,y),_=new ME;return Object.assign(_,A),_})}}async editImageInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=KU(this.apiClient,e);return a=Ie("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const f=$3(this.apiClient,d),y=new oP;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=QU(this.apiClient,e);return a=Ie("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const f=Y3(this.apiClient,d),y=new lP;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=JU(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Tb(this.apiClient,y))}else{const f=iU(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Sb(this.apiClient,y))}}async listInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=e3(this.apiClient,e);return u=Ie("{models_url}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const A=Z3(this.apiClient,y),_=new RE;return Object.assign(_,A),_})}else{const f=aU(this.apiClient,e);return u=Ie("{models_url}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const A=w3(this.apiClient,y),_=new RE;return Object.assign(_,A),_})}}async update(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=n3(this.apiClient,e);return u=Ie("{model}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Tb(this.apiClient,y))}else{const f=oU(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Sb(this.apiClient,y))}}async delete(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=i3(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(()=>{const y=Q3(),A=new IE;return Object.assign(A,y),A})}else{const f=lU(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(()=>{const y=E3(),A=new IE;return Object.assign(A,y),A})}}async countTokens(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=a3(this.apiClient,e);return u=Ie("{model}:countTokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const A=J3(this.apiClient,y),_=new DE;return Object.assign(_,A),_})}else{const f=uU(this.apiClient,e);return u=Ie("{model}:countTokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const A=x3(this.apiClient,y),_=new DE;return Object.assign(_,A),_})}}async computeTokens(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=r3(this.apiClient,e);return a=Ie("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const f=j3(this.apiClient,d),y=new cP;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=l3(this.apiClient,e);return u=Ie("{model}:predictLongRunning",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>iH(this.apiClient,y))}else{const f=fU(this.apiClient,e);return u=Ie("{model}:predictLongRunning",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>D3(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MH(o,e){const t={},n=g(e,["operationName"]);n!=null&&m(t,["_url","operationName"],n);const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function RH(o,e){const t={},n=g(e,["operationName"]);n!=null&&m(t,["_url","operationName"],n);const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function IH(o,e){const t={},n=g(e,["operationName"]);n!=null&&m(t,["operationName"],n);const i=g(e,["resourceName"]);i!=null&&m(t,["_url","resourceName"],i);const a=g(e,["config"]);return a!=null&&m(t,["config"],a),t}function DH(o,e){const t={},n=g(e,["video","uri"]);n!=null&&m(t,["uri"],n);const i=g(e,["video","encodedVideo"]);i!=null&&m(t,["videoBytes"],so(o,i));const a=g(e,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function kH(o,e){const t={},n=g(e,["_self"]);return n!=null&&m(t,["video"],DH(o,n)),t}function NH(o,e){const t={},n=g(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>kH(o,u))),m(t,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function LH(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["metadata"]);i!=null&&m(t,["metadata"],i);const a=g(e,["done"]);a!=null&&m(t,["done"],a);const l=g(e,["error"]);l!=null&&m(t,["error"],l);const u=g(e,["response","generateVideoResponse"]);return u!=null&&m(t,["response"],NH(o,u)),t}function PH(o,e){const t={},n=g(e,["gcsUri"]);n!=null&&m(t,["uri"],n);const i=g(e,["bytesBase64Encoded"]);i!=null&&m(t,["videoBytes"],so(o,i));const a=g(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function OH(o,e){const t={},n=g(e,["_self"]);return n!=null&&m(t,["video"],PH(o,n)),t}function FH(o,e){const t={},n=g(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>OH(o,u))),m(t,["generatedVideos"],l)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const a=g(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function nx(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["metadata"]);i!=null&&m(t,["metadata"],i);const a=g(e,["done"]);a!=null&&m(t,["done"],a);const l=g(e,["error"]);l!=null&&m(t,["error"],l);const u=g(e,["response"]);return u!=null&&m(t,["response"],FH(o,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UH extends pp{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;return n&&"httpOptions"in n&&(a=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=RH(this.apiClient,e);return u=Ie("{operationName}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>nx(this.apiClient,y))}else{const f=MH(this.apiClient,e);return u=Ie("{operationName}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>LH(this.apiClient,y))}}async fetchPredictVideosOperationInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=IH(this.apiClient,e);return a=Ie("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>nx(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HH(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],n);const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function BH(o,e,t){const n={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const a=g(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const l=g(e,["filter"]);return t!==void 0&&l!=null&&m(t,["_query","filter"],l),n}function VH(o,e){const t={},n=g(e,["config"]);return n!=null&&m(t,["config"],BH(o,n,t)),t}function zH(o,e){const t={},n=g(e,["textInput"]);n!=null&&m(t,["textInput"],n);const i=g(e,["output"]);return i!=null&&m(t,["output"],i),t}function GH(o,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>zH(o,a))),m(t,["examples","examples"],i)}return t}function qH(o,e,t){const n={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&m(t,["displayName"],i),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(e,["epochCount"]);t!==void 0&&a!=null&&m(t,["tuningTask","hyperparameters","epochCount"],a);const l=g(e,["learningRateMultiplier"]);if(l!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),g(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=g(e,["batchSize"]);t!==void 0&&u!=null&&m(t,["tuningTask","hyperparameters","batchSize"],u);const d=g(e,["learningRate"]);return t!==void 0&&d!=null&&m(t,["tuningTask","hyperparameters","learningRate"],d),n}function $H(o,e){const t={},n=g(e,["baseModel"]);n!=null&&m(t,["baseModel"],n);const i=g(e,["trainingDataset"]);i!=null&&m(t,["tuningTask","trainingData"],GH(o,i));const a=g(e,["config"]);return a!=null&&m(t,["config"],qH(o,a,t)),t}function YH(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["_url","name"],n);const i=g(e,["config"]);return i!=null&&m(t,["config"],i),t}function WH(o,e,t){const n={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const a=g(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const l=g(e,["filter"]);return t!==void 0&&l!=null&&m(t,["_query","filter"],l),n}function XH(o,e){const t={},n=g(e,["config"]);return n!=null&&m(t,["config"],WH(o,n,t)),t}function KH(o,e,t){const n={},i=g(e,["gcsUri"]);if(t!==void 0&&i!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],i),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function ZH(o,e){const t={},n=g(e,["gcsUri"]);return n!=null&&m(t,["validationDatasetUri"],n),t}function QH(o,e,t){const n={},i=g(e,["validationDataset"]);t!==void 0&&i!=null&&m(t,["supervisedTuningSpec"],ZH(o,i));const a=g(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&m(t,["tunedModelDisplayName"],a);const l=g(e,["description"]);t!==void 0&&l!=null&&m(t,["description"],l);const u=g(e,["epochCount"]);t!==void 0&&u!=null&&m(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=g(e,["learningRateMultiplier"]);t!==void 0&&d!=null&&m(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const f=g(e,["exportLastCheckpointOnly"]);t!==void 0&&f!=null&&m(t,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const y=g(e,["adapterSize"]);if(t!==void 0&&y!=null&&m(t,["supervisedTuningSpec","hyperParameters","adapterSize"],y),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function JH(o,e){const t={},n=g(e,["baseModel"]);n!=null&&m(t,["baseModel"],n);const i=g(e,["trainingDataset"]);i!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],KH(o,i,t));const a=g(e,["config"]);return a!=null&&m(t,["config"],QH(o,a,t)),t}function jH(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["model"],n);const i=g(e,["name"]);return i!=null&&m(t,["endpoint"],i),t}function GM(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["state"]);i!=null&&m(t,["state"],EM(o,i));const a=g(e,["createTime"]);a!=null&&m(t,["createTime"],a);const l=g(e,["tuningTask","startTime"]);l!=null&&m(t,["startTime"],l);const u=g(e,["tuningTask","completeTime"]);u!=null&&m(t,["endTime"],u);const d=g(e,["updateTime"]);d!=null&&m(t,["updateTime"],d);const f=g(e,["description"]);f!=null&&m(t,["description"],f);const y=g(e,["baseModel"]);y!=null&&m(t,["baseModel"],y);const A=g(e,["_self"]);A!=null&&m(t,["tunedModel"],jH(o,A));const _=g(e,["distillationSpec"]);_!=null&&m(t,["distillationSpec"],_);const S=g(e,["experiment"]);S!=null&&m(t,["experiment"],S);const T=g(e,["labels"]);T!=null&&m(t,["labels"],T);const C=g(e,["pipelineJob"]);C!=null&&m(t,["pipelineJob"],C);const x=g(e,["serviceAccount"]);x!=null&&m(t,["serviceAccount"],x);const D=g(e,["tunedModelDisplayName"]);return D!=null&&m(t,["tunedModelDisplayName"],D),t}function eB(o,e){const t={},n=g(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const i=g(e,["tunedModels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>GM(o,l))),m(t,["tuningJobs"],a)}return t}function tB(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["metadata"]);i!=null&&m(t,["metadata"],i);const a=g(e,["done"]);a!=null&&m(t,["done"],a);const l=g(e,["error"]);return l!=null&&m(t,["error"],l),t}function nB(o,e){const t={},n=g(e,["checkpointId"]);n!=null&&m(t,["checkpointId"],n);const i=g(e,["epoch"]);i!=null&&m(t,["epoch"],i);const a=g(e,["step"]);a!=null&&m(t,["step"],a);const l=g(e,["endpoint"]);return l!=null&&m(t,["endpoint"],l),t}function iB(o,e){const t={},n=g(e,["model"]);n!=null&&m(t,["model"],n);const i=g(e,["endpoint"]);i!=null&&m(t,["endpoint"],i);const a=g(e,["checkpoints"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>nB(o,u))),m(t,["checkpoints"],l)}return t}function Eb(o,e){const t={},n=g(e,["name"]);n!=null&&m(t,["name"],n);const i=g(e,["state"]);i!=null&&m(t,["state"],EM(o,i));const a=g(e,["createTime"]);a!=null&&m(t,["createTime"],a);const l=g(e,["startTime"]);l!=null&&m(t,["startTime"],l);const u=g(e,["endTime"]);u!=null&&m(t,["endTime"],u);const d=g(e,["updateTime"]);d!=null&&m(t,["updateTime"],d);const f=g(e,["error"]);f!=null&&m(t,["error"],f);const y=g(e,["description"]);y!=null&&m(t,["description"],y);const A=g(e,["baseModel"]);A!=null&&m(t,["baseModel"],A);const _=g(e,["tunedModel"]);_!=null&&m(t,["tunedModel"],iB(o,_));const S=g(e,["supervisedTuningSpec"]);S!=null&&m(t,["supervisedTuningSpec"],S);const T=g(e,["tuningDataStats"]);T!=null&&m(t,["tuningDataStats"],T);const C=g(e,["encryptionSpec"]);C!=null&&m(t,["encryptionSpec"],C);const x=g(e,["partnerModelTuningSpec"]);x!=null&&m(t,["partnerModelTuningSpec"],x);const D=g(e,["distillationSpec"]);D!=null&&m(t,["distillationSpec"],D);const k=g(e,["experiment"]);k!=null&&m(t,["experiment"],k);const L=g(e,["labels"]);L!=null&&m(t,["labels"],L);const U=g(e,["pipelineJob"]);U!=null&&m(t,["pipelineJob"],U);const F=g(e,["serviceAccount"]);F!=null&&m(t,["serviceAccount"],F);const W=g(e,["tunedModelDisplayName"]);return W!=null&&m(t,["tunedModelDisplayName"],W),t}function sB(o,e){const t={},n=g(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const i=g(e,["tuningJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Eb(o,l))),m(t,["tuningJobs"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aB extends pp{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new py(ju.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let i="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?i=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(i=n.name.split("/operations/")[0]),{name:i,state:yb.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=YH(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>Eb(this.apiClient,y))}else{const f=HH(this.apiClient,e);return u=Ie("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>GM(this.apiClient,y))}}async listInternal(e){var t,n,i,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=XH(this.apiClient,e);return u=Ie("tuningJobs",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),l.then(y=>{const A=sB(this.apiClient,y),_=new kE;return Object.assign(_,A),_})}else{const f=VH(this.apiClient,e);return u=Ie("tunedModels",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const A=eB(this.apiClient,y),_=new kE;return Object.assign(_,A),_})}}async tuneInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI()){const u=JH(this.apiClient,e);return a=Ie("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>Eb(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$H(this.apiClient,e);return a=Ie("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>tB(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rB{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const oB=1024*1024*8,lB=3,cB=1e3,uB=2,$0="x-goog-upload-status";async function dB(o,e,t){var n,i,a;let l=0,u=0,d=new vb(new Response),f="upload";for(l=o.size;u<l;){const A=Math.min(oB,l-u),_=o.slice(u,u+A);u+A>=l&&(f+=", finalize");let S=0,T=cB;for(;S<lB&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(A)}}}),!(!((n=d==null?void 0:d.headers)===null||n===void 0)&&n[$0]));)S++,await fB(T),T=T*uB;if(u+=A,((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i[$0])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(d==null?void 0:d.json());if(((a=d==null?void 0:d.headers)===null||a===void 0?void 0:a[$0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function hB(o){return{size:o.size,type:o.type}}function fB(o){return new Promise(e=>setTimeout(e,o))}class pB{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dB(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gB{create(e,t,n){return new mB(e,t,n)}}class mB{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ix="x-goog-api-key";class yB{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(ix)===null&&e.append(ix,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vB="gl-node/";class AB{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=rP(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const i=new yB(this.apiKey);this.apiClient=new dH({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:vB+"web",uploader:new pB,downloader:new rB}),this.models=new xH(this.apiClient),this.live=new SH(this.apiClient,i,new gB),this.chats=new x2(this.models,this.apiClient),this.caches=new C2(this.apiClient),this.files=new B2(this.apiClient),this.operations=new UH(this.apiClient),this.tunings=new aB(this.apiClient)}}const bB=new AB({apiKey:"AIzaSyDAgP94qs2vHlcPRgE1UbHOYZNi9Vf_qvE"}),_B=`You are the Boolean Legal AI Assistant, a specialized legal advisor focusing on Indian law. Engage in a helpful and professional chatbot conversation.
Your primary jurisdiction is Indian law. If information about other jurisdictions is requested, clearly state the jurisdiction and always add a disclaimer to consult with a qualified local counsel.
When citing sources or legal provisions, use provided web context (if any) or publicly verifiable information (e.g., "Section X of Indian Contract Act, 1872"). Do not invent citations.
If a query is too complex, ambiguous, or requires definitive legal advice beyond your capabilities as an AI, clearly state that it requires review by a qualified human lawyer at Boolean Legal. Do not provide definitive legal advice.
Maintain a professional, precise, and chatbot-friendly tone.
When documents are uploaded or discussed, refer to them by their file names if mentioned in the chat.
Pay close attention to the current ServiceArea and LegalTask selected by the user for their query, as well as the history of the conversation.
`,SB=(o,e=[])=>{const{serviceArea:t,task:n,userQuery:i,fileName:a,documentTextContent:l,documentImagePages:u,documentMimeType:d,webContext:f}=o,y=e.map(C=>{let x,D="";if(C.role==="user"){x="user";const k=C;return D=`Context: Service Area was "${k.serviceArea}", Legal Task was "${k.legalTask}".
Query: ${k.queryText}`,k.filesInfo&&k.filesInfo.length>0&&(D+=`
(User had attached files: ${k.filesInfo.map(L=>L.name).join(", ")})`),{role:x,parts:[{text:D}]}}else if(C.role==="ai"){x="model";const k=C;if(D=k.text,k.sources&&k.sources.length>0){const L=k.sources.map((U,F)=>`${F+1}. ${U.web.title||U.web.uri} (${U.web.uri})`).join(`
`);D+=`

Web Search Sources Provided in Previous Turn:
${L}`}return{role:x,parts:[{text:D}]}}else return C.role==="system"||console.warn(`buildChatContents: Unexpected message role encountered: ${C.role}`),null}).filter(C=>C!==null),A=[];let _=`Considering the ongoing conversation, and for the current context of Service Area: "${t}" and Legal Task: "${n}". My query is: "${i}"`;if(a&&(l||u&&u.length>0)){let C="mixed content";if(l&&d&&(d.includes("wordprocessingml")||d.includes("msword"))?C="base64 document":d!=null&&d.startsWith("image/")&&u&&u.length>0?C="uploaded image file":l&&(!u||u.length===0)?C="text content":!l&&u&&u.length>0?C="image pages":l&&u&&u.length>0&&(C="mixed content"),console.log(`geminiService: Determined analysisTarget for current query: ${C} for file ${a} (MIME: ${d})`),_+=`

Please analyze the attached file(s) named "${a}" (provided as ${C}) in relation to my query. Focus on:
1. Overview of the document/image.
2. Relevance to my query, the current service area, and task.
3. Key findings or insights.
${t===Gi.CASE_LAW_ANALYSIS?"4. For judgments: Factual Matrix, Issues, Reasoning, Ratio Decidendi, Final Order.":""}
---
`,A.push({text:_}),l)if(l.startsWith("data:")&&d){console.log(`geminiService: Adding base64 inlineData part for ${a}, MIME: ${d}`);const x=l.substring(l.indexOf(",")+1);A.push({inlineData:{mimeType:d,data:x}})}else console.log(`geminiService: Adding text part for ${a}`),A.push({text:`
--- Start of Uploaded Document Text (${a}) ---
${l}
--- End of Uploaded Document Text (${a}) ---`});u&&u.length>0&&(console.log(`geminiService: Adding ${u.length} image page(s) for ${a}. Assumed MIME for these parts: ${d!=null&&d.startsWith("image/")?d:"image/png"}`),A.push({text:`
--- Start of Uploaded Document Images/Pages (${a}) ---`}),u.forEach((x,D)=>{const k=x.substring(x.indexOf(",")+1),L=d!=null&&d.startsWith("image/")?d:"image/png";A.push({text:`${C==="uploaded image file"?"Uploaded Image:":`Image Page ${D+1}:`}`}),A.push({inlineData:{mimeType:L,data:k}})}),A.push({text:`
--- End of Uploaded Document Images/Pages (${a}) ---`}))}else f&&(_+=`

Relevant Context from Web Search (use critically):
${f}`),A.push({text:_});const S=[...y,{role:"user",parts:A}],T=S.map(C=>({role:C.role,parts:C.parts.map(x=>x.text&&x.text.length>100?{text:x.text.substring(0,100)+"[truncated]"}:x.inlineData&&typeof x.inlineData.data=="string"&&x.inlineData.data.length>100?{inlineData:{mimeType:x.inlineData.mimeType,data:"[truncated]"}}:x)}));return console.log("geminiService: Constructed contents for API:",JSON.stringify(T,null,2)),S},TB=async o=>{var f,y,A,_,S,T;const{serviceArea:e,task:t,fileName:n,chatHistory:i=[],enableGoogleSearch:a}=o,l=SB(o,i);let u={};if(a)console.log("geminiService: Web search enabled. Config will only include 'tools'. System instruction and other model params omitted for search grounding."),u.tools=[{googleSearch:{}}];else{const C=`${_B}
Current Service Area (for this specific query): ${e}.
Current LegalTask (for this specific query): ${t}.`;u.systemInstruction=C,u.temperature=.45,u.topP=.9,u.topK=40}const d={model:MN,contents:l,config:u};try{let C={...d};if(Array.isArray(C.contents)){const L=C.contents.map(U=>({...U,parts:U.parts.map(F=>{var W;return"inlineData"in F&&((W=F.inlineData)!=null&&W.data)&&typeof F.inlineData.data=="string"&&F.inlineData.data.length>200?{...F,inlineData:{...F.inlineData,data:F.inlineData.data.substring(0,100)+"...[truncated]"}}:"text"in F&&F.text&&F.text.length>500?{...F,text:F.text.substring(0,400)+"...[truncated]"}:F})}));C={...d,contents:L}}console.log("Sending to Gemini with params (multi-turn history included):",JSON.stringify(C,null,2));const x=await bB.models.generateContent(d);if(console.log("Raw Gemini response object:",JSON.stringify(x,null,2)),!x)throw console.error("Gemini API call returned undefined/null response object."),new Error("Gemini API returned an invalid response object.");if((f=x.promptFeedback)!=null&&f.blockReason){const L=`AI response was blocked. Reason: ${x.promptFeedback.blockReason}. Please revise your query or uploaded content.`;return console.warn(L,x.promptFeedback),{text:L,sources:[],rawResponse:x,fileName:n}}if(x.candidates&&x.candidates.length>0){const L=x.candidates[0];if(L.finishReason&&L.finishReason!=="STOP"&&L.finishReason!=="MAX_TOKENS"){console.warn(`Gemini response candidate finished with reason: ${L.finishReason}`,L);const U=L.safetyRatings&&L.safetyRatings.length>0?`Safety details: ${L.safetyRatings.map(F=>`${F.category} - ${F.probability}`).join(", ")}`:"No specific safety details provided.";return{text:`AI response generation was interrupted or flagged. Reason: ${L.finishReason}. ${L.finishReason==="SAFETY"?U:"Please review your input."}`,sources:[],rawResponse:x,fileName:n}}}else if(!((y=x.promptFeedback)!=null&&y.blockReason))if(console.warn("Gemini returned no candidates and was not blocked by promptFeedback. This might indicate an issue. Full response:",x),typeof x.text=="string"&&x.text.trim()!=="")console.log("Gemini response has text despite no candidates. Using text property.");else return{text:"AI returned no actionable response or candidates. Please try rephrasing or check the uploaded content and API logs.",sources:[],rawResponse:x,fileName:n};const D=x.text,k=(S=(_=(A=x.candidates)==null?void 0:A[0])==null?void 0:_.groundingMetadata)==null?void 0:S.groundingChunks;return console.log("Gemini response received. Text extracted successfully. Text length:",D==null?void 0:D.length),k&&console.log("Grounding sources:",k.length),typeof D!="string"||D.trim()===""?(!((T=x.promptFeedback)!=null&&T.blockReason)&&!(x.candidates&&x.candidates.some(L=>L.finishReason!=="STOP"&&L.finishReason!=="MAX_TOKENS"))&&console.warn("Gemini response text is empty or not a string, despite no explicit block/error reason. Full response:",x),{text:D||"AI returned a response, but the content is empty.",sources:k,rawResponse:x,fileName:n}):{text:D,sources:k,rawResponse:x,fileName:n}}catch(C){console.error("Gemini API call failed:",C);let x="Unknown error calling Gemini API.";if(C instanceof Error){if(x=`Gemini API error: ${C.message}`,(C.message.includes("API_KEY_INVALID")||C.message.includes("permission")||C.message.includes("API key not valid"))&&(x=`API Key error: ${C.message}. Ensure API key is correct and has permissions.`),"cause"in C&&typeof C.cause=="object"&&C.cause!==null){console.error("Gemini API Error Cause:",C.cause);const D=JSON.stringify(C.cause);x+=` Details: ${D}`}else if("response"in C&&typeof C.response=="object"&&C.response!==null){console.error("Gemini API Error Response (from caught error object):",C.response);const D=JSON.stringify(C.response);x+=` Response Details: ${D}`}}else typeof C=="object"&&C!==null&&(console.error("Gemini API call failed with non-Error object:",C),x=`Gemini API error: ${JSON.stringify(C)}`);throw new Error(x)}},Kb="booleanLegalAIChatSessions",Zb=()=>{try{const o=localStorage.getItem(Kb);if(o)return JSON.parse(o).sort((t,n)=>n.updatedAt-t.updatedAt)}catch(o){console.error("Error loading chat sessions from localStorage:",o)}return[]},Y0=o=>{try{const e=Zb(),t=e.findIndex(n=>n.id===o.id);t>-1?e[t]=o:e.push(o),localStorage.setItem(Kb,JSON.stringify(e))}catch(e){console.error("Error saving chat session to localStorage:",e),e instanceof DOMException&&e.name==="QuotaExceededError"&&alert("Could not save chat session: Local storage quota exceeded. You may need to clear some old chats or other site data.")}},CB=o=>{try{let e=Zb();e=e.filter(t=>t.id!==o),localStorage.setItem(Kb,JSON.stringify(e))}catch(e){console.error("Error deleting chat session from localStorage:",e)}},lh=()=>crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,15),wB=()=>{const[o,e]=Ve.useState(!1),[t,n]=Ve.useState(null),[i,a]=Ve.useState([]),[l,u]=Ve.useState(null),[d,f]=Ve.useState(!1),[y,A]=Ve.useState(Gi.VENTURE_CAPITAL),[_,S]=Ve.useState(Mm.GENERAL_QUERY);Ve.useEffect(()=>{const Q=Zb();a(Q)},[]);const T=i.find(Q=>Q.id===l),C=()=>f(!d),x=Ve.useCallback((Q,J,se=!1,ce)=>{a(B=>{let ie;if(se&&ce){const ne={...ce,messages:[J],updatedAt:Date.now()};B.length===0&&f(!0),ie=[ne,...B],Y0(ne)}else{const ne=B.findIndex(ue=>ue.id===Q);if(ne>-1){const ue=B[ne],O={...ue,messages:[...ue.messages,J],updatedAt:Date.now(),initialServiceArea:ue.messages.length===0&&J.role==="user"?J.serviceArea:ue.initialServiceArea,initialLegalTask:ue.messages.length===0&&J.role==="user"?J.legalTask:ue.initialLegalTask};Y0(O),ie=[...B],ie[ne]=O}else return console.warn(`addMessageToSessionState: Session with ID ${Q} not found.`),B}return ie.sort((ne,ue)=>ue.updatedAt-ne.updatedAt)})},[f]),D=(Q,J)=>{let se="";if(Q&&Q!==y&&(A(Q),se+=`Service Area updated to "${Q}". `),J&&J!==_&&(S(J),se+=`Legal Task updated to "${J}".`),se&&l){const ce={id:lh(),role:"system",timestamp:Date.now(),text:se.trim()};x(l,ce)}},k=Ve.useCallback(async(Q,J,se)=>{var ue,O;e(!0),n(null);const ce=J.map(z=>({name:z.name,type:z.type,size:z.originalFile.size})),B={id:lh(),role:"user",timestamp:Date.now(),serviceArea:y,legalTask:_,queryText:Q,filesInfo:ce};let ie,ne=[];if(l)ie=l,ne=((ue=i.find(z=>z.id===l))==null?void 0:ue.messages)||[],x(ie,B);else{ie=lh();const z={id:ie,title:Q.substring(0,40)+(Q.length>40?"...":""),createdAt:Date.now(),updatedAt:Date.now(),initialServiceArea:y,initialLegalTask:_};u(ie),x(ie,B,!0,z)}try{const z=J.length>0?J[0]:null,le={serviceArea:B.serviceArea,task:B.legalTask,userQuery:Q,fileName:ce.map(Z=>Z.name).join(", ")||(z?z.name:void 0),documentTextContent:z==null?void 0:z.textContent,documentImagePages:z==null?void 0:z.imagePageDataUrls,documentMimeType:z==null?void 0:z.type,chatHistory:ne,enableGoogleSearch:se};console.log("App.tsx: handleSubmitQuery, payload for getAIResponse:",{serviceArea:le.serviceArea,task:le.task,userQuery:le.userQuery,fileName:le.fileName,documentMimeType:le.documentMimeType,hasTextContent:!!le.documentTextContent,numImagePages:((O=le.documentImagePages)==null?void 0:O.length)||0,chatHistoryLength:(ne==null?void 0:ne.length)||0,enableGoogleSearch:le.enableGoogleSearch});const P={...await TB(le),id:lh(),role:"ai",timestamp:Date.now(),fileName:ce.length>0?ce.map(Z=>Z.name).join(", "):void 0};x(ie,P)}catch(z){console.error("Error getting AI response:",z);const le=z instanceof Error?`Failed to get AI response: ${z.message}`:"An unknown error occurred.";n(le);const we={id:lh(),role:"ai",timestamp:Date.now(),text:`Error: ${le}`};x(ie,we)}finally{e(!1)}},[l,y,_,x,u,e,n,i]),L=()=>{u(null),d||f(!0)},U=Q=>{const J=i.find(se=>se.id===Q);J&&(u(Q),A(J.initialServiceArea||Gi.VENTURE_CAPITAL),S(J.initialLegalTask||Mm.GENERAL_QUERY),d||f(!0))},F=Q=>{CB(Q),a(J=>J.filter(se=>se.id!==Q)),l===Q&&u(null)},W=(Q,J)=>{a(se=>{const ce=se.findIndex(B=>B.id===Q);if(ce>-1){const B={...se[ce],title:J,updatedAt:Date.now()};Y0(B);const ie=[...se];return ie[ce]=B,ie.sort((ne,ue)=>ue.updatedAt-ne.updatedAt)}return se})},K=q.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-4 sm:p-6 md:p-8 animate-fade-in-slide-up",children:q.jsxs("div",{className:"bg-slate-800 shadow-2xl rounded-xl p-6 sm:p-8 md:p-10 border border-slate-700",children:[q.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-4 sm:mb-6",children:[q.jsx("span",{className:"text-gray-100",children:"Boolean Legal "}),q.jsx("span",{className:"text-red-500",children:"AI Assistant"})]}),q.jsx("p",{className:"mb-3 sm:mb-4 text-lg sm:text-xl text-slate-300",children:"Welcome, Lalu!"}),q.jsx("p",{className:"text-sm sm:text-base text-slate-400 max-w-sm sm:max-w-md mx-auto",children:"I'm here to assist with your legal queries. Type your question below, upload documents using the '+' icon, or select a previous chat from the panel."})]})});return q.jsxs("div",{className:"flex h-screen bg-slate-900 text-gray-100 overflow-hidden",children:[q.jsx(AL,{sessions:i,activeSessionId:l,onLoadChat:U,onNewChat:L,onDeleteChat:F,onRenameChat:W,isOpen:d,onCloseRequest:C}),!d&&q.jsx("button",{onClick:C,className:"fixed top-1/2 left-0 z-30 flex items-center justify-center w-8 h-10 sm:w-10 sm:h-12 bg-red-600 text-white rounded-r-md shadow-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-slate-900 transform -translate-y-1/2 transition-all hover:scale-105 active:scale-95","aria-label":"Open chat history",title:"Open chat history",children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-4 h-4 sm:w-5 sm:h-5",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}),q.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${d?"hidden sm:flex":"flex"}`,children:[q.jsx(xN,{}),q.jsxs("main",{className:"flex-grow flex flex-col",style:{minHeight:0},children:[t&&!o&&q.jsx("div",{className:"p-2 sm:p-4 flex-shrink-0 animate-fade-in",children:q.jsx(vL,{message:t})}),q.jsxs("div",{className:"flex-grow p-2 sm:p-3 md:p-4 lg:p-6 overflow-y-auto custom-scrollbar",style:{minHeight:0},children:[T?q.jsxs(q.Fragment,{children:[q.jsx(mL,{messages:T.messages}),o&&T.messages.length>0&&q.jsxs("div",{className:"flex justify-start pl-2 sm:pl-4 pb-2 sm:pb-4 items-center text-xs sm:text-sm text-slate-400",children:[q.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-t-2 border-b-2 border-red-500 mr-2"}),q.jsx("span",{className:"animate-subtle-pulse",children:"AI is thinking..."})]})]}):K,o&&(!T||T.messages.length===0)&&q.jsx("div",{className:"flex justify-center py-4 sm:py-8 animate-fade-in",children:q.jsx(yL,{})})]})]}),q.jsx(CL,{onSubmit:k,isLoading:o,serviceArea:y,legalTask:_,onServiceAreaChange:Q=>D(Q,void 0),onLegalTaskChange:Q=>D(void 0,Q)}),q.jsx(IN,{})]})]})},qM=document.getElementById("root");if(!qM)throw new Error("Could not find root element to mount to");const EB=EN.createRoot(qM);EB.render(q.jsx(vN.StrictMode,{children:q.jsx(wB,{})}));
